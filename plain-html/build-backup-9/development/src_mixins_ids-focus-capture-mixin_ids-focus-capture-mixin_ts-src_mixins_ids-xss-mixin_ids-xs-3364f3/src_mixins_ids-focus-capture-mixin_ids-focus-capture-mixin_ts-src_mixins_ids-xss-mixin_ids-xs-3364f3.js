"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkids_enterprise_wc"] = self["webpackChunkids_enterprise_wc"] || []).push([["src_mixins_ids-focus-capture-mixin_ids-focus-capture-mixin_ts-src_mixins_ids-xss-mixin_ids-xs-3364f3"],{

/***/ "./src/mixins/ids-focus-capture-mixin/ids-focus-capture-mixin.ts":
/*!***********************************************************************!*\
  !*** ./src/mixins/ids-focus-capture-mixin/ids-focus-capture-mixin.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ids_focus_capture_mixin_default)\n/* harmony export */ });\n/* harmony import */ var _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/ids-attributes */ \"./src/core/ids-attributes.ts\");\n/* harmony import */ var _utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/ids-string-utils/ids-string-utils */ \"./src/utils/ids-string-utils/ids-string-utils.ts\");\n/* harmony import */ var _utils_ids_dom_utils_ids_dom_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/ids-dom-utils/ids-dom-utils */ \"./src/utils/ids-dom-utils/ids-dom-utils.ts\");\n\n\n\nconst FOCUS_CAPTURE_EVENTNAME = \"keydown.focus-capture\";\nconst IdsFocusCaptureMixin = (superclass) => class extends superclass {\n  constructor(...args) {\n    super(...args);\n  }\n  static get attributes() {\n    return [\n      ...superclass.attributes,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.CAPTURES_FOCUS,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.CYCLES_FOCUS,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.FOCUS_INLINE\n    ];\n  }\n  /**\n   * @property {Node} hostNode the top-level node responsible for hosting focus.\n   * This is normally `document` but can also be another component's Shadow Root.\n   */\n  #hostNode = document;\n  connectedCallback() {\n    super.connectedCallback?.();\n    if (this.hasAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.FOCUS_INLINE))\n      this.syncInline(true);\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback?.();\n    this.#removeFocusEvents();\n    this.#hostNode = void 0;\n    this.#focusableElementsInDocument = null;\n  }\n  /**\n   * @property {boolean} capturesFocus If true, retains focus within the host component.\n   * If focus is attempted on an element outside of this one, it will be \"captured\" and\n   * placed on an element inside of this component.\n   */\n  #capturesFocus = false;\n  set capturesFocus(val) {\n    const currentVal = this.#capturesFocus;\n    const newVal = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_1__.stringToBool)(val);\n    if (currentVal !== newVal) {\n      this.#capturesFocus = newVal;\n      if (newVal) {\n        this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.CAPTURES_FOCUS, `${newVal}`);\n      } else {\n        this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.CAPTURES_FOCUS);\n      }\n      this.#updateFocusEvents();\n    }\n  }\n  get capturesFocus() {\n    return this.#capturesFocus;\n  }\n  /**\n   * @property {boolean} cyclesFocus If true, while `capturesFocus` is true, cycles the focus\n   * target element to the opposite end of the container.\n   */\n  #cyclesFocus = true;\n  set cyclesFocus(val) {\n    const currentVal = this.#cyclesFocus;\n    const newVal = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_1__.stringToBool)(val);\n    if (currentVal !== newVal) {\n      this.#cyclesFocus = newVal;\n      if (newVal) {\n        this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.CYCLES_FOCUS, `${newVal}`);\n        this.gainFocus();\n      } else {\n        this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.CYCLES_FOCUS);\n      }\n    }\n  }\n  get cyclesFocus() {\n    return this.#cyclesFocus;\n  }\n  /**\n   * Connects the focus event to this component\n   * @returns {void}\n   */\n  #attachFocusEvents() {\n    const keydownEventHandler = (e) => {\n      const isOnFirst = this.#hostNode.activeElement?.isEqualNode(this.firstFocusableElement);\n      const isOnLast = this.#hostNode.activeElement?.isEqualNode(this.lastFocusableElement);\n      switch (e.key) {\n        case \"Tab\":\n          if (isOnFirst && e.shiftKey) {\n            e.preventDefault();\n            requestAnimationFrame(() => {\n              const targetElem = this.cyclesFocus ? this.lastFocusableElement : this.firstFocusableElement;\n              targetElem.focus();\n            });\n          }\n          if (isOnLast && !e.shiftKey) {\n            e.preventDefault();\n            requestAnimationFrame(() => {\n              const targetElem = this.cyclesFocus ? this.firstFocusableElement : this.lastFocusableElement;\n              targetElem.focus();\n            });\n          }\n          break;\n        default:\n          break;\n      }\n      return true;\n    };\n    this.onEvent(FOCUS_CAPTURE_EVENTNAME, this.#hostNode, keydownEventHandler.bind(this));\n  }\n  /**\n   * Disconnects the focus event from this component\n   * @returns {void}\n   */\n  #removeFocusEvents() {\n    this.offEvent(FOCUS_CAPTURE_EVENTNAME);\n  }\n  /**\n   * Adds/Removes the focus event based on component state\n   */\n  #updateFocusEvents() {\n    this.#removeFocusEvents();\n    if (this.capturesFocus) {\n      this.gainFocus();\n      this.#attachFocusEvents();\n    }\n  }\n  #focusableSelectors = [\n    \"button\",\n    \"ids-button\",\n    \"ids-dropdown\",\n    \"ids-menu-button\",\n    \"ids-modal-button\",\n    \"ids-toggle-button\",\n    \"[href]\",\n    \"input\",\n    \"ids-input\",\n    \"ids-checkbox\",\n    \"ids-radio\",\n    \"ids-switch\",\n    \"select\",\n    \"textarea\",\n    \"ids-textarea\",\n    '[tabindex]:not([tabindex=\"-1\"]'\n  ];\n  get focusableSelectors() {\n    return this.#focusableSelectors;\n  }\n  set focusableSelectors(val) {\n    if (Array.isArray(val)) {\n      this.#focusableSelectors = val;\n    }\n  }\n  /**\n   * @property {Array<HTMLElement>} focusable reference to all focusable elements on the document\n   */\n  #focusableElementsInDocument = [];\n  /**\n   * @readonly\n   * @returns {Array<HTMLElement>} all possible focusable elements within Light DOM on the current page\n   */\n  get focusableElementsInDocument() {\n    if (!this.#focusableElementsInDocument.length && this.focusableSelectors.length)\n      this.refreshFocusableElements();\n    return this.#focusableElementsInDocument;\n  }\n  refreshFocusableElements() {\n    const selectorStr = this.focusableSelectors.join(\", \");\n    this.#focusableElementsInDocument = [...this.#hostNode.querySelectorAll(selectorStr)].filter((i) => !i.hasAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.HIDDEN));\n  }\n  /**\n   * @readonly\n   * @returns {Array<HTMLElement>} focusable elements inside of this WebComponent's Light DOM\n   */\n  get focusableElements() {\n    if (this.focusInline)\n      return this.focusableElementsInDocument;\n    return this.focusableElementsInDocument.filter((i) => this.contains(i));\n  }\n  /**\n   * @readonly\n   * @returns {HTMLElement} the first focusable child element inside this component\n   */\n  get firstFocusableElement() {\n    return this.focusableElements[0];\n  }\n  /**\n   * @readonly\n   * @returns {HTMLElement} the next focusable child element inside this component\n   */\n  get nextFocusableElement() {\n    if (!this.focusableElements.length) {\n      return void 0;\n    }\n    const thisIndex = this.focusableElementsInDocument.indexOf(this.#hostNode.activeElement);\n    const nextElem = this.focusableElementsInDocument[thisIndex + 1];\n    if (!this.contains(nextElem) && this.cyclesFocus) {\n      return this.firstFocusableElement;\n    }\n    return nextElem;\n  }\n  /**\n   * @readonly\n   * @returns {HTMLElement} the previous focusable child element inside this component\n   */\n  get previousFocusableElement() {\n    if (!this.focusableElements.length) {\n      return void 0;\n    }\n    const thisIndex = this.focusableElementsInDocument.indexOf(this.#hostNode.activeElement);\n    const prevElem = this.focusableElementsInDocument[thisIndex - 1];\n    if (!this.contains(prevElem) && this.cyclesFocus) {\n      return this.lastFocusableElement;\n    }\n    return prevElem;\n  }\n  /**\n   * @readonly\n   * @returns {HTMLElement} the last focusable child element inside this component\n   */\n  get lastFocusableElement() {\n    return this.focusableElements.slice(-1)[0];\n  }\n  /**\n   * Focuses the first-possible element within the Modal\n   * @param {number|string} index the desired focusable element index to use\n   * @returns {void}\n   */\n  setFocus(index = 0) {\n    const focusable = this.focusableElements;\n    const focusedEl = this.#hostNode.activeElement;\n    const focusedIndex = this.focusableElements.indexOf(focusedEl);\n    let safeIndex = 0;\n    if (focusable.length) {\n      switch (index) {\n        case \"last\":\n          safeIndex = focusable.length - 1;\n          break;\n        case \"first\":\n        case \"\":\n          break;\n        default:\n          safeIndex = typeof index === \"string\" ? parseInt(index) : index;\n          break;\n      }\n      requestAnimationFrame(() => {\n        focusable[safeIndex].focus();\n      });\n    }\n    return focusedIndex === safeIndex;\n  }\n  /**\n   * Retrieves focus from elements outside of this one, and attaches\n   * focus to a specified element index.\n   * @param {number|string} index the desired focusable element index to use\n   * @returns {void}\n   */\n  gainFocus(index = 0) {\n    if (!this.contains(this.#hostNode.activeElement)) {\n      this.setFocus(index);\n    }\n  }\n  /**\n   * Sets the correct host node to use for focus detection\n   * @param {boolean | null} val if truthy, uses this component's shadow root for focus detection\n   */\n  syncInline(val) {\n    if (val)\n      this.#hostNode = this.shadowRoot;\n    else\n      this.#hostNode = (0,_utils_ids_dom_utils_ids_dom_utils__WEBPACK_IMPORTED_MODULE_2__.getClosestContainerNode)(this);\n  }\n  /**\n   * @param {boolean | string} val true if focus detection should only occur within this component's shadow root\n   */\n  set focusInline(val) {\n    const newValue = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_1__.stringToBool)(val);\n    if (newValue) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.FOCUS_INLINE, \"true\");\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.FOCUS_INLINE);\n    }\n    this.syncInline(newValue);\n  }\n  /**\n   * @returns {boolean} true if this component should only capture focus within its shadow root\n   */\n  get focusInline() {\n    return this.hasAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.FOCUS_INLINE);\n  }\n};\nvar ids_focus_capture_mixin_default = IdsFocusCaptureMixin;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWl4aW5zL2lkcy1mb2N1cy1jYXB0dXJlLW1peGluL2lkcy1mb2N1cy1jYXB0dXJlLW1peGluLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDMkI7QUFHRTtBQUNXO0FBSXhDLE1BQU0sMEJBQTBCO0FBVWhDLE1BQU0sdUJBQXVCLENBQXdCLGVBQWtCLGNBQWMsV0FBVztBQUFBLEVBQzlGLGVBQWUsTUFBYTtBQUMxQixVQUFNLEdBQUcsSUFBSTtBQUFBLEVBQ2Y7QUFBQSxFQUVBLFdBQVcsYUFBYTtBQUN0QixXQUFPO0FBQUEsTUFDTCxHQUFJLFdBQW1CO0FBQUEsTUFDdkIsMkVBQXlCO0FBQWQsTUFDWCx5RUFBdUI7QUFBWixNQUNYLHlFQUF1QjtBQUFaLElBQ2I7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLFlBQWlCO0FBQUEsRUFFakIsb0JBQW9CO0FBQ2xCLFVBQU0sb0JBQW9CO0FBQzFCLFFBQUksS0FBSyxhQUFhLHlFQUF1QjtBQUFHLFdBQUssV0FBVyxJQUFJO0FBQUEsRUFDdEU7QUFBQSxFQUVBLHVCQUE2QjtBQUMzQixVQUFNLHVCQUF1QjtBQUM3QixTQUFLLG1CQUFtQjtBQUN4QixTQUFLLFlBQVk7QUFDakIsU0FBSywrQkFBK0I7QUFBQSxFQUN0QztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9BLGlCQUFpQjtBQUFBLEVBRWpCLElBQUksY0FBYyxLQUFLO0FBQ3JCLFVBQU0sYUFBYSxLQUFLO0FBQ3hCLFVBQU0sU0FBUyxzRkFBWSxDQUFDLEdBQUc7QUFDL0IsUUFBSSxlQUFlLFFBQVE7QUFDekIsV0FBSyxpQkFBaUI7QUFDdEIsVUFBSSxRQUFRO0FBQ1YsYUFBSyxhQUFhLDJFQUF5QixFQUFFLEdBQUcsUUFBUTtBQUFBLE1BQzFELE9BQU87QUFDTCxhQUFLLGdCQUFnQiwyRUFBeUI7QUFBQSxNQUNoRDtBQUNBLFdBQUssbUJBQW1CO0FBQUEsSUFDMUI7QUFBQSxFQUNGO0FBQUEsRUFFQSxJ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QVE7QUFBQSxFQUMxQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsSUFBSSxjQUFjO0FBQ2hCLFdBQU8sS0FBSyxhQUFhLHlFQUF1QjtBQUFBLEVBQ2xEO0FBQ0Y7QUFFQSxJQUFPLGtDQUFRIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaWRzLWVudGVycHJpc2Utd2MvLi9zcmMvbWl4aW5zL2lkcy1mb2N1cy1jYXB0dXJlLW1peGluL2lkcy1mb2N1cy1jYXB0dXJlLW1peGluLnRzP2UwODciXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0IENvcmVcbmltcG9ydCB7IGF0dHJpYnV0ZXMgfSBmcm9tICcuLi8uLi9jb3JlL2lkcy1hdHRyaWJ1dGVzJztcblxuLy8gSW1wb3J0IFV0aWxzXG5pbXBvcnQgeyBzdHJpbmdUb0Jvb2wgfSBmcm9tICcuLi8uLi91dGlscy9pZHMtc3RyaW5nLXV0aWxzL2lkcy1zdHJpbmctdXRpbHMnO1xuaW1wb3J0IHsgZ2V0Q2xvc2VzdENvbnRhaW5lck5vZGUgfSBmcm9tICcuLi8uLi91dGlscy9pZHMtZG9tLXV0aWxzL2lkcy1kb20tdXRpbHMnO1xuaW1wb3J0IHsgSWRzQ29uc3RydWN0b3IgfSBmcm9tICcuLi8uLi9jb3JlL2lkcy1lbGVtZW50JztcbmltcG9ydCB7IEV2ZW50c01peGluSW50ZXJmYWNlIH0gZnJvbSAnLi4vaWRzLWV2ZW50cy1taXhpbi9pZHMtZXZlbnRzLW1peGluJztcblxuY29uc3QgRk9DVVNfQ0FQVFVSRV9FVkVOVE5BTUUgPSAna2V5ZG93bi5mb2N1cy1jYXB0dXJlJztcblxudHlwZSBDb25zdHJhaW50cyA9IElkc0NvbnN0cnVjdG9yPEV2ZW50c01peGluSW50ZXJmYWNlPjtcblxuLyoqXG4gKiBEb2Vzbid0IGFsbG93IGtleWJvYXJkIGZvY3VzIHRvIGJlIHByZXNlbnQgb24gZWxlbWVudHMgb3V0c2lkZSBvZiB0aGlzIG9uZVxuICogd2hlbiB0aGUgYGNhcHR1cmVzLWZvY3VzYCBhdHRyaWJ1dGUgaXMgcHJlc2VudC5cbiAqIEBwYXJhbSB7YW55fSBzdXBlcmNsYXNzIEFjY2VwdHMgYSBzdXBlcmNsYXNzIGFuZCBjcmVhdGVzIGEgbmV3IHN1YmNsYXNzIGZyb20gaXRcbiAqIEByZXR1cm5zIHthbnl9IFRoZSBleHRlbmRlZCBvYmplY3RcbiAqL1xuY29uc3QgSWRzRm9jdXNDYXB0dXJlTWl4aW4gPSA8VCBleHRlbmRzIENvbnN0cmFpbnRzPihzdXBlcmNsYXNzOiBUKSA9PiBjbGFzcyBleHRlbmRzIHN1cGVyY2xhc3Mge1xuICBjb25zdHJ1Y3RvciguLi5hcmdzOiBhbnlbXSkge1xuICAgIHN1cGVyKC4uLmFyZ3MpO1xuICB9XG5cbiAgc3RhdGljIGdldCBhdHRyaWJ1dGVzKCkge1xuICAgIHJldHVybiBbXG4gICAgICAuLi4oc3VwZXJjbGFzcyBhcyBhbnkpLmF0dHJpYnV0ZXMsXG4gICAgICBhdHRyaWJ1dGVzLkNBUFRVUkVTX0ZPQ1VTLFxuICAgICAgYXR0cmlidXRlcy5DWUNMRVNfRk9DVVMsXG4gICAgICBhdHRyaWJ1dGVzLkZPQ1VTX0lOTElORVxuICAgIF07XG4gIH1cblxuICAvKipcbiAgICogQHByb3BlcnR5IHtOb2RlfSBob3N0Tm9kZSB0aGUgdG9wLWxldmVsIG5vZGUgcmVzcG9uc2libGUgZm9yIGhvc3RpbmcgZm9jdXMuXG4gICAqIFRoaXMgaXMgbm9ybWFsbHkgYGRvY3VtZW50YCBidXQgY2FuIGFsc28gYmUgYW5vdGhlciBjb21wb25lbnQncyBTaGFkb3cgUm9vdC5cbiAgICovXG4gICNob3N0Tm9kZTogYW55ID0gZG9jdW1lbnQ7XG5cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2s/LigpO1xuICAgIGlmICh0aGlzLmhhc0F0dHJpYnV0ZShhdHRyaWJ1dGVzLkZPQ1VTX0lOTElORSkpIHRoaXMuc3luY0lubGluZSh0cnVlKTtcbiAgfVxuXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCk6IHZvaWQge1xuICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrPy4oKTtcbiAgICB0aGlzLiNyZW1vdmVGb2N1c0V2ZW50cygpO1xuICAgIHRoaXMuI2hvc3ROb2RlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuI2ZvY3VzYWJsZUVsZW1lbnRzSW5Eb2N1bWVudCA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBjYXB0dXJlc0ZvY3VzIElmIHRydWUsIHJldGFpbnMgZm9jdXMgd2l0aGluIHRoZSBob3N0IGNvbXBvbmVudC5cbiAgICogSWYgZm9jdXMgaXMgYXR0ZW1wdGVkIG9uIGFuIGVsZW1lbnQgb3V0c2lkZSBvZiB0aGlzIG9uZSwgaXQgd2lsbCBiZSBcImNhcHR1cmVkXCIgYW5kXG4gICAqIHBsYWNlZCBvbiBhbiBlbGVtZW50IGluc2lkZSBvZiB0aGlzIGNvbXBvbmVudC5cbiAgICovXG4gICNjYXB0dXJlc0ZvY3VzID0gZmFsc2U7XG5cbiAgc2V0IGNhcHR1cmVzRm9jdXModmFsKSB7XG4gICAgY29uc3QgY3VycmVudFZhbCA9IHRoaXMuI2NhcHR1cmVzRm9jdXM7XG4gICAgY29uc3QgbmV3VmFsID0gc3RyaW5nVG9Cb29sKHZhbCk7XG4gICAgaWYgKGN1cnJlbnRWYWwgIT09IG5ld1ZhbCkge1xuICAgICAgdGhpcy4jY2FwdHVyZXNGb2N1cyA9IG5ld1ZhbDtcbiAgICAgIGlmIChuZXdWYWwpIHtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5DQVBUVVJFU19GT0NVUywgYCR7bmV3VmFsfWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlcy5DQVBUVVJFU19GT0NVUyk7XG4gICAgICB9XG4gICAgICB0aGlzLiN1cGRhdGVGb2N1c0V2ZW50cygpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBjYXB0dXJlc0ZvY3VzKCkge1xuICAgIHJldHVybiB0aGlzLiNjYXB0dXJlc0ZvY3VzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gY3ljbGVzRm9jdXMgSWYgdHJ1ZSwgd2hpbGUgYGNhcHR1cmVzRm9jdXNgIGlzIHRydWUsIGN5Y2xlcyB0aGUgZm9jdXNcbiAgICogdGFyZ2V0IGVsZW1lbnQgdG8gdGhlIG9wcG9zaXRlIGVuZCBvZiB0aGUgY29udGFpbmVyLlxuICAgKi9cbiAgI2N5Y2xlc0ZvY3VzID0gdHJ1ZTtcblxuICBzZXQgY3ljbGVzRm9jdXModmFsKSB7XG4gICAgY29uc3QgY3VycmVudFZhbCA9IHRoaXMuI2N5Y2xlc0ZvY3VzO1xuICAgIGNvbnN0IG5ld1ZhbCA9IHN0cmluZ1RvQm9vbCh2YWwpO1xuICAgIGlmIChjdXJyZW50VmFsICE9PSBuZXdWYWwpIHtcbiAgICAgIHRoaXMuI2N5Y2xlc0ZvY3VzID0gbmV3VmFsO1xuICAgICAgaWYgKG5ld1ZhbCkge1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLkNZQ0xFU19GT0NVUywgYCR7bmV3VmFsfWApO1xuICAgICAgICB0aGlzLmdhaW5Gb2N1cygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlcy5DWUNMRVNfRk9DVVMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldCBjeWNsZXNGb2N1cygpIHtcbiAgICByZXR1cm4gdGhpcy4jY3ljbGVzRm9jdXM7XG4gIH1cblxuICAvKipcbiAgICogQ29ubmVjdHMgdGhlIGZvY3VzIGV2ZW50IHRvIHRoaXMgY29tcG9uZW50XG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgI2F0dGFjaEZvY3VzRXZlbnRzKCkge1xuICAgIGNvbnN0IGtleWRvd25FdmVudEhhbmRsZXIgPSAoZTogYW55KSA9PiB7XG4gICAgICBjb25zdCBpc09uRmlyc3QgPSB0aGlzLiNob3N0Tm9kZS5hY3RpdmVFbGVtZW50Py5pc0VxdWFsTm9kZSh0aGlzLmZpcnN0Rm9jdXNhYmxlRWxlbWVudCk7XG4gICAgICBjb25zdCBpc09uTGFzdCA9IHRoaXMuI2hvc3ROb2RlLmFjdGl2ZUVsZW1lbnQ/LmlzRXF1YWxOb2RlKHRoaXMubGFzdEZvY3VzYWJsZUVsZW1lbnQpO1xuXG4gICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgIGNhc2UgJ1RhYic6XG4gICAgICAgICAgaWYgKGlzT25GaXJzdCAmJiBlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCB0YXJnZXRFbGVtOiBhbnkgPSB0aGlzLmN5Y2xlc0ZvY3VzID8gdGhpcy5sYXN0Rm9jdXNhYmxlRWxlbWVudCA6IHRoaXMuZmlyc3RGb2N1c2FibGVFbGVtZW50O1xuICAgICAgICAgICAgICB0YXJnZXRFbGVtLmZvY3VzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzT25MYXN0ICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCB0YXJnZXRFbGVtOiBhbnkgPSB0aGlzLmN5Y2xlc0ZvY3VzID8gdGhpcy5maXJzdEZvY3VzYWJsZUVsZW1lbnQgOiB0aGlzLmxhc3RGb2N1c2FibGVFbGVtZW50O1xuICAgICAgICAgICAgICB0YXJnZXRFbGVtLmZvY3VzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgLy8gS2V5ZG93biBldmVudHMgYXQgdGhlIGRvY3VtZW50IGxldmVsIGludGVyY2VwdCBkZWZhdWx0IFRhYiBiZWhhdmlvciBvbiBzcGVjaWZpZWQgZWxlbWVudHMuXG4gICAgLy8gT24gdGhlc2UgZWxlbWVudHMgd2UgYWRqdXN0IHRhYmJpbmcgYmVoYXZpb3IuXG4gICAgdGhpcy5vbkV2ZW50KEZPQ1VTX0NBUFRVUkVfRVZFTlROQU1FLCB0aGlzLiNob3N0Tm9kZSwga2V5ZG93bkV2ZW50SGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNjb25uZWN0cyB0aGUgZm9jdXMgZXZlbnQgZnJvbSB0aGlzIGNvbXBvbmVudFxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gICNyZW1vdmVGb2N1c0V2ZW50cygpIHtcbiAgICB0aGlzLm9mZkV2ZW50KEZPQ1VTX0NBUFRVUkVfRVZFTlROQU1FKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzL1JlbW92ZXMgdGhlIGZvY3VzIGV2ZW50IGJhc2VkIG9uIGNvbXBvbmVudCBzdGF0ZVxuICAgKi9cbiAgI3VwZGF0ZUZvY3VzRXZlbnRzKCkge1xuICAgIHRoaXMuI3JlbW92ZUZvY3VzRXZlbnRzKCk7XG4gICAgaWYgKHRoaXMuY2FwdHVyZXNGb2N1cykge1xuICAgICAgdGhpcy5nYWluRm9jdXMoKTtcbiAgICAgIHRoaXMuI2F0dGFjaEZvY3VzRXZlbnRzKCk7XG4gICAgfVxuICB9XG5cbiAgI2ZvY3VzYWJsZVNlbGVjdG9ycyA9IFtcbiAgICAnYnV0dG9uJyxcbiAgICAnaWRzLWJ1dHRvbicsXG4gICAgJ2lkcy1kcm9wZG93bicsXG4gICAgJ2lkcy1tZW51LWJ1dHRvbicsXG4gICAgJ2lkcy1tb2RhbC1idXR0b24nLFxuICAgICdpZHMtdG9nZ2xlLWJ1dHRvbicsXG4gICAgJ1tocmVmXScsXG4gICAgJ2lucHV0JyxcbiAgICAnaWRzLWlucHV0JyxcbiAgICAnaWRzLWNoZWNrYm94JyxcbiAgICAnaWRzLXJhZGlvJyxcbiAgICAnaWRzLXN3aXRjaCcsXG4gICAgJ3NlbGVjdCcsXG4gICAgJ3RleHRhcmVhJyxcbiAgICAnaWRzLXRleHRhcmVhJyxcbiAgICAnW3RhYmluZGV4XTpub3QoW3RhYmluZGV4PVwiLTFcIl0nXG4gIF07XG5cbiAgZ2V0IGZvY3VzYWJsZVNlbGVjdG9ycygpIHtcbiAgICByZXR1cm4gdGhpcy4jZm9jdXNhYmxlU2VsZWN0b3JzO1xuICB9XG5cbiAgc2V0IGZvY3VzYWJsZVNlbGVjdG9ycyh2YWwpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgICB0aGlzLiNmb2N1c2FibGVTZWxlY3RvcnMgPSB2YWw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcm9wZXJ0eSB7QXJyYXk8SFRNTEVsZW1lbnQ+fSBmb2N1c2FibGUgcmVmZXJlbmNlIHRvIGFsbCBmb2N1c2FibGUgZWxlbWVudHMgb24gdGhlIGRvY3VtZW50XG4gICAqL1xuICAjZm9jdXNhYmxlRWxlbWVudHNJbkRvY3VtZW50OiBhbnkgPSBbXTtcblxuICAvKipcbiAgICogQHJlYWRvbmx5XG4gICAqIEByZXR1cm5zIHtBcnJheTxIVE1MRWxlbWVudD59IGFsbCBwb3NzaWJsZSBmb2N1c2FibGUgZWxlbWVudHMgd2l0aGluIExpZ2h0IERPTSBvbiB0aGUgY3VycmVudCBwYWdlXG4gICAqL1xuICBnZXQgZm9jdXNhYmxlRWxlbWVudHNJbkRvY3VtZW50KCkge1xuICAgIGlmICghdGhpcy4jZm9jdXNhYmxlRWxlbWVudHNJbkRvY3VtZW50Lmxlbmd0aCAmJiB0aGlzLmZvY3VzYWJsZVNlbGVjdG9ycy5sZW5ndGgpIHRoaXMucmVmcmVzaEZvY3VzYWJsZUVsZW1lbnRzKCk7XG4gICAgcmV0dXJuIHRoaXMuI2ZvY3VzYWJsZUVsZW1lbnRzSW5Eb2N1bWVudDtcbiAgfVxuXG4gIHJlZnJlc2hGb2N1c2FibGVFbGVtZW50cygpIHtcbiAgICBjb25zdCBzZWxlY3RvclN0ciA9IHRoaXMuZm9jdXNhYmxlU2VsZWN0b3JzLmpvaW4oJywgJyk7XG4gICAgdGhpcy4jZm9jdXNhYmxlRWxlbWVudHNJbkRvY3VtZW50ID0gWy4uLnRoaXMuI2hvc3ROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JTdHIpXVxuICAgICAgLmZpbHRlcigoaTogSFRNTEVsZW1lbnQpID0+ICFpLmhhc0F0dHJpYnV0ZShhdHRyaWJ1dGVzLkhJRERFTikpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZWFkb25seVxuICAgKiBAcmV0dXJucyB7QXJyYXk8SFRNTEVsZW1lbnQ+fSBmb2N1c2FibGUgZWxlbWVudHMgaW5zaWRlIG9mIHRoaXMgV2ViQ29tcG9uZW50J3MgTGlnaHQgRE9NXG4gICAqL1xuICBnZXQgZm9jdXNhYmxlRWxlbWVudHMoKSB7XG4gICAgaWYgKHRoaXMuZm9jdXNJbmxpbmUpIHJldHVybiB0aGlzLmZvY3VzYWJsZUVsZW1lbnRzSW5Eb2N1bWVudDtcbiAgICByZXR1cm4gdGhpcy5mb2N1c2FibGVFbGVtZW50c0luRG9jdW1lbnQuZmlsdGVyKChpOiBhbnkpID0+IHRoaXMuY29udGFpbnMoaSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZWFkb25seVxuICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9IHRoZSBmaXJzdCBmb2N1c2FibGUgY2hpbGQgZWxlbWVudCBpbnNpZGUgdGhpcyBjb21wb25lbnRcbiAgICovXG4gIGdldCBmaXJzdEZvY3VzYWJsZUVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZm9jdXNhYmxlRWxlbWVudHNbMF07XG4gIH1cblxuICAvKipcbiAgICogQHJlYWRvbmx5XG4gICAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH0gdGhlIG5leHQgZm9jdXNhYmxlIGNoaWxkIGVsZW1lbnQgaW5zaWRlIHRoaXMgY29tcG9uZW50XG4gICAqL1xuICBnZXQgbmV4dEZvY3VzYWJsZUVsZW1lbnQoKSB7XG4gICAgaWYgKCF0aGlzLmZvY3VzYWJsZUVsZW1lbnRzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBjb25zdCB0aGlzSW5kZXggPSB0aGlzLmZvY3VzYWJsZUVsZW1lbnRzSW5Eb2N1bWVudC5pbmRleE9mKHRoaXMuI2hvc3ROb2RlLmFjdGl2ZUVsZW1lbnQpO1xuICAgIGNvbnN0IG5leHRFbGVtID0gdGhpcy5mb2N1c2FibGVFbGVtZW50c0luRG9jdW1lbnRbdGhpc0luZGV4ICsgMV07XG4gICAgaWYgKCF0aGlzLmNvbnRhaW5zKG5leHRFbGVtKSAmJiB0aGlzLmN5Y2xlc0ZvY3VzKSB7XG4gICAgICByZXR1cm4gdGhpcy5maXJzdEZvY3VzYWJsZUVsZW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiBuZXh0RWxlbTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmVhZG9ubHlcbiAgICogQHJldHVybnMge0hUTUxFbGVtZW50fSB0aGUgcHJldmlvdXMgZm9jdXNhYmxlIGNoaWxkIGVsZW1lbnQgaW5zaWRlIHRoaXMgY29tcG9uZW50XG4gICAqL1xuICBnZXQgcHJldmlvdXNGb2N1c2FibGVFbGVtZW50KCkge1xuICAgIGlmICghdGhpcy5mb2N1c2FibGVFbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgY29uc3QgdGhpc0luZGV4ID0gdGhpcy5mb2N1c2FibGVFbGVtZW50c0luRG9jdW1lbnQuaW5kZXhPZih0aGlzLiNob3N0Tm9kZS5hY3RpdmVFbGVtZW50KTtcbiAgICBjb25zdCBwcmV2RWxlbSA9IHRoaXMuZm9jdXNhYmxlRWxlbWVudHNJbkRvY3VtZW50W3RoaXNJbmRleCAtIDFdO1xuICAgIGlmICghdGhpcy5jb250YWlucyhwcmV2RWxlbSkgJiYgdGhpcy5jeWNsZXNGb2N1cykge1xuICAgICAgcmV0dXJuIHRoaXMubGFzdEZvY3VzYWJsZUVsZW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiBwcmV2RWxlbTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmVhZG9ubHlcbiAgICogQHJldHVybnMge0hUTUxFbGVtZW50fSB0aGUgbGFzdCBmb2N1c2FibGUgY2hpbGQgZWxlbWVudCBpbnNpZGUgdGhpcyBjb21wb25lbnRcbiAgICovXG4gIGdldCBsYXN0Rm9jdXNhYmxlRWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5mb2N1c2FibGVFbGVtZW50cy5zbGljZSgtMSlbMF07XG4gIH1cblxuICAvKipcbiAgICogRm9jdXNlcyB0aGUgZmlyc3QtcG9zc2libGUgZWxlbWVudCB3aXRoaW4gdGhlIE1vZGFsXG4gICAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gaW5kZXggdGhlIGRlc2lyZWQgZm9jdXNhYmxlIGVsZW1lbnQgaW5kZXggdG8gdXNlXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgc2V0Rm9jdXMoaW5kZXg6IG51bWJlciB8IHN0cmluZyA9IDApIHtcbiAgICBjb25zdCBmb2N1c2FibGUgPSB0aGlzLmZvY3VzYWJsZUVsZW1lbnRzO1xuICAgIGNvbnN0IGZvY3VzZWRFbCA9IHRoaXMuI2hvc3ROb2RlLmFjdGl2ZUVsZW1lbnQ7XG4gICAgY29uc3QgZm9jdXNlZEluZGV4ID0gdGhpcy5mb2N1c2FibGVFbGVtZW50cy5pbmRleE9mKGZvY3VzZWRFbCk7XG4gICAgbGV0IHNhZmVJbmRleCA9IDA7XG5cbiAgICBpZiAoZm9jdXNhYmxlLmxlbmd0aCkge1xuICAgICAgc3dpdGNoIChpbmRleCkge1xuICAgICAgICBjYXNlICdsYXN0JzpcbiAgICAgICAgICBzYWZlSW5kZXggPSBmb2N1c2FibGUubGVuZ3RoIC0gMTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZmlyc3QnOlxuICAgICAgICBjYXNlICcnOiAvLyBMZWF2ZSBhdCAwXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6IC8vIHVuZGVmaW5lZFxuICAgICAgICAgIHNhZmVJbmRleCA9IHR5cGVvZiBpbmRleCA9PT0gJ3N0cmluZycgPyBwYXJzZUludChpbmRleCkgOiBpbmRleDtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIGZvY3VzYWJsZVtzYWZlSW5kZXhdLmZvY3VzKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gKGZvY3VzZWRJbmRleCA9PT0gc2FmZUluZGV4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgZm9jdXMgZnJvbSBlbGVtZW50cyBvdXRzaWRlIG9mIHRoaXMgb25lLCBhbmQgYXR0YWNoZXNcbiAgICogZm9jdXMgdG8gYSBzcGVjaWZpZWQgZWxlbWVudCBpbmRleC5cbiAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSBpbmRleCB0aGUgZGVzaXJlZCBmb2N1c2FibGUgZWxlbWVudCBpbmRleCB0byB1c2VcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBnYWluRm9jdXMoaW5kZXggPSAwKSB7XG4gICAgaWYgKCF0aGlzLmNvbnRhaW5zKHRoaXMuI2hvc3ROb2RlLmFjdGl2ZUVsZW1lbnQpKSB7XG4gICAgICB0aGlzLnNldEZvY3VzKGluZGV4KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgY29ycmVjdCBob3N0IG5vZGUgdG8gdXNlIGZvciBmb2N1cyBkZXRlY3Rpb25cbiAgICogQHBhcmFtIHtib29sZWFuIHwgbnVsbH0gdmFsIGlmIHRydXRoeSwgdXNlcyB0aGlzIGNvbXBvbmVudCdzIHNoYWRvdyByb290IGZvciBmb2N1cyBkZXRlY3Rpb25cbiAgICovXG4gIHN5bmNJbmxpbmUodmFsOiBib29sZWFuIHwgbnVsbCkge1xuICAgIGlmICh2YWwpIHRoaXMuI2hvc3ROb2RlID0gdGhpcy5zaGFkb3dSb290O1xuICAgIGVsc2UgdGhpcy4jaG9zdE5vZGUgPSBnZXRDbG9zZXN0Q29udGFpbmVyTm9kZSh0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW4gfCBzdHJpbmd9IHZhbCB0cnVlIGlmIGZvY3VzIGRldGVjdGlvbiBzaG91bGQgb25seSBvY2N1ciB3aXRoaW4gdGhpcyBjb21wb25lbnQncyBzaGFkb3cgcm9vdFxuICAgKi9cbiAgc2V0IGZvY3VzSW5saW5lKHZhbDogYm9vbGVhbiB8IHN0cmluZyB8IG51bGwpIHtcbiAgICBjb25zdCBuZXdWYWx1ZSA9IHN0cmluZ1RvQm9vbCh2YWwpO1xuICAgIGlmIChuZXdWYWx1ZSkge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5GT0NVU19JTkxJTkUsICd0cnVlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZXMuRk9DVVNfSU5MSU5FKTtcbiAgICB9XG4gICAgdGhpcy5zeW5jSW5saW5lKG5ld1ZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGlzIGNvbXBvbmVudCBzaG91bGQgb25seSBjYXB0dXJlIGZvY3VzIHdpdGhpbiBpdHMgc2hhZG93IHJvb3RcbiAgICovXG4gIGdldCBmb2N1c0lubGluZSgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoYXR0cmlidXRlcy5GT0NVU19JTkxJTkUpO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBJZHNGb2N1c0NhcHR1cmVNaXhpbjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/mixins/ids-focus-capture-mixin/ids-focus-capture-mixin.ts\n");

/***/ }),

/***/ "./src/mixins/ids-xss-mixin/ids-xss-mixin.ts":
/*!***************************************************!*\
  !*** ./src/mixins/ids-xss-mixin/ids-xss-mixin.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ids_xss_mixin_default)\n/* harmony export */ });\n/* harmony import */ var _utils_ids_xss_utils_ids_xss_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/ids-xss-utils/ids-xss-utils */ \"./src/utils/ids-xss-utils/ids-xss-utils.ts\");\n/* harmony import */ var _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/ids-attributes */ \"./src/core/ids-attributes.ts\");\n\n\nconst IdsXssMixin = (superclass) => class extends superclass {\n  constructor(...args) {\n    super(...args);\n    if (!this.state) {\n      this.state = {};\n    }\n    this.state.xssIgnoredTags = \"<a><b><br><br/><del><em><i><ins><mark><small><strong><sub><sup>\";\n  }\n  static get attributes() {\n    return [\n      ...superclass.attributes,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.XSS_IGNORED_TAGS\n    ];\n  }\n  /**\n   * @returns {void}\n   */\n  connectedCallback() {\n    super.connectedCallback?.();\n    if (this.hasAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.XSS_IGNORED_TAGS)) {\n      this.xssIgnoredTags = this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.XSS_IGNORED_TAGS);\n    }\n  }\n  /**\n   * @param {string} val string containing a list of allowed HTML Tags\n   */\n  set xssIgnoredTags(val) {\n    if (typeof val === \"string\" && val !== this.state.xssIgnoredTags) {\n      this.state.xssIgnoredTags = (0,_utils_ids_xss_utils_ids_xss_utils__WEBPACK_IMPORTED_MODULE_0__.sanitizeHTML)(val);\n    }\n  }\n  /**\n   * @returns {string} containing a list of HTML tags that will be ignored\n   *   by this component when processing for XSS attacks\n   */\n  get xssIgnoredTags() {\n    return this.state.xssIgnoredTags;\n  }\n  /**\n   * Uses the stored list of ignored HTML tags while processing a text string for XSS attacks.\n   * @param {string} str the string to check\n   * @returns {string} the \"fixed\" string with XSS attack vectors removed\n   */\n  xssSanitize(str) {\n    const ignored = this.xssIgnoredTags;\n    if (ignored?.length) {\n      return (0,_utils_ids_xss_utils_ids_xss_utils__WEBPACK_IMPORTED_MODULE_0__.stripTags)(str, ignored);\n    }\n    return (0,_utils_ids_xss_utils_ids_xss_utils__WEBPACK_IMPORTED_MODULE_0__.stripHTML)(str);\n  }\n};\nvar ids_xss_mixin_default = IdsXssMixin;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWl4aW5zL2lkcy14c3MtbWl4aW4vaWRzLXhzcy1taXhpbi50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFJTztBQUNvQjtBQUczQixNQUFNLGNBQWMsQ0FBK0IsZUFBa0IsY0FBYyxXQUFXO0FBQUEsRUFDNUYsZUFBZSxNQUFhO0FBQzFCLFVBQU0sR0FBRyxJQUFJO0FBQ2IsUUFBSSxDQUFDLEtBQUssT0FBTztBQUNmLFdBQUssUUFBUSxDQUFDO0FBQUEsSUFDaEI7QUFDQSxTQUFLLE1BQU0saUJBQWlCO0FBQUEsRUFDOUI7QUFBQSxFQUVBLFdBQVcsYUFBYTtBQUN0QixXQUFPO0FBQUEsTUFDTCxHQUFJLFdBQW1CO0FBQUEsTUFDdkIsNkVBQTJCO0FBQWhCLElBQ2I7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxvQkFBb0I7QUFDbEIsVUFBTSxvQkFBb0I7QUFFMUIsUUFBSSxLQUFLLGFBQWEsNkVBQTJCLEdBQUc7QUFDbEQsV0FBSyxpQkFBaUIsS0FBSyxhQUFhLDZFQUEyQjtBQUFBLElBQ3JFO0FBQUEsRUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsSUFBSSxlQUFlLEtBQUs7QUFDdEIsUUFBSSxPQUFPLFFBQVEsWUFBWSxRQUFRLEtBQUssTUFBTSxnQkFBZ0I7QUFDaEUsV0FBSyxNQUFNLGlCQUFpQixnRkFBWSxDQUFDLEdBQUc7QUFBQSxJQUM5QztBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsSUFBSSxpQkFBaUI7QUFDbkIsV0FBTyxLQUFLLE1BQU07QUFBQSxFQUNwQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9BLFlBQVksS0FBYTtBQUN2QixVQUFNLFVBQVUsS0FBSztBQUNyQixRQUFJLFNBQVMsUUFBUTtBQUNuQixhQUFPLDZFQUFTLENBQUMsS0FBSyxPQUFPO0FBQUEsSUFDL0I7QUFDQSxXQUFPLDZFQUFTLENBQUMsR0FBRztBQUFBLEVBQ3RCO0FBQ0Y7QUFFQSxJQUFPLHdCQUFRIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaWRzLWVudGVycHJpc2Utd2MvLi9zcmMvbWl4aW5zL2lkcy14c3MtbWl4aW4vaWRzLXhzcy1taXhpbi50cz8zZTI2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIHNhbml0aXplSFRNTCxcbiAgc3RyaXBIVE1MLFxuICBzdHJpcFRhZ3Ncbn0gZnJvbSAnLi4vLi4vdXRpbHMvaWRzLXhzcy11dGlscy9pZHMteHNzLXV0aWxzJztcbmltcG9ydCB7IGF0dHJpYnV0ZXMgfSBmcm9tICcuLi8uLi9jb3JlL2lkcy1hdHRyaWJ1dGVzJztcbmltcG9ydCB7IElkc0Jhc2VDb25zdHJ1Y3RvciB9IGZyb20gJy4uLy4uL2NvcmUvaWRzLWVsZW1lbnQnO1xuXG5jb25zdCBJZHNYc3NNaXhpbiA9IDxUIGV4dGVuZHMgSWRzQmFzZUNvbnN0cnVjdG9yPihzdXBlcmNsYXNzOiBUKSA9PiBjbGFzcyBleHRlbmRzIHN1cGVyY2xhc3Mge1xuICBjb25zdHJ1Y3RvciguLi5hcmdzOiBhbnlbXSkge1xuICAgIHN1cGVyKC4uLmFyZ3MpO1xuICAgIGlmICghdGhpcy5zdGF0ZSkge1xuICAgICAgdGhpcy5zdGF0ZSA9IHt9O1xuICAgIH1cbiAgICB0aGlzLnN0YXRlLnhzc0lnbm9yZWRUYWdzID0gJzxhPjxiPjxicj48YnIvPjxkZWw+PGVtPjxpPjxpbnM+PG1hcms+PHNtYWxsPjxzdHJvbmc+PHN1Yj48c3VwPic7XG4gIH1cblxuICBzdGF0aWMgZ2V0IGF0dHJpYnV0ZXMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIC4uLihzdXBlcmNsYXNzIGFzIGFueSkuYXR0cmlidXRlcyxcbiAgICAgIGF0dHJpYnV0ZXMuWFNTX0lHTk9SRURfVEFHU1xuICAgIF07XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaz8uKCk7XG5cbiAgICBpZiAodGhpcy5oYXNBdHRyaWJ1dGUoYXR0cmlidXRlcy5YU1NfSUdOT1JFRF9UQUdTKSkge1xuICAgICAgdGhpcy54c3NJZ25vcmVkVGFncyA9IHRoaXMuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuWFNTX0lHTk9SRURfVEFHUyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWwgc3RyaW5nIGNvbnRhaW5pbmcgYSBsaXN0IG9mIGFsbG93ZWQgSFRNTCBUYWdzXG4gICAqL1xuICBzZXQgeHNzSWdub3JlZFRhZ3ModmFsKSB7XG4gICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnICYmIHZhbCAhPT0gdGhpcy5zdGF0ZS54c3NJZ25vcmVkVGFncykge1xuICAgICAgdGhpcy5zdGF0ZS54c3NJZ25vcmVkVGFncyA9IHNhbml0aXplSFRNTCh2YWwpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBjb250YWluaW5nIGEgbGlzdCBvZiBIVE1MIHRhZ3MgdGhhdCB3aWxsIGJlIGlnbm9yZWRcbiAgICogICBieSB0aGlzIGNvbXBvbmVudCB3aGVuIHByb2Nlc3NpbmcgZm9yIFhTUyBhdHRhY2tzXG4gICAqL1xuICBnZXQgeHNzSWdub3JlZFRhZ3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUueHNzSWdub3JlZFRhZ3M7XG4gIH1cblxuICAvKipcbiAgICogVXNlcyB0aGUgc3RvcmVkIGxpc3Qgb2YgaWdub3JlZCBIVE1MIHRhZ3Mgd2hpbGUgcHJvY2Vzc2luZyBhIHRleHQgc3RyaW5nIGZvciBYU1MgYXR0YWNrcy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0ciB0aGUgc3RyaW5nIHRvIGNoZWNrXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBcImZpeGVkXCIgc3RyaW5nIHdpdGggWFNTIGF0dGFjayB2ZWN0b3JzIHJlbW92ZWRcbiAgICovXG4gIHhzc1Nhbml0aXplKHN0cjogc3RyaW5nKSB7XG4gICAgY29uc3QgaWdub3JlZCA9IHRoaXMueHNzSWdub3JlZFRhZ3M7XG4gICAgaWYgKGlnbm9yZWQ/Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHN0cmlwVGFncyhzdHIsIGlnbm9yZWQpO1xuICAgIH1cbiAgICByZXR1cm4gc3RyaXBIVE1MKHN0cik7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IElkc1hzc01peGluO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/mixins/ids-xss-mixin/ids-xss-mixin.ts\n");

/***/ })

}]);