"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkids_enterprise_wc"] = self["webpackChunkids_enterprise_wc"] || []).push([["src_components_ids-popup_ids-popup_ts"],{

/***/ "./src/components/ids-popup/ids-popup-attributes.ts":
/*!**********************************************************!*\
  !*** ./src/components/ids-popup/ids-popup-attributes.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ALIGNMENTS_EDGES_X\": () => (/* binding */ ALIGNMENTS_EDGES_X),\n/* harmony export */   \"ALIGNMENTS_EDGES_Y\": () => (/* binding */ ALIGNMENTS_EDGES_Y),\n/* harmony export */   \"ALIGNMENTS_X\": () => (/* binding */ ALIGNMENTS_X),\n/* harmony export */   \"ALIGNMENTS_Y\": () => (/* binding */ ALIGNMENTS_Y),\n/* harmony export */   \"ALIGNMENT_EDGES\": () => (/* binding */ ALIGNMENT_EDGES),\n/* harmony export */   \"ANIMATION_STYLES\": () => (/* binding */ ANIMATION_STYLES),\n/* harmony export */   \"ARROW_TYPES\": () => (/* binding */ ARROW_TYPES),\n/* harmony export */   \"CENTER\": () => (/* binding */ CENTER),\n/* harmony export */   \"DEFAULT_ALIGN_EDGE\": () => (/* binding */ DEFAULT_ALIGN_EDGE),\n/* harmony export */   \"POPUP_MAXHEIGHT_PROPNAME\": () => (/* binding */ POPUP_MAXHEIGHT_PROPNAME),\n/* harmony export */   \"POPUP_PROPERTIES\": () => (/* binding */ POPUP_PROPERTIES),\n/* harmony export */   \"POSITION_STYLES\": () => (/* binding */ POSITION_STYLES),\n/* harmony export */   \"TYPES\": () => (/* binding */ TYPES),\n/* harmony export */   \"formatAlignAttribute\": () => (/* binding */ formatAlignAttribute),\n/* harmony export */   \"onPlace\": () => (/* binding */ onPlace)\n/* harmony export */ });\n/* harmony import */ var _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/ids-attributes */ \"./src/core/ids-attributes.ts\");\n\nconst CENTER = \"center\";\nconst DEFAULT_ALIGN_EDGE = CENTER;\nconst ALIGNMENT_EDGES = [CENTER, \"bottom\", \"top\", \"left\", \"right\"];\nconst ALIGNMENTS_X = [CENTER, \"left\", \"right\"];\nconst ALIGNMENTS_Y = [CENTER, \"top\", \"bottom\"];\nconst ALIGNMENTS_EDGES_X = ALIGNMENTS_X.filter((x) => x !== CENTER);\nconst ALIGNMENTS_EDGES_Y = ALIGNMENTS_Y.filter((y) => y !== CENTER);\nconst ANIMATION_STYLES = [\n  \"fade\",\n  \"scale-in\"\n];\nconst ARROW_TYPES = [\"none\", \"bottom\", \"top\", \"left\", \"right\"];\nconst POSITION_STYLES = [\"fixed\", \"absolute\", \"viewport\"];\nconst TYPES = [\"none\", \"menu\", \"menu-alt\", \"modal\", \"tooltip\", \"tooltip-alt\", \"custom\", \"dropdown\"];\nconst POPUP_PROPERTIES = [\n  _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.ALIGN,\n  _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.ALIGN_X,\n  _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.ALIGN_Y,\n  _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.ALIGN_EDGE,\n  _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.ALIGN_TARGET,\n  _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.ARROW,\n  _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.ARROW_TARGET,\n  _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.ANIMATED,\n  _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.ANIMATION_STYLE,\n  _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.BLEED,\n  _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.HEIGHT,\n  _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.MAX_HEIGHT,\n  _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.POSITION_STYLE,\n  _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.TYPE,\n  _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VISIBLE,\n  _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.WIDTH,\n  _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.X,\n  _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.Y\n];\nconst POPUP_MAXHEIGHT_PROPNAME = \"--ids-popup-maxheight\";\nfunction formatAlignAttribute(alignX, alignY, edge) {\n  if (ALIGNMENTS_EDGES_Y.includes(edge)) {\n    if (!alignX || !alignX.length || alignX === CENTER) {\n      return `${edge}`;\n    }\n    return `${edge}, ${alignX}`;\n  }\n  if (!alignY || !alignY.length || alignY === CENTER) {\n    return `${alignX}`;\n  }\n  if (edge === CENTER) {\n    return `${alignY}`;\n  }\n  return `${edge}, ${alignY}`;\n}\nfunction onPlace(popupRect) {\n  return popupRect;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9pZHMtcG9wdXAvaWRzLXBvcHVwLWF0dHJpYnV0ZXMudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUMyQjtBQUkzQixNQUFNLFNBQVM7QUFFZixNQUFNLHFCQUFxQjtBQUczQixNQUFNLGtCQUFrQixDQUFDLFFBQVEsVUFBVSxPQUFPLFFBQVEsT0FBTztBQUdqRSxNQUFNLGVBQWUsQ0FBQyxRQUFRLFFBQVEsT0FBTztBQUM3QyxNQUFNLGVBQWUsQ0FBQyxRQUFRLE9BQU8sUUFBUTtBQUM3QyxNQUFNLHFCQUFxQixhQUFhLE9BQU8sQ0FBQyxNQUFNLE1BQU0sTUFBTTtBQUNsRSxNQUFNLHFCQUFxQixhQUFhLE9BQU8sQ0FBQyxNQUFNLE1BQU0sTUFBTTtBQUdsRSxNQUFNLG1CQUFtQjtBQUFBLEVBQ3ZCO0FBQUEsRUFDQTtBQUNGO0FBR0EsTUFBTSxjQUFjLENBQUMsUUFBUSxVQUFVLE9BQU8sUUFBUSxPQUFPO0FBRzdELE1BQU0sa0JBQWtCLENBQUMsU0FBUyxZQUFZLFVBQVU7QUFHeEQsTUFBTSxRQUFRLENBQUMsUUFBUSxRQUFRLFlBQVksU0FBUyxXQUFXLGVBQWUsVUFBVSxVQUFVO0FBSWxHLE1BQU0sbUJBQW1CO0FBQUEsRUFDdkIsa0VBQWdCO0FBQUwsRUFDWCxvRUFBa0I7QUFBUCxFQUNYLG9FQUFrQjtBQUFQLEVBQ1gsdUVBQXFCO0FBQVYsRUFDWCx5RUFBdUI7QUFBWixFQUNYLGtFQUFnQjtBQUFMLEVBQ1gseUVBQXVCO0FBQVosRUFDWCxxRUFBbUI7QUFBUixFQUNYLDRFQUEwQjtBQUFmLEVBQ1gsa0VBQWdCO0FBQUwsRUFDWCxtRUFBaUI7QUFBTixFQUNYLHVFQUFxQjtBQUFWLEVBQ1gsMkVBQXlCO0FBQWQsRUFDWCxpRUFBZTtBQUFKLEVBQ1gsb0VBQWtCO0FBQVAsRUFDWCxrRUFBZ0I7QUFBTCxFQUNYLDhEQUFZO0FBQUQsRUFDWCw4REFBWTtBQUNkO0FBRUEsTUFBTSwyQkFBMkI7QUFzQmpDLFNBQVMscUJBQXFCLFFBQWdCLFFBQWdCLE1BQXNCO0FBRWxGLE1BQUksbUJBQW1CLFNBQVMsSUFBSSxHQUFHO0FBQ3JDLFFBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxVQUFVLFdBQVcsUUFBUTtBQUNsRCxhQUFPLEdBQUc7QUFBQSxJQUNaO0FBQ0EsV0FBTyxHQUFHLFNBQVM7QUFBQSxFQUNyQjtBQUdBLE1BQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxVQUFVLFdBQVcsUUFBUTtBQUNsRCxXQUFPLEdBQUc7QUFBQSxFQUNaO0FBQ0EsTUFBSSxTQUFTLFFBQVE7QUFDbkIsV0FBTyxHQUFHO0FBQUEsRUFDWjtBQUNBLFNBQU8sR0FBRyxTQUFTO0FBQ3JCO0FBUUEsU0FBUyxRQUFRLFdBQTZCO0FBQzVDLFNBQU87QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL2lkcy1lbnRlcnByaXNlLXdjLy4vc3JjL2NvbXBvbmVudHMvaWRzLXBvcHVwL2lkcy1wb3B1cC1hdHRyaWJ1dGVzLnRzP2M5MWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgSWRzRWxlbWVudCBmcm9tICcuLi8uLi9jb3JlL2lkcy1lbGVtZW50JztcbmltcG9ydCB7IGF0dHJpYnV0ZXMgfSBmcm9tICcuLi8uLi9jb3JlL2lkcy1hdHRyaWJ1dGVzJztcblxuZXhwb3J0IHR5cGUgSWRzUG9wdXBFbGVtZW50UmVmID0gSWRzRWxlbWVudCB8IEhUTUxFbGVtZW50IHwgU1ZHRWxlbWVudCB8IG51bGw7XG5cbmNvbnN0IENFTlRFUiA9ICdjZW50ZXInO1xuXG5jb25zdCBERUZBVUxUX0FMSUdOX0VER0UgPSBDRU5URVI7XG5cbi8vIExvY2F0aW9ucyBpbiB3aGljaCBhIHBhcmVudC1wb3NpdGlvbmVkIFBvcHVwIGNhbiBiZSBsb2NhdGVkXG5jb25zdCBBTElHTk1FTlRfRURHRVMgPSBbQ0VOVEVSLCAnYm90dG9tJywgJ3RvcCcsICdsZWZ0JywgJ3JpZ2h0J107XG5cbi8vIE1ldGhvZHMgZm9yIFgvWS1jb29yZGluYXRlIGFsaWdubWVudCBhZ2FpbnN0IGEgcGFyZW50XG5jb25zdCBBTElHTk1FTlRTX1ggPSBbQ0VOVEVSLCAnbGVmdCcsICdyaWdodCddO1xuY29uc3QgQUxJR05NRU5UU19ZID0gW0NFTlRFUiwgJ3RvcCcsICdib3R0b20nXTtcbmNvbnN0IEFMSUdOTUVOVFNfRURHRVNfWCA9IEFMSUdOTUVOVFNfWC5maWx0ZXIoKHgpID0+IHggIT09IENFTlRFUik7XG5jb25zdCBBTElHTk1FTlRTX0VER0VTX1kgPSBBTElHTk1FTlRTX1kuZmlsdGVyKCh5KSA9PiB5ICE9PSBDRU5URVIpO1xuXG4vLyBQb3NzaWJsZSBhbmltYXRpb24gc3R5bGVzIGZvciB0aGUgUG9wdXBcbmNvbnN0IEFOSU1BVElPTl9TVFlMRVMgPSBbXG4gICdmYWRlJyxcbiAgJ3NjYWxlLWluJ1xuXTtcblxuLy8gQXJyb3cgRGlyZWN0aW9ucyAoZGVmYXVsdHMgdG8gJ25vbmUnKVxuY29uc3QgQVJST1dfVFlQRVMgPSBbJ25vbmUnLCAnYm90dG9tJywgJ3RvcCcsICdsZWZ0JywgJ3JpZ2h0J107XG5cbi8vIFBvc2l0aW9uIHR5cGVzXG5jb25zdCBQT1NJVElPTl9TVFlMRVMgPSBbJ2ZpeGVkJywgJ2Fic29sdXRlJywgJ3ZpZXdwb3J0J107XG5cbi8vIFR5cGVzIG9mIFBvcHVwc1xuY29uc3QgVFlQRVMgPSBbJ25vbmUnLCAnbWVudScsICdtZW51LWFsdCcsICdtb2RhbCcsICd0b29sdGlwJywgJ3Rvb2x0aXAtYWx0JywgJ2N1c3RvbScsICdkcm9wZG93biddO1xuXG4vLyBQcm9wZXJ0aWVzIGV4cG9zZWQgd2l0aCBnZXR0ZXJzL3NldHRlcnNcbi8vIHNhZmVTZXQvUmVtb3ZlQXR0cmlidXRlIGFsc28gdXNlIHRoZXNlIHNvIHdlIHB1bGwgdGhlbSBvdXRcbmNvbnN0IFBPUFVQX1BST1BFUlRJRVMgPSBbXG4gIGF0dHJpYnV0ZXMuQUxJR04sXG4gIGF0dHJpYnV0ZXMuQUxJR05fWCxcbiAgYXR0cmlidXRlcy5BTElHTl9ZLFxuICBhdHRyaWJ1dGVzLkFMSUdOX0VER0UsXG4gIGF0dHJpYnV0ZXMuQUxJR05fVEFSR0VULFxuICBhdHRyaWJ1dGVzLkFSUk9XLFxuICBhdHRyaWJ1dGVzLkFSUk9XX1RBUkdFVCxcbiAgYXR0cmlidXRlcy5BTklNQVRFRCxcbiAgYXR0cmlidXRlcy5BTklNQVRJT05fU1RZTEUsXG4gIGF0dHJpYnV0ZXMuQkxFRUQsXG4gIGF0dHJpYnV0ZXMuSEVJR0hULFxuICBhdHRyaWJ1dGVzLk1BWF9IRUlHSFQsXG4gIGF0dHJpYnV0ZXMuUE9TSVRJT05fU1RZTEUsXG4gIGF0dHJpYnV0ZXMuVFlQRSxcbiAgYXR0cmlidXRlcy5WSVNJQkxFLFxuICBhdHRyaWJ1dGVzLldJRFRILFxuICBhdHRyaWJ1dGVzLlgsXG4gIGF0dHJpYnV0ZXMuWVxuXTtcblxuY29uc3QgUE9QVVBfTUFYSEVJR0hUX1BST1BOQU1FID0gJy0taWRzLXBvcHVwLW1heGhlaWdodCc7XG5cbi8qKlxuICogRGVmaW5lcyBYWSBTd2l0Y2ggcmVzdWx0c1xuICovXG5leHBvcnQgdHlwZSBJZHNQb3B1cFhZU3dpdGNoUmVzdWx0ID0ge1xuICBmbGlwOiBib29sZWFuLFxuICBvcHBvc2l0ZUVkZ2U6IHN0cmluZyxcbiAgc2hvdWxkU3dpdGNoWFk6IGJvb2xlYW4sXG4gIHRhcmdldEVkZ2U6IHN0cmluZyxcbiAgeDogbnVtYmVyLFxuICB5OiBudW1iZXJcbn07XG5cbi8qKlxuICogRm9ybWF0cyB0aGUgdGV4dCB2YWx1ZSBvZiB0aGUgYGFsaWduYCBhdHRyaWJ1dGUuXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IGFsaWduWCBtYXRjaGVzIGEgdmFsdWUgZnJvbSB0aGUgQUxJR05NRU5UU19YIGFycmF5XG4gKiBAcGFyYW0ge3N0cmluZ30gYWxpZ25ZIG1hdGNoZXMgYSB2YWx1ZSBmcm9tIHRoZSBBTElHTk1FTlRTX1kgYXJyYXlcbiAqIEBwYXJhbSB7c3RyaW5nfSBlZGdlIG1hdGNoZXMgYSB2YWx1ZSBmcm9tIHRoZSBBTElHTk1FTlRfRURHRVMgYXJyYXlcbiAqIEByZXR1cm5zIHtzdHJpbmd9IGNvbnRhaW5pbmcgdGhlIHByb3Blcmx5IGZvcm1hdHRlZCBhbGlnbiB2YWx1ZVxuICovXG5mdW5jdGlvbiBmb3JtYXRBbGlnbkF0dHJpYnV0ZShhbGlnblg6IHN0cmluZywgYWxpZ25ZOiBzdHJpbmcsIGVkZ2U6IHN0cmluZyk6IHN0cmluZyB7XG4gIC8vIENoZWNrIHRoZSBlZGdlIGZvciBhIFwiWVwiIGFsaWdubWVudFxuICBpZiAoQUxJR05NRU5UU19FREdFU19ZLmluY2x1ZGVzKGVkZ2UpKSB7XG4gICAgaWYgKCFhbGlnblggfHwgIWFsaWduWC5sZW5ndGggfHwgYWxpZ25YID09PSBDRU5URVIpIHtcbiAgICAgIHJldHVybiBgJHtlZGdlfWA7XG4gICAgfVxuICAgIHJldHVybiBgJHtlZGdlfSwgJHthbGlnblh9YDtcbiAgfVxuXG4gIC8vIEFsaWdubWVudCBpcyBkZWZpbml0ZWx5IFwiWFwiXG4gIGlmICghYWxpZ25ZIHx8ICFhbGlnblkubGVuZ3RoIHx8IGFsaWduWSA9PT0gQ0VOVEVSKSB7XG4gICAgcmV0dXJuIGAke2FsaWduWH1gO1xuICB9XG4gIGlmIChlZGdlID09PSBDRU5URVIpIHtcbiAgICByZXR1cm4gYCR7YWxpZ25ZfWA7XG4gIH1cbiAgcmV0dXJuIGAke2VkZ2V9LCAke2FsaWduWX1gO1xufVxuXG4vKipcbiAqIE9wdGlvbmFsIGNhbGxiYWNrIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRqdXN0IHRoZSBQb3B1cCdzIHBsYWNlbWVudFxuICogYWZ0ZXIgYWxsIGludGVybmFsIGFkanVzdG1lbnRzIGFyZSBtYWRlLlxuICogQHBhcmFtIHtET01SZWN0fSBwb3B1cFJlY3QgYSBSZWN0IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIHBvcHVwLlxuICogQHJldHVybnMge29iamVjdH0gYW4gYWRqdXN0ZWQgUmVjdCBvYmplY3Qgd2l0aCBcIm51ZGdlZFwiIGNvb3JkaW5hdGVzLlxuICovXG5mdW5jdGlvbiBvblBsYWNlKHBvcHVwUmVjdDogRE9NUmVjdCk6IERPTVJlY3Qge1xuICByZXR1cm4gcG9wdXBSZWN0O1xufVxuXG5leHBvcnQge1xuICBDRU5URVIsXG4gIEFMSUdOTUVOVF9FREdFUyxcbiAgQUxJR05NRU5UU19YLFxuICBBTElHTk1FTlRTX1ksXG4gIEFMSUdOTUVOVFNfRURHRVNfWCxcbiAgQUxJR05NRU5UU19FREdFU19ZLFxuICBBTklNQVRJT05fU1RZTEVTLFxuICBBUlJPV19UWVBFUyxcbiAgREVGQVVMVF9BTElHTl9FREdFLFxuICBQT1NJVElPTl9TVFlMRVMsXG4gIFRZUEVTLFxuICBQT1BVUF9NQVhIRUlHSFRfUFJPUE5BTUUsXG4gIFBPUFVQX1BST1BFUlRJRVMsXG4gIGZvcm1hdEFsaWduQXR0cmlidXRlLFxuICBvblBsYWNlXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/ids-popup/ids-popup-attributes.ts\n");

/***/ }),

/***/ "./src/components/ids-popup/ids-popup.ts":
/*!***********************************************!*\
  !*** ./src/components/ids-popup/ids-popup.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ IdsPopup)\n/* harmony export */ });\n/* harmony import */ var _core_ids_decorators__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/ids-decorators */ \"./src/core/ids-decorators.ts\");\n/* harmony import */ var _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/ids-attributes */ \"./src/core/ids-attributes.ts\");\n/* harmony import */ var _utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/ids-string-utils/ids-string-utils */ \"./src/utils/ids-string-utils/ids-string-utils.ts\");\n/* harmony import */ var _utils_ids_xss_utils_ids_xss_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/ids-xss-utils/ids-xss-utils */ \"./src/utils/ids-xss-utils/ids-xss-utils.ts\");\n/* harmony import */ var _utils_ids_dom_utils_ids_dom_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/ids-dom-utils/ids-dom-utils */ \"./src/utils/ids-dom-utils/ids-dom-utils.ts\");\n/* harmony import */ var _mixins_ids_events_mixin_ids_events_mixin__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../mixins/ids-events-mixin/ids-events-mixin */ \"./src/mixins/ids-events-mixin/ids-events-mixin.ts\");\n/* harmony import */ var _mixins_ids_theme_mixin_ids_theme_mixin__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../mixins/ids-theme-mixin/ids-theme-mixin */ \"./src/mixins/ids-theme-mixin/ids-theme-mixin.ts\");\n/* harmony import */ var _mixins_ids_locale_mixin_ids_locale_mixin__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../mixins/ids-locale-mixin/ids-locale-mixin */ \"./src/mixins/ids-locale-mixin/ids-locale-mixin.ts\");\n/* harmony import */ var _core_ids_element__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/ids-element */ \"./src/core/ids-element.ts\");\n/* harmony import */ var _ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ids-popup-attributes */ \"./src/components/ids-popup/ids-popup-attributes.ts\");\n/* harmony import */ var _ids_popup_scss__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./ids-popup.scss */ \"./src/components/ids-popup/ids-popup.scss\");\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __decorateClass = (decorators, target, key, kind) => {\n  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key) : target;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--)\n    if (decorator = decorators[i])\n      result = (kind ? decorator(target, key, result) : decorator(result)) || result;\n  if (kind && result)\n    __defProp(target, key, result);\n  return result;\n};\n\n\n\n\n\n\n\n\n\n\n\nconst Base = (0,_mixins_ids_locale_mixin_ids_locale_mixin__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(\n  (0,_mixins_ids_theme_mixin_ids_theme_mixin__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(\n    (0,_mixins_ids_events_mixin_ids_events_mixin__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(\n      _core_ids_element__WEBPACK_IMPORTED_MODULE_8__[\"default\"]\n    )\n  )\n);\nlet IdsPopup = class extends Base {\n  shouldUpdate = false;\n  isFlipped = false;\n  scrollParentElem;\n  constructor() {\n    super();\n    this.#align = _ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.CENTER;\n    this.#alignX = _ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ALIGNMENTS_X[0];\n    this.#alignY = _ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ALIGNMENTS_Y[0];\n    this.#alignEdge = _ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ALIGNMENT_EDGES[0];\n    this.#alignTarget = null;\n    this.#animated = false;\n    this.#animationStyle = _ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ANIMATION_STYLES[0];\n    this.#arrow = _ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ARROW_TYPES[0];\n    this.#arrowTarget = null;\n    this.#bleed = false;\n    this.#containingElem = document.body;\n    this.#positionStyle = _ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.POSITION_STYLES[1];\n    this.#targetAlignEdge = \"\";\n    this.#type = _ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.TYPES[0];\n    this.#visible = false;\n    this.#x = 0;\n    this.#y = 0;\n    this.open = false;\n    this.shouldUpdate = false;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.containingElem = (0,_utils_ids_dom_utils_ids_dom_utils__WEBPACK_IMPORTED_MODULE_4__.getClosest)(this, \"ids-container\") || document.body;\n    this.#setInitialState();\n    this.shouldUpdate = true;\n    this.#attachEventHandlers();\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback?.();\n    if (this.#ro) {\n      this.#ro?.disconnect();\n      this.#ro = void 0;\n    }\n    if (this.#mo) {\n      this.#mo?.disconnect();\n      this.#mo = void 0;\n    }\n    this.#alignTarget = null;\n    this.#arrowTarget = null;\n    this.#containingElem = null;\n    this.containingElem = null;\n  }\n  /**\n   * Return the attributes we handle as getters/setters\n   * @returns {Array<string>} The attributes in an array\n   */\n  static get attributes() {\n    return [...super.attributes, ..._ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.POPUP_PROPERTIES];\n  }\n  /**\n   * Inner template contents\n   * @returns {string} The template\n   */\n  template() {\n    const animatedClass = this.animated ? \" animated\" : \"\";\n    return `<div class=\"ids-popup${animatedClass}\" part=\"popup\">\n      <div class=\"arrow\" part=\"arrow\"></div>\n      <div class=\"content-wrapper\">\n        <slot name=\"content\"></slot>\n      </div>\n    </div>`;\n  }\n  /**\n   * Watches for changes\n   * @property {MutationObserver} mo this Popup component's mutation observer\n   */\n  #mo;\n  /**\n   * Watches for resizing that occurs whenever the page changes dimensions, and re-applies some\n   * coordinate-specific values to the Popup's inner container.\n   * @private\n   * @property {ResizeObserver} mo this Popup component's resize observer\n   */\n  #ro;\n  /**\n   * Places the Popup and performs an adjustment to its `transform: matrix3d()`\n   * CSS property, if applicable.\n   */\n  #fixPlacementOnResize() {\n    this.#remove3dMatrix();\n    this.place();\n    this.#fix3dMatrixOnResize();\n  }\n  /**\n   * Performs an adjustment to the Popup's `transform: matrix3d()`\n   * CSS property, if applicable.\n   */\n  #fix3dMatrixOnResize() {\n    this.style.transition = \"none\";\n    this.container?.style.setProperty(\"transition\", \"none\");\n    this.correct3dMatrix();\n    this.style.transition = \"\";\n    this.container?.style.setProperty(\"transition\", \"\");\n  }\n  /**\n   * Cycles through all available props and checks the DOM for their presence\n   * @returns {void}\n   */\n  #setInitialState() {\n    this.#mo = new MutationObserver((mutations) => {\n      if (this.#visible) {\n        let placed = false;\n        for (const m of mutations) {\n          if (placed) {\n            break;\n          }\n          if ([\"subtree\", \"childList\", \"characterData\", \"characterDataOldValue\"].includes(m.type)) {\n            this.place();\n            placed = true;\n          }\n        }\n      }\n    });\n    this.#ro = new ResizeObserver((entries) => {\n      if (this.open) {\n        for (const entry of entries) {\n          if (entry.target.tagName.toLowerCase() === \"ids-container\") {\n            this.#fixPlacementOnResize();\n          } else {\n            this.#fix3dMatrixOnResize();\n          }\n        }\n        this.#checkViewportPositionScrolling();\n      }\n    });\n    _ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.POPUP_PROPERTIES.forEach((prop) => {\n      const camelProp = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_2__.camelCase)(prop);\n      this[camelProp] = this.getAttribute(prop) || this[camelProp];\n    });\n  }\n  /**\n   * Attaches event handlers for the duration of the lifespan of this component\n   * @returns {void}\n   */\n  #attachEventHandlers() {\n    const containerNode = (0,_utils_ids_dom_utils_ids_dom_utils__WEBPACK_IMPORTED_MODULE_4__.getClosest)(this, \"ids-container\");\n    this.#ro?.observe(this);\n    if (containerNode) {\n      this.#ro?.observe(containerNode);\n    }\n  }\n  /**\n   * @returns {DOMRect} measurements of the inner \".ids-popup\" <div>\n   */\n  get innerRect() {\n    return this.getBoundingClientRect();\n  }\n  /**\n   * @readonly\n   * @returns {HTMLElement} reference to the `content-wrapper` element\n   */\n  get wrapper() {\n    return this.shadowRoot?.querySelector(\".content-wrapper\");\n  }\n  /**\n   * @property {IdsPopupElementRef} alignTarget acts as the target element to be used for offset placement\n   */\n  #alignTarget = null;\n  /**\n   * Sets the element to align with via a css selector\n   * @param {IdsPopupElementRef | string} val a CSS selector string\n   */\n  set alignTarget(val) {\n    const isString = typeof val === \"string\" && val.length;\n    const isElem = val instanceof HTMLElement || val instanceof SVGElement;\n    if (!isString && !isElem) {\n      if (this.#alignTarget !== null) {\n        this.#alignTarget = null;\n        this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.ALIGN_TARGET);\n        this.#refreshAlignTarget();\n      }\n      return;\n    }\n    let elem = null;\n    if (isString) {\n      const rootNode = (0,_utils_ids_dom_utils_ids_dom_utils__WEBPACK_IMPORTED_MODULE_4__.getClosestRootNode)(this);\n      elem = rootNode.querySelector(val);\n      if (!(elem instanceof HTMLElement || elem instanceof SVGElement)) {\n        return;\n      }\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.ALIGN_TARGET, val);\n    } else if (isElem) {\n      elem = val;\n    }\n    if (elem !== null && (!this.#alignTarget || !this.#alignTarget.isEqualNode(elem))) {\n      this.#alignTarget = elem;\n      this.#refreshAlignTarget();\n    }\n  }\n  /**\n   * @returns {IdsPopupElementRef} the element in the page that the Popup will take\n   * coordinates from for relative placement\n   */\n  get alignTarget() {\n    return this.#alignTarget;\n  }\n  #refreshAlignTarget() {\n    if (this.#alignTarget) {\n      this.#mo?.observe(this.#alignTarget, {\n        attributes: true,\n        attributeFilter: [\"style\", \"height\", \"width\"],\n        attributeOldValue: true,\n        characterData: true,\n        characterDataOldValue: true,\n        childList: true,\n        subtree: true\n      });\n    } else {\n      this.#mo?.disconnect();\n    }\n    this.place();\n  }\n  /**\n   * @property {string} align determines the current direction(s) of alignment for the Popup.\n   * Can be left, right, top, bottom, center, and can also be a comma-delimited list of\n   * multiple alignment types (for example: `left, top` or `right, bottom`)\n   */\n  #align;\n  /**\n   * @param {string} val a comma-delimited set of alignment types `direction1, direction2`\n   */\n  set align(val) {\n    const currentAlign = this.#align;\n    let trueVal = val;\n    if (typeof trueVal !== \"string\" || !trueVal.length) {\n      trueVal = _ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.CENTER;\n    }\n    let vals = trueVal.split(\",\");\n    vals = vals.map((thisVal) => thisVal.trim().toLowerCase());\n    const edge = vals[0];\n    if (_ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ALIGNMENT_EDGES.includes(edge)) {\n      this.#alignEdge = edge;\n      vals[0] = this.#alignEdge;\n    }\n    if (!vals[1]) {\n      vals.push(\"center\");\n    }\n    if (_ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ALIGNMENTS_EDGES_Y.includes(vals[0]) || _ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ALIGNMENTS_EDGES_X.includes(vals[1])) {\n      const val1 = vals[1];\n      vals[1] = vals[0];\n      vals[0] = val1;\n    }\n    let attrX;\n    let attrY;\n    if (_ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ALIGNMENTS_X.includes(vals[0])) {\n      attrX = vals[0];\n      this.#alignX = vals[0];\n    } else {\n      attrX = this.alignX;\n    }\n    if (_ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ALIGNMENTS_Y.includes(vals[1])) {\n      attrY = vals[1];\n      this.#alignY = vals[1];\n    } else {\n      attrY = this.alignY;\n    }\n    const newAlign = (0,_ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.formatAlignAttribute)(attrX, attrY, this.#alignEdge);\n    const needsUpdatedAlign = currentAlign !== newAlign;\n    if (needsUpdatedAlign) {\n      this.#align = newAlign;\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.ALIGN, newAlign);\n      this.place();\n    } else if (!this.hasAttribute(\"align\")) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.ALIGN, currentAlign);\n    }\n  }\n  /**\n   * @returns {string} a DOM-friendly string reprentation of alignment types\n   */\n  get align() {\n    return this.#align;\n  }\n  /**\n   * @property {string} alignX the type of alignment to use on this component's\n   *  X coordinate in relation to a parent element's X coordinate\n   */\n  #alignX;\n  /**\n   * Strategy for the parent X alignment (see the ALIGNMENTS_X array)\n   * @param {string} val the strategy to use\n   */\n  set alignX(val) {\n    if (typeof val !== \"string\" || !val.length) {\n      return;\n    }\n    let alignX = val;\n    if (!_ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ALIGNMENTS_X.includes(val)) {\n      alignX = _ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ALIGNMENTS_X[0];\n    }\n    if (this.hasAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.ALIGN_X)) {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.ALIGN_X);\n    }\n    if (this.#alignX !== alignX) {\n      this.#alignX = alignX;\n      const alignY = this.#alignY;\n      this.align = (0,_ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.formatAlignAttribute)(alignX, alignY, alignX);\n    }\n  }\n  /**\n   * Strategy for the parent X alignment (see the ALIGNMENTS_X array)\n   * @returns {string} the strategy to use\n   */\n  get alignX() {\n    return this.#alignX;\n  }\n  /**\n   * @property {string} alignY the type of alignment to use on this component's\n   *  Y coordinate in relation to a parent element's Y coordinate\n   */\n  #alignY;\n  /**\n   * @param {string} val alignment strategy for the current parent Y alignment\n   */\n  set alignY(val) {\n    if (typeof val !== \"string\" || !val.length) {\n      return;\n    }\n    let alignY = _ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ALIGNMENTS_Y[0];\n    if (_ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ALIGNMENTS_Y.includes(val)) {\n      alignY = val;\n    }\n    if (this.hasAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.ALIGN_Y)) {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.ALIGN_Y);\n    }\n    if (this.#alignY !== alignY) {\n      this.#alignY = alignY;\n      const alignX = this.#alignX;\n      this.align = (0,_ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.formatAlignAttribute)(alignX, alignY, alignY);\n    }\n  }\n  /**\n   * @returns {string} alignment strategy for the current parent Y alignment\n   */\n  get alignY() {\n    return this.#alignY;\n  }\n  /**\n   * @property {string} alignEdge the primary edge of a target element to use for its alignment.\n   */\n  #alignEdge;\n  /**\n   * Updates when the popup changing its primary align edge\n   */\n  #targetAlignEdge;\n  /**\n   *  Specifies the edge of the parent element to be placed adjacent,\n   *  in configurations where a relative placement occurs\n   * @param {string} val The edge to align to\n   */\n  set alignEdge(val) {\n    if (typeof val !== \"string\" || !val.length) {\n      return;\n    }\n    let edge;\n    if (_ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ALIGNMENT_EDGES.includes(val)) {\n      edge = val;\n    } else {\n      edge = _ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ALIGNMENT_EDGES[0];\n    }\n    if (this.hasAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.ALIGN_EDGE)) {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.ALIGN_EDGE);\n    }\n    if (this.#alignEdge !== edge) {\n      let alignX = this.alignX;\n      let alignY = this.alignY;\n      this.#alignEdge = edge;\n      if (edge === \"center\") {\n        alignX = edge;\n        alignY = edge;\n      } else if (_ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ALIGNMENTS_EDGES_Y.includes(edge)) {\n        alignY = edge;\n      } else {\n        alignX = edge;\n      }\n      this.align = (0,_ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.formatAlignAttribute)(alignX, alignY, edge);\n    }\n  }\n  /**\n   * @returns {string} representing the current adjacent edge of the parent element\n   */\n  get alignEdge() {\n    return this.#alignEdge;\n  }\n  /**\n   * @readonly\n   * @returns {string} representing the opposite edge of the currently-defined `alignEdge` property\n   */\n  get oppositeAlignEdge() {\n    return this.#getOppositeEdge(this.alignEdge);\n  }\n  /**\n   * @returns {string | null} The max height value\n   */\n  get maxHeight() {\n    return this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.MAX_HEIGHT);\n  }\n  /**\n   * Set the max height value\n   * @param {string | number | null} value The value\n   */\n  set maxHeight(value) {\n    const val = (0,_utils_ids_dom_utils_ids_dom_utils__WEBPACK_IMPORTED_MODULE_4__.validMaxHeight)(value);\n    if (val) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.MAX_HEIGHT, val);\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.MAX_HEIGHT);\n    }\n    this.#updateMaxHeightProp(val);\n  }\n  /**\n   * Defines an internal CSS variable used for defining a `max-height` attribute\n   * in the ShadowRoot of this component\n   * @param {string | number | null} val how to define the property\n   */\n  #updateMaxHeightProp(val) {\n    if (this.positionStyle === \"viewport\") {\n      this.wrapper?.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.TABINDEX, \"0\");\n      this.container?.style.setProperty(_ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.POPUP_MAXHEIGHT_PROPNAME, \"auto\");\n      return;\n    }\n    const containerElem = this.containingElem;\n    let targetHeightConstraint = document.body.offsetHeight;\n    let targetValue = (0,_utils_ids_dom_utils_ids_dom_utils__WEBPACK_IMPORTED_MODULE_4__.validMaxHeight)(val || this.maxHeight);\n    if (containerElem) {\n      targetHeightConstraint = containerElem.offsetHeight;\n    } else if (window) {\n      targetHeightConstraint = window.innerHeight;\n      targetValue = `${targetHeightConstraint}px`;\n    }\n    if (targetValue) {\n      if (targetHeightConstraint < parseInt(targetValue)) {\n        targetValue = `${targetHeightConstraint}px`;\n      }\n    } else {\n      const currentPopupHeight = parseInt(window.getComputedStyle(this.wrapper).height);\n      if (targetHeightConstraint <= currentPopupHeight) {\n        targetValue = `${targetHeightConstraint}px`;\n      }\n    }\n    if (this.container) {\n      if (this.wrapper)\n        this.wrapper.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.TABINDEX, \"0\");\n      if (targetValue) {\n        this.container.style.setProperty(_ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.POPUP_MAXHEIGHT_PROPNAME, `${targetValue}`);\n        this.container.classList.add(\"has-maxheight\");\n      } else {\n        this.container.classList.remove(\"has-maxheight\");\n        this.container.style.removeProperty(_ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.POPUP_MAXHEIGHT_PROPNAME);\n      }\n    }\n  }\n  /**\n   * Helper to get opposite align edge\n   * @param {string|undefined} currentEdge current align edge\n   * @returns {string} opposite align edge\n   */\n  #getOppositeEdge(currentEdge) {\n    switch (currentEdge) {\n      case \"left\":\n        return \"right\";\n      case \"right\":\n        return \"left\";\n      case \"top\":\n        return \"bottom\";\n      case \"bottom\":\n        return \"top\";\n      default:\n        return \"none\";\n    }\n  }\n  /**\n   * Helper to get nearest side to the align edge\n   * @param {string|undefined} currentEdge current align edge\n   * @returns {string} nearest align edge\n   */\n  #getNearestEdge(currentEdge) {\n    switch (currentEdge) {\n      case \"top\":\n      case \"bottom\":\n        return \"right\";\n      case \"left\":\n      case \"right\":\n        return \"bottom\";\n      default:\n        return \"none\";\n    }\n  }\n  /**\n   * @property {boolean} animated true if animation should occur on this component\n   */\n  #animated;\n  /**\n   * Whether or not the component should animate its movement\n   * @param {boolean} val true if animation should occur on the Popup\n   */\n  set animated(val) {\n    const trueVal = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_2__.stringToBool)(val);\n    if (this.#animated !== trueVal) {\n      this.#animated = trueVal;\n      if (trueVal) {\n        this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.ANIMATED, \"\");\n      } else {\n        this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.ANIMATED);\n      }\n      this.#refreshAnimated();\n    }\n  }\n  /**\n   * @returns {boolean} true if animation will occur on the Popup\n   */\n  get animated() {\n    return this.#animated;\n  }\n  /**\n   * Refreshes whether or not animations can be applied\n   * @returns {void}\n   */\n  #refreshAnimated() {\n    this.container?.classList[this.animated ? \"add\" : \"remove\"](\"animated\");\n  }\n  /**\n   * @property {string} animationStyle the type of alignment to use on this component's\n   *  Y coordinate in relation to a parent element's Y coordinate\n   */\n  #animationStyle;\n  /**\n   * @param {string} val the style of animation this popup uses to show/hide\n   */\n  set animationStyle(val) {\n    const currentVal = this.#animationStyle;\n    if (val !== currentVal && _ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ANIMATION_STYLES.includes(val)) {\n      this.#animationStyle = val;\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.ANIMATION_STYLE, val);\n      this.#refreshAnimationStyle(currentVal, val);\n    } else {\n      this.#refreshAnimationStyle(\"\", currentVal);\n    }\n  }\n  /**\n   * @returns {string} the style of animation this popup uses to show/hide\n   */\n  get animationStyle() {\n    return this.#animationStyle;\n  }\n  /**\n   * Changes the CSS class controlling the animation style of the Popup\n   * @param {string} currentStyle the type of animation\n   * @param {string} newStyle the type of animation\n   * @returns {void}\n   */\n  #refreshAnimationStyle(currentStyle, newStyle) {\n    if (!this.container)\n      return;\n    const thisCl = this.container.classList;\n    if (currentStyle)\n      thisCl.remove(`animation-${currentStyle}`);\n    thisCl.add(`animation-${newStyle}`);\n  }\n  /**\n   * @property {boolean} bleed true if placement logic should allow crossing\n   *  of the defined `containingElem` boundary\n   */\n  #bleed;\n  /**\n   * @param {boolean|string} val true if bleeds should be respected by the Popup\n   */\n  set bleed(val) {\n    const trueVal = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_2__.stringToBool)(val);\n    if (this.#bleed !== trueVal) {\n      this.#bleed = val;\n      if (trueVal) {\n        this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.BLEED, \"\");\n      } else {\n        this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.BLEED);\n      }\n      this.place();\n    }\n  }\n  /**\n   * @returns {boolean} true if bleeds are currently being respected by the Popup\n   */\n  get bleed() {\n    return this.#bleed;\n  }\n  /**\n   * @property {IdsPopupElementRef} containingElem the element to use for containment of the Popup\n   */\n  #containingElem;\n  /**\n   * @param {IdsPopupElementRef} val an element that will appear to \"contain\" the Popup\n   */\n  set containingElem(val) {\n    if (!(val instanceof HTMLElement || val instanceof SVGElement)) {\n      return;\n    }\n    if (this.#containingElem !== val) {\n      this.#containingElem = val;\n      this.place();\n    }\n  }\n  /**\n   * @returns {IdsPopupElementRef} the element currently appearing to \"contain\" the Popup\n   */\n  get containingElem() {\n    return this.#containingElem;\n  }\n  /**\n   * @property {string} arrow Specifies whether to show the Popup Arrow, and in which direction.\n   * The direction is in relation to the alignment setting. So for example of you align: top\n   * you want arrow: top as well.\n   */\n  #arrow = _ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ARROW_TYPES[0];\n  /**\n   * Specifies whether to show the Popup Arrow, and in which direction.\n   * The direction is in relation to the alignment setting. So for example of you align: top\n   * you want arrow: top as well.\n   * @param {string|null} val the arrow direction.  Defaults to `none`\n   */\n  set arrow(val) {\n    const currentVal = this.#arrow;\n    let trueVal = _ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ARROW_TYPES[0];\n    if (val && _ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ARROW_TYPES.includes(val)) {\n      trueVal = val;\n    }\n    if (trueVal !== currentVal) {\n      this.#arrow = trueVal;\n      if (trueVal !== _ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ARROW_TYPES[0]) {\n        this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.ARROW, `${trueVal}`);\n      } else {\n        this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.ARROW);\n      }\n      this.#setArrowDirection(currentVal, trueVal);\n    }\n  }\n  /**\n   * @returns {string|null} the arrow setting, or null\n   */\n  get arrow() {\n    const attr = this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.ARROW);\n    if (!attr) {\n      return _ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ARROW_TYPES[0];\n    }\n    return attr;\n  }\n  /**\n   * Show/Hide Arrow pointing in a direction, if applicable\n   * @param {string} currentDir a CSS class representing a Popup Arrow direction\n   * @param {string} newDir a CSS class representing a Popup Arrow direction\n   */\n  #setArrowDirection(currentDir, newDir) {\n    if (!this.container)\n      return;\n    const arrowEl = this.arrowEl;\n    const arrowElCl = this.arrowEl?.classList;\n    const isNone = newDir === \"none\";\n    if (arrowEl)\n      arrowEl.hidden = isNone;\n    let cssPart = \"arrow\";\n    if (currentDir === \"\")\n      arrowElCl?.remove(..._ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ARROW_TYPES);\n    else if (currentDir)\n      arrowElCl?.remove(currentDir);\n    if (newDir && !isNone) {\n      arrowElCl?.add(newDir);\n      cssPart += `-${newDir}`;\n    }\n    arrowEl?.setAttribute(\"part\", cssPart);\n  }\n  /**\n   * @readonly\n   * @returns {HTMLElement} referencing the internal arrow element\n   */\n  get arrowEl() {\n    return this.container?.querySelector(\".arrow\");\n  }\n  /**\n   * @param {IdsPopupElementRef} arrowTarget\n   */\n  #arrowTarget;\n  /**\n   * Sets the element to align with via a css selector\n   * @param {IdsPopupElementRef} val a CSS selector string\n   */\n  set arrowTarget(val) {\n    const isString = typeof val === \"string\" && val.length;\n    const isElem = val instanceof HTMLElement || val instanceof SVGElement;\n    if (!isString && !isElem) {\n      if (this.#arrowTarget !== null) {\n        this.#arrowTarget = null;\n        this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.ARROW_TARGET);\n      }\n      return;\n    }\n    let elem = null;\n    if (isString) {\n      const rootNode = (0,_utils_ids_dom_utils_ids_dom_utils__WEBPACK_IMPORTED_MODULE_4__.getClosestRootNode)(this);\n      elem = rootNode.querySelector(val);\n      if (!(elem instanceof HTMLElement || elem instanceof SVGElement)) {\n        return;\n      }\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.ARROW_TARGET, val);\n    } else if (isElem) {\n      elem = val;\n    }\n    if (elem !== null && (!this.#arrowTarget || !this.#arrowTarget.isEqualNode(elem))) {\n      this.#arrowTarget = elem;\n      this.#setArrowDirection(\"\", this.arrow);\n    }\n  }\n  /**\n   * @returns {IdsPopupElementRef} the element in the page that the Popup will take\n   * coordinates from for relative placement\n   */\n  get arrowTarget() {\n    return this.#arrowTarget || this.alignTarget;\n  }\n  /**\n   * @property {string} positionStyle the method in which the Popup is positioned\n   */\n  #positionStyle;\n  /**\n   * @param {string} val the position style string\n   */\n  set positionStyle(val) {\n    const currentStyle = this.#positionStyle;\n    if (_ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.POSITION_STYLES.includes(val)) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.POSITION_STYLE, val);\n      this.#positionStyle = val;\n      if (val !== currentStyle) {\n        this.#refreshPositionStyle(currentStyle, val);\n      } else {\n        this.#refreshPositionStyle(\"\", currentStyle);\n      }\n      this.place();\n    }\n  }\n  /**\n   * @returns {string} the current position style\n   */\n  get positionStyle() {\n    return this.#positionStyle;\n  }\n  /**\n   * Changes the CSS class controlling the position style of the Popup\n   * @param {string} currentStyle the current position type\n   * @param {string} newStyle the new position type\n   * @returns {void}\n   */\n  #refreshPositionStyle(currentStyle, newStyle) {\n    if (!this.container)\n      return;\n    const thisCl = this.container.classList;\n    if (currentStyle)\n      thisCl.remove(`position-${currentStyle}`);\n    thisCl.add(`position-${newStyle}`);\n  }\n  /**\n   * Runs on viewport resize to correct a CSS class that controls scrolling behavior within viewport-positioned popups\n   */\n  #checkViewportPositionScrolling() {\n    if (!this.container || !this.wrapper)\n      return;\n    const cl = this.container.classList;\n    cl.remove(\"fit-viewport\");\n    const wrapperScrollHeight = this.wrapper.getBoundingClientRect().height;\n    const containerScrollHeight = this.container.getBoundingClientRect().height;\n    const needsFixing = wrapperScrollHeight > containerScrollHeight;\n    if (needsFixing) {\n      cl.add(\"fit-viewport\");\n    }\n  }\n  /**\n   * @property {number} type The style of popup to display.\n   * Can be 'none', 'menu', 'menu-alt', 'tooltip', 'tooltip-alt'\n   */\n  #type;\n  /**\n   * @param {string} val The popup type\n   */\n  set type(val) {\n    const currentVal = this.#type;\n    if (val && currentVal !== val && _ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.TYPES.includes(val)) {\n      this.#type = val;\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.TYPE, this.#type);\n      this.#refreshPopupTypeClass(currentVal, val);\n      this.place();\n    } else {\n      this.#refreshPopupTypeClass(\"\", currentVal);\n    }\n  }\n  /**\n   * @returns {string} the type assigned to the Popup\n   */\n  get type() {\n    return this.#type;\n  }\n  /**\n   * @param {string} currentType the current type CSS class to remove\n   * @param {string} newType the new type CSS class to apply\n   * @returns {void}\n   */\n  #refreshPopupTypeClass(currentType, newType) {\n    if (!this.container)\n      return;\n    const thisCl = this.container.classList;\n    if (currentType)\n      thisCl.remove(currentType);\n    thisCl.add(newType);\n  }\n  /**\n   * @property {boolean} open true if the Popup is not only visible, but also fully-animated open\n   */\n  open;\n  /**\n   * @property {boolean} visible true if the Popup should be visible\n   */\n  #visible;\n  /**\n   * Whether or not the component should be displayed\n   * @param {boolean} val a boolean for displaying or hiding the popup\n   */\n  set visible(val) {\n    const trueVal = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_2__.stringToBool)(val);\n    if (this.#visible !== trueVal) {\n      this.#visible = trueVal;\n      if (trueVal) {\n        this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.VISIBLE, \"\");\n      } else {\n        this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.VISIBLE);\n      }\n      this.refreshVisibility();\n    }\n  }\n  get visible() {\n    return this.#visible;\n  }\n  /**\n   * Runs the show/hide routines of the Popup based on current visiblity state.\n   * @async\n   * @returns {void}\n   */\n  async refreshVisibility() {\n    if (!this.container)\n      return;\n    const cl = this.container.classList;\n    if (this.#visible && !cl.contains(\"open\")) {\n      await this.show();\n    }\n    if (!this.#visible && !this.hasAttribute(\"aria-hidden\")) {\n      await this.hide();\n    }\n  }\n  /**\n   * @property {number} x represents the X coordinate if placed via coordinates,\n   * or the X offset when placed in relation to a parent element.\n   */\n  #x;\n  /**\n   * Sets the X (left) coordinate of the Popup\n   * @param {number} val the coordinate's value\n   */\n  set x(val) {\n    let trueVal = parseInt(val?.toString(), 10);\n    if (Number.isNaN(trueVal)) {\n      trueVal = 0;\n    }\n    if (trueVal !== this.#x) {\n      this.#x = trueVal;\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.X, trueVal.toString());\n    }\n  }\n  get x() {\n    return this.#x;\n  }\n  /**\n   * @property {number} y represents the Y coordinate if placed via coordinates,\n   * or the Y offset when placed in relation to a parent element.\n   */\n  #y;\n  /**\n   * Sets the Y (top) coordinate of the Popup\n   * @param {number} val the coordinate's value\n   */\n  set y(val) {\n    let trueVal = parseInt(val?.toString(), 10);\n    if (Number.isNaN(trueVal)) {\n      trueVal = 0;\n    }\n    if (trueVal !== this.#y) {\n      this.#y = trueVal;\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.Y, trueVal.toString());\n    }\n  }\n  get y() {\n    return this.#y;\n  }\n  /**\n   * Sets an X/Y position and optionally shows/places the Popup\n   * @param {number} x the x coordinate/offset value\n   * @param {number} y the y coordinate/offset value\n   * @param {boolean} doShow true if the Popup should be displayed before placing\n   * @param {boolean} doPlacement true if the component should run its placement routine\n   */\n  setPosition(x = null, y = null, doShow = null, doPlacement = null) {\n    const elem = this;\n    if (!Number.isNaN(x))\n      elem.x = x;\n    if (!Number.isNaN(y))\n      elem.y = y;\n    if (doShow)\n      this.visible = true;\n    if (doPlacement)\n      this.place();\n  }\n  /**\n   * Shows the Popup\n   * @async\n   * @returns {void}\n   */\n  async show() {\n    if (!this.visible || !this.container) {\n      return;\n    }\n    this.place();\n    this.placeArrow(this.#targetAlignEdge);\n    this.removeAttribute(\"aria-hidden\");\n    this.container.classList.add(\"open\");\n    this.open = true;\n    if (this.animated) {\n      await (0,_utils_ids_dom_utils_ids_dom_utils__WEBPACK_IMPORTED_MODULE_4__.waitForTransitionEnd)(this.container, \"opacity\");\n    }\n    this.correct3dMatrix();\n    this.triggerEvent(\"show\", this, {\n      bubbles: true,\n      detail: {\n        elem: this\n      }\n    });\n  }\n  /**\n   * Hides the Popup\n   * @async\n   * @returns {void}\n   */\n  async hide() {\n    if (this.visible || !this.container) {\n      return;\n    }\n    this.open = false;\n    this.#remove3dMatrix();\n    this.container.classList.remove(\"open\");\n    if (this.animated) {\n      await (0,_utils_ids_dom_utils_ids_dom_utils__WEBPACK_IMPORTED_MODULE_4__.waitForTransitionEnd)(this.container, \"opacity\");\n    }\n    this.triggerEvent(\"hide\", this, {\n      bubbles: true,\n      detail: {\n        elem: this\n      }\n    });\n    this.setAttribute(\"aria-hidden\", \"true\");\n  }\n  /**\n   * Runs the configured placement routine for the Popup\n   * @returns {void}\n   */\n  place() {\n    if (this.visible && this.positionStyle !== \"viewport\") {\n      this.#updateMaxHeightProp();\n      const { alignTarget } = this;\n      if (!alignTarget) {\n        this.#placeAtCoords();\n      } else {\n        this.#placeAgainstTarget();\n      }\n    }\n  }\n  /**\n   * Places the Popup using numeric x/y coordinates as a starting point.\n   * @private\n   * @returns {void}\n   */\n  #placeAtCoords() {\n    let popupRect = this.getBoundingClientRect();\n    let x = this.x;\n    let y = this.y;\n    switch (this.alignX) {\n      case \"right\":\n        x -= popupRect.width;\n        break;\n      case \"center\":\n        x -= popupRect.width / 2;\n        break;\n      default:\n        break;\n    }\n    switch (this.alignY) {\n      case \"bottom\":\n        y -= popupRect.height;\n        break;\n      case \"center\":\n        y -= popupRect.height / 2;\n        break;\n      default:\n        break;\n    }\n    popupRect.x = x;\n    popupRect.y = y;\n    popupRect = this.#nudge(popupRect);\n    popupRect = this.#removeRelativeParentDistance(this.parentNode, popupRect, this.scrollParentElem);\n    if (typeof this.onPlace === \"function\") {\n      popupRect = this.onPlace(popupRect);\n    }\n    this.#renderPlacementInPixels(popupRect);\n  }\n  /**\n   * Places the Popup using an external element as a starting point.\n   * @private\n   * @returns {void}\n   */\n  #placeAgainstTarget() {\n    if (!this.alignTarget)\n      return;\n    let popupRect = this.getBoundingClientRect();\n    this.#targetAlignEdge = this.#getPlacementEdge(popupRect);\n    const oppositeEdge = this.#getOppositeEdge(this.alignEdge);\n    const shouldSwitchXY = this.alignEdge !== this.#targetAlignEdge && this.#getOppositeEdge(this.alignEdge) !== this.#targetAlignEdge;\n    let switchResult = {\n      flip: this.alignEdge !== this.#targetAlignEdge && !shouldSwitchXY,\n      oppositeEdge,\n      shouldSwitchXY,\n      targetEdge: this.#alignEdge,\n      x: shouldSwitchXY ? this.y : this.x,\n      y: shouldSwitchXY ? this.x : this.y\n    };\n    if (typeof this.onXYSwitch === \"function\") {\n      switchResult = this.onXYSwitch(switchResult);\n    }\n    let x = switchResult.x;\n    let y = switchResult.y;\n    const targetRect = this.alignTarget.getBoundingClientRect();\n    const alignEdge = this.#targetAlignEdge || this.alignEdge;\n    let alignXCentered = false;\n    let alignYCentered = false;\n    this.container?.classList.toggle(\"flipped\", this.alignEdge !== this.#targetAlignEdge && !shouldSwitchXY);\n    if (_ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ALIGNMENTS_Y.includes(alignEdge)) {\n      switch (alignEdge) {\n        case \"top\":\n          y = targetRect.top - popupRect.height - y;\n          break;\n        case \"bottom\":\n          y = targetRect.bottom + y;\n          break;\n        default:\n          y = targetRect.top + targetRect.height / 2 - popupRect.height / 2 + y;\n          alignYCentered = true;\n      }\n      switch (this.alignX) {\n        case \"left\":\n          x = targetRect.left + x;\n          break;\n        case \"right\":\n          x = targetRect.right - popupRect.width - x;\n          break;\n        default:\n          x = targetRect.left + targetRect.width / 2 - popupRect.width / 2 + x;\n          alignXCentered = true;\n      }\n    }\n    if (_ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ALIGNMENTS_X.includes(alignEdge)) {\n      switch (alignEdge) {\n        case \"left\":\n          x = targetRect.left - popupRect.width - x;\n          break;\n        case \"right\":\n          x = targetRect.right + x;\n          break;\n        default:\n          if (alignXCentered) {\n            break;\n          }\n          x = targetRect.left + targetRect.width / 2 - popupRect.width / 2 + x;\n      }\n      switch (this.alignY) {\n        case \"top\":\n          y = targetRect.top + y;\n          break;\n        case \"bottom\":\n          y = targetRect.bottom - popupRect.height + y;\n          break;\n        default:\n          if (alignYCentered) {\n            break;\n          }\n          y = targetRect.top + targetRect.height / 2 - popupRect.height / 2 + y;\n      }\n    }\n    if (alignEdge === \"none\") {\n      const containerWidth = this.containingElem?.clientWidth;\n      const containerHeight = this.containingElem?.clientHeight;\n      if (containerWidth && containerHeight) {\n        x = (containerWidth - popupRect.width) / 2;\n        y = (containerHeight - popupRect.height) / 2;\n      }\n    }\n    popupRect.x = x;\n    popupRect.y = y;\n    popupRect = this.#nudge(popupRect);\n    popupRect = this.#removeRelativeParentDistance(this.parentNode, popupRect, this.scrollParentElem);\n    if (typeof this.onPlace === \"function\") {\n      popupRect = this.onPlace(popupRect);\n    }\n    this.#renderPlacementInPixels(popupRect);\n    if (this.arrow && this.arrow !== _ids_popup_attributes__WEBPACK_IMPORTED_MODULE_9__.ARROW_TYPES[0]) {\n      this.#setArrowDirection(\"\", this.#targetAlignEdge);\n      this.placeArrow(this.#targetAlignEdge);\n    }\n  }\n  /**\n   * Optional callback that can be used to adjust the Popup's placement\n   * after all internal adjustments are made.\n   * @param {DOMRect} popupRect a Rect object representing the current state of the popup.\n   * @returns {object} an adjusted Rect object with \"nudged\" coordinates.\n   */\n  onPlace(popupRect) {\n    return popupRect;\n  }\n  /**\n   * Optional callback that can be used to further adjust the Popup's x/y offsets\n   * if a flip or other modification is made to the alignment edge\n   * when being placed in alignment mode.\n   * @param {IdsPopupXYSwitchResult} result contains settings related to the x/y adjustment.\n   * @returns {IdsPopupXYSwitchResult} provides further modifications.\n   */\n  onXYSwitch(result) {\n    return result;\n  }\n  /**\n   * Further adjusts placement of a popup based on defined strategies.\n   * @param {DOMRect} popupRect a Rect object representing the current state of the popup.\n   * @returns {object} an adjusted Rect object with \"nudged\" coordinates.\n   */\n  #nudge(popupRect) {\n    if (this.bleed || !this.containingElem) {\n      return popupRect;\n    }\n    const viewportWidth = window.innerWidth;\n    const viewportHeight = window.innerHeight;\n    const containerRect = this.containingElem.getBoundingClientRect();\n    const bleed = this.bleed;\n    let fixedX = popupRect.x;\n    let fixedY = popupRect.y;\n    const rightEdge = bleed ? viewportWidth : containerRect.right;\n    const leftEdge = bleed ? 0 : containerRect.left;\n    const topEdge = bleed ? 0 : containerRect.top;\n    const bottomEdge = bleed ? viewportHeight : containerRect.bottom;\n    if (popupRect.right > rightEdge) {\n      fixedX -= popupRect.right - rightEdge;\n    }\n    if (popupRect.left < leftEdge) {\n      fixedX += Math.abs(popupRect.left) + leftEdge;\n    }\n    if (popupRect.bottom > bottomEdge) {\n      fixedY -= popupRect.bottom - bottomEdge;\n    }\n    if (popupRect.top < topEdge) {\n      fixedY += Math.abs(popupRect.top) + topEdge;\n    }\n    popupRect.x = fixedX;\n    popupRect.y = fixedY;\n    return popupRect;\n  }\n  #getPlacementEdge(popupRect) {\n    if (!this.containingElem || !this.alignTarget)\n      return \"none\";\n    const viewportWidth = window.innerWidth;\n    const viewportHeight = window.innerHeight;\n    const scrollX = this.containingElem.scrollLeft || 0;\n    const scrollY = this.containingElem.scrollTop || 0;\n    const bleed = this.bleed;\n    const containerRect = this.containingElem.getBoundingClientRect();\n    const targetRect = this.alignTarget.getBoundingClientRect();\n    const getDistance = (dir) => {\n      let d = 0;\n      switch (dir) {\n        case \"left\":\n          d = (bleed ? 0 : containerRect.left) - scrollX - targetRect.left + this.x;\n          break;\n        case \"right\":\n          d = (bleed ? viewportWidth : containerRect.right) - scrollX - targetRect.right - this.x;\n          break;\n        case \"top\":\n          d = (bleed ? 0 : containerRect.top) - scrollY - targetRect.top + this.y;\n          break;\n        default:\n          d = (bleed ? viewportHeight : containerRect.bottom) - scrollY - targetRect.bottom - this.y;\n          break;\n      }\n      return Math.abs(d);\n    };\n    const currentDir = this.alignEdge;\n    const measuredPopupDimension = [\"top\", \"bottom\"].includes(currentDir) ? \"height\" : \"width\";\n    const edgeOrder = [\n      this.alignEdge,\n      this.#getOppositeEdge(this.alignEdge),\n      this.#getNearestEdge(this.alignEdge),\n      this.#getOppositeEdge(this.#getNearestEdge(this.alignEdge))\n    ];\n    const edge = edgeOrder.find((item) => {\n      const dist = getDistance(item);\n      return popupRect[measuredPopupDimension] <= dist;\n    });\n    return edge || \"none\";\n  }\n  /**\n   * Renders the position of the Popup using offsets/coordinates in Pixels.\n   * @param {DOMRect} popupRect representing approximated new placement values\n   * @returns {void}\n   */\n  #renderPlacementInPixels(popupRect) {\n    this.style.left = `${popupRect.x}px`;\n    this.style.top = `${popupRect.y}px`;\n  }\n  /**\n   * In cases where 3D CSS transforms are used for Popup positioning,\n   * corrects the placement of the Popup after rendering so that it doesn't\n   * reside on half-pixels, causing blurriness to text, icons, etc.\n   * Adapted from https://stackoverflow.com/a/42256897\n   * @returns {void}\n   */\n  correct3dMatrix() {\n    if (!this.container || this.positionStyle !== \"viewport\") {\n      return;\n    }\n    this.#remove3dMatrix();\n    const style = window.getComputedStyle(this.container, null);\n    const mx = style.getPropertyValue(\"-webkit-transform\") || style.getPropertyValue(\"-moz-transform\") || style.getPropertyValue(\"transform\") || false;\n    if (!mx) {\n      return;\n    }\n    const values = mx.replace(/ |\\(|\\)|matrix3d/g, \"\").split(\",\");\n    for (let i = 0; i < values.length; i++) {\n      if (i === 0 && values[i] < 1)\n        values[i] = 1;\n      if (i > 0 && (values[i] > 4 || values[i] < -4)) {\n        values[i] = Math.ceil(values[i]);\n      }\n      if (i === values.length - 1 && values[i] > 1) {\n        values[i] = 1;\n      }\n    }\n    this.container.style.transform = `matrix3d(${values.join()})`;\n  }\n  /**\n   * Removes a previously-modified 3D Matrix\n   * @returns {void}\n   */\n  #remove3dMatrix() {\n    this.container?.style.removeProperty(\"transform\");\n  }\n  /**\n   * Returns a DOMRect from `getBoundingClientRect` from an element, with the values adjusted\n   * by subtracting the left/top values from the closest relative-positioned parent\n   * @param {HTMLElement} elem the element to measure\n   * @param {DOMRect} [rect] optionally pass in an existing rect and correct it\n   * @param {HTMLElement} [containerElem] optionally pass a container element for this one to check scrolling distance\n   * @returns {DOMRect} measurements adjusted for an absolutely-positioned parent\n   */\n  #removeRelativeParentDistance(elem, rect, containerElem) {\n    const elemRect = (0,_utils_ids_dom_utils_ids_dom_utils__WEBPACK_IMPORTED_MODULE_4__.getEditableRect)(rect || elem.getBoundingClientRect());\n    let foundRelativeParent = false;\n    let scrollAdjusted = false;\n    const removeRelativeDistance = (parent) => {\n      let parentStyle;\n      let parentRect;\n      if (parent && !foundRelativeParent) {\n        if (parent.toString() === \"[object ShadowRoot]\") {\n          parent = parent.host;\n        }\n        if (parent instanceof HTMLElement || parent instanceof SVGElement) {\n          parentStyle = getComputedStyle(parent);\n          parentRect = parent.getBoundingClientRect();\n          const scrollElem = containerElem || parent;\n          if (!scrollAdjusted) {\n            if (scrollElem.scrollLeft !== 0) {\n              elemRect.x -= scrollElem.scrollLeft;\n              scrollAdjusted = true;\n            }\n            if (scrollElem.scrollTop !== 0) {\n              elemRect.y -= scrollElem.scrollTop;\n              scrollAdjusted = true;\n            }\n          }\n          if (parentStyle.position === \"relative\") {\n            elemRect.x -= parentRect.x;\n            elemRect.y -= parentRect.y;\n            foundRelativeParent = true;\n          }\n        }\n        if (parent.parentNode) {\n          removeRelativeDistance(parent.parentNode);\n        }\n      }\n    };\n    removeRelativeDistance(elem);\n    return elemRect;\n  }\n  /**\n   * Handles alignment of an optional arrow element. If an arrow target is specified,\n   * the arrow is placed to align correctly against the target.\n   * @param {string | undefined} alignEdge align edge to place the arrow\n   * @returns {void}\n   */\n  placeArrow(alignEdge) {\n    const arrow = alignEdge || this.arrow;\n    const arrowEl = this.arrowEl;\n    const element = this.alignTarget;\n    const target = this.arrowTarget;\n    if (arrow === \"none\" || !element || !target || !arrowEl) {\n      if (arrowEl)\n        arrowEl.hidden = true;\n      return;\n    }\n    arrowEl.removeAttribute(\"hidden\");\n    arrowEl.style.marginLeft = \"\";\n    arrowEl.style.marginTop = \"\";\n    const arrowRect = arrowEl.getBoundingClientRect();\n    const elementRect = element.getBoundingClientRect();\n    const targetRect = target.getBoundingClientRect();\n    const newArrowRect = {};\n    const targetMargin = arrow === \"right\" || arrow === \"left\" ? \"marginTop\" : \"marginLeft\";\n    let arrowHidden = false;\n    let targetCenter = 0;\n    let currentArrowCenter = 0;\n    let d;\n    if (arrow === \"left\" || arrow === \"right\") {\n      targetCenter = targetRect.top + targetRect.height / 2;\n      currentArrowCenter = arrowRect.top + arrowRect.height / 2;\n      d = targetCenter - currentArrowCenter;\n      newArrowRect.top = arrowRect.top + d;\n      newArrowRect.bottom = arrowRect.bottom + d;\n      if (newArrowRect.top <= elementRect.top || newArrowRect.bottom >= elementRect.bottom) {\n        arrowHidden = true;\n      }\n    }\n    if (arrow === \"top\" || arrow === \"bottom\") {\n      targetCenter = targetRect.left + targetRect.width / 2;\n      currentArrowCenter = arrowRect.left + arrowRect.width / 2;\n      d = targetCenter - currentArrowCenter;\n      newArrowRect.left = arrowRect.left + d;\n      newArrowRect.right = arrowRect.right + d;\n      if (newArrowRect.left <= elementRect.left || newArrowRect.right >= elementRect.right) {\n        arrowHidden = true;\n      }\n    }\n    d = Math.ceil(d);\n    if (arrowHidden) {\n      arrowEl.hidden = true;\n    }\n    arrowEl.style[targetMargin] = `${d}px`;\n  }\n  set height(val) {\n    const newHeight = (0,_utils_ids_xss_utils_ids_xss_utils__WEBPACK_IMPORTED_MODULE_3__.stripHTML)(val);\n    const currentHeight = this.height;\n    if (currentHeight !== newHeight) {\n      if (newHeight.length) {\n        this.container?.style.setProperty(\"height\", newHeight);\n        this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.HEIGHT, newHeight);\n      } else {\n        this.container?.style.removeProperty(\"height\");\n        this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.HEIGHT);\n      }\n    }\n  }\n  get height() {\n    return this.container?.style.height || \"\";\n  }\n  set width(val) {\n    const newWidth = (0,_utils_ids_xss_utils_ids_xss_utils__WEBPACK_IMPORTED_MODULE_3__.stripHTML)(val);\n    const currentWidth = this.width;\n    if (currentWidth !== newWidth) {\n      if (newWidth.length) {\n        this.container?.style.setProperty(\"width\", newWidth);\n        this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.WIDTH, newWidth);\n      } else {\n        this.container?.style.removeProperty(\"width\");\n        this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.WIDTH);\n      }\n    }\n  }\n  get width() {\n    return this.container?.style.width ?? \"\";\n  }\n};\nIdsPopup = __decorateClass([\n  (0,_core_ids_decorators__WEBPACK_IMPORTED_MODULE_0__.customElement)(\"ids-popup\"),\n  (0,_core_ids_decorators__WEBPACK_IMPORTED_MODULE_0__.scss)(_ids_popup_scss__WEBPACK_IMPORTED_MODULE_10__[\"default\"])\n], IdsPopup);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9pZHMtcG9wdXAvaWRzLXBvcHVwLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW9DO0FBQ1Q7QUFDYTtBQUNkO0FBUW5CO0FBRW9CO0FBQ0Q7QUFDQztBQUNKO0FBa0JoQjtBQUVZO0FBRW5CLE1BQU0sT0FBTyxxRkFBYztBQUFkLEVBQ1gsbUZBQWE7QUFBYixJQUNFLHFGQUFjO0FBQWQsTUFDRSx5REFBVTtBQUFWLElBQ0Y7QUFBQSxFQUNGO0FBQ0Y7QUFjQSxJQUFxQixXQUFyQixjQUFzQyxLQUFLO0FBQUEsRUFDekMsZUFBZTtBQUFBLEVBRWYsWUFBWTtBQUFBLEVBRVo7QUFBQSxFQUVBLGNBQWM7QUFDWixVQUFNO0FBQ04sU0FBSyxTQUFTLHlEQUFNO0FBQ3BCLFNBQUssVUFBVSxrRUFBZTtBQUM5QixTQUFLLFVBQVUsa0VBQWU7QUFDOUIsU0FBSyxhQUFhLHFFQUFrQjtBQUNwQyxTQUFLLGVBQWU7QUFDcEIsU0FBSyxZQUFZO0FBQ2pCLFNBQUssa0JBQWtCLHNFQUFtQjtBQUMxQyxTQUFLLFNBQVMsaUVBQWM7QUFDNUIsU0FBSyxlQUFlO0FBQ3BCLFNBQUssU0FBUztBQUNkLFNBQUssa0JBQWtCLFNBQVM7QUFDaEMsU0FBSyxpQkFBaUIscUVBQWtCO0FBQ3hDLFNBQUssbUJBQW1CO0FBQ3hCLFNBQUssUUFBUSwyREFBUTtBQUNyQixTQUFLLFdBQVc7QUFDaEIsU0FBSyxLQUFLO0FBQ1YsU0FBSyxLQUFLO0FBRVYsU0FBSyxPQUFPO0FBQ1osU0FBSyxlQUFlO0FBQUEsRUFDdEI7QUFBQSxFQUVBLG9CQUEwQjtBQUN4QixVQUFNLGtCQUFrQjtBQUV4QixTQUFLLGlCQUFpQiw4RUFBVSxDQUFFLE1BQWMsZUFBZSxLQUFLLFNBQVM7QUFHN0UsU0FBSyxpQkFBaUI7QUFDdEIsU0FBSyxlQUFlO0FBQ3BCLFNBQUsscUJBQXFCO0FBQUEsRUFDNUI7QUFBQSxFQUVBLHVCQUE2QjtBQUMzQixVQUFNLHVCQUF1QjtBQUM3QixRQUFJLEtBQUssS0FBSztBQUNaLFdBQUssS0FBSyxXQUFXO0FBQ3JCLFdBQUssTUFBTTtBQUFBLElBQ2I7QUFDQSxRQUFJLEtBQUssS0FBSztBQUNaLFdBQUssS0FBSyxXQUFXO0FBQ3JCLFdBQUssTUFBTTtBQUFBLElBQ2I7QUFDQSxTQUFLLGVBQWU7QUFDcEIsU0FBSyxlQUFlO0FBQ3BCLFNBQUssa0JBQWtCO0FBQ3ZCLFNBQUssaUJBQWlCO0FBQUEsRUFDeEI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsV0FBVyxhQUE0QjtBQUNyQyxXQUFPLENBQUMsR0FBRyxNQUFNLFlBQVksR0FBRyxtRUFBZ0I7QUFBQSxFQUNsRDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxXQUFtQjtBQUNqQixVQUFNLGdCQUFnQixLQUFLLFdBQVcsY0FBYztBQUVwRCxXQUFPLHdCQUF3QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1qQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBUUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsd0JBQThCO0FBQzVCLFNBQUssZ0JBQWdCO0FBQ3JCLFNBQUssTUFBTTtBQUNYLFNBQUsscUJBQXFCO0FBQUEsRUFDNUI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsdUJBQTZCO0FBQzNCLFNBQUssTUFBTSxhQUFhO0FBQ3hCLFNBQUssV0FBVyxNQUFNLFlBQVksY0FBYyxNQUFNO0FBQ3RELFNBQUssZ0JBQWdCO0FBQ3JCLFNBQUssTUFBTSxhQUFhO0FBQ3hCLFNBQUssV0FBVyxNQUFNLFlBQVksY0FBYyxFQUFFO0FBQUEsRUFDcEQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsbUJBQXlCO0FBQ3ZCLFNBQUssTUFBTSxJQUFJLGlCQUFpQixDQUFDLGNBQWM7QUFDN0MsVUFBSSxLQUFLLFVBQVU7QUFDakIsWUFBSSxTQUFTO0FBQ2IsbUJBQVcsS0FBSyxXQUFXO0FBQ3pCLGNBQUksUUFBUTtBQUNWO0FBQUEsVUFDRjtBQUNBLGNBQUksQ0FBQyxXQUFXLGFBQWEsaUJBQWlCLHVCQUF1QixFQUFFLFNBQVMsRUFBRSxJQUFJLEdBQUc7QUFDdkYsaUJBQUssTUFBTTtBQUNYLHFCQUFTO0FBQUEsVUFDWDtBQUFBLFFBQ0Y7QUFBQSxNQUNGO0FBQUEsSUFDRixDQUFDO0FBRUQsU0FBSyxNQUFNLElBQUksZUFBZSxDQUFDLFlBQVk7QUFDekMsVUFBSSxLQUFLLE1BQU07QUFDYixtQkFBVyxTQUFTLFNBQVM7QUFDM0IsY0FBSSxNQUFNLE9BQU8sUUFBUSxZQUFZLE1BQU0saUJBQWlCO0FBQzFELGlCQUFLLHNCQUFzQjtBQUFBLFVBQzdCLE9BQU87QUFDTCxpQkFBSyxxQkFBcUI7QUFBQSxVQUM1QjtBQUFBLFFBQ0Y7QUFDQSxhQUFLLGdDQUFnQztBQUFBLE1BQ3ZDO0FBQUEsSUFDRixDQUFDO0FBRUQsK0VBQXdCLENBQUMsQ0FBQyxTQUFTO0FBQ2pDLFlBQU0sWUFBWSxtRkFBUyxDQUFDLElBQUk7QUFDaEMsTUFBQyxLQUFhLFNBQVMsSUFBSSxLQUFLLGFBQWEsSUFBSSxLQUFNLEtBQWEsU0FBUztBQUFBLElBQy9FLENBQUM7QUFBQSxFQUNIO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLHVCQUE2QjtBQUMzQixVQUFNLGdCQUFnQiw4RUFBVSxDQUFFLE1BQWMsZUFBZTtBQUUvRCxTQUFLLEtBQUssUUFBUyxJQUFZO0FBQy9CLFFBQUksZUFBZTtBQUNqQixXQUFLLEtBQUssUUFBUSxhQUFhO0FBQUEsSUFDakM7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxJQUFJLFlBQXFCO0FBQ3ZCLFdBQU8sS0FBSyxzQkFBc0I7QUFBQSxFQUNwQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxJQUFJLFVBQTBDO0FBQzVDLFdBQU8sS0FBSyxZQUFZLGNBQWMsa0JBQWtCO0FBQUEsRUFDMUQ7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLGVBQW1DO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1uQyxJQUFJLFlBQVksS0FBa0M7QUFDaEQsVUFBTSxXQUFXLE9BQU8sUUFBUSxZQUFZLElBQUk7QUFDaEQsVUFBTSxTQUFTLGVBQWUsZUFBZSxlQUFlO0FBRTVELFFBQUksQ0FBQyxZQUFZLENBQUMsUUFBUTtBQUN4QixVQUFJLEtBQUssaUJBQWlCLE1BQU07QUFDOUIsYUFBSyxlQUFlO0FBQ3BCLGFBQUssZ0JBQWdCLHlFQUF1QjtBQUM1QyxhQUFLLG9CQUFvQjtBQUFBLE1BQzNCO0FBQ0E7QUFBQSxJQUNGO0FBRUEsUUFBSSxPQUEyQjtBQUMvQixRQUFJLFVBQVU7QUFFWixZQUFNLFdBQVcsc0ZBQWtCLENBQUUsSUFBWTtBQUNqRCxhQUFPLFNBQVMsY0FBYyxHQUFHO0FBQ2pDLFVBQUksRUFBRSxnQkFBZ0IsZUFBZSxnQkFBZ0IsYUFBYTtBQUNoRTtBQUFBLE1BQ0Y7QUFDQSxXQUFLLGFBQWEseUVBQXVCLEVBQUUsR0FBRztBQUFBLElBQ2hELFdBQVcsUUFBUTtBQUNqQixhQUFPO0FBQUEsSUFDVDtBQUVBLFFBQUksU0FBUyxTQUFTLENBQUMsS0FBSyxnQkFBZ0IsQ0FBQyxLQUFLLGFBQWEsWUFBWSxJQUFJLElBQUk7QUFDakYsV0FBSyxlQUFlO0FBQ3BCLFdBQUssb0JBQW9CO0FBQUEsSUFDM0I7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLElBQUksY0FBa0M7QUFDcEMsV0FBTyxLQUFLO0FBQUEsRUFDZDtBQUFBLEVBRUEsc0JBQTRCO0FBQzFCLFFBQUksS0FBSyxjQUFjO0FBQ3JCLFdBQUssS0FBSyxRQUFRLEtBQUssY0FBYztBQUFBLFFBQ25DLFlBQVk7QUFBQSxRQUNaLGlCQUFpQixDQUFDLFNBQVMsVUFBVSxPQUFPO0FBQUEsUUFDNUMsbUJBQW1CO0FBQUEsUUFDbkIsZUFBZTtBQUFBLFFBQ2YsdUJBQXVCO0FBQUEsUUFDdkIsV0FBVztBQUFBLFFBQ1gsU0FBUztBQUFBLE1BQ1gsQ0FBQztBQUFBLElBQ0gsT0FBTztBQUNMLFdBQUssS0FBSyxXQUFXO0FBQUEsSUFDdkI7QUFDQSxTQUFLLE1BQU07QUFBQSxFQUNiO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0E7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLElBQUksTUFBTSxLQUFhO0FBQ3JCLFVBQU0sZUFBZSxLQUFLO0FBQzFCLFFBQUksVUFBVTtBQUNkLFFBQUksT0FBTyxZQUFZLFlBQVksQ0FBQyxRQUFRLFFBQVE7QUFDbEQsZ0JBQVUseURBQU07QUFBTixJQUNaO0FBR0EsUUFBSSxPQUFPLFFBQVEsTUFBTSxHQUFHO0FBQzVCLFdBQU8sS0FBSyxJQUFJLENBQUMsWUFBWSxRQUFRLEtBQUssRUFBRSxZQUFZLENBQUM7QUFHekQsVUFBTSxPQUFPLEtBQUssQ0FBQztBQUNuQixRQUFJLDJFQUF3QixDQUFDLElBQUksR0FBRztBQUNsQyxXQUFLLGFBQWE7QUFDbEIsV0FBSyxDQUFDLElBQUksS0FBSztBQUFBLElBQ2pCO0FBR0EsUUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHO0FBQ1osV0FBSyxLQUFLLFFBQVE7QUFBQSxJQUNwQjtBQUdBLFFBQUksOEVBQTJCLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyw4RUFBMkIsQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHO0FBQ2hGLFlBQU0sT0FBTyxLQUFLLENBQUM7QUFDbkIsV0FBSyxDQUFDLElBQUksS0FBSyxDQUFDO0FBQ2hCLFdBQUssQ0FBQyxJQUFJO0FBQUEsSUFDWjtBQUdBLFFBQUk7QUFDSixRQUFJO0FBQ0osUUFBSSx3RUFBcUIsQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHO0FBQ2xDLGNBQVEsS0FBSyxDQUFDO0FBQ2QsV0FBSyxVQUFVLEtBQUssQ0FBQztBQUFBLElBQ3ZCLE9BQU87QUFDTCxjQUFRLEtBQUs7QUFBQSxJQUNmO0FBQ0EsUUFBSSx3RUFBcUIsQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHO0FBQ2xDLGNBQVEsS0FBSyxDQUFDO0FBQ2QsV0FBSyxVQUFVLEtBQUssQ0FBQztBQUFBLElBQ3ZCLE9BQU87QUFDTCxjQUFRLEtBQUs7QUFBQSxJQUNmO0FBRUEsVUFBTSxXQUFXLDJFQUFvQixDQUFDLE9BQU8sT0FBTyxLQUFLLFVBQVU7QUFDbkUsVUFBTSxvQkFBb0IsaUJBQWlCO0FBQzNDLFFBQUksbUJBQW1CO0FBQ3JCLFdBQUssU0FBUztBQUNkLFdBQUssYUFBYSxrRUFBZ0IsRUFBRSxRQUFRO0FBQzVDLFdBQUssTUFBTTtBQUFBLElBQ2IsV0FBVyxDQUFDLEtBQUssYUFBYSxPQUFPLEdBQUc7QUFDdEMsV0FBSyxhQUFhLGtFQUFnQixFQUFFLFlBQVk7QUFBQSxJQUNsRDtBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLElBQUksUUFBZ0I7QUFDbEIsV0FBTyxLQUFLO0FBQUEsRUFDZDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxJQUFJLE9BQU8sS0FBYTtBQUN0QixRQUFJLE9BQU8sUUFBUSxZQUFZLENBQUMsSUFBSSxRQUFRO0FBQzFDO0FBQUEsSUFDRjtBQUVBLFFBQUksU0FBUztBQUNiLFFBQUksQ0FBQyx3RUFBcUIsQ0FBQyxHQUFHLEdBQUc7QUFDL0IsZUFBUyxrRUFBZTtBQUFELElBQ3pCO0FBR0EsUUFBSSxLQUFLLGFBQWEsb0VBQWtCLEdBQUc7QUFDekMsV0FBSyxnQkFBZ0Isb0VBQWtCO0FBQUEsSUFDekM7QUFFQSxRQUFJLEtBQUssWUFBWSxRQUFRO0FBQzNCLFdBQUssVUFBVTtBQUNmLFlBQU0sU0FBUyxLQUFLO0FBSXBCLFdBQUssUUFBUSwyRUFBb0IsQ0FBQyxRQUFRLFFBQVEsTUFBTTtBQUFBLElBQzFEO0FBQUEsRUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxJQUFJLFNBQWlCO0FBQ25CLFdBQU8sS0FBSztBQUFBLEVBQ2Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLElBQUksT0FBTyxLQUFhO0FBQ3RCLFFBQUksT0FBTyxRQUFRLFlBQVksQ0FBQyxJQUFJLFFBQVE7QUFDMUM7QUFBQSxJQUNGO0FBRUEsUUFBSSxTQUFTLGtFQUFlO0FBQzVCLFFBQUksd0VBQXFCLENBQUMsR0FBRyxHQUFHO0FBQzlCLGVBQVM7QUFBQSxJQUNYO0FBR0EsUUFBSSxLQUFLLGFBQWEsb0VBQWtCLEdBQUc7QUFDekMsV0FBSyxnQkFBZ0Isb0VBQWtCO0FBQUEsSUFDekM7QUFFQSxRQUFJLEtBQUssWUFBWSxRQUFRO0FBQzNCLFdBQUssVUFBVTtBQUNmLFlBQU0sU0FBUyxLQUFLO0FBSXBCLFdBQUssUUFBUSwyRUFBb0IsQ0FBQyxRQUFRLFFBQVEsTUFBTTtBQUFBLElBQzFEO0FBQUEsRUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsSUFBSSxTQUFpQjtBQUNuQixXQUFPLEtBQUs7QUFBQSxFQUNkO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPQSxJQUFJLFVBQVUsS0FBYTtBQUN6QixRQUFJLE9BQU8sUUFBUSxZQUFZLENBQUMsSUFBSSxRQUFRO0FBQzFDO0FBQUEsSUFDRjtBQUdBLFFBQUk7QUFDSixRQUFJLDJFQUF3QixDQUFDLEdBQUcsR0FBRztBQUNqQyxhQUFPO0FBQUEsSUFDVCxPQUFPO0FBQ0wsYUFBTyxxRUFBa0I7QUFBRCxJQUMxQjtBQUlBLFFBQUksS0FBSyxhQUFhLHVFQUFxQixHQUFHO0FBQzVDLFdBQUssZ0JBQWdCLHVFQUFxQjtBQUFBLElBQzVDO0FBR0EsUUFBSSxLQUFLLGVBQWUsTUFBTTtBQUM1QixVQUFJLFNBQVMsS0FBSztBQUNsQixVQUFJLFNBQVMsS0FBSztBQUVsQixXQUFLLGFBQWE7QUFJbEIsVUFBSSxTQUFTLFVBQVU7QUFDckIsaUJBQVM7QUFDVCxpQkFBUztBQUFBLE1BQ1gsV0FBVyw4RUFBMkIsQ0FBQyxJQUFJLEdBQUc7QUFDNUMsaUJBQVM7QUFBQSxNQUNYLE9BQU87QUFDTCxpQkFBUztBQUFBLE1BQ1g7QUFDQSxXQUFLLFFBQVEsMkVBQW9CLENBQUMsUUFBUSxRQUFRLElBQUk7QUFBQSxJQUN4RDtBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLElBQUksWUFBb0I7QUFDdEIsV0FBTyxLQUFLO0FBQUEsRUFDZDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxJQUFJLG9CQUE0QjtBQUM5QixXQUFPLEtBQUssaUJBQWlCLEtBQUssU0FBUztBQUFBLEVBQzdDO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxJQUFJLFlBQTJCO0FBQzdCLFdBQU8sS0FBSyxhQUFhLHVFQUFxQjtBQUFBLEVBQ2hEO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLElBQUksVUFBVSxPQUErQjtBQUMzQyxVQUFNLE1BQU0sa0ZBQWMsQ0FBQyxLQUFLO0FBQ2hDLFFBQUksS0FBSztBQUNQLFdBQUssYUFBYSx1RUFBcUIsRUFBRSxHQUFHO0FBQUEsSUFDOUMsT0FBTztBQUNMLFdBQUssZ0JBQWdCLHVFQUFxQjtBQUFBLElBQzVDO0FBQ0EsU0FBSyxxQkFBcUIsR0FBRztBQUFBLEVBQy9CO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0EscUJBQXFCLEtBQThCO0FBQ2pELFFBQUksS0FBSyxrQkFBa0IsWUFBWTtBQUNyQyxXQUFLLFNBQVMsYUFBYSxxRUFBbUIsRUFBRSxHQUFHO0FBQ25ELFdBQUssV0FBVyxNQUFNLFlBQVksMkVBQXdCLEVBQUUsTUFBTTtBQUNsRTtBQUFBLElBQ0Y7QUFFQSxVQUFNLGdCQUFpQixLQUFLO0FBQzVCLFFBQUkseUJBQXlCLFNBQVMsS0FBSztBQUMzQyxRQUFJLGNBQWMsa0ZBQWMsQ0FBQyxPQUFPLEtBQUssU0FBUztBQUV0RCxRQUFJLGVBQWU7QUFDakIsK0JBQXlCLGNBQWM7QUFBQSxJQUN6QyxXQUFXLFFBQVE7QUFDakIsK0JBQXlCLE9BQU87QUFDaEMsb0JBQWMsR0FBRztBQUFBLElBQ25CO0FBRUEsUUFBSSxhQUFhO0FBQ2YsVUFBSSx5QkFBeUIsU0FBUyxXQUFXLEdBQUc7QUFDbEQsc0JBQWMsR0FBRztBQUFBLE1BQ25CO0FBQUEsSUFDRixPQUFPO0FBQ0wsWUFBTSxxQkFBcUIsU0FBUyxPQUFPLGlCQUFpQixLQUFLLE9BQVEsRUFBRSxNQUFNO0FBQ2pGLFVBQUksMEJBQTBCLG9CQUFvQjtBQUNoRCxzQkFBYyxHQUFHO0FBQUEsTUFDbkI7QUFBQSxJQUNGO0FBRUEsUUFBSSxLQUFLLFdBQVc7QUFDbEIsVUFBSSxLQUFLO0FBQVMsYUFBSyxRQUFRLGFBQWEscUVBQW1CLEVBQUUsR0FBRztBQUNwRSxVQUFJLGFBQWE7QUFDZixhQUFLLFVBQVUsTUFBTSxZQUFZLDJFQUF3QixFQUFFLEdBQUcsYUFBYTtBQUMzRSxhQUFLLFVBQVUsVUFBVSxJQUFJLGVBQWU7QUFBQSxNQUM5QyxPQUFPO0FBQ0wsYUFBSyxVQUFVLFVBQVUsT0FBTyxlQUFlO0FBQy9DLGFBQUssVUFBVSxNQUFNLGVBQWUsMkVBQXdCO0FBQUEsTUFDOUQ7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9BLGlCQUFpQixhQUE4QjtBQUM3QyxZQUFRLGFBQWE7QUFBQSxNQUNuQixLQUFLO0FBQ0gsZUFBTztBQUFBLE1BQ1QsS0FBSztBQUNILGVBQU87QUFBQSxNQUNULEtBQUs7QUFDSCxlQUFPO0FBQUEsTUFDVCxLQUFLO0FBQ0gsZUFBTztBQUFBLE1BQ1Q7QUFDRSxlQUFPO0FBQUEsSUFDWDtBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPQSxnQkFBZ0IsYUFBOEI7QUFDNUMsWUFBUSxhQUFhO0FBQUEsTUFDbkIsS0FBSztBQUFBLE1BQ0wsS0FBSztBQUNILGVBQU87QUFBQSxNQUNULEtBQUs7QUFBQSxNQUNMLEtBQUs7QUFDSCxlQUFPO0FBQUEsTUFDVDtBQUNFLGVBQU87QUFBQSxJQUNYO0FBQUEsRUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsSUFBSSxTQUFTLEtBQWM7QUFDekIsVUFBTSxVQUFVLHNGQUFZLENBQUMsR0FBRztBQUNoQyxRQUFJLEtBQUssY0FBYyxTQUFTO0FBQzlCLFdBQUssWUFBWTtBQUNqQixVQUFJLFNBQVM7QUFDWCxhQUFLLGFBQWEscUVBQW1CLEVBQUUsRUFBRTtBQUFBLE1BQzNDLE9BQU87QUFDTCxhQUFLLGdCQUFnQixxRUFBbUI7QUFBQSxNQUMxQztBQUNBLFdBQUssaUJBQWlCO0FBQUEsSUFDeEI7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxJQUFJLFdBQW9CO0FBQ3RCLFdBQU8sS0FBSztBQUFBLEVBQ2Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsbUJBQXlCO0FBQ3ZCLFNBQUssV0FBVyxVQUFVLEtBQUssV0FBVyxRQUFRLFFBQVEsRUFBRSxVQUFVO0FBQUEsRUFDeEU7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLElBQUksZUFBZSxLQUFhO0FBQzlCLFVBQU0sYUFBYSxLQUFLO0FBQ3hCLFFBQUksUUFBUSxjQUFjLDRFQUF5QixDQUFDLEdBQUcsR0FBRztBQUN4RCxXQUFLLGtCQUFrQjtBQUN2QixXQUFLLGFBQWEsNEVBQTBCLEVBQUUsR0FBRztBQUNqRCxXQUFLLHVCQUF1QixZQUFZLEdBQUc7QUFBQSxJQUM3QyxPQUFPO0FBQ0wsV0FBSyx1QkFBdUIsSUFBSSxVQUFVO0FBQUEsSUFDNUM7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxJQUFJLGlCQUF5QjtBQUMzQixXQUFPLEtBQUs7QUFBQSxFQUNkO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFRQSx1QkFBdUIsY0FBc0IsVUFBa0I7QUFDN0QsUUFBSSxDQUFDLEtBQUs7QUFBVztBQUNyQixVQUFNLFNBQVMsS0FBSyxVQUFVO0FBQzlCLFFBQUk7QUFBYyxhQUFPLE9BQU8sYUFBYSxjQUFjO0FBQzNELFdBQU8sSUFBSSxhQUFhLFVBQVU7QUFBQSxFQUNwQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsSUFBSSxNQUFNLEtBQXVCO0FBQy9CLFVBQU0sVUFBVSxzRkFBWSxDQUFDLEdBQUc7QUFDaEMsUUFBSSxLQUFLLFdBQVcsU0FBUztBQUMzQixXQUFLLFNBQVU7QUFDZixVQUFJLFNBQVM7QUFDWCxhQUFLLGFBQWEsa0VBQWdCLEVBQUUsRUFBRTtBQUFBLE1BQ3hDLE9BQU87QUFDTCxhQUFLLGdCQUFnQixrRUFBZ0I7QUFBQSxNQUN2QztBQUNBLFdBQUssTUFBTTtBQUFBLElBQ2I7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxJQUFJLFFBQTBCO0FBQzVCLFdBQU8sS0FBSztBQUFBLEVBQ2Q7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxJQUFJLGVBQWUsS0FBeUI7QUFDMUMsUUFBSSxFQUFFLGVBQWUsZUFBZSxlQUFlLGFBQWE7QUFDOUQ7QUFBQSxJQUNGO0FBQ0EsUUFBSSxLQUFLLG9CQUFvQixLQUFLO0FBQ2hDLFdBQUssa0JBQWtCO0FBQ3ZCLFdBQUssTUFBTTtBQUFBLElBQ2I7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxJQUFJLGlCQUFxQztBQUN2QyxXQUFPLEtBQUs7QUFBQSxFQUNkO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0EsU0FBUyxpRUFBYztBQUFEO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBUXRCLElBQUksTUFBTSxLQUFvQjtBQUM1QixVQUFNLGFBQWEsS0FBSztBQUN4QixRQUFJLFVBQVUsaUVBQWM7QUFDNUIsUUFBSSxPQUFPLHVFQUFvQixDQUFDLEdBQUcsR0FBRztBQUNwQyxnQkFBVTtBQUFBLElBQ1o7QUFFQSxRQUFJLFlBQVksWUFBWTtBQUMxQixXQUFLLFNBQVM7QUFDZCxVQUFJLFlBQVksaUVBQWMsRUFBRTtBQUM5QixhQUFLLGFBQWEsa0VBQWdCLEVBQUUsR0FBRyxTQUFTO0FBQUEsTUFDbEQsT0FBTztBQUNMLGFBQUssZ0JBQWdCLGtFQUFnQjtBQUFBLE1BQ3ZDO0FBQ0EsV0FBSyxtQkFBbUIsWUFBWSxPQUFPO0FBQUEsSUFDN0M7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxJQUFJLFFBQXVCO0FBQ3pCLFVBQU0sT0FBTyxLQUFLLGFBQWEsa0VBQWdCO0FBQy9DLFFBQUksQ0FBQyxNQUFNO0FBQ1QsYUFBTyxpRUFBYztBQUFELElBQ3RCO0FBQ0EsV0FBTztBQUFBLEVBQ1Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPQSxtQkFBbUIsWUFBMkIsUUFBdUI7QUFDbkUsUUFBSSxDQUFDLEtBQUs7QUFBVztBQUVyQixVQUFNLFVBQVUsS0FBSztBQUNyQixVQUFNLFlBQVksS0FBSyxTQUFTO0FBQ2hDLFVBQU0sU0FBUyxXQUFXO0FBRTFCLFFBQUk7QUFBUyxjQUFRLFNBQVM7QUFDOUIsUUFBSSxVQUFVO0FBQ2QsUUFBSSxlQUFlO0FBQUksaUJBQVcsT0FBTyxHQUFHLDhEQUFXO0FBQUEsYUFDOUM7QUFBWSxpQkFBVyxPQUFPLFVBQVU7QUFDakQsUUFBSSxVQUFVLENBQUMsUUFBUTtBQUNyQixpQkFBVyxJQUFJLE1BQU07QUFDckIsaUJBQVcsSUFBSTtBQUFBLElBQ2pCO0FBQ0EsYUFBUyxhQUFhLFFBQVEsT0FBTztBQUFBLEVBQ3ZDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLElBQUksVUFBMEM7QUFDNUMsV0FBTyxLQUFLLFdBQVcsY0FBYyxRQUFRO0FBQUEsRUFDL0M7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLElBQUksWUFBWSxLQUFrQztBQUNoRCxVQUFNLFdBQVcsT0FBTyxRQUFRLFlBQVksSUFBSTtBQUNoRCxVQUFNLFNBQVMsZUFBZSxlQUFlLGVBQWU7QUFFNUQsUUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRO0FBQ3hCLFVBQUksS0FBSyxpQkFBaUIsTUFBTTtBQUM5QixhQUFLLGVBQWU7QUFDcEIsYUFBSyxnQkFBZ0IseUVBQXVCO0FBQUEsTUFDOUM7QUFDQTtBQUFBLElBQ0Y7QUFFQSxRQUFJLE9BQTJCO0FBQy9CLFFBQUksVUFBVTtBQUVaLFlBQU0sV0FBVyxzRkFBa0IsQ0FBRSxJQUFZO0FBQ2pELGFBQU8sU0FBUyxjQUFjLEdBQUc7QUFDakMsVUFBSSxFQUFFLGdCQUFnQixlQUFlLGdCQUFnQixhQUFhO0FBQ2hFO0FBQUEsTUFDRjtBQUNBLFdBQUssYUFBYSx5RUFBdUIsRUFBRSxHQUFHO0FBQUEsSUFDaEQsV0FBVyxRQUFRO0FBQ2pCLGFBQU87QUFBQSxJQUNUO0FBRUEsUUFBSSxTQUFTLFNBQVMsQ0FBQyxLQUFLLGdCQUFnQixDQUFDLEtBQUssYUFBYSxZQUFZLElBQUksSUFBSTtBQUNqRixXQUFLLGVBQWU7QUFDcEIsV0FBSyxtQkFBbUIsSUFBSSxLQUFLLEtBQUs7QUFBQSxJQUN4QztBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsSUFBSSxjQUFrQztBQUNwQyxXQUFPLEtBQUssZ0JBQWdCLEtBQUs7QUFBQSxFQUNuQztBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0E7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLElBQUksY0FBYyxLQUFhO0FBQzdCLFVBQU0sZUFBZSxLQUFLO0FBQzFCLFFBQUksMkVBQXdCLENBQUMsR0FBRyxHQUFHO0FBQ2pDLFdBQUssYUFBYSwyRUFBeUIsRUFBRSxHQUFHO0FBQ2hELFdBQUssaUJBQWlCO0FBRXRCLFVBQUksUUFBUSxjQUFjO0FBQ3hCLGFBQUssc0JBQXNCLGNBQWMsR0FBRztBQUFBLE1BQzlDLE9BQU87QUFDTCxhQUFLLHNCQUFzQixJQUFJLFlBQVk7QUFBQSxNQUM3QztBQUVBLFdBQUssTUFBTTtBQUFBLElBQ2I7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxJQUFJLGdCQUF3QjtBQUMxQixXQUFPLEtBQUs7QUFBQSxFQUNkO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFRQSxzQkFBc0IsY0FBc0IsVUFBa0I7QUFDNUQsUUFBSSxDQUFDLEtBQUs7QUFBVztBQUNyQixVQUFNLFNBQVMsS0FBSyxVQUFVO0FBQzlCLFFBQUk7QUFBYyxhQUFPLE9BQU8sWUFBWSxjQUFjO0FBQzFELFdBQU8sSUFBSSxZQUFZLFVBQVU7QUFBQSxFQUNuQztBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0Esa0NBQXdDO0FBQ3RDLFFBQUksQ0FBQyxLQUFLLGFBQWEsQ0FBQyxLQUFLO0FBQVM7QUFDdEMsVUFBTSxLQUFLLEtBQUssVUFBVTtBQUMxQixPQUFHLE9BQU8sY0FBYztBQUV4QixVQUFNLHNCQUFzQixLQUFLLFFBQVEsc0JBQXNCLEVBQUU7QUFDakUsVUFBTSx3QkFBd0IsS0FBSyxVQUFVLHNCQUFzQixFQUFFO0FBQ3JFLFVBQU0sY0FBYyxzQkFBc0I7QUFDMUMsUUFBSSxhQUFhO0FBQ2YsU0FBRyxJQUFJLGNBQWM7QUFBQSxJQUN2QjtBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLElBQUksS0FBSyxLQUFhO0FBQ3BCLFVBQU0sYUFBYSxLQUFLO0FBQ3hCLFFBQUksT0FBTyxlQUFlLE9BQU8saUVBQWMsQ0FBQyxHQUFHLEdBQUc7QUFDcEQsV0FBSyxRQUFRO0FBQ2IsV0FBSyxhQUFhLGlFQUFlLEVBQUUsS0FBSyxLQUFLO0FBQzdDLFdBQUssdUJBQXVCLFlBQVksR0FBRztBQUMzQyxXQUFLLE1BQU07QUFBQSxJQUNiLE9BQU87QUFDTCxXQUFLLHVCQUF1QixJQUFJLFVBQVU7QUFBQSxJQUM1QztBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLElBQUksT0FBZTtBQUNqQixXQUFPLEtBQUs7QUFBQSxFQUNkO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0EsdUJBQXVCLGFBQXFCLFNBQWlCO0FBQzNELFFBQUksQ0FBQyxLQUFLO0FBQVc7QUFDckIsVUFBTSxTQUFTLEtBQUssVUFBVTtBQUM5QixRQUFJO0FBQWEsYUFBTyxPQUFPLFdBQVc7QUFDMUMsV0FBTyxJQUFJLE9BQU87QUFBQSxFQUNwQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0E7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLElBQUksUUFBUSxLQUFjO0FBQ3hCLFVBQU0sVUFBVSxzRkFBWSxDQUFDLEdBQUc7QUFDaEMsUUFBSSxLQUFLLGFBQWEsU0FBUztBQUM3QixXQUFLLFdBQVc7QUFDaEIsVUFBSSxTQUFTO0FBQ1gsYUFBSyxhQUFhLG9FQUFrQixFQUFFLEVBQUU7QUFBQSxNQUMxQyxPQUFPO0FBQ0wsYUFBSyxnQkFBZ0Isb0VBQWtCO0FBQUEsTUFDekM7QUFDQSxXQUFLLGtCQUFrQjtBQUFBLElBQ3pCO0FBQUEsRUFDRjtBQUFBLEVBRUEsSUFBSSxVQUFtQjtBQUNyQixXQUFPLEtBQUs7QUFBQSxFQUNkO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0EsTUFBTSxvQkFBb0I7QUFDeEIsUUFBSSxDQUFDLEtBQUs7QUFBVztBQUNyQixVQUFNLEtBQUssS0FBSyxVQUFVO0FBQzFCLFFBQUksS0FBSyxZQUFZLENBQUMsR0FBRyxTQUFTLE1BQU0sR0FBRztBQUN6QyxZQUFNLEtBQUssS0FBSztBQUFBLElBQ2xCO0FBQ0EsUUFBSSxDQUFDLEtBQUssWUFBWSxDQUFDLEtBQUssYUFBYSxhQUFhLEdBQUc7QUFDdkQsWUFBTSxLQUFLLEtBQUs7QUFBQSxJQUNsQjtBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsSUFBSSxFQUFFLEtBQWE7QUFDakIsUUFBSSxVQUFVLFNBQVMsS0FBSyxTQUFTLEdBQUcsRUFBRTtBQUMxQyxRQUFJLE9BQU8sTUFBTSxPQUFPLEdBQUc7QUFDekIsZ0JBQVU7QUFBQSxJQUNaO0FBRUEsUUFBSSxZQUFZLEtBQUssSUFBSTtBQUN2QixXQUFLLEtBQUs7QUFDVixXQUFLLGFBQWEsOERBQVksRUFBRSxRQUFRLFNBQVMsQ0FBQztBQUFBLElBQ3BEO0FBQUEsRUFDRjtBQUFBLEVBRUEsSUFBSSxJQUFZO0FBQ2QsV0FBTyxLQUFLO0FBQUEsRUFDZDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxJQUFJLEVBQUUsS0FBYTtBQUNqQixRQUFJLFVBQVUsU0FBUyxLQUFLLFNBQVMsR0FBRyxFQUFFO0FBQzFDLFFBQUksT0FBTyxNQUFNLE9BQU8sR0FBRztBQUN6QixnQkFBVTtBQUFBLElBQ1o7QUFFQSxRQUFJLFlBQVksS0FBSyxJQUFJO0FBQ3ZCLFdBQUssS0FBSztBQUNWLFdBQUssYUFBYSw4REFBWSxFQUFFLFFBQVEsU0FBUyxDQUFDO0FBQUEsSUFDcEQ7QUFBQSxFQUNGO0FBQUEsRUFFQSxJQUFJLElBQVk7QUFDZCxXQUFPLEtBQUs7QUFBQSxFQUNkO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQVNBLFlBQ0UsSUFBbUIsTUFDbkIsSUFBbUIsTUFDbkIsU0FBeUIsTUFDekIsY0FBOEIsTUFDOUI7QUFDQSxVQUFNLE9BQVk7QUFDbEIsUUFBSSxDQUFDLE9BQU8sTUFBTSxDQUFDO0FBQUcsV0FBSyxJQUFJO0FBQy9CLFFBQUksQ0FBQyxPQUFPLE1BQU0sQ0FBQztBQUFHLFdBQUssSUFBSTtBQUMvQixRQUFJO0FBQVEsV0FBSyxVQUFVO0FBQzNCLFFBQUk7QUFBYSxXQUFLLE1BQU07QUFBQSxFQUM5QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9BLE1BQU0sT0FBTztBQUNYLFFBQUksQ0FBQyxLQUFLLFdBQVcsQ0FBQyxLQUFLLFdBQVc7QUFDcEM7QUFBQSxJQUNGO0FBR0EsU0FBSyxNQUFNO0FBRVgsU0FBSyxXQUFXLEtBQUssZ0JBQWdCO0FBRXJDLFNBQUssZ0JBQWdCLGFBQWE7QUFHbEMsU0FBSyxVQUFVLFVBQVUsSUFBSSxNQUFNO0FBQ25DLFNBQUssT0FBTztBQUVaLFFBQUksS0FBSyxVQUFVO0FBQ2pCLFlBQU0sd0ZBQW9CLENBQUMsS0FBSyxXQUFXLFNBQVM7QUFBQSxJQUN0RDtBQUdBLFNBQUssZ0JBQWdCO0FBRXJCLFNBQUssYUFBYSxRQUFRLE1BQU07QUFBQSxNQUM5QixTQUFTO0FBQUEsTUFDVCxRQUFRO0FBQUEsUUFDTixNQUFNO0FBQUEsTUFDUjtBQUFBLElBQ0YsQ0FBQztBQUFBLEVBQ0g7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPQSxNQUFNLE9BQU87QUFDWCxRQUFJLEtBQUssV0FBVyxDQUFDLEtBQUssV0FBVztBQUNuQztBQUFBLElBQ0Y7QUFFQSxTQUFLLE9BQU87QUFDWixTQUFLLGdCQUFnQjtBQUNyQixTQUFLLFVBQVUsVUFBVSxPQUFPLE1BQU07QUFFdEMsUUFBSSxLQUFLLFVBQVU7QUFDakIsWUFBTSx3RkFBb0IsQ0FBQyxLQUFLLFdBQVcsU0FBUztBQUFBLElBQ3REO0FBR0EsU0FBSyxhQUFhLFFBQVEsTUFBTTtBQUFBLE1BQzlCLFNBQVM7QUFBQSxNQUNULFFBQVE7QUFBQSxRQUNOLE1BQU07QUFBQSxNQUNSO0FBQUEsSUFDRixDQUFDO0FBRUQsU0FBSyxhQUFhLGVBQWUsTUFBTTtBQUFBLEVBQ3pDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLFFBQWM7QUFFWixRQUFJLEtBQUssV0FBVyxLQUFLLGtCQUFrQixZQUFZO0FBQ3JELFdBQUsscUJBQXFCO0FBRTFCLFlBQU0sRUFBRSxZQUFZLElBQUk7QUFDeEIsVUFBSSxDQUFDLGFBQWE7QUFDaEIsYUFBSyxlQUFlO0FBQUEsTUFDdEIsT0FBTztBQUNMLGFBQUssb0JBQW9CO0FBQUEsTUFDM0I7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9BLGlCQUF1QjtBQUNyQixRQUFJLFlBQVksS0FBSyxzQkFBc0I7QUFDM0MsUUFBSSxJQUFJLEtBQUs7QUFDYixRQUFJLElBQUksS0FBSztBQUViLFlBQVEsS0FBSyxRQUFRO0FBQUEsTUFDbkIsS0FBSztBQUNILGFBQUssVUFBVTtBQUNmO0FBQUEsTUFDRixLQUFLO0FBQ0gsYUFBSyxVQUFVLFFBQVE7QUFDdkI7QUFBQSxNQUNGO0FBQ0U7QUFBQSxJQUNKO0FBRUEsWUFBUSxLQUFLLFFBQVE7QUFBQSxNQUNuQixLQUFLO0FBQ0gsYUFBSyxVQUFVO0FBQ2Y7QUFBQSxNQUNGLEtBQUs7QUFDSCxhQUFLLFVBQVUsU0FBUztBQUN4QjtBQUFBLE1BQ0Y7QUFDRTtBQUFBLElBQ0o7QUFHQSxjQUFVLElBQUk7QUFDZCxjQUFVLElBQUk7QUFHZCxnQkFBWSxLQUFLLE9BQU8sU0FBUztBQUdqQyxnQkFBWSxLQUFLLDhCQUE4QixLQUFLLFlBQTJCLFdBQVcsS0FBSyxnQkFBZ0I7QUFHL0csUUFBSSxPQUFPLEtBQUssWUFBWSxZQUFZO0FBQ3RDLGtCQUFZLEtBQUssUUFBUSxTQUFTO0FBQUEsSUFDcEM7QUFFQSxTQUFLLHlCQUF5QixTQUFTO0FBQUEsRUFDekM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPQSxzQkFBNEI7QUFDMUIsUUFBSSxDQUFDLEtBQUs7QUFBYTtBQUd2QixRQUFJLFlBQVksS0FBSyxzQkFBc0I7QUFFM0MsU0FBSyxtQkFBbUIsS0FBSyxrQkFBa0IsU0FBUztBQUV4RCxVQUFNLGVBQWUsS0FBSyxpQkFBaUIsS0FBSyxTQUFTO0FBQ3pELFVBQU0saUJBQWlCLEtBQUssY0FBYyxLQUFLLG9CQUMxQyxLQUFLLGlCQUFpQixLQUFLLFNBQVMsTUFBTSxLQUFLO0FBQ3BELFFBQUksZUFBZTtBQUFBLE1BQ2pCLE1BQU0sS0FBSyxjQUFjLEtBQUssb0JBQW9CLENBQUM7QUFBQSxNQUNuRDtBQUFBLE1BQ0E7QUFBQSxNQUNBLFlBQVksS0FBSztBQUFBLE1BQ2pCLEdBQUcsaUJBQWlCLEtBQUssSUFBSSxLQUFLO0FBQUEsTUFDbEMsR0FBRyxpQkFBaUIsS0FBSyxJQUFJLEtBQUs7QUFBQSxJQUNwQztBQUVBLFFBQUksT0FBTyxLQUFLLGVBQWUsWUFBWTtBQUN6QyxxQkFBZSxLQUFLLFdBQVcsWUFBWTtBQUFBLElBQzdDO0FBRUEsUUFBSSxJQUFJLGFBQWE7QUFDckIsUUFBSSxJQUFJLGFBQWE7QUFFckIsVUFBTSxhQUFhLEtBQUssWUFBWSxzQkFBc0I7QUFDMUQsVUFBTSxZQUFZLEtBQUssb0JBQW9CLEtBQUs7QUFDaEQsUUFBSSxpQkFBaUI7QUFDckIsUUFBSSxpQkFBaUI7QUFHckIsU0FBSyxXQUFXLFVBQVUsT0FBTyxXQUFXLEtBQUssY0FBYyxLQUFLLG9CQUFvQixDQUFDLGNBQWM7QUFRdkcsUUFBSSx3RUFBcUIsQ0FBQyxTQUFTLEdBQUc7QUFDcEMsY0FBUSxXQUFXO0FBQUEsUUFDakIsS0FBSztBQUNILGNBQUksV0FBVyxNQUFNLFVBQVUsU0FBUztBQUN4QztBQUFBLFFBQ0YsS0FBSztBQUNILGNBQUksV0FBVyxTQUFTO0FBQ3hCO0FBQUEsUUFDRjtBQUNFLGNBQUssV0FBVyxNQUFNLFdBQVcsU0FBUyxJQUFNLFVBQVUsU0FBUyxJQUFLO0FBQ3hFLDJCQUFpQjtBQUFBLE1BQ3JCO0FBRUEsY0FBUSxLQUFLLFFBQVE7QUFBQSxRQUNuQixLQUFLO0FBQ0gsY0FBSSxXQUFXLE9BQU87QUFDdEI7QUFBQSxRQUNGLEtBQUs7QUFDSCxjQUFJLFdBQVcsUUFBUSxVQUFVLFFBQVE7QUFDekM7QUFBQSxRQUNGO0FBQ0UsY0FBSyxXQUFXLE9BQU8sV0FBVyxRQUFRLElBQUssVUFBVSxRQUFRLElBQUk7QUFDckUsMkJBQWlCO0FBQUEsTUFDckI7QUFBQSxJQUNGO0FBS0EsUUFBSSx3RUFBcUIsQ0FBQyxTQUFTLEdBQUc7QUFDcEMsY0FBUSxXQUFXO0FBQUEsUUFDakIsS0FBSztBQUNILGNBQUksV0FBVyxPQUFPLFVBQVUsUUFBUTtBQUN4QztBQUFBLFFBQ0YsS0FBSztBQUNILGNBQUksV0FBVyxRQUFRO0FBQ3ZCO0FBQUEsUUFDRjtBQUNFLGNBQUksZ0JBQWdCO0FBQ2xCO0FBQUEsVUFDRjtBQUNBLGNBQUssV0FBVyxPQUFPLFdBQVcsUUFBUSxJQUFLLFVBQVUsUUFBUSxJQUFJO0FBQUEsTUFDekU7QUFFQSxjQUFRLEtBQUssUUFBUTtBQUFBLFFBQ25CLEtBQUs7QUFDSCxjQUFJLFdBQVcsTUFBTTtBQUNyQjtBQUFBLFFBQ0YsS0FBSztBQUNILGNBQUksV0FBVyxTQUFTLFVBQVUsU0FBUztBQUMzQztBQUFBLFFBQ0Y7QUFDRSxjQUFJLGdCQUFnQjtBQUNsQjtBQUFBLFVBQ0Y7QUFDQSxjQUFLLFdBQVcsTUFBTSxXQUFXLFNBQVMsSUFBTSxVQUFVLFNBQVMsSUFBSztBQUFBLE1BQzVFO0FBQUEsSUFDRjtBQUdBLFFBQUksY0FBYyxRQUFRO0FBQ3hCLFlBQU0saUJBQWlCLEtBQUssZ0JBQWdCO0FBQzVDLFlBQU0sa0JBQWtCLEtBQUssZ0JBQWdCO0FBRTdDLFVBQUksa0JBQWtCLGlCQUFpQjtBQUNyQyxhQUFLLGlCQUFpQixVQUFVLFNBQVM7QUFDekMsYUFBSyxrQkFBa0IsVUFBVSxVQUFVO0FBQUEsTUFDN0M7QUFBQSxJQUNGO0FBR0EsY0FBVSxJQUFJO0FBQ2QsY0FBVSxJQUFJO0FBR2QsZ0JBQVksS0FBSyxPQUFPLFNBQVM7QUFHakMsZ0JBQVksS0FBSyw4QkFBOEIsS0FBSyxZQUEyQixXQUFXLEtBQUssZ0JBQWdCO0FBRy9HLFFBQUksT0FBTyxLQUFLLFlBQVksWUFBWTtBQUN0QyxrQkFBWSxLQUFLLFFBQVEsU0FBUztBQUFBLElBQ3BDO0FBRUEsU0FBSyx5QkFBeUIsU0FBUztBQUd2QyxRQUFJLEtBQUssU0FBUyxLQUFLLFVBQVUsaUVBQWMsRUFBRTtBQUMvQyxXQUFLLG1CQUFtQixJQUFJLEtBQUssZ0JBQWdCO0FBQ2pELFdBQUssV0FBVyxLQUFLLGdCQUFnQjtBQUFBLElBQ3ZDO0FBQUEsRUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBUUEsUUFBUSxXQUE2QjtBQUNuQyxXQUFPO0FBQUEsRUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFTQSxXQUFXLFFBQWdDO0FBQ3pDLFdBQU87QUFBQSxFQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0EsT0FBTyxXQUE2QjtBQUVsQyxRQUFJLEtBQUssU0FBUyxDQUFDLEtBQUssZ0JBQWdCO0FBQ3RDLGFBQU87QUFBQSxJQUNUO0FBRUEsVUFBTSxnQkFBZ0IsT0FBTztBQUM3QixVQUFNLGlCQUFpQixPQUFPO0FBQzlCLFVBQU0sZ0JBQWdCLEtBQUssZUFBZSxzQkFBc0I7QUFDaEUsVUFBTSxRQUFRLEtBQUs7QUFFbkIsUUFBSSxTQUFTLFVBQVU7QUFDdkIsUUFBSSxTQUFTLFVBQVU7QUFFdkIsVUFBTSxZQUFZLFFBQVEsZ0JBQWdCLGNBQWM7QUFFeEQsVUFBTSxXQUFXLFFBQVEsSUFBSSxjQUFjO0FBRTNDLFVBQU0sVUFBVSxRQUFRLElBQUksY0FBYztBQUUxQyxVQUFNLGFBQWEsUUFBUSxpQkFBaUIsY0FBYztBQUUxRCxRQUFJLFVBQVUsUUFBUSxXQUFXO0FBQy9CLGdCQUFXLFVBQVUsUUFBUTtBQUFBLElBQy9CO0FBQ0EsUUFBSSxVQUFVLE9BQU8sVUFBVTtBQUM3QixnQkFBVyxLQUFLLElBQUksVUFBVSxJQUFJLElBQUk7QUFBQSxJQUN4QztBQUNBLFFBQUksVUFBVSxTQUFTLFlBQVk7QUFDakMsZ0JBQVcsVUFBVSxTQUFTO0FBQUEsSUFDaEM7QUFDQSxRQUFJLFVBQVUsTUFBTSxTQUFTO0FBQzNCLGdCQUFXLEtBQUssSUFBSSxVQUFVLEdBQUcsSUFBSTtBQUFBLElBQ3ZDO0FBRUEsY0FBVSxJQUFJO0FBQ2QsY0FBVSxJQUFJO0FBRWQsV0FBTztBQUFBLEVBQ1Q7QUFBQSxFQUVBLGtCQUFrQixXQUE0QjtBQUM1QyxRQUFJLENBQUMsS0FBSyxrQkFBa0IsQ0FBQyxLQUFLO0FBQWEsYUFBTztBQUV0RCxVQUFNLGdCQUFnQixPQUFPO0FBQzdCLFVBQU0saUJBQWlCLE9BQU87QUFDOUIsVUFBTSxVQUFVLEtBQUssZUFBZSxjQUFjO0FBQ2xELFVBQU0sVUFBVSxLQUFLLGVBQWUsYUFBYTtBQUNqRCxVQUFNLFFBQVEsS0FBSztBQUNuQixVQUFNLGdCQUFnQixLQUFLLGVBQWUsc0JBQXNCO0FBQ2hFLFVBQU0sYUFBYSxLQUFLLFlBQVksc0JBQXNCO0FBRzFELFVBQU0sY0FBYyxDQUFDLFFBQWdCO0FBQ25DLFVBQUksSUFBSTtBQUVSLGNBQVEsS0FBSztBQUFBLFFBQ1gsS0FBSztBQUNILGVBQUssUUFBUSxJQUFJLGNBQWMsUUFBUSxVQUFVLFdBQVcsT0FBTyxLQUFLO0FBQ3hFO0FBQUEsUUFDRixLQUFLO0FBQ0gsZUFBSyxRQUFRLGdCQUFnQixjQUFjLFNBQVMsVUFBVSxXQUFXLFFBQVEsS0FBSztBQUN0RjtBQUFBLFFBQ0YsS0FBSztBQUNILGVBQUssUUFBUSxJQUFJLGNBQWMsT0FBTyxVQUFVLFdBQVcsTUFBTSxLQUFLO0FBQ3RFO0FBQUEsUUFDRjtBQUNFLGVBQUssUUFBUSxpQkFBaUIsY0FBYyxVQUFVLFVBQVUsV0FBVyxTQUFTLEtBQUs7QUFDekY7QUFBQSxNQUNKO0FBRUEsYUFBTyxLQUFLLElBQUksQ0FBQztBQUFBLElBQ25CO0FBRUEsVUFBTSxhQUFhLEtBQUs7QUFDeEIsVUFBTSx5QkFBeUIsQ0FBQyxPQUFPLFFBQVEsRUFBRSxTQUFTLFVBQVUsSUFBSSxXQUFXO0FBR25GLFVBQU0sWUFBWTtBQUFBLE1BQ2hCLEtBQUs7QUFBQSxNQUNMLEtBQUssaUJBQWlCLEtBQUssU0FBUztBQUFBLE1BQ3BDLEtBQUssZ0JBQWdCLEtBQUssU0FBUztBQUFBLE1BQ25DLEtBQUssaUJBQWlCLEtBQUssZ0JBQWdCLEtBQUssU0FBUyxDQUFDO0FBQUEsSUFDNUQ7QUFHQSxVQUFNLE9BQU8sVUFBVSxLQUFLLENBQUMsU0FBUztBQUNwQyxZQUFNLE9BQU8sWUFBWSxJQUFJO0FBRTdCLGFBQU8sVUFBVSxzQkFBc0IsS0FBSztBQUFBLElBQzlDLENBQUM7QUFFRCxXQUFPLFFBQVE7QUFBQSxFQUNqQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9BLHlCQUF5QixXQUEwQjtBQUNqRCxTQUFLLE1BQU0sT0FBTyxHQUFHLFVBQVU7QUFDL0IsU0FBSyxNQUFNLE1BQU0sR0FBRyxVQUFVO0FBQUEsRUFDaEM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBU0Esa0JBQXdCO0FBQ3RCLFFBQUksQ0FBQyxLQUFLLGFBQWEsS0FBSyxrQkFBa0IsWUFBWTtBQUN4RDtBQUFBLElBQ0Y7QUFJQSxTQUFLLGdCQUFnQjtBQUdyQixVQUFNLFFBQVEsT0FBTyxpQkFBaUIsS0FBSyxXQUFXLElBQUk7QUFDMUQsVUFBTSxLQUFLLE1BQU0saUJBQWlCLG1CQUFtQixLQUNoRCxNQUFNLGlCQUFpQixnQkFBZ0IsS0FDdkMsTUFBTSxpQkFBaUIsV0FBVyxLQUFLO0FBQzVDLFFBQUksQ0FBQyxJQUFJO0FBQ1A7QUFBQSxJQUNGO0FBR0EsVUFBTSxTQUFjLEdBQUcsUUFBUSxxQkFBcUIsRUFBRSxFQUFFLE1BQU0sR0FBRztBQUNqRSxhQUFTLElBQUksR0FBRyxJQUFJLE9BQU8sUUFBUSxLQUFLO0FBQ3RDLFVBQUksTUFBTSxLQUFLLE9BQU8sQ0FBQyxJQUFJO0FBQUcsZUFBTyxDQUFDLElBQUk7QUFDMUMsVUFBSSxJQUFJLE1BQU0sT0FBTyxDQUFDLElBQUksS0FBSyxPQUFPLENBQUMsSUFBSSxLQUFLO0FBQzlDLGVBQU8sQ0FBQyxJQUFJLEtBQUssS0FBSyxPQUFPLENBQUMsQ0FBQztBQUFBLE1BQ2pDO0FBQ0EsVUFBSSxNQUFNLE9BQU8sU0FBUyxLQUFLLE9BQU8sQ0FBQyxJQUFJLEdBQUc7QUFDNUMsZUFBTyxDQUFDLElBQUk7QUFBQSxNQUNkO0FBQUEsSUFDRjtBQUVBLFNBQUssVUFBVSxNQUFNLFlBQVksWUFBWSxPQUFPLEtBQUs7QUFBQSxFQUMzRDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxrQkFBa0I7QUFDaEIsU0FBSyxXQUFXLE1BQU0sZUFBZSxXQUFXO0FBQUEsRUFDbEQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFVQSw4QkFBOEIsTUFBbUIsTUFBZSxlQUE2QztBQUMzRyxVQUFNLFdBQVcsbUZBQWUsQ0FBQyxRQUFRLEtBQUssc0JBQXNCLENBQUM7QUFDckUsUUFBSSxzQkFBc0I7QUFDMUIsUUFBSSxpQkFBaUI7QUFFckIsVUFBTSx5QkFBeUIsQ0FBQyxXQUFnQjtBQUM5QyxVQUFJO0FBQ0osVUFBSTtBQUVKLFVBQUksVUFBVSxDQUFDLHFCQUFxQjtBQUNsQyxZQUFJLE9BQU8sU0FBUyxNQUFNLHVCQUF1QjtBQUMvQyxtQkFBUyxPQUFPO0FBQUEsUUFDbEI7QUFDQSxZQUFJLGtCQUFrQixlQUFlLGtCQUFrQixZQUFZO0FBQ2pFLHdCQUFjLGlCQUFpQixNQUFNO0FBQ3JDLHVCQUFhLE9BQU8sc0JBQXNCO0FBQzFDLGdCQUFNLGFBQWEsaUJBQWlCO0FBR3BDLGNBQUksQ0FBQyxnQkFBZ0I7QUFDbkIsZ0JBQUksV0FBVyxlQUFlLEdBQUc7QUFDL0IsdUJBQVMsS0FBTSxXQUFXO0FBQzFCLCtCQUFpQjtBQUFBLFlBQ25CO0FBQ0EsZ0JBQUksV0FBVyxjQUFjLEdBQUc7QUFDOUIsdUJBQVMsS0FBTSxXQUFXO0FBQzFCLCtCQUFpQjtBQUFBLFlBQ25CO0FBQUEsVUFDRjtBQUdBLGNBQUksWUFBWSxhQUFhLFlBQVk7QUFDdkMscUJBQVMsS0FBSyxXQUFXO0FBQ3pCLHFCQUFTLEtBQUssV0FBVztBQUN6QixrQ0FBc0I7QUFBQSxVQUN4QjtBQUFBLFFBQ0Y7QUFDQSxZQUFJLE9BQU8sWUFBWTtBQUNyQixpQ0FBdUIsT0FBTyxVQUFVO0FBQUEsUUFDMUM7QUFBQSxNQUNGO0FBQUEsSUFDRjtBQUVBLDJCQUF1QixJQUFJO0FBQzNCLFdBQU87QUFBQSxFQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFRQSxXQUFXLFdBQTBCO0FBQ25DLFVBQU0sUUFBUSxhQUFhLEtBQUs7QUFDaEMsVUFBTSxVQUFVLEtBQUs7QUFDckIsVUFBTSxVQUFVLEtBQUs7QUFDckIsVUFBTSxTQUFTLEtBQUs7QUFFcEIsUUFBSSxVQUFVLFVBQVUsQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLFNBQVM7QUFDdkQsVUFBSTtBQUFTLGdCQUFRLFNBQVM7QUFDOUI7QUFBQSxJQUNGO0FBR0EsWUFBUSxnQkFBZ0IsUUFBUTtBQUNoQyxZQUFRLE1BQU0sYUFBYTtBQUMzQixZQUFRLE1BQU0sWUFBWTtBQUUxQixVQUFNLFlBQVksUUFBUSxzQkFBc0I7QUFDaEQsVUFBTSxjQUFjLFFBQVEsc0JBQXNCO0FBQ2xELFVBQU0sYUFBYSxPQUFPLHNCQUFzQjtBQUVoRCxVQUFNLGVBQW9CLENBQUM7QUFDM0IsVUFBTSxlQUFnQixVQUFVLFdBQVcsVUFBVSxTQUFVLGNBQWM7QUFFN0UsUUFBSSxjQUFjO0FBQ2xCLFFBQUksZUFBZTtBQUNuQixRQUFJLHFCQUFxQjtBQUN6QixRQUFJO0FBR0osUUFBSSxVQUFVLFVBQVUsVUFBVSxTQUFTO0FBQ3pDLHFCQUFlLFdBQVcsTUFBTyxXQUFXLFNBQVM7QUFDckQsMkJBQXFCLFVBQVUsTUFBTyxVQUFVLFNBQVM7QUFDekQsVUFBSSxlQUFlO0FBQ25CLG1CQUFhLE1BQU0sVUFBVSxNQUFNO0FBQ25DLG1CQUFhLFNBQVMsVUFBVSxTQUFTO0FBRXpDLFVBQUksYUFBYSxPQUFPLFlBQVksT0FBTyxhQUFhLFVBQVUsWUFBWSxRQUFRO0FBQ3BGLHNCQUFjO0FBQUEsTUFDaEI7QUFBQSxJQUNGO0FBQ0EsUUFBSSxVQUFVLFNBQVMsVUFBVSxVQUFVO0FBQ3pDLHFCQUFlLFdBQVcsT0FBUSxXQUFXLFFBQVE7QUFDckQsMkJBQXFCLFVBQVUsT0FBUSxVQUFVLFFBQVE7QUFDekQsVUFBSSxlQUFlO0FBQ25CLG1CQUFhLE9BQU8sVUFBVSxPQUFPO0FBQ3JDLG1CQUFhLFFBQVEsVUFBVSxRQUFRO0FBRXZDLFVBQUksYUFBYSxRQUFRLFlBQVksUUFBUSxhQUFhLFNBQVMsWUFBWSxPQUFPO0FBQ3BGLHNCQUFjO0FBQUEsTUFDaEI7QUFBQSxJQUNGO0FBR0EsUUFBSSxLQUFLLEtBQUssQ0FBQztBQUdmLFFBQUksYUFBYTtBQUNmLGNBQVEsU0FBUztBQUFBLElBQ25CO0FBQ0EsWUFBUSxNQUFNLFlBQVksSUFBSSxHQUFHO0FBQUEsRUFDbkM7QUFBQSxFQUVBLElBQUksT0FBTyxLQUFhO0FBQ3RCLFVBQU0sWUFBWSw2RUFBUyxDQUFDLEdBQUc7QUFDL0IsVUFBTSxnQkFBZ0IsS0FBSztBQUMzQixRQUFJLGtCQUFrQixXQUFXO0FBQy9CLFVBQUksVUFBVSxRQUFRO0FBQ3BCLGFBQUssV0FBVyxNQUFNLFlBQVksVUFBVSxTQUFTO0FBQ3JELGFBQUssYUFBYSxtRUFBaUIsRUFBRSxTQUFTO0FBQUEsTUFDaEQsT0FBTztBQUNMLGFBQUssV0FBVyxNQUFNLGVBQWUsUUFBUTtBQUM3QyxhQUFLLGdCQUFnQixtRUFBaUI7QUFBQSxNQUN4QztBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQUEsRUFFQSxJQUFJLFNBQWlCO0FBQ25CLFdBQU8sS0FBSyxXQUFXLE1BQU0sVUFBVTtBQUFBLEVBQ3pDO0FBQUEsRUFFQSxJQUFJLE1BQU0sS0FBYTtBQUNyQixVQUFNLFdBQVcsNkVBQVMsQ0FBQyxHQUFHO0FBQzlCLFVBQU0sZUFBZSxLQUFLO0FBQzFCLFFBQUksaUJBQWlCLFVBQVU7QUFDN0IsVUFBSSxTQUFTLFFBQVE7QUFDbkIsYUFBSyxXQUFXLE1BQU0sWUFBWSxTQUFTLFFBQVE7QUFDbkQsYUFBSyxhQUFhLGtFQUFnQixFQUFFLFFBQVE7QUFBQSxNQUM5QyxPQUFPO0FBQ0wsYUFBSyxXQUFXLE1BQU0sZUFBZSxPQUFPO0FBQzVDLGFBQUssZ0JBQWdCLGtFQUFnQjtBQUFBLE1BQ3ZDO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFBQSxFQUVBLElBQUksUUFBZ0I7QUFDbEIsV0FBTyxLQUFLLFdBQVcsTUFBTSxTQUFTO0FBQUEsRUFDeEM7QUFDRjtBQWhvRHFCLFdBQXJCO0FBQUEsRUFGQyxtRUFBYSxDQUFDLFdBQVc7QUFBQSxFQUN6QiwwREFBSSxDQUFDLHdEQUFNO0FBQUEsR0FDUyIsInNvdXJjZXMiOlsid2VicGFjazovL2lkcy1lbnRlcnByaXNlLXdjLy4vc3JjL2NvbXBvbmVudHMvaWRzLXBvcHVwL2lkcy1wb3B1cC50cz84ZmFlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGN1c3RvbUVsZW1lbnQsIHNjc3MgfSBmcm9tICcuLi8uLi9jb3JlL2lkcy1kZWNvcmF0b3JzJztcbmltcG9ydCB7IGF0dHJpYnV0ZXMgfSBmcm9tICcuLi8uLi9jb3JlL2lkcy1hdHRyaWJ1dGVzJztcbmltcG9ydCB7IGNhbWVsQ2FzZSwgc3RyaW5nVG9Cb29sIH0gZnJvbSAnLi4vLi4vdXRpbHMvaWRzLXN0cmluZy11dGlscy9pZHMtc3RyaW5nLXV0aWxzJztcbmltcG9ydCB7IHN0cmlwSFRNTCB9IGZyb20gJy4uLy4uL3V0aWxzL2lkcy14c3MtdXRpbHMvaWRzLXhzcy11dGlscyc7XG5cbmltcG9ydCB7XG4gIGdldENsb3Nlc3QsXG4gIGdldENsb3Nlc3RSb290Tm9kZSxcbiAgZ2V0RWRpdGFibGVSZWN0LFxuICB2YWxpZE1heEhlaWdodCxcbiAgd2FpdEZvclRyYW5zaXRpb25FbmQsXG59IGZyb20gJy4uLy4uL3V0aWxzL2lkcy1kb20tdXRpbHMvaWRzLWRvbS11dGlscyc7XG5cbmltcG9ydCBJZHNFdmVudHNNaXhpbiBmcm9tICcuLi8uLi9taXhpbnMvaWRzLWV2ZW50cy1taXhpbi9pZHMtZXZlbnRzLW1peGluJztcbmltcG9ydCBJZHNUaGVtZU1peGluIGZyb20gJy4uLy4uL21peGlucy9pZHMtdGhlbWUtbWl4aW4vaWRzLXRoZW1lLW1peGluJztcbmltcG9ydCBJZHNMb2NhbGVNaXhpbiBmcm9tICcuLi8uLi9taXhpbnMvaWRzLWxvY2FsZS1taXhpbi9pZHMtbG9jYWxlLW1peGluJztcbmltcG9ydCBJZHNFbGVtZW50IGZyb20gJy4uLy4uL2NvcmUvaWRzLWVsZW1lbnQnO1xuXG5pbXBvcnQgdHlwZSB7IElkc1BvcHVwRWxlbWVudFJlZiwgSWRzUG9wdXBYWVN3aXRjaFJlc3VsdCB9IGZyb20gJy4vaWRzLXBvcHVwLWF0dHJpYnV0ZXMnO1xuXG5pbXBvcnQge1xuICBDRU5URVIsXG4gIEFMSUdOTUVOVF9FREdFUyxcbiAgQUxJR05NRU5UU19YLFxuICBBTElHTk1FTlRTX1ksXG4gIEFMSUdOTUVOVFNfRURHRVNfWCxcbiAgQUxJR05NRU5UU19FREdFU19ZLFxuICBBTklNQVRJT05fU1RZTEVTLFxuICBBUlJPV19UWVBFUyxcbiAgUE9TSVRJT05fU1RZTEVTLFxuICBUWVBFUyxcbiAgUE9QVVBfTUFYSEVJR0hUX1BST1BOQU1FLFxuICBQT1BVUF9QUk9QRVJUSUVTLFxuICBmb3JtYXRBbGlnbkF0dHJpYnV0ZVxufSBmcm9tICcuL2lkcy1wb3B1cC1hdHRyaWJ1dGVzJztcblxuaW1wb3J0IHN0eWxlcyBmcm9tICcuL2lkcy1wb3B1cC5zY3NzJztcblxuY29uc3QgQmFzZSA9IElkc0xvY2FsZU1peGluKFxuICBJZHNUaGVtZU1peGluKFxuICAgIElkc0V2ZW50c01peGluKFxuICAgICAgSWRzRWxlbWVudFxuICAgIClcbiAgKVxuKTtcblxuLyoqXG4gKiBJRFMgUG9wdXAgQ29tcG9uZW50XG4gKiBAdHlwZSB7SWRzUG9wdXB9XG4gKiBAaW5oZXJpdHMgSWRzRWxlbWVudFxuICogQG1peGVzIElkc0V2ZW50c01peGluXG4gKiBAbWl4ZXMgSWRzTG9jYWxlTWl4aW5cbiAqIEBtaXhlcyBJZHNUaGVtZU1peGluXG4gKiBAcGFydCBwb3B1cCAtIHRoZSBwb3B1cCBvdXRlciBlbGVtZW50XG4gKiBAcGFydCBhcnJvdyAtIHRoZSBhcnJvdyBlbGVtZW50XG4gKi9cbkBjdXN0b21FbGVtZW50KCdpZHMtcG9wdXAnKVxuQHNjc3Moc3R5bGVzKVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSWRzUG9wdXAgZXh0ZW5kcyBCYXNlIHtcbiAgc2hvdWxkVXBkYXRlID0gZmFsc2U7XG5cbiAgaXNGbGlwcGVkID0gZmFsc2U7XG5cbiAgc2Nyb2xsUGFyZW50RWxlbT86IEhUTUxFbGVtZW50IHwgbnVsbDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuI2FsaWduID0gQ0VOVEVSO1xuICAgIHRoaXMuI2FsaWduWCA9IEFMSUdOTUVOVFNfWFswXTtcbiAgICB0aGlzLiNhbGlnblkgPSBBTElHTk1FTlRTX1lbMF07XG4gICAgdGhpcy4jYWxpZ25FZGdlID0gQUxJR05NRU5UX0VER0VTWzBdO1xuICAgIHRoaXMuI2FsaWduVGFyZ2V0ID0gbnVsbDtcbiAgICB0aGlzLiNhbmltYXRlZCA9IGZhbHNlO1xuICAgIHRoaXMuI2FuaW1hdGlvblN0eWxlID0gQU5JTUFUSU9OX1NUWUxFU1swXTtcbiAgICB0aGlzLiNhcnJvdyA9IEFSUk9XX1RZUEVTWzBdO1xuICAgIHRoaXMuI2Fycm93VGFyZ2V0ID0gbnVsbDtcbiAgICB0aGlzLiNibGVlZCA9IGZhbHNlO1xuICAgIHRoaXMuI2NvbnRhaW5pbmdFbGVtID0gZG9jdW1lbnQuYm9keTtcbiAgICB0aGlzLiNwb3NpdGlvblN0eWxlID0gUE9TSVRJT05fU1RZTEVTWzFdO1xuICAgIHRoaXMuI3RhcmdldEFsaWduRWRnZSA9ICcnO1xuICAgIHRoaXMuI3R5cGUgPSBUWVBFU1swXTsgLy8gJ25vbmUnXG4gICAgdGhpcy4jdmlzaWJsZSA9IGZhbHNlO1xuICAgIHRoaXMuI3ggPSAwO1xuICAgIHRoaXMuI3kgPSAwO1xuXG4gICAgdGhpcy5vcGVuID0gZmFsc2U7XG4gICAgdGhpcy5zaG91bGRVcGRhdGUgPSBmYWxzZTtcbiAgfVxuXG4gIGNvbm5lY3RlZENhbGxiYWNrKCk6IHZvaWQge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgLy8gQWx3YXlzIHNldHVwIGxpbmsgdG8gY29udGFpbmluZyBlbGVtZW50IGZpcnN0XG4gICAgdGhpcy5jb250YWluaW5nRWxlbSA9IGdldENsb3Nlc3QoKHRoaXMgYXMgYW55KSwgJ2lkcy1jb250YWluZXInKSB8fCBkb2N1bWVudC5ib2R5O1xuXG4gICAgLy8gU2V0IGluaXRhbCBzdGF0ZSBhbmQgZXZlbnRzXG4gICAgdGhpcy4jc2V0SW5pdGlhbFN0YXRlKCk7XG4gICAgdGhpcy5zaG91bGRVcGRhdGUgPSB0cnVlO1xuICAgIHRoaXMuI2F0dGFjaEV2ZW50SGFuZGxlcnMoKTtcbiAgfVxuXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCk6IHZvaWQge1xuICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrPy4oKTtcbiAgICBpZiAodGhpcy4jcm8pIHtcbiAgICAgIHRoaXMuI3JvPy5kaXNjb25uZWN0KCk7XG4gICAgICB0aGlzLiNybyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKHRoaXMuI21vKSB7XG4gICAgICB0aGlzLiNtbz8uZGlzY29ubmVjdCgpO1xuICAgICAgdGhpcy4jbW8gPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHRoaXMuI2FsaWduVGFyZ2V0ID0gbnVsbDtcbiAgICB0aGlzLiNhcnJvd1RhcmdldCA9IG51bGw7XG4gICAgdGhpcy4jY29udGFpbmluZ0VsZW0gPSBudWxsO1xuICAgIHRoaXMuY29udGFpbmluZ0VsZW0gPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgYXR0cmlidXRlcyB3ZSBoYW5kbGUgYXMgZ2V0dGVycy9zZXR0ZXJzXG4gICAqIEByZXR1cm5zIHtBcnJheTxzdHJpbmc+fSBUaGUgYXR0cmlidXRlcyBpbiBhbiBhcnJheVxuICAgKi9cbiAgc3RhdGljIGdldCBhdHRyaWJ1dGVzKCk6IEFycmF5PHN0cmluZz4ge1xuICAgIHJldHVybiBbLi4uc3VwZXIuYXR0cmlidXRlcywgLi4uUE9QVVBfUFJPUEVSVElFU107XG4gIH1cblxuICAvKipcbiAgICogSW5uZXIgdGVtcGxhdGUgY29udGVudHNcbiAgICogQHJldHVybnMge3N0cmluZ30gVGhlIHRlbXBsYXRlXG4gICAqL1xuICB0ZW1wbGF0ZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IGFuaW1hdGVkQ2xhc3MgPSB0aGlzLmFuaW1hdGVkID8gJyBhbmltYXRlZCcgOiAnJztcblxuICAgIHJldHVybiBgPGRpdiBjbGFzcz1cImlkcy1wb3B1cCR7YW5pbWF0ZWRDbGFzc31cIiBwYXJ0PVwicG9wdXBcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJhcnJvd1wiIHBhcnQ9XCJhcnJvd1wiPjwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnQtd3JhcHBlclwiPlxuICAgICAgICA8c2xvdCBuYW1lPVwiY29udGVudFwiPjwvc2xvdD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PmA7XG4gIH1cblxuICAvKipcbiAgICogV2F0Y2hlcyBmb3IgY2hhbmdlc1xuICAgKiBAcHJvcGVydHkge011dGF0aW9uT2JzZXJ2ZXJ9IG1vIHRoaXMgUG9wdXAgY29tcG9uZW50J3MgbXV0YXRpb24gb2JzZXJ2ZXJcbiAgICovXG4gICNtbz86IE11dGF0aW9uT2JzZXJ2ZXI7XG5cbiAgLyoqXG4gICAqIFdhdGNoZXMgZm9yIHJlc2l6aW5nIHRoYXQgb2NjdXJzIHdoZW5ldmVyIHRoZSBwYWdlIGNoYW5nZXMgZGltZW5zaW9ucywgYW5kIHJlLWFwcGxpZXMgc29tZVxuICAgKiBjb29yZGluYXRlLXNwZWNpZmljIHZhbHVlcyB0byB0aGUgUG9wdXAncyBpbm5lciBjb250YWluZXIuXG4gICAqIEBwcml2YXRlXG4gICAqIEBwcm9wZXJ0eSB7UmVzaXplT2JzZXJ2ZXJ9IG1vIHRoaXMgUG9wdXAgY29tcG9uZW50J3MgcmVzaXplIG9ic2VydmVyXG4gICAqL1xuICAjcm8/OiBSZXNpemVPYnNlcnZlcjtcblxuICAvKipcbiAgICogUGxhY2VzIHRoZSBQb3B1cCBhbmQgcGVyZm9ybXMgYW4gYWRqdXN0bWVudCB0byBpdHMgYHRyYW5zZm9ybTogbWF0cml4M2QoKWBcbiAgICogQ1NTIHByb3BlcnR5LCBpZiBhcHBsaWNhYmxlLlxuICAgKi9cbiAgI2ZpeFBsYWNlbWVudE9uUmVzaXplKCk6IHZvaWQge1xuICAgIHRoaXMuI3JlbW92ZTNkTWF0cml4KCk7XG4gICAgdGhpcy5wbGFjZSgpO1xuICAgIHRoaXMuI2ZpeDNkTWF0cml4T25SZXNpemUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBhbiBhZGp1c3RtZW50IHRvIHRoZSBQb3B1cCdzIGB0cmFuc2Zvcm06IG1hdHJpeDNkKClgXG4gICAqIENTUyBwcm9wZXJ0eSwgaWYgYXBwbGljYWJsZS5cbiAgICovXG4gICNmaXgzZE1hdHJpeE9uUmVzaXplKCk6IHZvaWQge1xuICAgIHRoaXMuc3R5bGUudHJhbnNpdGlvbiA9ICdub25lJztcbiAgICB0aGlzLmNvbnRhaW5lcj8uc3R5bGUuc2V0UHJvcGVydHkoJ3RyYW5zaXRpb24nLCAnbm9uZScpO1xuICAgIHRoaXMuY29ycmVjdDNkTWF0cml4KCk7XG4gICAgdGhpcy5zdHlsZS50cmFuc2l0aW9uID0gJyc7XG4gICAgdGhpcy5jb250YWluZXI/LnN0eWxlLnNldFByb3BlcnR5KCd0cmFuc2l0aW9uJywgJycpO1xuICB9XG5cbiAgLyoqXG4gICAqIEN5Y2xlcyB0aHJvdWdoIGFsbCBhdmFpbGFibGUgcHJvcHMgYW5kIGNoZWNrcyB0aGUgRE9NIGZvciB0aGVpciBwcmVzZW5jZVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gICNzZXRJbml0aWFsU3RhdGUoKTogdm9pZCB7XG4gICAgdGhpcy4jbW8gPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7XG4gICAgICBpZiAodGhpcy4jdmlzaWJsZSkge1xuICAgICAgICBsZXQgcGxhY2VkID0gZmFsc2U7XG4gICAgICAgIGZvciAoY29uc3QgbSBvZiBtdXRhdGlvbnMpIHtcbiAgICAgICAgICBpZiAocGxhY2VkKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKFsnc3VidHJlZScsICdjaGlsZExpc3QnLCAnY2hhcmFjdGVyRGF0YScsICdjaGFyYWN0ZXJEYXRhT2xkVmFsdWUnXS5pbmNsdWRlcyhtLnR5cGUpKSB7XG4gICAgICAgICAgICB0aGlzLnBsYWNlKCk7XG4gICAgICAgICAgICBwbGFjZWQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy4jcm8gPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKGVudHJpZXMpID0+IHtcbiAgICAgIGlmICh0aGlzLm9wZW4pIHtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICAgICAgaWYgKGVudHJ5LnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpZHMtY29udGFpbmVyJykge1xuICAgICAgICAgICAgdGhpcy4jZml4UGxhY2VtZW50T25SZXNpemUoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy4jZml4M2RNYXRyaXhPblJlc2l6ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNjaGVja1ZpZXdwb3J0UG9zaXRpb25TY3JvbGxpbmcoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIFBPUFVQX1BST1BFUlRJRVMuZm9yRWFjaCgocHJvcCkgPT4ge1xuICAgICAgY29uc3QgY2FtZWxQcm9wID0gY2FtZWxDYXNlKHByb3ApO1xuICAgICAgKHRoaXMgYXMgYW55KVtjYW1lbFByb3BdID0gdGhpcy5nZXRBdHRyaWJ1dGUocHJvcCkgfHwgKHRoaXMgYXMgYW55KVtjYW1lbFByb3BdO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEF0dGFjaGVzIGV2ZW50IGhhbmRsZXJzIGZvciB0aGUgZHVyYXRpb24gb2YgdGhlIGxpZmVzcGFuIG9mIHRoaXMgY29tcG9uZW50XG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgI2F0dGFjaEV2ZW50SGFuZGxlcnMoKTogdm9pZCB7XG4gICAgY29uc3QgY29udGFpbmVyTm9kZSA9IGdldENsb3Nlc3QoKHRoaXMgYXMgYW55KSwgJ2lkcy1jb250YWluZXInKTtcbiAgICAvLyBTZXR1cCBSZXNpemUgT2JzZXJ2ZXJcbiAgICB0aGlzLiNybz8ub2JzZXJ2ZSgodGhpcyBhcyBhbnkpKTtcbiAgICBpZiAoY29udGFpbmVyTm9kZSkge1xuICAgICAgdGhpcy4jcm8/Lm9ic2VydmUoY29udGFpbmVyTm9kZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtET01SZWN0fSBtZWFzdXJlbWVudHMgb2YgdGhlIGlubmVyIFwiLmlkcy1wb3B1cFwiIDxkaXY+XG4gICAqL1xuICBnZXQgaW5uZXJSZWN0KCk6IERPTVJlY3Qge1xuICAgIHJldHVybiB0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZWFkb25seVxuICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9IHJlZmVyZW5jZSB0byB0aGUgYGNvbnRlbnQtd3JhcHBlcmAgZWxlbWVudFxuICAgKi9cbiAgZ2V0IHdyYXBwZXIoKTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5zaGFkb3dSb290Py5xdWVyeVNlbGVjdG9yKCcuY29udGVudC13cmFwcGVyJyk7XG4gIH1cblxuICAvKipcbiAgICogQHByb3BlcnR5IHtJZHNQb3B1cEVsZW1lbnRSZWZ9IGFsaWduVGFyZ2V0IGFjdHMgYXMgdGhlIHRhcmdldCBlbGVtZW50IHRvIGJlIHVzZWQgZm9yIG9mZnNldCBwbGFjZW1lbnRcbiAgICovXG4gICNhbGlnblRhcmdldDogSWRzUG9wdXBFbGVtZW50UmVmID0gbnVsbDtcblxuICAvKipcbiAgICogU2V0cyB0aGUgZWxlbWVudCB0byBhbGlnbiB3aXRoIHZpYSBhIGNzcyBzZWxlY3RvclxuICAgKiBAcGFyYW0ge0lkc1BvcHVwRWxlbWVudFJlZiB8IHN0cmluZ30gdmFsIGEgQ1NTIHNlbGVjdG9yIHN0cmluZ1xuICAgKi9cbiAgc2V0IGFsaWduVGFyZ2V0KHZhbDogSWRzUG9wdXBFbGVtZW50UmVmIHwgc3RyaW5nKSB7XG4gICAgY29uc3QgaXNTdHJpbmcgPSB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyAmJiB2YWwubGVuZ3RoO1xuICAgIGNvbnN0IGlzRWxlbSA9IHZhbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50IHx8IHZhbCBpbnN0YW5jZW9mIFNWR0VsZW1lbnQ7XG5cbiAgICBpZiAoIWlzU3RyaW5nICYmICFpc0VsZW0pIHtcbiAgICAgIGlmICh0aGlzLiNhbGlnblRhcmdldCAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLiNhbGlnblRhcmdldCA9IG51bGw7XG4gICAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZXMuQUxJR05fVEFSR0VUKTtcbiAgICAgICAgdGhpcy4jcmVmcmVzaEFsaWduVGFyZ2V0KCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGVsZW06IElkc1BvcHVwRWxlbWVudFJlZiA9IG51bGw7XG4gICAgaWYgKGlzU3RyaW5nKSB7XG4gICAgICAvLyBAVE9ETyBIYXJkZW4gZm9yIHNlY3VyaXR5IChYU1MpXG4gICAgICBjb25zdCByb290Tm9kZSA9IGdldENsb3Nlc3RSb290Tm9kZSgodGhpcyBhcyBhbnkpKTtcbiAgICAgIGVsZW0gPSByb290Tm9kZS5xdWVyeVNlbGVjdG9yKHZhbCk7XG4gICAgICBpZiAoIShlbGVtIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgfHwgZWxlbSBpbnN0YW5jZW9mIFNWR0VsZW1lbnQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuQUxJR05fVEFSR0VULCB2YWwpO1xuICAgIH0gZWxzZSBpZiAoaXNFbGVtKSB7XG4gICAgICBlbGVtID0gdmFsO1xuICAgIH1cblxuICAgIGlmIChlbGVtICE9PSBudWxsICYmICghdGhpcy4jYWxpZ25UYXJnZXQgfHwgIXRoaXMuI2FsaWduVGFyZ2V0LmlzRXF1YWxOb2RlKGVsZW0pKSkge1xuICAgICAgdGhpcy4jYWxpZ25UYXJnZXQgPSBlbGVtO1xuICAgICAgdGhpcy4jcmVmcmVzaEFsaWduVGFyZ2V0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtJZHNQb3B1cEVsZW1lbnRSZWZ9IHRoZSBlbGVtZW50IGluIHRoZSBwYWdlIHRoYXQgdGhlIFBvcHVwIHdpbGwgdGFrZVxuICAgKiBjb29yZGluYXRlcyBmcm9tIGZvciByZWxhdGl2ZSBwbGFjZW1lbnRcbiAgICovXG4gIGdldCBhbGlnblRhcmdldCgpOiBJZHNQb3B1cEVsZW1lbnRSZWYge1xuICAgIHJldHVybiB0aGlzLiNhbGlnblRhcmdldDtcbiAgfVxuXG4gICNyZWZyZXNoQWxpZ25UYXJnZXQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuI2FsaWduVGFyZ2V0KSB7XG4gICAgICB0aGlzLiNtbz8ub2JzZXJ2ZSh0aGlzLiNhbGlnblRhcmdldCwge1xuICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxuICAgICAgICBhdHRyaWJ1dGVGaWx0ZXI6IFsnc3R5bGUnLCAnaGVpZ2h0JywgJ3dpZHRoJ10sXG4gICAgICAgIGF0dHJpYnV0ZU9sZFZhbHVlOiB0cnVlLFxuICAgICAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlLFxuICAgICAgICBjaGFyYWN0ZXJEYXRhT2xkVmFsdWU6IHRydWUsXG4gICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgICAgc3VidHJlZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuI21vPy5kaXNjb25uZWN0KCk7XG4gICAgfVxuICAgIHRoaXMucGxhY2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gYWxpZ24gZGV0ZXJtaW5lcyB0aGUgY3VycmVudCBkaXJlY3Rpb24ocykgb2YgYWxpZ25tZW50IGZvciB0aGUgUG9wdXAuXG4gICAqIENhbiBiZSBsZWZ0LCByaWdodCwgdG9wLCBib3R0b20sIGNlbnRlciwgYW5kIGNhbiBhbHNvIGJlIGEgY29tbWEtZGVsaW1pdGVkIGxpc3Qgb2ZcbiAgICogbXVsdGlwbGUgYWxpZ25tZW50IHR5cGVzIChmb3IgZXhhbXBsZTogYGxlZnQsIHRvcGAgb3IgYHJpZ2h0LCBib3R0b21gKVxuICAgKi9cbiAgI2FsaWduOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWwgYSBjb21tYS1kZWxpbWl0ZWQgc2V0IG9mIGFsaWdubWVudCB0eXBlcyBgZGlyZWN0aW9uMSwgZGlyZWN0aW9uMmBcbiAgICovXG4gIHNldCBhbGlnbih2YWw6IHN0cmluZykge1xuICAgIGNvbnN0IGN1cnJlbnRBbGlnbiA9IHRoaXMuI2FsaWduO1xuICAgIGxldCB0cnVlVmFsID0gdmFsO1xuICAgIGlmICh0eXBlb2YgdHJ1ZVZhbCAhPT0gJ3N0cmluZycgfHwgIXRydWVWYWwubGVuZ3RoKSB7XG4gICAgICB0cnVlVmFsID0gQ0VOVEVSO1xuICAgIH1cblxuICAgIC8vIE5vcm1hbGl6ZSB2YWx1ZXMgYW5kIHN0b3JlIHRoZSBmaXJzdCBlbnRyeSBhcyB0aGUgXCJlZGdlXCIgdG8gYWxpZ24gYWdhaW5zdFxuICAgIGxldCB2YWxzID0gdHJ1ZVZhbC5zcGxpdCgnLCcpO1xuICAgIHZhbHMgPSB2YWxzLm1hcCgodGhpc1ZhbCkgPT4gdGhpc1ZhbC50cmltKCkudG9Mb3dlckNhc2UoKSk7XG5cbiAgICAvLyBBZHVzdCB0aGUgZmlyc3QgdmFsdWUgYW5kIHNldCBpdCBhcyB0aGUgXCJlZGdlXCJcbiAgICBjb25zdCBlZGdlID0gdmFsc1swXTtcbiAgICBpZiAoQUxJR05NRU5UX0VER0VTLmluY2x1ZGVzKGVkZ2UpKSB7XG4gICAgICB0aGlzLiNhbGlnbkVkZ2UgPSBlZGdlO1xuICAgICAgdmFsc1swXSA9IHRoaXMuI2FsaWduRWRnZTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGVyZSdzIG5vIHNlY29uZCB2YWx1ZSwgYXNzdW14YWUgaXQncyAnY2VudGVyJ1xuICAgIGlmICghdmFsc1sxXSkge1xuICAgICAgdmFscy5wdXNoKCdjZW50ZXInKTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgdmFsdWVzIGFyZSBkZWZpbmVkIGluIHJldmVyc2UgKHksIHgpLCBzd2l0Y2ggdGhlbVxuICAgIGlmIChBTElHTk1FTlRTX0VER0VTX1kuaW5jbHVkZXModmFsc1swXSkgfHwgQUxJR05NRU5UU19FREdFU19YLmluY2x1ZGVzKHZhbHNbMV0pKSB7XG4gICAgICBjb25zdCB2YWwxID0gdmFsc1sxXTtcbiAgICAgIHZhbHNbMV0gPSB2YWxzWzBdO1xuICAgICAgdmFsc1swXSA9IHZhbDE7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGVhY2ggYWxpZ25tZW50IHZhbHVlIGlmIGl0J3MgdmFsaWQsIGFuZCByZW5kZXIgdGhlIGF0dHJpYnV0ZVxuICAgIGxldCBhdHRyWDtcbiAgICBsZXQgYXR0clk7XG4gICAgaWYgKEFMSUdOTUVOVFNfWC5pbmNsdWRlcyh2YWxzWzBdKSkge1xuICAgICAgYXR0clggPSB2YWxzWzBdO1xuICAgICAgdGhpcy4jYWxpZ25YID0gdmFsc1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXR0clggPSB0aGlzLmFsaWduWDtcbiAgICB9XG4gICAgaWYgKEFMSUdOTUVOVFNfWS5pbmNsdWRlcyh2YWxzWzFdKSkge1xuICAgICAgYXR0clkgPSB2YWxzWzFdO1xuICAgICAgdGhpcy4jYWxpZ25ZID0gdmFsc1sxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXR0clkgPSB0aGlzLmFsaWduWTtcbiAgICB9XG5cbiAgICBjb25zdCBuZXdBbGlnbiA9IGZvcm1hdEFsaWduQXR0cmlidXRlKGF0dHJYLCBhdHRyWSwgdGhpcy4jYWxpZ25FZGdlKTtcbiAgICBjb25zdCBuZWVkc1VwZGF0ZWRBbGlnbiA9IGN1cnJlbnRBbGlnbiAhPT0gbmV3QWxpZ247XG4gICAgaWYgKG5lZWRzVXBkYXRlZEFsaWduKSB7XG4gICAgICB0aGlzLiNhbGlnbiA9IG5ld0FsaWduO1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5BTElHTiwgbmV3QWxpZ24pO1xuICAgICAgdGhpcy5wbGFjZSgpO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuaGFzQXR0cmlidXRlKCdhbGlnbicpKSB7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLkFMSUdOLCBjdXJyZW50QWxpZ24pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBhIERPTS1mcmllbmRseSBzdHJpbmcgcmVwcmVudGF0aW9uIG9mIGFsaWdubWVudCB0eXBlc1xuICAgKi9cbiAgZ2V0IGFsaWduKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuI2FsaWduO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBhbGlnblggdGhlIHR5cGUgb2YgYWxpZ25tZW50IHRvIHVzZSBvbiB0aGlzIGNvbXBvbmVudCdzXG4gICAqICBYIGNvb3JkaW5hdGUgaW4gcmVsYXRpb24gdG8gYSBwYXJlbnQgZWxlbWVudCdzIFggY29vcmRpbmF0ZVxuICAgKi9cbiAgI2FsaWduWDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBTdHJhdGVneSBmb3IgdGhlIHBhcmVudCBYIGFsaWdubWVudCAoc2VlIHRoZSBBTElHTk1FTlRTX1ggYXJyYXkpXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWwgdGhlIHN0cmF0ZWd5IHRvIHVzZVxuICAgKi9cbiAgc2V0IGFsaWduWCh2YWw6IHN0cmluZykge1xuICAgIGlmICh0eXBlb2YgdmFsICE9PSAnc3RyaW5nJyB8fCAhdmFsLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBhbGlnblggPSB2YWw7XG4gICAgaWYgKCFBTElHTk1FTlRTX1guaW5jbHVkZXModmFsKSkge1xuICAgICAgYWxpZ25YID0gQUxJR05NRU5UU19YWzBdO1xuICAgIH1cblxuICAgIC8vIElmIGBhbGlnbi14YCB3YXMgdXNlZCBkaXJlY3R5LCBzdGFuZGFyZGl6ZSBhZ2FpbnN0IHRoZSBgYWxpZ25gIGF0dHJpYnV0ZS5cbiAgICBpZiAodGhpcy5oYXNBdHRyaWJ1dGUoYXR0cmlidXRlcy5BTElHTl9YKSkge1xuICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlcy5BTElHTl9YKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy4jYWxpZ25YICE9PSBhbGlnblgpIHtcbiAgICAgIHRoaXMuI2FsaWduWCA9IGFsaWduWDtcbiAgICAgIGNvbnN0IGFsaWduWSA9IHRoaXMuI2FsaWduWTtcblxuICAgICAgLy8gU2V0dGluZyB0aGUgYGFsaWduYCBhdHRyaWJ1dGUgY2F1c2VzIGEgcmVmcmVzaCB0byBvY2N1cixcbiAgICAgIC8vIHNvIG5vIG5lZWQgdG8gY2FsbCBgcmVmcmVzaCgpYCBoZXJlLlxuICAgICAgdGhpcy5hbGlnbiA9IGZvcm1hdEFsaWduQXR0cmlidXRlKGFsaWduWCwgYWxpZ25ZLCBhbGlnblgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTdHJhdGVneSBmb3IgdGhlIHBhcmVudCBYIGFsaWdubWVudCAoc2VlIHRoZSBBTElHTk1FTlRTX1ggYXJyYXkpXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBzdHJhdGVneSB0byB1c2VcbiAgICovXG4gIGdldCBhbGlnblgoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy4jYWxpZ25YO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBhbGlnblkgdGhlIHR5cGUgb2YgYWxpZ25tZW50IHRvIHVzZSBvbiB0aGlzIGNvbXBvbmVudCdzXG4gICAqICBZIGNvb3JkaW5hdGUgaW4gcmVsYXRpb24gdG8gYSBwYXJlbnQgZWxlbWVudCdzIFkgY29vcmRpbmF0ZVxuICAgKi9cbiAgI2FsaWduWTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsIGFsaWdubWVudCBzdHJhdGVneSBmb3IgdGhlIGN1cnJlbnQgcGFyZW50IFkgYWxpZ25tZW50XG4gICAqL1xuICBzZXQgYWxpZ25ZKHZhbDogc3RyaW5nKSB7XG4gICAgaWYgKHR5cGVvZiB2YWwgIT09ICdzdHJpbmcnIHx8ICF2YWwubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGFsaWduWSA9IEFMSUdOTUVOVFNfWVswXTtcbiAgICBpZiAoQUxJR05NRU5UU19ZLmluY2x1ZGVzKHZhbCkpIHtcbiAgICAgIGFsaWduWSA9IHZhbDtcbiAgICB9XG5cbiAgICAvLyBJZiBgYWxpZ24teWAgd2FzIHVzZWQgZGlyZWN0eSwgc3RhbmRhcmRpemUgYWdhaW5zdCB0aGUgYGFsaWduYCBhdHRyaWJ1dGUuXG4gICAgaWYgKHRoaXMuaGFzQXR0cmlidXRlKGF0dHJpYnV0ZXMuQUxJR05fWSkpIHtcbiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZXMuQUxJR05fWSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuI2FsaWduWSAhPT0gYWxpZ25ZKSB7XG4gICAgICB0aGlzLiNhbGlnblkgPSBhbGlnblk7XG4gICAgICBjb25zdCBhbGlnblggPSB0aGlzLiNhbGlnblg7XG5cbiAgICAgIC8vIFNldHRpbmcgdGhlIGBhbGlnbmAgYXR0cmlidXRlIGNhdXNlcyBhIHJlZnJlc2ggdG8gb2NjdXIsXG4gICAgICAvLyBzbyBubyBuZWVkIHRvIGNhbGwgYHJlZnJlc2goKWAgaGVyZS5cbiAgICAgIHRoaXMuYWxpZ24gPSBmb3JtYXRBbGlnbkF0dHJpYnV0ZShhbGlnblgsIGFsaWduWSwgYWxpZ25ZKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge3N0cmluZ30gYWxpZ25tZW50IHN0cmF0ZWd5IGZvciB0aGUgY3VycmVudCBwYXJlbnQgWSBhbGlnbm1lbnRcbiAgICovXG4gIGdldCBhbGlnblkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy4jYWxpZ25ZO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBhbGlnbkVkZ2UgdGhlIHByaW1hcnkgZWRnZSBvZiBhIHRhcmdldCBlbGVtZW50IHRvIHVzZSBmb3IgaXRzIGFsaWdubWVudC5cbiAgICovXG4gICNhbGlnbkVkZ2U6IHN0cmluZztcblxuICAvKipcbiAgICogVXBkYXRlcyB3aGVuIHRoZSBwb3B1cCBjaGFuZ2luZyBpdHMgcHJpbWFyeSBhbGlnbiBlZGdlXG4gICAqL1xuICAjdGFyZ2V0QWxpZ25FZGdlOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqICBTcGVjaWZpZXMgdGhlIGVkZ2Ugb2YgdGhlIHBhcmVudCBlbGVtZW50IHRvIGJlIHBsYWNlZCBhZGphY2VudCxcbiAgICogIGluIGNvbmZpZ3VyYXRpb25zIHdoZXJlIGEgcmVsYXRpdmUgcGxhY2VtZW50IG9jY3Vyc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsIFRoZSBlZGdlIHRvIGFsaWduIHRvXG4gICAqL1xuICBzZXQgYWxpZ25FZGdlKHZhbDogc3RyaW5nKSB7XG4gICAgaWYgKHR5cGVvZiB2YWwgIT09ICdzdHJpbmcnIHx8ICF2YWwubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gU2FuaXRpemUgdGhlIGFsaWdubWVudCBlZGdlXG4gICAgbGV0IGVkZ2U7XG4gICAgaWYgKEFMSUdOTUVOVF9FREdFUy5pbmNsdWRlcyh2YWwpKSB7XG4gICAgICBlZGdlID0gdmFsO1xuICAgIH0gZWxzZSB7XG4gICAgICBlZGdlID0gQUxJR05NRU5UX0VER0VTWzBdO1xuICAgIH1cblxuICAgIC8vIGBhbGlnbkVkZ2VgIGlzIHN0YW5kYXJkaXplZCBhZ2FpbnN0IGBhbGlnbmAgYnkgd2F5IG9mIGJlaW5nIHRoZSBcImZpcnN0XCIgaXRlbVxuICAgIC8vIGluIHRoZSBjb21tYS1kZWxpbWl0ZWQgc2V0dGluZy5cbiAgICBpZiAodGhpcy5oYXNBdHRyaWJ1dGUoYXR0cmlidXRlcy5BTElHTl9FREdFKSkge1xuICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlcy5BTElHTl9FREdFKTtcbiAgICB9XG5cbiAgICAvLyBPbmx5IHVwZGF0ZSBpZiB0aGUgdmFsdWUgaGFzIGNoYW5nZWRcbiAgICBpZiAodGhpcy4jYWxpZ25FZGdlICE9PSBlZGdlKSB7XG4gICAgICBsZXQgYWxpZ25YID0gdGhpcy5hbGlnblg7XG4gICAgICBsZXQgYWxpZ25ZID0gdGhpcy5hbGlnblk7XG5cbiAgICAgIHRoaXMuI2FsaWduRWRnZSA9IGVkZ2U7XG5cbiAgICAgIC8vIERldGVybWluZSBob3cgdG8gZm9ybWF0IHRoZSBgYWxpZ25gIHByb3BlcnR5LlxuICAgICAgLy8gVXNpbmcgYGFsaWduRWRnZSA9PT0gJ2NlbnRlcidgIGlzIHNob3J0aGFuZCBmb3IgYXV0b21hdGljYWxseSBjZW50ZXJpbmcgdGhlIGNvbXBvbmVudC5cbiAgICAgIGlmIChlZGdlID09PSAnY2VudGVyJykge1xuICAgICAgICBhbGlnblggPSBlZGdlO1xuICAgICAgICBhbGlnblkgPSBlZGdlO1xuICAgICAgfSBlbHNlIGlmIChBTElHTk1FTlRTX0VER0VTX1kuaW5jbHVkZXMoZWRnZSkpIHtcbiAgICAgICAgYWxpZ25ZID0gZWRnZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsaWduWCA9IGVkZ2U7XG4gICAgICB9XG4gICAgICB0aGlzLmFsaWduID0gZm9ybWF0QWxpZ25BdHRyaWJ1dGUoYWxpZ25YLCBhbGlnblksIGVkZ2UpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgYWRqYWNlbnQgZWRnZSBvZiB0aGUgcGFyZW50IGVsZW1lbnRcbiAgICovXG4gIGdldCBhbGlnbkVkZ2UoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy4jYWxpZ25FZGdlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZWFkb25seVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSByZXByZXNlbnRpbmcgdGhlIG9wcG9zaXRlIGVkZ2Ugb2YgdGhlIGN1cnJlbnRseS1kZWZpbmVkIGBhbGlnbkVkZ2VgIHByb3BlcnR5XG4gICAqL1xuICBnZXQgb3Bwb3NpdGVBbGlnbkVkZ2UoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy4jZ2V0T3Bwb3NpdGVFZGdlKHRoaXMuYWxpZ25FZGdlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nIHwgbnVsbH0gVGhlIG1heCBoZWlnaHQgdmFsdWVcbiAgICovXG4gIGdldCBtYXhIZWlnaHQoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuTUFYX0hFSUdIVCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBtYXggaGVpZ2h0IHZhbHVlXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVtYmVyIHwgbnVsbH0gdmFsdWUgVGhlIHZhbHVlXG4gICAqL1xuICBzZXQgbWF4SGVpZ2h0KHZhbHVlOiBzdHJpbmcgfCBudW1iZXIgfCBudWxsKSB7XG4gICAgY29uc3QgdmFsID0gdmFsaWRNYXhIZWlnaHQodmFsdWUpO1xuICAgIGlmICh2YWwpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuTUFYX0hFSUdIVCwgdmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlcy5NQVhfSEVJR0hUKTtcbiAgICB9XG4gICAgdGhpcy4jdXBkYXRlTWF4SGVpZ2h0UHJvcCh2YWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlZmluZXMgYW4gaW50ZXJuYWwgQ1NTIHZhcmlhYmxlIHVzZWQgZm9yIGRlZmluaW5nIGEgYG1heC1oZWlnaHRgIGF0dHJpYnV0ZVxuICAgKiBpbiB0aGUgU2hhZG93Um9vdCBvZiB0aGlzIGNvbXBvbmVudFxuICAgKiBAcGFyYW0ge3N0cmluZyB8IG51bWJlciB8IG51bGx9IHZhbCBob3cgdG8gZGVmaW5lIHRoZSBwcm9wZXJ0eVxuICAgKi9cbiAgI3VwZGF0ZU1heEhlaWdodFByb3AodmFsPzogc3RyaW5nIHwgbnVtYmVyIHwgbnVsbCkge1xuICAgIGlmICh0aGlzLnBvc2l0aW9uU3R5bGUgPT09ICd2aWV3cG9ydCcpIHtcbiAgICAgIHRoaXMud3JhcHBlcj8uc2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuVEFCSU5ERVgsICcwJyk7XG4gICAgICB0aGlzLmNvbnRhaW5lcj8uc3R5bGUuc2V0UHJvcGVydHkoUE9QVVBfTUFYSEVJR0hUX1BST1BOQU1FLCAnYXV0bycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRhaW5lckVsZW0gPSAodGhpcy5jb250YWluaW5nRWxlbSBhcyBIVE1MRWxlbWVudCk7XG4gICAgbGV0IHRhcmdldEhlaWdodENvbnN0cmFpbnQgPSBkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodDtcbiAgICBsZXQgdGFyZ2V0VmFsdWUgPSB2YWxpZE1heEhlaWdodCh2YWwgfHwgdGhpcy5tYXhIZWlnaHQpO1xuXG4gICAgaWYgKGNvbnRhaW5lckVsZW0pIHtcbiAgICAgIHRhcmdldEhlaWdodENvbnN0cmFpbnQgPSBjb250YWluZXJFbGVtLm9mZnNldEhlaWdodDtcbiAgICB9IGVsc2UgaWYgKHdpbmRvdykge1xuICAgICAgdGFyZ2V0SGVpZ2h0Q29uc3RyYWludCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgIHRhcmdldFZhbHVlID0gYCR7dGFyZ2V0SGVpZ2h0Q29uc3RyYWludH1weGA7XG4gICAgfVxuXG4gICAgaWYgKHRhcmdldFZhbHVlKSB7XG4gICAgICBpZiAodGFyZ2V0SGVpZ2h0Q29uc3RyYWludCA8IHBhcnNlSW50KHRhcmdldFZhbHVlKSkge1xuICAgICAgICB0YXJnZXRWYWx1ZSA9IGAke3RhcmdldEhlaWdodENvbnN0cmFpbnR9cHhgO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjdXJyZW50UG9wdXBIZWlnaHQgPSBwYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLndyYXBwZXIhKS5oZWlnaHQpO1xuICAgICAgaWYgKHRhcmdldEhlaWdodENvbnN0cmFpbnQgPD0gY3VycmVudFBvcHVwSGVpZ2h0KSB7XG4gICAgICAgIHRhcmdldFZhbHVlID0gYCR7dGFyZ2V0SGVpZ2h0Q29uc3RyYWludH1weGA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29udGFpbmVyKSB7XG4gICAgICBpZiAodGhpcy53cmFwcGVyKSB0aGlzLndyYXBwZXIuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuVEFCSU5ERVgsICcwJyk7XG4gICAgICBpZiAodGFyZ2V0VmFsdWUpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoUE9QVVBfTUFYSEVJR0hUX1BST1BOQU1FLCBgJHt0YXJnZXRWYWx1ZX1gKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgnaGFzLW1heGhlaWdodCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGFzLW1heGhlaWdodCcpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5yZW1vdmVQcm9wZXJ0eShQT1BVUF9NQVhIRUlHSFRfUFJPUE5BTUUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgdG8gZ2V0IG9wcG9zaXRlIGFsaWduIGVkZ2VcbiAgICogQHBhcmFtIHtzdHJpbmd8dW5kZWZpbmVkfSBjdXJyZW50RWRnZSBjdXJyZW50IGFsaWduIGVkZ2VcbiAgICogQHJldHVybnMge3N0cmluZ30gb3Bwb3NpdGUgYWxpZ24gZWRnZVxuICAgKi9cbiAgI2dldE9wcG9zaXRlRWRnZShjdXJyZW50RWRnZT86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgc3dpdGNoIChjdXJyZW50RWRnZSkge1xuICAgICAgY2FzZSAnbGVmdCc6XG4gICAgICAgIHJldHVybiAncmlnaHQnO1xuICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICByZXR1cm4gJ2xlZnQnO1xuICAgICAgY2FzZSAndG9wJzpcbiAgICAgICAgcmV0dXJuICdib3R0b20nO1xuICAgICAgY2FzZSAnYm90dG9tJzpcbiAgICAgICAgcmV0dXJuICd0b3AnO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICdub25lJztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyIHRvIGdldCBuZWFyZXN0IHNpZGUgdG8gdGhlIGFsaWduIGVkZ2VcbiAgICogQHBhcmFtIHtzdHJpbmd8dW5kZWZpbmVkfSBjdXJyZW50RWRnZSBjdXJyZW50IGFsaWduIGVkZ2VcbiAgICogQHJldHVybnMge3N0cmluZ30gbmVhcmVzdCBhbGlnbiBlZGdlXG4gICAqL1xuICAjZ2V0TmVhcmVzdEVkZ2UoY3VycmVudEVkZ2U/OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAoY3VycmVudEVkZ2UpIHtcbiAgICAgIGNhc2UgJ3RvcCc6XG4gICAgICBjYXNlICdib3R0b20nOlxuICAgICAgICByZXR1cm4gJ3JpZ2h0JztcbiAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICByZXR1cm4gJ2JvdHRvbSc7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gJ25vbmUnO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IGFuaW1hdGVkIHRydWUgaWYgYW5pbWF0aW9uIHNob3VsZCBvY2N1ciBvbiB0aGlzIGNvbXBvbmVudFxuICAgKi9cbiAgI2FuaW1hdGVkOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIG9yIG5vdCB0aGUgY29tcG9uZW50IHNob3VsZCBhbmltYXRlIGl0cyBtb3ZlbWVudFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbCB0cnVlIGlmIGFuaW1hdGlvbiBzaG91bGQgb2NjdXIgb24gdGhlIFBvcHVwXG4gICAqL1xuICBzZXQgYW5pbWF0ZWQodmFsOiBib29sZWFuKSB7XG4gICAgY29uc3QgdHJ1ZVZhbCA9IHN0cmluZ1RvQm9vbCh2YWwpO1xuICAgIGlmICh0aGlzLiNhbmltYXRlZCAhPT0gdHJ1ZVZhbCkge1xuICAgICAgdGhpcy4jYW5pbWF0ZWQgPSB0cnVlVmFsO1xuICAgICAgaWYgKHRydWVWYWwpIHtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5BTklNQVRFRCwgJycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlcy5BTklNQVRFRCk7XG4gICAgICB9XG4gICAgICB0aGlzLiNyZWZyZXNoQW5pbWF0ZWQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgYW5pbWF0aW9uIHdpbGwgb2NjdXIgb24gdGhlIFBvcHVwXG4gICAqL1xuICBnZXQgYW5pbWF0ZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuI2FuaW1hdGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZnJlc2hlcyB3aGV0aGVyIG9yIG5vdCBhbmltYXRpb25zIGNhbiBiZSBhcHBsaWVkXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgI3JlZnJlc2hBbmltYXRlZCgpOiB2b2lkIHtcbiAgICB0aGlzLmNvbnRhaW5lcj8uY2xhc3NMaXN0W3RoaXMuYW5pbWF0ZWQgPyAnYWRkJyA6ICdyZW1vdmUnXSgnYW5pbWF0ZWQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gYW5pbWF0aW9uU3R5bGUgdGhlIHR5cGUgb2YgYWxpZ25tZW50IHRvIHVzZSBvbiB0aGlzIGNvbXBvbmVudCdzXG4gICAqICBZIGNvb3JkaW5hdGUgaW4gcmVsYXRpb24gdG8gYSBwYXJlbnQgZWxlbWVudCdzIFkgY29vcmRpbmF0ZVxuICAgKi9cbiAgI2FuaW1hdGlvblN0eWxlOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWwgdGhlIHN0eWxlIG9mIGFuaW1hdGlvbiB0aGlzIHBvcHVwIHVzZXMgdG8gc2hvdy9oaWRlXG4gICAqL1xuICBzZXQgYW5pbWF0aW9uU3R5bGUodmFsOiBzdHJpbmcpIHtcbiAgICBjb25zdCBjdXJyZW50VmFsID0gdGhpcy4jYW5pbWF0aW9uU3R5bGU7XG4gICAgaWYgKHZhbCAhPT0gY3VycmVudFZhbCAmJiBBTklNQVRJT05fU1RZTEVTLmluY2x1ZGVzKHZhbCkpIHtcbiAgICAgIHRoaXMuI2FuaW1hdGlvblN0eWxlID0gdmFsO1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5BTklNQVRJT05fU1RZTEUsIHZhbCk7XG4gICAgICB0aGlzLiNyZWZyZXNoQW5pbWF0aW9uU3R5bGUoY3VycmVudFZhbCwgdmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4jcmVmcmVzaEFuaW1hdGlvblN0eWxlKCcnLCBjdXJyZW50VmFsKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge3N0cmluZ30gdGhlIHN0eWxlIG9mIGFuaW1hdGlvbiB0aGlzIHBvcHVwIHVzZXMgdG8gc2hvdy9oaWRlXG4gICAqL1xuICBnZXQgYW5pbWF0aW9uU3R5bGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy4jYW5pbWF0aW9uU3R5bGU7XG4gIH1cblxuICAvKipcbiAgICogQ2hhbmdlcyB0aGUgQ1NTIGNsYXNzIGNvbnRyb2xsaW5nIHRoZSBhbmltYXRpb24gc3R5bGUgb2YgdGhlIFBvcHVwXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjdXJyZW50U3R5bGUgdGhlIHR5cGUgb2YgYW5pbWF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZXdTdHlsZSB0aGUgdHlwZSBvZiBhbmltYXRpb25cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICAjcmVmcmVzaEFuaW1hdGlvblN0eWxlKGN1cnJlbnRTdHlsZTogc3RyaW5nLCBuZXdTdHlsZTogc3RyaW5nKSB7XG4gICAgaWYgKCF0aGlzLmNvbnRhaW5lcikgcmV0dXJuO1xuICAgIGNvbnN0IHRoaXNDbCA9IHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdDtcbiAgICBpZiAoY3VycmVudFN0eWxlKSB0aGlzQ2wucmVtb3ZlKGBhbmltYXRpb24tJHtjdXJyZW50U3R5bGV9YCk7XG4gICAgdGhpc0NsLmFkZChgYW5pbWF0aW9uLSR7bmV3U3R5bGV9YCk7XG4gIH1cblxuICAvKipcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBibGVlZCB0cnVlIGlmIHBsYWNlbWVudCBsb2dpYyBzaG91bGQgYWxsb3cgY3Jvc3NpbmdcbiAgICogIG9mIHRoZSBkZWZpbmVkIGBjb250YWluaW5nRWxlbWAgYm91bmRhcnlcbiAgICovXG4gICNibGVlZDogYm9vbGVhbjtcblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufHN0cmluZ30gdmFsIHRydWUgaWYgYmxlZWRzIHNob3VsZCBiZSByZXNwZWN0ZWQgYnkgdGhlIFBvcHVwXG4gICAqL1xuICBzZXQgYmxlZWQodmFsOiBzdHJpbmcgfCBib29sZWFuKSB7XG4gICAgY29uc3QgdHJ1ZVZhbCA9IHN0cmluZ1RvQm9vbCh2YWwpO1xuICAgIGlmICh0aGlzLiNibGVlZCAhPT0gdHJ1ZVZhbCkge1xuICAgICAgdGhpcy4jYmxlZWQgPSAodmFsIGFzIGJvb2xlYW4pO1xuICAgICAgaWYgKHRydWVWYWwpIHtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5CTEVFRCwgJycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlcy5CTEVFRCk7XG4gICAgICB9XG4gICAgICB0aGlzLnBsYWNlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIGJsZWVkcyBhcmUgY3VycmVudGx5IGJlaW5nIHJlc3BlY3RlZCBieSB0aGUgUG9wdXBcbiAgICovXG4gIGdldCBibGVlZCgpOiBzdHJpbmcgfCBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy4jYmxlZWQ7XG4gIH1cblxuICAvKipcbiAgICogQHByb3BlcnR5IHtJZHNQb3B1cEVsZW1lbnRSZWZ9IGNvbnRhaW5pbmdFbGVtIHRoZSBlbGVtZW50IHRvIHVzZSBmb3IgY29udGFpbm1lbnQgb2YgdGhlIFBvcHVwXG4gICAqL1xuICAjY29udGFpbmluZ0VsZW06IElkc1BvcHVwRWxlbWVudFJlZjtcblxuICAvKipcbiAgICogQHBhcmFtIHtJZHNQb3B1cEVsZW1lbnRSZWZ9IHZhbCBhbiBlbGVtZW50IHRoYXQgd2lsbCBhcHBlYXIgdG8gXCJjb250YWluXCIgdGhlIFBvcHVwXG4gICAqL1xuICBzZXQgY29udGFpbmluZ0VsZW0odmFsOiBJZHNQb3B1cEVsZW1lbnRSZWYpIHtcbiAgICBpZiAoISh2YWwgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCB8fCB2YWwgaW5zdGFuY2VvZiBTVkdFbGVtZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy4jY29udGFpbmluZ0VsZW0gIT09IHZhbCkge1xuICAgICAgdGhpcy4jY29udGFpbmluZ0VsZW0gPSB2YWw7XG4gICAgICB0aGlzLnBsYWNlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtJZHNQb3B1cEVsZW1lbnRSZWZ9IHRoZSBlbGVtZW50IGN1cnJlbnRseSBhcHBlYXJpbmcgdG8gXCJjb250YWluXCIgdGhlIFBvcHVwXG4gICAqL1xuICBnZXQgY29udGFpbmluZ0VsZW0oKTogSWRzUG9wdXBFbGVtZW50UmVmIHtcbiAgICByZXR1cm4gdGhpcy4jY29udGFpbmluZ0VsZW07XG4gIH1cblxuICAvKipcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IGFycm93IFNwZWNpZmllcyB3aGV0aGVyIHRvIHNob3cgdGhlIFBvcHVwIEFycm93LCBhbmQgaW4gd2hpY2ggZGlyZWN0aW9uLlxuICAgKiBUaGUgZGlyZWN0aW9uIGlzIGluIHJlbGF0aW9uIHRvIHRoZSBhbGlnbm1lbnQgc2V0dGluZy4gU28gZm9yIGV4YW1wbGUgb2YgeW91IGFsaWduOiB0b3BcbiAgICogeW91IHdhbnQgYXJyb3c6IHRvcCBhcyB3ZWxsLlxuICAgKi9cbiAgI2Fycm93ID0gQVJST1dfVFlQRVNbMF07XG5cbiAgLyoqXG4gICAqIFNwZWNpZmllcyB3aGV0aGVyIHRvIHNob3cgdGhlIFBvcHVwIEFycm93LCBhbmQgaW4gd2hpY2ggZGlyZWN0aW9uLlxuICAgKiBUaGUgZGlyZWN0aW9uIGlzIGluIHJlbGF0aW9uIHRvIHRoZSBhbGlnbm1lbnQgc2V0dGluZy4gU28gZm9yIGV4YW1wbGUgb2YgeW91IGFsaWduOiB0b3BcbiAgICogeW91IHdhbnQgYXJyb3c6IHRvcCBhcyB3ZWxsLlxuICAgKiBAcGFyYW0ge3N0cmluZ3xudWxsfSB2YWwgdGhlIGFycm93IGRpcmVjdGlvbi4gIERlZmF1bHRzIHRvIGBub25lYFxuICAgKi9cbiAgc2V0IGFycm93KHZhbDogc3RyaW5nIHwgbnVsbCkge1xuICAgIGNvbnN0IGN1cnJlbnRWYWwgPSB0aGlzLiNhcnJvdztcbiAgICBsZXQgdHJ1ZVZhbCA9IEFSUk9XX1RZUEVTWzBdO1xuICAgIGlmICh2YWwgJiYgQVJST1dfVFlQRVMuaW5jbHVkZXModmFsKSkge1xuICAgICAgdHJ1ZVZhbCA9IHZhbDtcbiAgICB9XG5cbiAgICBpZiAodHJ1ZVZhbCAhPT0gY3VycmVudFZhbCkge1xuICAgICAgdGhpcy4jYXJyb3cgPSB0cnVlVmFsO1xuICAgICAgaWYgKHRydWVWYWwgIT09IEFSUk9XX1RZUEVTWzBdKSB7XG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuQVJST1csIGAke3RydWVWYWx9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGVzLkFSUk9XKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuI3NldEFycm93RGlyZWN0aW9uKGN1cnJlbnRWYWwsIHRydWVWYWwpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IHRoZSBhcnJvdyBzZXR0aW5nLCBvciBudWxsXG4gICAqL1xuICBnZXQgYXJyb3coKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3QgYXR0ciA9IHRoaXMuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuQVJST1cpO1xuICAgIGlmICghYXR0cikge1xuICAgICAgcmV0dXJuIEFSUk9XX1RZUEVTWzBdO1xuICAgIH1cbiAgICByZXR1cm4gYXR0cjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93L0hpZGUgQXJyb3cgcG9pbnRpbmcgaW4gYSBkaXJlY3Rpb24sIGlmIGFwcGxpY2FibGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGN1cnJlbnREaXIgYSBDU1MgY2xhc3MgcmVwcmVzZW50aW5nIGEgUG9wdXAgQXJyb3cgZGlyZWN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZXdEaXIgYSBDU1MgY2xhc3MgcmVwcmVzZW50aW5nIGEgUG9wdXAgQXJyb3cgZGlyZWN0aW9uXG4gICAqL1xuICAjc2V0QXJyb3dEaXJlY3Rpb24oY3VycmVudERpcjogc3RyaW5nIHwgbnVsbCwgbmV3RGlyOiBzdHJpbmcgfCBudWxsKSB7XG4gICAgaWYgKCF0aGlzLmNvbnRhaW5lcikgcmV0dXJuO1xuXG4gICAgY29uc3QgYXJyb3dFbCA9IHRoaXMuYXJyb3dFbDtcbiAgICBjb25zdCBhcnJvd0VsQ2wgPSB0aGlzLmFycm93RWw/LmNsYXNzTGlzdDtcbiAgICBjb25zdCBpc05vbmUgPSBuZXdEaXIgPT09ICdub25lJztcblxuICAgIGlmIChhcnJvd0VsKSBhcnJvd0VsLmhpZGRlbiA9IGlzTm9uZTtcbiAgICBsZXQgY3NzUGFydCA9ICdhcnJvdyc7XG4gICAgaWYgKGN1cnJlbnREaXIgPT09ICcnKSBhcnJvd0VsQ2w/LnJlbW92ZSguLi5BUlJPV19UWVBFUyk7XG4gICAgZWxzZSBpZiAoY3VycmVudERpcikgYXJyb3dFbENsPy5yZW1vdmUoY3VycmVudERpcik7XG4gICAgaWYgKG5ld0RpciAmJiAhaXNOb25lKSB7XG4gICAgICBhcnJvd0VsQ2w/LmFkZChuZXdEaXIpO1xuICAgICAgY3NzUGFydCArPSBgLSR7bmV3RGlyfWA7XG4gICAgfVxuICAgIGFycm93RWw/LnNldEF0dHJpYnV0ZSgncGFydCcsIGNzc1BhcnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZWFkb25seVxuICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9IHJlZmVyZW5jaW5nIHRoZSBpbnRlcm5hbCBhcnJvdyBlbGVtZW50XG4gICAqL1xuICBnZXQgYXJyb3dFbCgpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcignLmFycm93Jyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtJZHNQb3B1cEVsZW1lbnRSZWZ9IGFycm93VGFyZ2V0XG4gICAqL1xuICAjYXJyb3dUYXJnZXQ6IElkc1BvcHVwRWxlbWVudFJlZjtcblxuICAvKipcbiAgICogU2V0cyB0aGUgZWxlbWVudCB0byBhbGlnbiB3aXRoIHZpYSBhIGNzcyBzZWxlY3RvclxuICAgKiBAcGFyYW0ge0lkc1BvcHVwRWxlbWVudFJlZn0gdmFsIGEgQ1NTIHNlbGVjdG9yIHN0cmluZ1xuICAgKi9cbiAgc2V0IGFycm93VGFyZ2V0KHZhbDogSWRzUG9wdXBFbGVtZW50UmVmIHwgc3RyaW5nKSB7XG4gICAgY29uc3QgaXNTdHJpbmcgPSB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyAmJiB2YWwubGVuZ3RoO1xuICAgIGNvbnN0IGlzRWxlbSA9IHZhbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50IHx8IHZhbCBpbnN0YW5jZW9mIFNWR0VsZW1lbnQ7XG5cbiAgICBpZiAoIWlzU3RyaW5nICYmICFpc0VsZW0pIHtcbiAgICAgIGlmICh0aGlzLiNhcnJvd1RhcmdldCAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLiNhcnJvd1RhcmdldCA9IG51bGw7XG4gICAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZXMuQVJST1dfVEFSR0VUKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgZWxlbTogSWRzUG9wdXBFbGVtZW50UmVmID0gbnVsbDtcbiAgICBpZiAoaXNTdHJpbmcpIHtcbiAgICAgIC8vIEBUT0RPIEhhcmRlbiBmb3Igc2VjdXJpdHkgKFhTUylcbiAgICAgIGNvbnN0IHJvb3ROb2RlID0gZ2V0Q2xvc2VzdFJvb3ROb2RlKCh0aGlzIGFzIGFueSkpO1xuICAgICAgZWxlbSA9IHJvb3ROb2RlLnF1ZXJ5U2VsZWN0b3IodmFsKTtcbiAgICAgIGlmICghKGVsZW0gaW5zdGFuY2VvZiBIVE1MRWxlbWVudCB8fCBlbGVtIGluc3RhbmNlb2YgU1ZHRWxlbWVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5BUlJPV19UQVJHRVQsIHZhbCk7XG4gICAgfSBlbHNlIGlmIChpc0VsZW0pIHtcbiAgICAgIGVsZW0gPSB2YWw7XG4gICAgfVxuXG4gICAgaWYgKGVsZW0gIT09IG51bGwgJiYgKCF0aGlzLiNhcnJvd1RhcmdldCB8fCAhdGhpcy4jYXJyb3dUYXJnZXQuaXNFcXVhbE5vZGUoZWxlbSkpKSB7XG4gICAgICB0aGlzLiNhcnJvd1RhcmdldCA9IGVsZW07XG4gICAgICB0aGlzLiNzZXRBcnJvd0RpcmVjdGlvbignJywgdGhpcy5hcnJvdyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtJZHNQb3B1cEVsZW1lbnRSZWZ9IHRoZSBlbGVtZW50IGluIHRoZSBwYWdlIHRoYXQgdGhlIFBvcHVwIHdpbGwgdGFrZVxuICAgKiBjb29yZGluYXRlcyBmcm9tIGZvciByZWxhdGl2ZSBwbGFjZW1lbnRcbiAgICovXG4gIGdldCBhcnJvd1RhcmdldCgpOiBJZHNQb3B1cEVsZW1lbnRSZWYge1xuICAgIHJldHVybiB0aGlzLiNhcnJvd1RhcmdldCB8fCB0aGlzLmFsaWduVGFyZ2V0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBwb3NpdGlvblN0eWxlIHRoZSBtZXRob2QgaW4gd2hpY2ggdGhlIFBvcHVwIGlzIHBvc2l0aW9uZWRcbiAgICovXG4gICNwb3NpdGlvblN0eWxlOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWwgdGhlIHBvc2l0aW9uIHN0eWxlIHN0cmluZ1xuICAgKi9cbiAgc2V0IHBvc2l0aW9uU3R5bGUodmFsOiBzdHJpbmcpIHtcbiAgICBjb25zdCBjdXJyZW50U3R5bGUgPSB0aGlzLiNwb3NpdGlvblN0eWxlO1xuICAgIGlmIChQT1NJVElPTl9TVFlMRVMuaW5jbHVkZXModmFsKSkge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5QT1NJVElPTl9TVFlMRSwgdmFsKTtcbiAgICAgIHRoaXMuI3Bvc2l0aW9uU3R5bGUgPSB2YWw7XG5cbiAgICAgIGlmICh2YWwgIT09IGN1cnJlbnRTdHlsZSkge1xuICAgICAgICB0aGlzLiNyZWZyZXNoUG9zaXRpb25TdHlsZShjdXJyZW50U3R5bGUsIHZhbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLiNyZWZyZXNoUG9zaXRpb25TdHlsZSgnJywgY3VycmVudFN0eWxlKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5wbGFjZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgY3VycmVudCBwb3NpdGlvbiBzdHlsZVxuICAgKi9cbiAgZ2V0IHBvc2l0aW9uU3R5bGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy4jcG9zaXRpb25TdHlsZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGFuZ2VzIHRoZSBDU1MgY2xhc3MgY29udHJvbGxpbmcgdGhlIHBvc2l0aW9uIHN0eWxlIG9mIHRoZSBQb3B1cFxuICAgKiBAcGFyYW0ge3N0cmluZ30gY3VycmVudFN0eWxlIHRoZSBjdXJyZW50IHBvc2l0aW9uIHR5cGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5ld1N0eWxlIHRoZSBuZXcgcG9zaXRpb24gdHlwZVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gICNyZWZyZXNoUG9zaXRpb25TdHlsZShjdXJyZW50U3R5bGU6IHN0cmluZywgbmV3U3R5bGU6IHN0cmluZykge1xuICAgIGlmICghdGhpcy5jb250YWluZXIpIHJldHVybjtcbiAgICBjb25zdCB0aGlzQ2wgPSB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3Q7XG4gICAgaWYgKGN1cnJlbnRTdHlsZSkgdGhpc0NsLnJlbW92ZShgcG9zaXRpb24tJHtjdXJyZW50U3R5bGV9YCk7XG4gICAgdGhpc0NsLmFkZChgcG9zaXRpb24tJHtuZXdTdHlsZX1gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSdW5zIG9uIHZpZXdwb3J0IHJlc2l6ZSB0byBjb3JyZWN0IGEgQ1NTIGNsYXNzIHRoYXQgY29udHJvbHMgc2Nyb2xsaW5nIGJlaGF2aW9yIHdpdGhpbiB2aWV3cG9ydC1wb3NpdGlvbmVkIHBvcHVwc1xuICAgKi9cbiAgI2NoZWNrVmlld3BvcnRQb3NpdGlvblNjcm9sbGluZygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuY29udGFpbmVyIHx8ICF0aGlzLndyYXBwZXIpIHJldHVybjtcbiAgICBjb25zdCBjbCA9IHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdDtcbiAgICBjbC5yZW1vdmUoJ2ZpdC12aWV3cG9ydCcpO1xuXG4gICAgY29uc3Qgd3JhcHBlclNjcm9sbEhlaWdodCA9IHRoaXMud3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG4gICAgY29uc3QgY29udGFpbmVyU2Nyb2xsSGVpZ2h0ID0gdGhpcy5jb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xuICAgIGNvbnN0IG5lZWRzRml4aW5nID0gd3JhcHBlclNjcm9sbEhlaWdodCA+IGNvbnRhaW5lclNjcm9sbEhlaWdodDtcbiAgICBpZiAobmVlZHNGaXhpbmcpIHtcbiAgICAgIGNsLmFkZCgnZml0LXZpZXdwb3J0Jyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0eXBlIFRoZSBzdHlsZSBvZiBwb3B1cCB0byBkaXNwbGF5LlxuICAgKiBDYW4gYmUgJ25vbmUnLCAnbWVudScsICdtZW51LWFsdCcsICd0b29sdGlwJywgJ3Rvb2x0aXAtYWx0J1xuICAgKi9cbiAgI3R5cGU6IHN0cmluZztcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbCBUaGUgcG9wdXAgdHlwZVxuICAgKi9cbiAgc2V0IHR5cGUodmFsOiBzdHJpbmcpIHtcbiAgICBjb25zdCBjdXJyZW50VmFsID0gdGhpcy4jdHlwZTtcbiAgICBpZiAodmFsICYmIGN1cnJlbnRWYWwgIT09IHZhbCAmJiBUWVBFUy5pbmNsdWRlcyh2YWwpKSB7XG4gICAgICB0aGlzLiN0eXBlID0gdmFsO1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5UWVBFLCB0aGlzLiN0eXBlKTtcbiAgICAgIHRoaXMuI3JlZnJlc2hQb3B1cFR5cGVDbGFzcyhjdXJyZW50VmFsLCB2YWwpO1xuICAgICAgdGhpcy5wbGFjZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiNyZWZyZXNoUG9wdXBUeXBlQ2xhc3MoJycsIGN1cnJlbnRWYWwpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgdHlwZSBhc3NpZ25lZCB0byB0aGUgUG9wdXBcbiAgICovXG4gIGdldCB0eXBlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuI3R5cGU7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGN1cnJlbnRUeXBlIHRoZSBjdXJyZW50IHR5cGUgQ1NTIGNsYXNzIHRvIHJlbW92ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3VHlwZSB0aGUgbmV3IHR5cGUgQ1NTIGNsYXNzIHRvIGFwcGx5XG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgI3JlZnJlc2hQb3B1cFR5cGVDbGFzcyhjdXJyZW50VHlwZTogc3RyaW5nLCBuZXdUeXBlOiBzdHJpbmcpIHtcbiAgICBpZiAoIXRoaXMuY29udGFpbmVyKSByZXR1cm47XG4gICAgY29uc3QgdGhpc0NsID0gdGhpcy5jb250YWluZXIuY2xhc3NMaXN0O1xuICAgIGlmIChjdXJyZW50VHlwZSkgdGhpc0NsLnJlbW92ZShjdXJyZW50VHlwZSk7XG4gICAgdGhpc0NsLmFkZChuZXdUeXBlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IG9wZW4gdHJ1ZSBpZiB0aGUgUG9wdXAgaXMgbm90IG9ubHkgdmlzaWJsZSwgYnV0IGFsc28gZnVsbHktYW5pbWF0ZWQgb3BlblxuICAgKi9cbiAgb3BlbjogYm9vbGVhbjtcblxuICAvKipcbiAgICogQHByb3BlcnR5IHtib29sZWFufSB2aXNpYmxlIHRydWUgaWYgdGhlIFBvcHVwIHNob3VsZCBiZSB2aXNpYmxlXG4gICAqL1xuICAjdmlzaWJsZTogYm9vbGVhbjtcblxuICAvKipcbiAgICogV2hldGhlciBvciBub3QgdGhlIGNvbXBvbmVudCBzaG91bGQgYmUgZGlzcGxheWVkXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsIGEgYm9vbGVhbiBmb3IgZGlzcGxheWluZyBvciBoaWRpbmcgdGhlIHBvcHVwXG4gICAqL1xuICBzZXQgdmlzaWJsZSh2YWw6IGJvb2xlYW4pIHtcbiAgICBjb25zdCB0cnVlVmFsID0gc3RyaW5nVG9Cb29sKHZhbCk7XG4gICAgaWYgKHRoaXMuI3Zpc2libGUgIT09IHRydWVWYWwpIHtcbiAgICAgIHRoaXMuI3Zpc2libGUgPSB0cnVlVmFsO1xuICAgICAgaWYgKHRydWVWYWwpIHtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5WSVNJQkxFLCAnJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGVzLlZJU0lCTEUpO1xuICAgICAgfVxuICAgICAgdGhpcy5yZWZyZXNoVmlzaWJpbGl0eSgpO1xuICAgIH1cbiAgfVxuXG4gIGdldCB2aXNpYmxlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLiN2aXNpYmxlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJ1bnMgdGhlIHNob3cvaGlkZSByb3V0aW5lcyBvZiB0aGUgUG9wdXAgYmFzZWQgb24gY3VycmVudCB2aXNpYmxpdHkgc3RhdGUuXG4gICAqIEBhc3luY1xuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGFzeW5jIHJlZnJlc2hWaXNpYmlsaXR5KCkge1xuICAgIGlmICghdGhpcy5jb250YWluZXIpIHJldHVybjtcbiAgICBjb25zdCBjbCA9IHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdDtcbiAgICBpZiAodGhpcy4jdmlzaWJsZSAmJiAhY2wuY29udGFpbnMoJ29wZW4nKSkge1xuICAgICAgYXdhaXQgdGhpcy5zaG93KCk7XG4gICAgfVxuICAgIGlmICghdGhpcy4jdmlzaWJsZSAmJiAhdGhpcy5oYXNBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJykpIHtcbiAgICAgIGF3YWl0IHRoaXMuaGlkZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJvcGVydHkge251bWJlcn0geCByZXByZXNlbnRzIHRoZSBYIGNvb3JkaW5hdGUgaWYgcGxhY2VkIHZpYSBjb29yZGluYXRlcyxcbiAgICogb3IgdGhlIFggb2Zmc2V0IHdoZW4gcGxhY2VkIGluIHJlbGF0aW9uIHRvIGEgcGFyZW50IGVsZW1lbnQuXG4gICAqL1xuICAjeDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBYIChsZWZ0KSBjb29yZGluYXRlIG9mIHRoZSBQb3B1cFxuICAgKiBAcGFyYW0ge251bWJlcn0gdmFsIHRoZSBjb29yZGluYXRlJ3MgdmFsdWVcbiAgICovXG4gIHNldCB4KHZhbDogbnVtYmVyKSB7XG4gICAgbGV0IHRydWVWYWwgPSBwYXJzZUludCh2YWw/LnRvU3RyaW5nKCksIDEwKTtcbiAgICBpZiAoTnVtYmVyLmlzTmFOKHRydWVWYWwpKSB7XG4gICAgICB0cnVlVmFsID0gMDtcbiAgICB9XG5cbiAgICBpZiAodHJ1ZVZhbCAhPT0gdGhpcy4jeCkge1xuICAgICAgdGhpcy4jeCA9IHRydWVWYWw7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLlgsIHRydWVWYWwudG9TdHJpbmcoKSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy4jeDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJvcGVydHkge251bWJlcn0geSByZXByZXNlbnRzIHRoZSBZIGNvb3JkaW5hdGUgaWYgcGxhY2VkIHZpYSBjb29yZGluYXRlcyxcbiAgICogb3IgdGhlIFkgb2Zmc2V0IHdoZW4gcGxhY2VkIGluIHJlbGF0aW9uIHRvIGEgcGFyZW50IGVsZW1lbnQuXG4gICAqL1xuICAjeTogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBZICh0b3ApIGNvb3JkaW5hdGUgb2YgdGhlIFBvcHVwXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2YWwgdGhlIGNvb3JkaW5hdGUncyB2YWx1ZVxuICAgKi9cbiAgc2V0IHkodmFsOiBudW1iZXIpIHtcbiAgICBsZXQgdHJ1ZVZhbCA9IHBhcnNlSW50KHZhbD8udG9TdHJpbmcoKSwgMTApO1xuICAgIGlmIChOdW1iZXIuaXNOYU4odHJ1ZVZhbCkpIHtcbiAgICAgIHRydWVWYWwgPSAwO1xuICAgIH1cblxuICAgIGlmICh0cnVlVmFsICE9PSB0aGlzLiN5KSB7XG4gICAgICB0aGlzLiN5ID0gdHJ1ZVZhbDtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuWSwgdHJ1ZVZhbC50b1N0cmluZygpKTtcbiAgICB9XG4gIH1cblxuICBnZXQgeSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLiN5O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgYW4gWC9ZIHBvc2l0aW9uIGFuZCBvcHRpb25hbGx5IHNob3dzL3BsYWNlcyB0aGUgUG9wdXBcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggdGhlIHggY29vcmRpbmF0ZS9vZmZzZXQgdmFsdWVcbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgdGhlIHkgY29vcmRpbmF0ZS9vZmZzZXQgdmFsdWVcbiAgICogQHBhcmFtIHtib29sZWFufSBkb1Nob3cgdHJ1ZSBpZiB0aGUgUG9wdXAgc2hvdWxkIGJlIGRpc3BsYXllZCBiZWZvcmUgcGxhY2luZ1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGRvUGxhY2VtZW50IHRydWUgaWYgdGhlIGNvbXBvbmVudCBzaG91bGQgcnVuIGl0cyBwbGFjZW1lbnQgcm91dGluZVxuICAgKi9cbiAgc2V0UG9zaXRpb24oXG4gICAgeDogbnVtYmVyIHwgbnVsbCA9IG51bGwsXG4gICAgeTogbnVtYmVyIHwgbnVsbCA9IG51bGwsXG4gICAgZG9TaG93OiBib29sZWFuIHwgbnVsbCA9IG51bGwsXG4gICAgZG9QbGFjZW1lbnQ6IGJvb2xlYW4gfCBudWxsID0gbnVsbFxuICApIHtcbiAgICBjb25zdCBlbGVtOiBhbnkgPSB0aGlzO1xuICAgIGlmICghTnVtYmVyLmlzTmFOKHgpKSBlbGVtLnggPSB4O1xuICAgIGlmICghTnVtYmVyLmlzTmFOKHkpKSBlbGVtLnkgPSB5O1xuICAgIGlmIChkb1Nob3cpIHRoaXMudmlzaWJsZSA9IHRydWU7XG4gICAgaWYgKGRvUGxhY2VtZW50KSB0aGlzLnBsYWNlKCk7XG4gIH1cblxuICAvKipcbiAgICogU2hvd3MgdGhlIFBvcHVwXG4gICAqIEBhc3luY1xuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGFzeW5jIHNob3coKSB7XG4gICAgaWYgKCF0aGlzLnZpc2libGUgfHwgIXRoaXMuY29udGFpbmVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRml4IGxvY2F0aW9uIGZpcnN0XG4gICAgdGhpcy5wbGFjZSgpO1xuXG4gICAgdGhpcy5wbGFjZUFycm93KHRoaXMuI3RhcmdldEFsaWduRWRnZSk7XG5cbiAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKTtcblxuICAgIC8vIENoYW5nZSB0cmFuc3BhcmVuY3kvdmlzaWJpbGl0eVxuICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtcbiAgICB0aGlzLm9wZW4gPSB0cnVlO1xuXG4gICAgaWYgKHRoaXMuYW5pbWF0ZWQpIHtcbiAgICAgIGF3YWl0IHdhaXRGb3JUcmFuc2l0aW9uRW5kKHRoaXMuY29udGFpbmVyLCAnb3BhY2l0eScpO1xuICAgIH1cblxuICAgIC8vIFVuYmx1ciBpZiBuZWVkZWRcbiAgICB0aGlzLmNvcnJlY3QzZE1hdHJpeCgpO1xuXG4gICAgdGhpcy50cmlnZ2VyRXZlbnQoJ3Nob3cnLCB0aGlzLCB7XG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgZGV0YWlsOiB7XG4gICAgICAgIGVsZW06IHRoaXNcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIaWRlcyB0aGUgUG9wdXBcbiAgICogQGFzeW5jXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgYXN5bmMgaGlkZSgpIHtcbiAgICBpZiAodGhpcy52aXNpYmxlIHx8ICF0aGlzLmNvbnRhaW5lcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgIHRoaXMuI3JlbW92ZTNkTWF0cml4KCk7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpO1xuXG4gICAgaWYgKHRoaXMuYW5pbWF0ZWQpIHtcbiAgICAgIGF3YWl0IHdhaXRGb3JUcmFuc2l0aW9uRW5kKHRoaXMuY29udGFpbmVyLCAnb3BhY2l0eScpO1xuICAgIH1cblxuICAgIC8vIEFsd2F5cyBmaXJlIHRoZSAnaGlkZScgZXZlbnRcbiAgICB0aGlzLnRyaWdnZXJFdmVudCgnaGlkZScsIHRoaXMsIHtcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgZWxlbTogdGhpc1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSdW5zIHRoZSBjb25maWd1cmVkIHBsYWNlbWVudCByb3V0aW5lIGZvciB0aGUgUG9wdXBcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBwbGFjZSgpOiB2b2lkIHtcbiAgICAvLyBOT1RFOiBwb3NpdGlvbi1zdHlsZT1cInZpZXdwb3J0XCIgaXMgZHJpdmVuIGJ5IENTUyBvbmx5XG4gICAgaWYgKHRoaXMudmlzaWJsZSAmJiB0aGlzLnBvc2l0aW9uU3R5bGUgIT09ICd2aWV3cG9ydCcpIHtcbiAgICAgIHRoaXMuI3VwZGF0ZU1heEhlaWdodFByb3AoKTtcblxuICAgICAgY29uc3QgeyBhbGlnblRhcmdldCB9ID0gdGhpcztcbiAgICAgIGlmICghYWxpZ25UYXJnZXQpIHtcbiAgICAgICAgdGhpcy4jcGxhY2VBdENvb3JkcygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy4jcGxhY2VBZ2FpbnN0VGFyZ2V0KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBsYWNlcyB0aGUgUG9wdXAgdXNpbmcgbnVtZXJpYyB4L3kgY29vcmRpbmF0ZXMgYXMgYSBzdGFydGluZyBwb2ludC5cbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICAjcGxhY2VBdENvb3JkcygpOiB2b2lkIHtcbiAgICBsZXQgcG9wdXBSZWN0ID0gdGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBsZXQgeCA9IHRoaXMueDtcbiAgICBsZXQgeSA9IHRoaXMueTtcblxuICAgIHN3aXRjaCAodGhpcy5hbGlnblgpIHtcbiAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgeCAtPSBwb3B1cFJlY3Qud2lkdGg7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnY2VudGVyJzpcbiAgICAgICAgeCAtPSBwb3B1cFJlY3Qud2lkdGggLyAyO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6IC8vIGxlZnRcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgc3dpdGNoICh0aGlzLmFsaWduWSkge1xuICAgICAgY2FzZSAnYm90dG9tJzpcbiAgICAgICAgeSAtPSBwb3B1cFJlY3QuaGVpZ2h0O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2NlbnRlcic6XG4gICAgICAgIHkgLT0gcG9wdXBSZWN0LmhlaWdodCAvIDI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDogLy8gdG9wXG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB0aGUgRE9NUmVjdCB0byByZWZsZWN0IG5ldyB4L3kgdmFsdWVzXG4gICAgcG9wdXBSZWN0LnggPSB4O1xuICAgIHBvcHVwUmVjdC55ID0geTtcblxuICAgIC8vIElmIHRoZSBQb3B1cCBibGVlZHMgb2ZmIHRoZSB2aWV3cG9ydCwgbnVkZ2UgaXQgYmFjayBpbnRvIGZ1bGwgdmlld1xuICAgIHBvcHVwUmVjdCA9IHRoaXMuI251ZGdlKHBvcHVwUmVjdCk7XG5cbiAgICAvLyBBY2NvdW50IGZvciBhYnNvbHV0ZS1wb3NpdGlvbmVkIHBhcmVudHNcbiAgICBwb3B1cFJlY3QgPSB0aGlzLiNyZW1vdmVSZWxhdGl2ZVBhcmVudERpc3RhbmNlKHRoaXMucGFyZW50Tm9kZSBhcyBIVE1MRWxlbWVudCwgcG9wdXBSZWN0LCB0aGlzLnNjcm9sbFBhcmVudEVsZW0pO1xuXG4gICAgLy8gTWFrZSB1c2VyLWRlZmluZWQgYWRqdXN0bWVudHMsIGlmIGFwcGxpY2FibGVcbiAgICBpZiAodHlwZW9mIHRoaXMub25QbGFjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcG9wdXBSZWN0ID0gdGhpcy5vblBsYWNlKHBvcHVwUmVjdCk7XG4gICAgfVxuXG4gICAgdGhpcy4jcmVuZGVyUGxhY2VtZW50SW5QaXhlbHMocG9wdXBSZWN0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQbGFjZXMgdGhlIFBvcHVwIHVzaW5nIGFuIGV4dGVybmFsIGVsZW1lbnQgYXMgYSBzdGFydGluZyBwb2ludC5cbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICAjcGxhY2VBZ2FpbnN0VGFyZ2V0KCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5hbGlnblRhcmdldCkgcmV0dXJuO1xuXG4gICAgLy8gRGV0ZWN0IHNpemVzL2xvY2F0aW9ucyBvZiB0aGUgcG9wdXAgYW5kIHRoZSBhbGlnbm1lbnQgdGFyZ2V0IEVsZW1lbnRcbiAgICBsZXQgcG9wdXBSZWN0ID0gdGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgIHRoaXMuI3RhcmdldEFsaWduRWRnZSA9IHRoaXMuI2dldFBsYWNlbWVudEVkZ2UocG9wdXBSZWN0KTtcblxuICAgIGNvbnN0IG9wcG9zaXRlRWRnZSA9IHRoaXMuI2dldE9wcG9zaXRlRWRnZSh0aGlzLmFsaWduRWRnZSk7XG4gICAgY29uc3Qgc2hvdWxkU3dpdGNoWFkgPSB0aGlzLmFsaWduRWRnZSAhPT0gdGhpcy4jdGFyZ2V0QWxpZ25FZGdlXG4gICAgICAmJiB0aGlzLiNnZXRPcHBvc2l0ZUVkZ2UodGhpcy5hbGlnbkVkZ2UpICE9PSB0aGlzLiN0YXJnZXRBbGlnbkVkZ2U7XG4gICAgbGV0IHN3aXRjaFJlc3VsdCA9IHtcbiAgICAgIGZsaXA6IHRoaXMuYWxpZ25FZGdlICE9PSB0aGlzLiN0YXJnZXRBbGlnbkVkZ2UgJiYgIXNob3VsZFN3aXRjaFhZLFxuICAgICAgb3Bwb3NpdGVFZGdlLFxuICAgICAgc2hvdWxkU3dpdGNoWFksXG4gICAgICB0YXJnZXRFZGdlOiB0aGlzLiNhbGlnbkVkZ2UsXG4gICAgICB4OiBzaG91bGRTd2l0Y2hYWSA/IHRoaXMueSA6IHRoaXMueCxcbiAgICAgIHk6IHNob3VsZFN3aXRjaFhZID8gdGhpcy54IDogdGhpcy55XG4gICAgfTtcblxuICAgIGlmICh0eXBlb2YgdGhpcy5vblhZU3dpdGNoID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBzd2l0Y2hSZXN1bHQgPSB0aGlzLm9uWFlTd2l0Y2goc3dpdGNoUmVzdWx0KTtcbiAgICB9XG5cbiAgICBsZXQgeCA9IHN3aXRjaFJlc3VsdC54O1xuICAgIGxldCB5ID0gc3dpdGNoUmVzdWx0Lnk7XG5cbiAgICBjb25zdCB0YXJnZXRSZWN0ID0gdGhpcy5hbGlnblRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBjb25zdCBhbGlnbkVkZ2UgPSB0aGlzLiN0YXJnZXRBbGlnbkVkZ2UgfHwgdGhpcy5hbGlnbkVkZ2U7XG4gICAgbGV0IGFsaWduWENlbnRlcmVkID0gZmFsc2U7XG4gICAgbGV0IGFsaWduWUNlbnRlcmVkID0gZmFsc2U7XG5cbiAgICAvLyBBZGQvcmVtb3ZlIENTUyBjbGFzcyBpZiB0aGUgcG9wdXAgb24gYW4gb3Bwb3NpdGUgYWxpZ24gZWRnZVxuICAgIHRoaXMuY29udGFpbmVyPy5jbGFzc0xpc3QudG9nZ2xlKCdmbGlwcGVkJywgdGhpcy5hbGlnbkVkZ2UgIT09IHRoaXMuI3RhcmdldEFsaWduRWRnZSAmJiAhc2hvdWxkU3dpdGNoWFkpO1xuXG4gICAgLypcbiAgICAgKiBOT1RFOiBBbGwgY2FsY3VsYXRhdGlvbnMgYXJlIGJhc2VkIG9uIHRoZSB0b3AvbGVmdCBjb3JuZXIgb2YgdGhlIGVsZW1lbnQgcmVjdGFuZ2xlcy5cbiAgICAgKi9cbiAgICAvLyBJZiBhbGlnbm1lbnQgZWRnZSBpcyB0b3Agb3IgYm90dG9tLCB0aGUgZGVmaW5lZCBZIGNvb3JkaW5hdGUgaXMgdXNlZCBhcyBhbiBvZmZzZXQsXG4gICAgLy8gYW5kIHRoZSBYIHBvc2l0aW9uIHdpbGwgYmUgc2V0IHVzaW5nIHRoZSBwcm92aWRlZCBYIGFsaWdubWVudCBydWxlIChvciBjZW50ZXJlZCBieSBkZWZhdWx0KVxuICAgIC8vIGFuZCB1c2UgdGhlIGRlZmluZWQgWCBjb29yZGluYXRlIGFzIGEgWCBvZmZzZXQuXG4gICAgaWYgKEFMSUdOTUVOVFNfWS5pbmNsdWRlcyhhbGlnbkVkZ2UpKSB7XG4gICAgICBzd2l0Y2ggKGFsaWduRWRnZSkge1xuICAgICAgICBjYXNlICd0b3AnOlxuICAgICAgICAgIHkgPSB0YXJnZXRSZWN0LnRvcCAtIHBvcHVwUmVjdC5oZWlnaHQgLSB5O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdib3R0b20nOlxuICAgICAgICAgIHkgPSB0YXJnZXRSZWN0LmJvdHRvbSArIHk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6IC8vIGNlbnRlclxuICAgICAgICAgIHkgPSAodGFyZ2V0UmVjdC50b3AgKyB0YXJnZXRSZWN0LmhlaWdodCAvIDIpIC0gKHBvcHVwUmVjdC5oZWlnaHQgLyAyKSArIHk7XG4gICAgICAgICAgYWxpZ25ZQ2VudGVyZWQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBzd2l0Y2ggKHRoaXMuYWxpZ25YKSB7XG4gICAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICAgIHggPSB0YXJnZXRSZWN0LmxlZnQgKyB4O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgeCA9IHRhcmdldFJlY3QucmlnaHQgLSBwb3B1cFJlY3Qud2lkdGggLSB4O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OiAvLyBjZW50ZXJcbiAgICAgICAgICB4ID0gKHRhcmdldFJlY3QubGVmdCArIHRhcmdldFJlY3Qud2lkdGggLyAyKSAtIHBvcHVwUmVjdC53aWR0aCAvIDIgKyB4O1xuICAgICAgICAgIGFsaWduWENlbnRlcmVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiBhbGlnbm1lbnQgZWRnZSBpcyBsZWZ0IG9yIHJpZ2h0LCB0aGUgZGVmaW5lZCBYIGNvb3JkaW5hdGUgaXMgdXNlZCBhcyBhbiBvZmZzZXQsXG4gICAgLy8gYW5kIHRoZSBZIHBvc2l0aW9uIHdpbGwgYmUgc2V0IHVzaW5nIHRoZSBwcm92aWRlZCBZIGFsaWdubWVudCBydWxlIChvciBjZW50ZXJlZCBieSBkZWZhdWx0KVxuICAgIC8vIGFuZCB1c2UgdGhlIGRlZmluZWQgWSBjb29yZGluYXRlIGFzIGEgWSBvZmZzZXQuXG4gICAgaWYgKEFMSUdOTUVOVFNfWC5pbmNsdWRlcyhhbGlnbkVkZ2UpKSB7XG4gICAgICBzd2l0Y2ggKGFsaWduRWRnZSkge1xuICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgICB4ID0gdGFyZ2V0UmVjdC5sZWZ0IC0gcG9wdXBSZWN0LndpZHRoIC0geDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICAgIHggPSB0YXJnZXRSZWN0LnJpZ2h0ICsgeDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDogLy8gY2VudGVyXG4gICAgICAgICAgaWYgKGFsaWduWENlbnRlcmVkKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgeCA9ICh0YXJnZXRSZWN0LmxlZnQgKyB0YXJnZXRSZWN0LndpZHRoIC8gMikgLSBwb3B1cFJlY3Qud2lkdGggLyAyICsgeDtcbiAgICAgIH1cblxuICAgICAgc3dpdGNoICh0aGlzLmFsaWduWSkge1xuICAgICAgICBjYXNlICd0b3AnOlxuICAgICAgICAgIHkgPSB0YXJnZXRSZWN0LnRvcCArIHk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2JvdHRvbSc6XG4gICAgICAgICAgeSA9IHRhcmdldFJlY3QuYm90dG9tIC0gcG9wdXBSZWN0LmhlaWdodCArIHk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6IC8vIGNlbnRlclxuICAgICAgICAgIGlmIChhbGlnbllDZW50ZXJlZCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIHkgPSAodGFyZ2V0UmVjdC50b3AgKyB0YXJnZXRSZWN0LmhlaWdodCAvIDIpIC0gKHBvcHVwUmVjdC5oZWlnaHQgLyAyKSArIHk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgbm8gYWxpZ25tZW50IGVkZ2UgcGxhY2UgaXQgYXQgdGhlIGNlbnRlclxuICAgIGlmIChhbGlnbkVkZ2UgPT09ICdub25lJykge1xuICAgICAgY29uc3QgY29udGFpbmVyV2lkdGggPSB0aGlzLmNvbnRhaW5pbmdFbGVtPy5jbGllbnRXaWR0aDtcbiAgICAgIGNvbnN0IGNvbnRhaW5lckhlaWdodCA9IHRoaXMuY29udGFpbmluZ0VsZW0/LmNsaWVudEhlaWdodDtcblxuICAgICAgaWYgKGNvbnRhaW5lcldpZHRoICYmIGNvbnRhaW5lckhlaWdodCkge1xuICAgICAgICB4ID0gKGNvbnRhaW5lcldpZHRoIC0gcG9wdXBSZWN0LndpZHRoKSAvIDI7XG4gICAgICAgIHkgPSAoY29udGFpbmVySGVpZ2h0IC0gcG9wdXBSZWN0LmhlaWdodCkgLyAyO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNldCBhZGp1c3RlZCB2YWx1ZXNcbiAgICBwb3B1cFJlY3QueCA9IHg7XG4gICAgcG9wdXBSZWN0LnkgPSB5O1xuXG4gICAgLy8gSWYgdGhlIFBvcHVwIGJsZWVkcyBvZmYgdGhlIHZpZXdwb3J0LCBudWRnZSBpdCBiYWNrIGludG8gZnVsbCB2aWV3XG4gICAgcG9wdXBSZWN0ID0gdGhpcy4jbnVkZ2UocG9wdXBSZWN0KTtcblxuICAgIC8vIEFjY291bnQgZm9yIGFic29sdXRlLXBvc2l0aW9uZWQgcGFyZW50c1xuICAgIHBvcHVwUmVjdCA9IHRoaXMuI3JlbW92ZVJlbGF0aXZlUGFyZW50RGlzdGFuY2UodGhpcy5wYXJlbnROb2RlIGFzIEhUTUxFbGVtZW50LCBwb3B1cFJlY3QsIHRoaXMuc2Nyb2xsUGFyZW50RWxlbSk7XG5cbiAgICAvLyBNYWtlIHVzZXItZGVmaW5lZCBhZGp1c3RtZW50cywgaWYgYXBwbGljYWJsZVxuICAgIGlmICh0eXBlb2YgdGhpcy5vblBsYWNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBwb3B1cFJlY3QgPSB0aGlzLm9uUGxhY2UocG9wdXBSZWN0KTtcbiAgICB9XG5cbiAgICB0aGlzLiNyZW5kZXJQbGFjZW1lbnRJblBpeGVscyhwb3B1cFJlY3QpO1xuXG4gICAgLy8gSWYgYW4gYXJyb3cgaXMgZGlzcGxheWVkLCBwbGFjZSBpdCBjb3JyZWN0bHlcbiAgICBpZiAodGhpcy5hcnJvdyAmJiB0aGlzLmFycm93ICE9PSBBUlJPV19UWVBFU1swXSkge1xuICAgICAgdGhpcy4jc2V0QXJyb3dEaXJlY3Rpb24oJycsIHRoaXMuI3RhcmdldEFsaWduRWRnZSk7XG4gICAgICB0aGlzLnBsYWNlQXJyb3codGhpcy4jdGFyZ2V0QWxpZ25FZGdlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogT3B0aW9uYWwgY2FsbGJhY2sgdGhhdCBjYW4gYmUgdXNlZCB0byBhZGp1c3QgdGhlIFBvcHVwJ3MgcGxhY2VtZW50XG4gICAqIGFmdGVyIGFsbCBpbnRlcm5hbCBhZGp1c3RtZW50cyBhcmUgbWFkZS5cbiAgICogQHBhcmFtIHtET01SZWN0fSBwb3B1cFJlY3QgYSBSZWN0IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIHBvcHVwLlxuICAgKiBAcmV0dXJucyB7b2JqZWN0fSBhbiBhZGp1c3RlZCBSZWN0IG9iamVjdCB3aXRoIFwibnVkZ2VkXCIgY29vcmRpbmF0ZXMuXG4gICAqL1xuICBvblBsYWNlKHBvcHVwUmVjdDogRE9NUmVjdCk6IERPTVJlY3Qge1xuICAgIHJldHVybiBwb3B1cFJlY3Q7XG4gIH1cblxuICAvKipcbiAgICogT3B0aW9uYWwgY2FsbGJhY2sgdGhhdCBjYW4gYmUgdXNlZCB0byBmdXJ0aGVyIGFkanVzdCB0aGUgUG9wdXAncyB4L3kgb2Zmc2V0c1xuICAgKiBpZiBhIGZsaXAgb3Igb3RoZXIgbW9kaWZpY2F0aW9uIGlzIG1hZGUgdG8gdGhlIGFsaWdubWVudCBlZGdlXG4gICAqIHdoZW4gYmVpbmcgcGxhY2VkIGluIGFsaWdubWVudCBtb2RlLlxuICAgKiBAcGFyYW0ge0lkc1BvcHVwWFlTd2l0Y2hSZXN1bHR9IHJlc3VsdCBjb250YWlucyBzZXR0aW5ncyByZWxhdGVkIHRvIHRoZSB4L3kgYWRqdXN0bWVudC5cbiAgICogQHJldHVybnMge0lkc1BvcHVwWFlTd2l0Y2hSZXN1bHR9IHByb3ZpZGVzIGZ1cnRoZXIgbW9kaWZpY2F0aW9ucy5cbiAgICovXG4gIG9uWFlTd2l0Y2gocmVzdWx0OiBJZHNQb3B1cFhZU3dpdGNoUmVzdWx0KSB7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGdXJ0aGVyIGFkanVzdHMgcGxhY2VtZW50IG9mIGEgcG9wdXAgYmFzZWQgb24gZGVmaW5lZCBzdHJhdGVnaWVzLlxuICAgKiBAcGFyYW0ge0RPTVJlY3R9IHBvcHVwUmVjdCBhIFJlY3Qgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgcG9wdXAuXG4gICAqIEByZXR1cm5zIHtvYmplY3R9IGFuIGFkanVzdGVkIFJlY3Qgb2JqZWN0IHdpdGggXCJudWRnZWRcIiBjb29yZGluYXRlcy5cbiAgICovXG4gICNudWRnZShwb3B1cFJlY3Q6IERPTVJlY3QpOiBET01SZWN0IHtcbiAgICAvLyBEb24ndCBhZGp1c3QgaWYgYmxlZWRpbmcgaXMgYWxsb3dlZFxuICAgIGlmICh0aGlzLmJsZWVkIHx8ICF0aGlzLmNvbnRhaW5pbmdFbGVtKSB7XG4gICAgICByZXR1cm4gcG9wdXBSZWN0O1xuICAgIH1cblxuICAgIGNvbnN0IHZpZXdwb3J0V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICBjb25zdCB2aWV3cG9ydEhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICBjb25zdCBjb250YWluZXJSZWN0ID0gdGhpcy5jb250YWluaW5nRWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBjb25zdCBibGVlZCA9IHRoaXMuYmxlZWQ7XG5cbiAgICBsZXQgZml4ZWRYID0gcG9wdXBSZWN0Lng7XG4gICAgbGV0IGZpeGVkWSA9IHBvcHVwUmVjdC55O1xuXG4gICAgY29uc3QgcmlnaHRFZGdlID0gYmxlZWQgPyB2aWV3cG9ydFdpZHRoIDogY29udGFpbmVyUmVjdC5yaWdodDtcblxuICAgIGNvbnN0IGxlZnRFZGdlID0gYmxlZWQgPyAwIDogY29udGFpbmVyUmVjdC5sZWZ0O1xuXG4gICAgY29uc3QgdG9wRWRnZSA9IGJsZWVkID8gMCA6IGNvbnRhaW5lclJlY3QudG9wO1xuXG4gICAgY29uc3QgYm90dG9tRWRnZSA9IGJsZWVkID8gdmlld3BvcnRIZWlnaHQgOiBjb250YWluZXJSZWN0LmJvdHRvbTtcblxuICAgIGlmIChwb3B1cFJlY3QucmlnaHQgPiByaWdodEVkZ2UpIHtcbiAgICAgIGZpeGVkWCAtPSAocG9wdXBSZWN0LnJpZ2h0IC0gcmlnaHRFZGdlKTtcbiAgICB9XG4gICAgaWYgKHBvcHVwUmVjdC5sZWZ0IDwgbGVmdEVkZ2UpIHtcbiAgICAgIGZpeGVkWCArPSAoTWF0aC5hYnMocG9wdXBSZWN0LmxlZnQpICsgbGVmdEVkZ2UpO1xuICAgIH1cbiAgICBpZiAocG9wdXBSZWN0LmJvdHRvbSA+IGJvdHRvbUVkZ2UpIHtcbiAgICAgIGZpeGVkWSAtPSAocG9wdXBSZWN0LmJvdHRvbSAtIGJvdHRvbUVkZ2UpO1xuICAgIH1cbiAgICBpZiAocG9wdXBSZWN0LnRvcCA8IHRvcEVkZ2UpIHtcbiAgICAgIGZpeGVkWSArPSAoTWF0aC5hYnMocG9wdXBSZWN0LnRvcCkgKyB0b3BFZGdlKTtcbiAgICB9XG5cbiAgICBwb3B1cFJlY3QueCA9IGZpeGVkWDtcbiAgICBwb3B1cFJlY3QueSA9IGZpeGVkWTtcblxuICAgIHJldHVybiBwb3B1cFJlY3Q7XG4gIH1cblxuICAjZ2V0UGxhY2VtZW50RWRnZShwb3B1cFJlY3Q6IERPTVJlY3QpOiBzdHJpbmcge1xuICAgIGlmICghdGhpcy5jb250YWluaW5nRWxlbSB8fCAhdGhpcy5hbGlnblRhcmdldCkgcmV0dXJuICdub25lJztcblxuICAgIGNvbnN0IHZpZXdwb3J0V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICBjb25zdCB2aWV3cG9ydEhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICBjb25zdCBzY3JvbGxYID0gdGhpcy5jb250YWluaW5nRWxlbS5zY3JvbGxMZWZ0IHx8IDA7XG4gICAgY29uc3Qgc2Nyb2xsWSA9IHRoaXMuY29udGFpbmluZ0VsZW0uc2Nyb2xsVG9wIHx8IDA7XG4gICAgY29uc3QgYmxlZWQgPSB0aGlzLmJsZWVkO1xuICAgIGNvbnN0IGNvbnRhaW5lclJlY3QgPSB0aGlzLmNvbnRhaW5pbmdFbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IHRhcmdldFJlY3QgPSB0aGlzLmFsaWduVGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgLy8gR2V0cyB0aGUgZGlzdGFuY2UgYmV0d2VlbiBhbiBlZGdlIG9uIHRoZSB0YXJnZXQgZWxlbWVudCwgYW5kIGl0cyBvcHBvc2luZyB2aWV3cG9ydCBib3JkZXJcbiAgICBjb25zdCBnZXREaXN0YW5jZSA9IChkaXI6IHN0cmluZykgPT4ge1xuICAgICAgbGV0IGQgPSAwO1xuXG4gICAgICBzd2l0Y2ggKGRpcikge1xuICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgICBkID0gKGJsZWVkID8gMCA6IGNvbnRhaW5lclJlY3QubGVmdCkgLSBzY3JvbGxYIC0gdGFyZ2V0UmVjdC5sZWZ0ICsgdGhpcy54O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgZCA9IChibGVlZCA/IHZpZXdwb3J0V2lkdGggOiBjb250YWluZXJSZWN0LnJpZ2h0KSAtIHNjcm9sbFggLSB0YXJnZXRSZWN0LnJpZ2h0IC0gdGhpcy54O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd0b3AnOlxuICAgICAgICAgIGQgPSAoYmxlZWQgPyAwIDogY29udGFpbmVyUmVjdC50b3ApIC0gc2Nyb2xsWSAtIHRhcmdldFJlY3QudG9wICsgdGhpcy55O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OiAvLyBib3R0b21cbiAgICAgICAgICBkID0gKGJsZWVkID8gdmlld3BvcnRIZWlnaHQgOiBjb250YWluZXJSZWN0LmJvdHRvbSkgLSBzY3JvbGxZIC0gdGFyZ2V0UmVjdC5ib3R0b20gLSB0aGlzLnk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBNYXRoLmFicyhkKTtcbiAgICB9O1xuXG4gICAgY29uc3QgY3VycmVudERpciA9IHRoaXMuYWxpZ25FZGdlO1xuICAgIGNvbnN0IG1lYXN1cmVkUG9wdXBEaW1lbnNpb24gPSBbJ3RvcCcsICdib3R0b20nXS5pbmNsdWRlcyhjdXJyZW50RGlyKSA/ICdoZWlnaHQnIDogJ3dpZHRoJztcblxuICAgIC8vIEFycmF5IG9mIGVkZ2VzIHdoZXJlIHBvcHVwIHNob3VsZCBmaW5kIGl0cyBwbGFjZW1lbnQgaW4gb3JkZXIgc3RhcnRpbmcgZnJvbSBhbGlnbkVkZ2Ugc2V0dGluZ1xuICAgIGNvbnN0IGVkZ2VPcmRlciA9IFtcbiAgICAgIHRoaXMuYWxpZ25FZGdlLFxuICAgICAgdGhpcy4jZ2V0T3Bwb3NpdGVFZGdlKHRoaXMuYWxpZ25FZGdlKSxcbiAgICAgIHRoaXMuI2dldE5lYXJlc3RFZGdlKHRoaXMuYWxpZ25FZGdlKSxcbiAgICAgIHRoaXMuI2dldE9wcG9zaXRlRWRnZSh0aGlzLiNnZXROZWFyZXN0RWRnZSh0aGlzLmFsaWduRWRnZSkpLFxuICAgIF07XG5cbiAgICAvLyBHZXRzIHRoZSBmaXJzdCBlZGdlIGluIHRoZSBwcm92aWRlZCBlZGdlcyBhcnJheSB3aGVyZSBwb3B1cCBmaXRzXG4gICAgY29uc3QgZWRnZSA9IGVkZ2VPcmRlci5maW5kKChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBkaXN0ID0gZ2V0RGlzdGFuY2UoaXRlbSk7XG5cbiAgICAgIHJldHVybiBwb3B1cFJlY3RbbWVhc3VyZWRQb3B1cERpbWVuc2lvbl0gPD0gZGlzdDtcbiAgICB9KTtcblxuICAgIHJldHVybiBlZGdlIHx8ICdub25lJztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBwb3NpdGlvbiBvZiB0aGUgUG9wdXAgdXNpbmcgb2Zmc2V0cy9jb29yZGluYXRlcyBpbiBQaXhlbHMuXG4gICAqIEBwYXJhbSB7RE9NUmVjdH0gcG9wdXBSZWN0IHJlcHJlc2VudGluZyBhcHByb3hpbWF0ZWQgbmV3IHBsYWNlbWVudCB2YWx1ZXNcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICAjcmVuZGVyUGxhY2VtZW50SW5QaXhlbHMocG9wdXBSZWN0OiBET01SZWN0KTogdm9pZCB7XG4gICAgdGhpcy5zdHlsZS5sZWZ0ID0gYCR7cG9wdXBSZWN0Lnh9cHhgO1xuICAgIHRoaXMuc3R5bGUudG9wID0gYCR7cG9wdXBSZWN0Lnl9cHhgO1xuICB9XG5cbiAgLyoqXG4gICAqIEluIGNhc2VzIHdoZXJlIDNEIENTUyB0cmFuc2Zvcm1zIGFyZSB1c2VkIGZvciBQb3B1cCBwb3NpdGlvbmluZyxcbiAgICogY29ycmVjdHMgdGhlIHBsYWNlbWVudCBvZiB0aGUgUG9wdXAgYWZ0ZXIgcmVuZGVyaW5nIHNvIHRoYXQgaXQgZG9lc24ndFxuICAgKiByZXNpZGUgb24gaGFsZi1waXhlbHMsIGNhdXNpbmcgYmx1cnJpbmVzcyB0byB0ZXh0LCBpY29ucywgZXRjLlxuICAgKiBBZGFwdGVkIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQyMjU2ODk3XG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgY29ycmVjdDNkTWF0cml4KCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5jb250YWluZXIgfHwgdGhpcy5wb3NpdGlvblN0eWxlICE9PSAndmlld3BvcnQnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gUmVzZXRzIHRoZSByZWRpZmluZWQgbWF0cml4IHRvIGFsbG93IHJlY2FsY3VsYXRpb24uXG4gICAgLy8gVGhlIG9yaWdpbmFsIHN0eWxlIHNob3VsZCBiZSBkZWZpbmVkIGluIHRoZSBhbmltYXRpb24tc3R5bGUgY2xhc3MsIG5vdCBpbmxpbmUuXG4gICAgdGhpcy4jcmVtb3ZlM2RNYXRyaXgoKTtcblxuICAgIC8vIGdldHMgdGhlIGN1cnJlbnQgY29tcHV0ZWQgc3R5bGVcbiAgICBjb25zdCBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuY29udGFpbmVyLCBudWxsKTtcbiAgICBjb25zdCBteCA9IHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJy13ZWJraXQtdHJhbnNmb3JtJylcbiAgICAgIHx8IHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJy1tb3otdHJhbnNmb3JtJylcbiAgICAgIHx8IHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3RyYW5zZm9ybScpIHx8IGZhbHNlO1xuICAgIGlmICghbXgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDb3JyZWN0cyBgbWF0cml4M2RgIGNvb3JkaW5hdGUgdmFsdWVzIHRvIGJlIHdob2xlIG51bWJlcnNcbiAgICBjb25zdCB2YWx1ZXM6IGFueSA9IG14LnJlcGxhY2UoLyB8XFwofFxcKXxtYXRyaXgzZC9nLCAnJykuc3BsaXQoJywnKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGkgPT09IDAgJiYgdmFsdWVzW2ldIDwgMSkgdmFsdWVzW2ldID0gMTtcbiAgICAgIGlmIChpID4gMCAmJiAodmFsdWVzW2ldID4gNCB8fCB2YWx1ZXNbaV0gPCAtNCkpIHtcbiAgICAgICAgdmFsdWVzW2ldID0gTWF0aC5jZWlsKHZhbHVlc1tpXSk7XG4gICAgICB9XG4gICAgICBpZiAoaSA9PT0gdmFsdWVzLmxlbmd0aCAtIDEgJiYgdmFsdWVzW2ldID4gMSkge1xuICAgICAgICB2YWx1ZXNbaV0gPSAxO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9IGBtYXRyaXgzZCgke3ZhbHVlcy5qb2luKCl9KWA7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhIHByZXZpb3VzbHktbW9kaWZpZWQgM0QgTWF0cml4XG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgI3JlbW92ZTNkTWF0cml4KCkge1xuICAgIHRoaXMuY29udGFpbmVyPy5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgndHJhbnNmb3JtJyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIERPTVJlY3QgZnJvbSBgZ2V0Qm91bmRpbmdDbGllbnRSZWN0YCBmcm9tIGFuIGVsZW1lbnQsIHdpdGggdGhlIHZhbHVlcyBhZGp1c3RlZFxuICAgKiBieSBzdWJ0cmFjdGluZyB0aGUgbGVmdC90b3AgdmFsdWVzIGZyb20gdGhlIGNsb3Nlc3QgcmVsYXRpdmUtcG9zaXRpb25lZCBwYXJlbnRcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbSB0aGUgZWxlbWVudCB0byBtZWFzdXJlXG4gICAqIEBwYXJhbSB7RE9NUmVjdH0gW3JlY3RdIG9wdGlvbmFsbHkgcGFzcyBpbiBhbiBleGlzdGluZyByZWN0IGFuZCBjb3JyZWN0IGl0XG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IFtjb250YWluZXJFbGVtXSBvcHRpb25hbGx5IHBhc3MgYSBjb250YWluZXIgZWxlbWVudCBmb3IgdGhpcyBvbmUgdG8gY2hlY2sgc2Nyb2xsaW5nIGRpc3RhbmNlXG4gICAqIEByZXR1cm5zIHtET01SZWN0fSBtZWFzdXJlbWVudHMgYWRqdXN0ZWQgZm9yIGFuIGFic29sdXRlbHktcG9zaXRpb25lZCBwYXJlbnRcbiAgICovXG4gICNyZW1vdmVSZWxhdGl2ZVBhcmVudERpc3RhbmNlKGVsZW06IEhUTUxFbGVtZW50LCByZWN0OiBET01SZWN0LCBjb250YWluZXJFbGVtPzogSFRNTEVsZW1lbnQgfCBudWxsKTogRE9NUmVjdCB7XG4gICAgY29uc3QgZWxlbVJlY3QgPSBnZXRFZGl0YWJsZVJlY3QocmVjdCB8fCBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKTtcbiAgICBsZXQgZm91bmRSZWxhdGl2ZVBhcmVudCA9IGZhbHNlO1xuICAgIGxldCBzY3JvbGxBZGp1c3RlZCA9IGZhbHNlO1xuXG4gICAgY29uc3QgcmVtb3ZlUmVsYXRpdmVEaXN0YW5jZSA9IChwYXJlbnQ6IGFueSkgPT4ge1xuICAgICAgbGV0IHBhcmVudFN0eWxlOiBDU1NTdHlsZURlY2xhcmF0aW9uO1xuICAgICAgbGV0IHBhcmVudFJlY3Q6IERPTVJlY3Q7XG5cbiAgICAgIGlmIChwYXJlbnQgJiYgIWZvdW5kUmVsYXRpdmVQYXJlbnQpIHtcbiAgICAgICAgaWYgKHBhcmVudC50b1N0cmluZygpID09PSAnW29iamVjdCBTaGFkb3dSb290XScpIHtcbiAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQuaG9zdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgfHwgcGFyZW50IGluc3RhbmNlb2YgU1ZHRWxlbWVudCkge1xuICAgICAgICAgIHBhcmVudFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShwYXJlbnQpO1xuICAgICAgICAgIHBhcmVudFJlY3QgPSBwYXJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgY29uc3Qgc2Nyb2xsRWxlbSA9IGNvbnRhaW5lckVsZW0gfHwgcGFyZW50ITtcblxuICAgICAgICAgIC8vIEFkZCBzY3JvbGxMZWZ0L3Njcm9sbFRvcCBvZiBjb250YWluZXIgZWxlbWVudHNcbiAgICAgICAgICBpZiAoIXNjcm9sbEFkanVzdGVkKSB7XG4gICAgICAgICAgICBpZiAoc2Nyb2xsRWxlbS5zY3JvbGxMZWZ0ICE9PSAwKSB7XG4gICAgICAgICAgICAgIGVsZW1SZWN0LnggLT0gKHNjcm9sbEVsZW0uc2Nyb2xsTGVmdCk7XG4gICAgICAgICAgICAgIHNjcm9sbEFkanVzdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzY3JvbGxFbGVtLnNjcm9sbFRvcCAhPT0gMCkge1xuICAgICAgICAgICAgICBlbGVtUmVjdC55IC09IChzY3JvbGxFbGVtLnNjcm9sbFRvcCk7XG4gICAgICAgICAgICAgIHNjcm9sbEFkanVzdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBSZW1vdmUgcmVsYXRpdmUgcGFyZW50cycgY29vcmRpbmF0ZXMgZnJvbSB0aGUgY2FsY3VsYXRpb25cbiAgICAgICAgICBpZiAocGFyZW50U3R5bGUucG9zaXRpb24gPT09ICdyZWxhdGl2ZScpIHtcbiAgICAgICAgICAgIGVsZW1SZWN0LnggLT0gcGFyZW50UmVjdC54O1xuICAgICAgICAgICAgZWxlbVJlY3QueSAtPSBwYXJlbnRSZWN0Lnk7XG4gICAgICAgICAgICBmb3VuZFJlbGF0aXZlUGFyZW50ID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmVudC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgcmVtb3ZlUmVsYXRpdmVEaXN0YW5jZShwYXJlbnQucGFyZW50Tm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmVtb3ZlUmVsYXRpdmVEaXN0YW5jZShlbGVtKTtcbiAgICByZXR1cm4gZWxlbVJlY3QgYXMgRE9NUmVjdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGFsaWdubWVudCBvZiBhbiBvcHRpb25hbCBhcnJvdyBlbGVtZW50LiBJZiBhbiBhcnJvdyB0YXJnZXQgaXMgc3BlY2lmaWVkLFxuICAgKiB0aGUgYXJyb3cgaXMgcGxhY2VkIHRvIGFsaWduIGNvcnJlY3RseSBhZ2FpbnN0IHRoZSB0YXJnZXQuXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgdW5kZWZpbmVkfSBhbGlnbkVkZ2UgYWxpZ24gZWRnZSB0byBwbGFjZSB0aGUgYXJyb3dcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBwbGFjZUFycm93KGFsaWduRWRnZT86IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IGFycm93ID0gYWxpZ25FZGdlIHx8IHRoaXMuYXJyb3c7XG4gICAgY29uc3QgYXJyb3dFbCA9IHRoaXMuYXJyb3dFbDtcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5hbGlnblRhcmdldDtcbiAgICBjb25zdCB0YXJnZXQgPSB0aGlzLmFycm93VGFyZ2V0O1xuXG4gICAgaWYgKGFycm93ID09PSAnbm9uZScgfHwgIWVsZW1lbnQgfHwgIXRhcmdldCB8fCAhYXJyb3dFbCkge1xuICAgICAgaWYgKGFycm93RWwpIGFycm93RWwuaGlkZGVuID0gdHJ1ZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDbGVhciBwcmV2aW91cyBzdHlsZXNcbiAgICBhcnJvd0VsLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7XG4gICAgYXJyb3dFbC5zdHlsZS5tYXJnaW5MZWZ0ID0gJyc7XG4gICAgYXJyb3dFbC5zdHlsZS5tYXJnaW5Ub3AgPSAnJztcblxuICAgIGNvbnN0IGFycm93UmVjdCA9IGFycm93RWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgY29uc3QgZWxlbWVudFJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IHRhcmdldFJlY3QgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICBjb25zdCBuZXdBcnJvd1JlY3Q6IGFueSA9IHt9O1xuICAgIGNvbnN0IHRhcmdldE1hcmdpbiA9IChhcnJvdyA9PT0gJ3JpZ2h0JyB8fCBhcnJvdyA9PT0gJ2xlZnQnKSA/ICdtYXJnaW5Ub3AnIDogJ21hcmdpbkxlZnQnO1xuXG4gICAgbGV0IGFycm93SGlkZGVuID0gZmFsc2U7XG4gICAgbGV0IHRhcmdldENlbnRlciA9IDA7XG4gICAgbGV0IGN1cnJlbnRBcnJvd0NlbnRlciA9IDA7XG4gICAgbGV0IGQ6IGFueTtcblxuICAgIC8vIEZpZ3VyZSBvdXQgdGhlIGRpc3RhbmNlIG5lZWRlZCB0byBtb3ZlIHRoZSBhcnJvdyB0byBtYXRjaCB0aGUgcG9zaXRpb24gb2YgdGhlIGB0YXJnZXRgXG4gICAgaWYgKGFycm93ID09PSAnbGVmdCcgfHwgYXJyb3cgPT09ICdyaWdodCcpIHtcbiAgICAgIHRhcmdldENlbnRlciA9IHRhcmdldFJlY3QudG9wICsgKHRhcmdldFJlY3QuaGVpZ2h0IC8gMik7XG4gICAgICBjdXJyZW50QXJyb3dDZW50ZXIgPSBhcnJvd1JlY3QudG9wICsgKGFycm93UmVjdC5oZWlnaHQgLyAyKTtcbiAgICAgIGQgPSB0YXJnZXRDZW50ZXIgLSBjdXJyZW50QXJyb3dDZW50ZXI7XG4gICAgICBuZXdBcnJvd1JlY3QudG9wID0gYXJyb3dSZWN0LnRvcCArIGQ7XG4gICAgICBuZXdBcnJvd1JlY3QuYm90dG9tID0gYXJyb3dSZWN0LmJvdHRvbSArIGQ7XG5cbiAgICAgIGlmIChuZXdBcnJvd1JlY3QudG9wIDw9IGVsZW1lbnRSZWN0LnRvcCB8fCBuZXdBcnJvd1JlY3QuYm90dG9tID49IGVsZW1lbnRSZWN0LmJvdHRvbSkge1xuICAgICAgICBhcnJvd0hpZGRlbiA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChhcnJvdyA9PT0gJ3RvcCcgfHwgYXJyb3cgPT09ICdib3R0b20nKSB7XG4gICAgICB0YXJnZXRDZW50ZXIgPSB0YXJnZXRSZWN0LmxlZnQgKyAodGFyZ2V0UmVjdC53aWR0aCAvIDIpO1xuICAgICAgY3VycmVudEFycm93Q2VudGVyID0gYXJyb3dSZWN0LmxlZnQgKyAoYXJyb3dSZWN0LndpZHRoIC8gMik7XG4gICAgICBkID0gdGFyZ2V0Q2VudGVyIC0gY3VycmVudEFycm93Q2VudGVyO1xuICAgICAgbmV3QXJyb3dSZWN0LmxlZnQgPSBhcnJvd1JlY3QubGVmdCArIGQ7XG4gICAgICBuZXdBcnJvd1JlY3QucmlnaHQgPSBhcnJvd1JlY3QucmlnaHQgKyBkO1xuXG4gICAgICBpZiAobmV3QXJyb3dSZWN0LmxlZnQgPD0gZWxlbWVudFJlY3QubGVmdCB8fCBuZXdBcnJvd1JlY3QucmlnaHQgPj0gZWxlbWVudFJlY3QucmlnaHQpIHtcbiAgICAgICAgYXJyb3dIaWRkZW4gPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJvdW5kIHRoZSBudW1iZXIgdXBcbiAgICBkID0gTWF0aC5jZWlsKGQpO1xuXG4gICAgLy8gSGlkZSB0aGUgYXJyb3cgaWYgaXQgZ29lcyBiZXlvbmQgdGhlIGVsZW1lbnQgYm91bmRhcmllc1xuICAgIGlmIChhcnJvd0hpZGRlbikge1xuICAgICAgYXJyb3dFbC5oaWRkZW4gPSB0cnVlO1xuICAgIH1cbiAgICBhcnJvd0VsLnN0eWxlW3RhcmdldE1hcmdpbl0gPSBgJHtkfXB4YDtcbiAgfVxuXG4gIHNldCBoZWlnaHQodmFsOiBzdHJpbmcpIHtcbiAgICBjb25zdCBuZXdIZWlnaHQgPSBzdHJpcEhUTUwodmFsKTtcbiAgICBjb25zdCBjdXJyZW50SGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG4gICAgaWYgKGN1cnJlbnRIZWlnaHQgIT09IG5ld0hlaWdodCkge1xuICAgICAgaWYgKG5ld0hlaWdodC5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXI/LnN0eWxlLnNldFByb3BlcnR5KCdoZWlnaHQnLCBuZXdIZWlnaHQpO1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLkhFSUdIVCwgbmV3SGVpZ2h0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyPy5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnaGVpZ2h0Jyk7XG4gICAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZXMuSEVJR0hUKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXQgaGVpZ2h0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyPy5zdHlsZS5oZWlnaHQgfHwgJyc7XG4gIH1cblxuICBzZXQgd2lkdGgodmFsOiBzdHJpbmcpIHtcbiAgICBjb25zdCBuZXdXaWR0aCA9IHN0cmlwSFRNTCh2YWwpO1xuICAgIGNvbnN0IGN1cnJlbnRXaWR0aCA9IHRoaXMud2lkdGg7XG4gICAgaWYgKGN1cnJlbnRXaWR0aCAhPT0gbmV3V2lkdGgpIHtcbiAgICAgIGlmIChuZXdXaWR0aC5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXI/LnN0eWxlLnNldFByb3BlcnR5KCd3aWR0aCcsIG5ld1dpZHRoKTtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5XSURUSCwgbmV3V2lkdGgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jb250YWluZXI/LnN0eWxlLnJlbW92ZVByb3BlcnR5KCd3aWR0aCcpO1xuICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGVzLldJRFRIKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXQgd2lkdGgoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI/LnN0eWxlLndpZHRoID8/ICcnO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/ids-popup/ids-popup.ts\n");

/***/ }),

/***/ "./src/mixins/ids-theme-mixin/ids-theme-mixin.ts":
/*!*******************************************************!*\
  !*** ./src/mixins/ids-theme-mixin/ids-theme-mixin.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"THEME_MODES\": () => (/* binding */ THEME_MODES),\n/* harmony export */   \"default\": () => (/* binding */ ids_theme_mixin_default)\n/* harmony export */ });\n/* harmony import */ var _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/ids-attributes */ \"./src/core/ids-attributes.ts\");\n\nconst THEME_MODES = [\"light\", \"dark\", \"contrast\"];\nconst IdsThemeMixin = (superclass) => class extends superclass {\n  switcher = null;\n  constructor(...args) {\n    super(...args);\n  }\n  static get attributes() {\n    return [\n      ...superclass.attributes,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.MODE\n    ];\n  }\n  connectedCallback() {\n    super.connectedCallback?.();\n    this.initThemeHandlers();\n  }\n  disconnectedCallback() {\n    this.offEvent(\"themechanged\");\n    this.switcher = null;\n    super.disconnectedCallback?.();\n  }\n  /**\n   * Init the mixin events and states\n   * @private\n   */\n  initThemeHandlers() {\n    this.switcher = document.querySelector(\"ids-theme-switcher\");\n    if (!this.switcher) {\n      return;\n    }\n    this.mode = this.switcher.mode;\n    this.onEvent(\"themechanged\", this.switcher, (e) => {\n      this.mode = e.detail.mode;\n    });\n  }\n  /**\n   * Set the mode of the current theme\n   * @param {string} value The mode value for example: light, dark, or contrast\n   */\n  set mode(value) {\n    if (!THEME_MODES.includes(value))\n      value = \"light\";\n    this.setAttribute(\"mode\", value);\n    this.container?.setAttribute(\"mode\", value);\n  }\n  /**\n   * Get the mode of the current theme\n   * @returns {string} light, dark, or contrast\n   */\n  get mode() {\n    return this.getAttribute(\"mode\") || \"light\";\n  }\n};\nvar ids_theme_mixin_default = IdsThemeMixin;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWl4aW5zL2lkcy10aGVtZS1taXhpbi9pZHMtdGhlbWUtbWl4aW4udHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJCO0FBT3BCLE1BQU0sY0FBYyxDQUFDLFNBQVMsUUFBUSxVQUFVO0FBT3ZELE1BQU0sZ0JBQWdCLENBQXdCLGVBQWtCLGNBQWMsV0FBVztBQUFBLEVBQ3ZGLFdBQW9DO0FBQUEsRUFFcEMsZUFBZSxNQUFhO0FBQzFCLFVBQU0sR0FBRyxJQUFJO0FBQUEsRUFDZjtBQUFBLEVBRUEsV0FBVyxhQUFhO0FBQ3RCLFdBQU87QUFBQSxNQUNMLEdBQUksV0FBbUI7QUFBQSxNQUN2QixpRUFBZTtBQUFKLElBQ2I7QUFBQSxFQUNGO0FBQUEsRUFFQSxvQkFBb0I7QUFDbEIsVUFBTSxvQkFBb0I7QUFDMUIsU0FBSyxrQkFBa0I7QUFBQSxFQUN6QjtBQUFBLEVBRUEsdUJBQXVCO0FBQ3JCLFNBQUssU0FBUyxjQUFjO0FBQzVCLFNBQUssV0FBVztBQUNoQixVQUFNLHVCQUF1QjtBQUFBLEVBQy9CO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLG9CQUFvQjtBQUNsQixTQUFLLFdBQVcsU0FBUyxjQUFnQyxvQkFBb0I7QUFDN0UsUUFBSSxDQUFDLEtBQUssVUFBVTtBQUNsQjtBQUFBLElBQ0Y7QUFFQSxTQUFLLE9BQU8sS0FBSyxTQUFTO0FBRTFCLFNBQUssUUFBUSxnQkFBZ0IsS0FBSyxVQUFVLENBQUMsTUFBbUI7QUFDOUQsV0FBSyxPQUFPLEVBQUUsT0FBTztBQUFBLElBQ3ZCLENBQUM7QUFBQSxFQUNIO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLElBQUksS0FBSyxPQUFlO0FBQ3RCLFFBQUksQ0FBQyxZQUFZLFNBQVMsS0FBSztBQUFHLGNBQVE7QUFDMUMsU0FBSyxhQUFhLFFBQVEsS0FBSztBQUMvQixTQUFLLFdBQVcsYUFBYSxRQUFRLEtBQUs7QUFBQSxFQUM1QztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxJQUFJLE9BQWU7QUFDakIsV0FBTyxLQUFLLGFBQWEsTUFBTSxLQUFLO0FBQUEsRUFDdEM7QUFDRjtBQUVBLElBQU8sMEJBQVEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pZHMtZW50ZXJwcmlzZS13Yy8uL3NyYy9taXhpbnMvaWRzLXRoZW1lLW1peGluL2lkcy10aGVtZS1taXhpbi50cz8yZGIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGF0dHJpYnV0ZXMgfSBmcm9tICcuLi8uLi9jb3JlL2lkcy1hdHRyaWJ1dGVzJztcbmltcG9ydCB7IEV2ZW50c01peGluSW50ZXJmYWNlIH0gZnJvbSAnLi4vaWRzLWV2ZW50cy1taXhpbi9pZHMtZXZlbnRzLW1peGluJztcbmltcG9ydCB7IElkc0NvbnN0cnVjdG9yIH0gZnJvbSAnLi4vLi4vY29yZS9pZHMtZWxlbWVudCc7XG5pbXBvcnQgdHlwZSBJZHNUaGVtZVN3aXRjaGVyIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvaWRzLXRoZW1lLXN3aXRjaGVyL2lkcy10aGVtZS1zd2l0Y2hlcic7XG5cbnR5cGUgQ29uc3RyYWludHMgPSBJZHNDb25zdHJ1Y3RvcjxFdmVudHNNaXhpbkludGVyZmFjZT47XG5cbmV4cG9ydCBjb25zdCBUSEVNRV9NT0RFUyA9IFsnbGlnaHQnLCAnZGFyaycsICdjb250cmFzdCddO1xuXG4vKipcbiAqIEEgbWl4aW4gdGhhdCBhZGRzIHRoZW1pbmcgZnVuY3Rpb25hbGl0eSB0byBjb21wb25lbnRzXG4gKiBAcGFyYW0ge2FueX0gc3VwZXJjbGFzcyBBY2NlcHRzIGEgc3VwZXJjbGFzcyBhbmQgY3JlYXRlcyBhIG5ldyBzdWJjbGFzcyBmcm9tIGl0XG4gKiBAcmV0dXJucyB7YW55fSBUaGUgZXh0ZW5kZWQgb2JqZWN0XG4gKi9cbmNvbnN0IElkc1RoZW1lTWl4aW4gPSA8VCBleHRlbmRzIENvbnN0cmFpbnRzPihzdXBlcmNsYXNzOiBUKSA9PiBjbGFzcyBleHRlbmRzIHN1cGVyY2xhc3Mge1xuICBzd2l0Y2hlcjogSWRzVGhlbWVTd2l0Y2hlciB8IG51bGwgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgc3VwZXIoLi4uYXJncyk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IGF0dHJpYnV0ZXMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIC4uLihzdXBlcmNsYXNzIGFzIGFueSkuYXR0cmlidXRlcyxcbiAgICAgIGF0dHJpYnV0ZXMuTU9ERVxuICAgIF07XG4gIH1cblxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaz8uKCk7XG4gICAgdGhpcy5pbml0VGhlbWVIYW5kbGVycygpO1xuICB9XG5cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgdGhpcy5vZmZFdmVudCgndGhlbWVjaGFuZ2VkJyk7XG4gICAgdGhpcy5zd2l0Y2hlciA9IG51bGw7XG4gICAgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2s/LigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXQgdGhlIG1peGluIGV2ZW50cyBhbmQgc3RhdGVzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpbml0VGhlbWVIYW5kbGVycygpIHtcbiAgICB0aGlzLnN3aXRjaGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxJZHNUaGVtZVN3aXRjaGVyPignaWRzLXRoZW1lLXN3aXRjaGVyJyk7XG4gICAgaWYgKCF0aGlzLnN3aXRjaGVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5tb2RlID0gdGhpcy5zd2l0Y2hlci5tb2RlO1xuXG4gICAgdGhpcy5vbkV2ZW50KCd0aGVtZWNoYW5nZWQnLCB0aGlzLnN3aXRjaGVyLCAoZTogQ3VzdG9tRXZlbnQpID0+IHtcbiAgICAgIHRoaXMubW9kZSA9IGUuZGV0YWlsLm1vZGU7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBtb2RlIG9mIHRoZSBjdXJyZW50IHRoZW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBUaGUgbW9kZSB2YWx1ZSBmb3IgZXhhbXBsZTogbGlnaHQsIGRhcmssIG9yIGNvbnRyYXN0XG4gICAqL1xuICBzZXQgbW9kZSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgaWYgKCFUSEVNRV9NT0RFUy5pbmNsdWRlcyh2YWx1ZSkpIHZhbHVlID0gJ2xpZ2h0JztcbiAgICB0aGlzLnNldEF0dHJpYnV0ZSgnbW9kZScsIHZhbHVlKTtcbiAgICB0aGlzLmNvbnRhaW5lcj8uc2V0QXR0cmlidXRlKCdtb2RlJywgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbW9kZSBvZiB0aGUgY3VycmVudCB0aGVtZVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBsaWdodCwgZGFyaywgb3IgY29udHJhc3RcbiAgICovXG4gIGdldCBtb2RlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCdtb2RlJykgfHwgJ2xpZ2h0JztcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgSWRzVGhlbWVNaXhpbjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/mixins/ids-theme-mixin/ids-theme-mixin.ts\n");

/***/ })

}]);