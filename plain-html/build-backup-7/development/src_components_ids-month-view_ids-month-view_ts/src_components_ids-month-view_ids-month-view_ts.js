"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkids_enterprise_wc"] = self["webpackChunkids_enterprise_wc"] || []).push([["src_components_ids-month-view_ids-month-view_ts"],{

/***/ "./src/components/ids-month-view/ids-month-view-attribute-mixin.ts":
/*!*************************************************************************!*\
  !*** ./src/components/ids-month-view/ids-month-view-attribute-mixin.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ids_month_view_attribute_mixin_default)\n/* harmony export */ });\n/* harmony import */ var _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/ids-attributes */ \"./src/core/ids-attributes.ts\");\n/* harmony import */ var _utils_ids_deep_clone_utils_ids_deep_clone_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/ids-deep-clone-utils/ids-deep-clone-utils */ \"./src/utils/ids-deep-clone-utils/ids-deep-clone-utils.ts\");\n/* harmony import */ var _utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/ids-string-utils/ids-string-utils */ \"./src/utils/ids-string-utils/ids-string-utils.ts\");\n\n\n\nconst isValidLegendArray = (val) => Array.isArray(val) && val.length > 0 && val.every(\n  (item) => item.name && item.color && (item.dates || item.dayOfWeek)\n);\nconst IdsMonthViewAttributeMixin = (superclass) => class extends superclass {\n  #disableSettings = {\n    dates: [],\n    years: [],\n    minDate: \"\",\n    maxDate: \"\",\n    dayOfWeek: [],\n    isEnable: false\n  };\n  #currentLegend = [];\n  #rangeSettings = {\n    start: null,\n    end: null,\n    separator: \" - \",\n    minDays: 0,\n    maxDays: 0,\n    selectForward: false,\n    selectBackward: false,\n    includeDisabled: false,\n    selectWeek: false\n  };\n  constructor(...args) {\n    super(...args);\n  }\n  static get attributes() {\n    return [\n      ...superclass.attributes,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.RANGE_SETTINGS,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.USE_RANGE\n    ];\n  }\n  connectedCallback() {\n    super.connectedCallback?.();\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback?.();\n  }\n  /**\n   * @returns {IdsDisableSettings} disable settings object\n   */\n  get disableSettings() {\n    return this.#disableSettings;\n  }\n  /**\n   * Set disable settings\n   * @param {IdsDisableSettings} val settings to be assigned to default disable settings\n   */\n  set disableSettings(val) {\n    this.#disableSettings = {\n      ...this.#disableSettings,\n      ...(0,_utils_ids_deep_clone_utils_ids_deep_clone_utils__WEBPACK_IMPORTED_MODULE_1__.deepClone)(val)\n    };\n    if (typeof this.onDisableSettingsChange === \"function\")\n      this.onDisableSettingsChange(this.#disableSettings);\n  }\n  /**\n   * @returns {IdsLegendSettings} array of legend items\n   */\n  get legend() {\n    return this.#currentLegend;\n  }\n  /**\n   * Set array of legend items to month view component\n   * Validation of data is provided by the month view component\n   * @param {IdsLegendSettings} val array of legend items\n   */\n  set legend(val) {\n    if (val === null || Array.isArray(val) && !val.length) {\n      this.#currentLegend = [];\n    } else if (isValidLegendArray(val)) {\n      this.#currentLegend = (0,_utils_ids_deep_clone_utils_ids_deep_clone_utils__WEBPACK_IMPORTED_MODULE_1__.deepClone)(val);\n    } else {\n      throw new Error(\"ids-month-view: Invalid legend data provided\");\n    }\n    if (typeof this.onLegendSettingsChange === \"function\")\n      this.onLegendSettingsChange(this.#currentLegend);\n  }\n  /**\n   * Find legend object by date provided\n   * @param {Date} date to check if has any legend\n   * @returns {IdsLegend | undefined} legend object for a specific date\n   */\n  getLegendByDate(date) {\n    if (!this.#currentLegend)\n      return;\n    return this.#currentLegend.find((legend) => {\n      const ifDayOfWeek = legend.dayOfWeek?.includes(date.getDay());\n      const ifDate = legend.dates?.some((item) => new Date(item).getTime() === date.getTime());\n      return ifDayOfWeek || ifDate;\n    });\n  }\n  /**\n   * @returns {IdsRangeSettings} range settings object\n   */\n  get rangeSettings() {\n    return this.#rangeSettings;\n  }\n  /**\n   * Set range selection settings\n   * @param {IdsRangeSettings} val settings to be assigned to default range settings\n   */\n  set rangeSettings(val) {\n    if (!val || val === null)\n      this.resetRangeSettings();\n    else {\n      this.#rangeSettings = {\n        ...this.#rangeSettings,\n        ...(0,_utils_ids_deep_clone_utils_ids_deep_clone_utils__WEBPACK_IMPORTED_MODULE_1__.deepClone)(val)\n      };\n    }\n    if (typeof this.onRangeSettingsChange === \"function\")\n      this.onRangeSettingsChange(val);\n  }\n  /**\n   * Sets the `rangeSettings` object back to its original defaults\n   */\n  resetRangeSettings() {\n    this.rangeSettings = {\n      start: null,\n      end: null,\n      separator: \" - \",\n      minDays: 0,\n      maxDays: 0,\n      selectForward: false,\n      selectBackward: false,\n      includeDisabled: false,\n      selectWeek: false\n    };\n  }\n  /**\n   * use-range attribute\n   * @returns {boolean} useRange param converted to boolean from attribute value\n   */\n  get useRange() {\n    const attrVal = this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.USE_RANGE);\n    return (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_2__.stringToBool)(attrVal);\n  }\n  /**\n   * Set whether or not the component should be a range picker\n   * @param {string|boolean|null} val useRange param value\n   */\n  set useRange(val) {\n    const boolVal = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_2__.stringToBool)(val);\n    if (boolVal) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.USE_RANGE, \"true\");\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.USE_RANGE);\n    }\n    if (typeof this.onUseRangeChange === \"function\")\n      this.onUseRangeChange(boolVal);\n  }\n};\nvar ids_month_view_attribute_mixin_default = IdsMonthViewAttributeMixin;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9pZHMtbW9udGgtdmlldy9pZHMtbW9udGgtdmlldy1hdHRyaWJ1dGUtbWl4aW4udHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEyQjtBQUNEO0FBQ0c7QUFxQjdCLE1BQU0scUJBQXFCLENBQUMsUUFBMkIsTUFBTSxRQUFRLEdBQUcsS0FDbkUsSUFBSSxTQUFTLEtBQ2IsSUFBSTtBQUFBLEVBQ0wsQ0FBQyxTQUFjLEtBQUssUUFBUSxLQUFLLFVBQVUsS0FBSyxTQUFTLEtBQUs7QUFDaEU7QUFRRixNQUFNLDZCQUE2QixDQUF3QixlQUFrQixjQUFjLFdBQVc7QUFBQSxFQUNwRyxtQkFBdUM7QUFBQSxJQUNyQyxPQUFPLENBQUM7QUFBQSxJQUNSLE9BQU8sQ0FBQztBQUFBLElBQ1IsU0FBUztBQUFBLElBQ1QsU0FBUztBQUFBLElBQ1QsV0FBVyxDQUFDO0FBQUEsSUFDWixVQUFVO0FBQUEsRUFDWjtBQUFBLEVBRUEsaUJBQW9DLENBQUM7QUFBQSxFQUVyQyxpQkFBbUM7QUFBQSxJQUNqQyxPQUFPO0FBQUEsSUFDUCxLQUFLO0FBQUEsSUFDTCxXQUFXO0FBQUEsSUFDWCxTQUFTO0FBQUEsSUFDVCxTQUFTO0FBQUEsSUFDVCxlQUFlO0FBQUEsSUFDZixnQkFBZ0I7QUFBQSxJQUNoQixpQkFBaUI7QUFBQSxJQUNqQixZQUFZO0FBQUEsRUFDZDtBQUFBLEVBRUEsZUFBZSxNQUFhO0FBQzFCLFVBQU0sR0FBRyxJQUFJO0FBQUEsRUFDZjtBQUFBLEVBRUEsV0FBVyxhQUFhO0FBQ3RCLFdBQU87QUFBQSxNQUNMLEdBQUksV0FBbUI7QUFBQSxNQUN2QiwyRUFBeUI7QUFBZCxNQUNYLHNFQUFvQjtBQUFULElBQ2I7QUFBQSxFQUNGO0FBQUEsRUFFQSxvQkFBb0I7QUFDbEIsVUFBTSxvQkFBb0I7QUFBQSxFQUM1QjtBQUFBLEVBRUEsdUJBQTZCO0FBQzNCLFVBQU0sdUJBQXVCO0FBQUEsRUFDL0I7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLElBQUksa0JBQXNDO0FBQ3hDLFdBQU8sS0FBSztBQUFBLEVBQ2Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsSUFBSSxnQkFBZ0IsS0FBeUI7QUFDM0MsU0FBSyxtQkFBbUI7QUFBQSxNQUN0QixHQUFHLEtBQUs7QUFBQSxNQUNSLEdBQUcsMkZBQVMsQ0FBQyxHQUFHO0FBQUEsSUFDbEI7QUFFQSxRQUFJLE9BQU8sS0FBSyw0QkFBNEI7QUFBWSxXQUFLLHdCQUF3QixLQUFLLGdCQUFnQjtBQUFBLEVBQzVHO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxJQUFJLFNBQTRCO0FBQzlCLFdBQU8sS0FBSztBQUFBLEVBQ2Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPQSxJQUFJLE9BQU8sS0FBd0I7QUFDakMsUUFBSSxRQUFRLFFBQVMsTUFBTSxRQUFRLEdBQUcsS0FBSyxDQUFDLElBQUksUUFBUztBQUN2RCxXQUFLLGlCQUFpQixDQUFDO0FBQUEsSUFDekIsV0FBVyxtQkFBbUIsR0FBRyxHQUFHO0FBQ2xDLFdBQUssaUJBQWlCLDJGQUFTLENBQUMsR0FBRztBQUFBLElBQ3JDLE9BQU87QUFDTCxZQUFNLElBQUksTUFBTSw4Q0FBOEM7QUFBQSxJQUNoRTtBQUVBLFFBQUksT0FBTyxLQUFLLDJCQUEyQjtBQUFZLFdBQUssdUJBQXVCLEtBQUssY0FBYztBQUFBLEVBQ3hHO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0EsZ0JBQWdCLE1BQW1DO0FBQ2pELFFBQUksQ0FBQyxLQUFLO0FBQWdCO0FBRTFCLFdBQU8sS0FBSyxlQUFlLEtBQUssQ0FBQyxXQUFzQjtBQUNyRCxZQUFNLGNBQWMsT0FBTyxXQUFXLFNBQVMsS0FBSyxPQUFPLENBQUM7QUFDNUQsWUFBTSxTQUFTLE9BQU8sT0FBTyxLQUFLLENBQUMsU0FBYyxJQUFJLEtBQUssSUFBSSxFQUFFLFFBQVEsTUFBTSxLQUFLLFFBQVEsQ0FBQztBQUM1RixhQUFPLGVBQWU7QUFBQSxJQUN4QixDQUFDO0FBQUEsRUFDSDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsSUFBSSxnQkFBa0M7QUFDcEMsV0FBTyxLQUFLO0FBQUEsRUFDZDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxJQUFJLGNBQWMsS0FBdUI7QUFDdkMsUUFBSSxDQUFDLE9BQU8sUUFBUTtBQUFNLFdBQUssbUJBQW1CO0FBQUEsU0FDN0M7QUFDSCxXQUFLLGlCQUFpQjtBQUFBLFFBQ3BCLEdBQUcsS0FBSztBQUFBLFFBQ1IsR0FBRywyRkFBUyxDQUFDLEdBQUc7QUFBQSxNQUNsQjtBQUFBLElBQ0Y7QUFFQSxRQUFJLE9BQU8sS0FBSywwQkFBMEI7QUFBWSxXQUFLLHNCQUFzQixHQUFHO0FBQUEsRUFDdEY7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLHFCQUFxQjtBQUNuQixTQUFLLGdCQUFnQjtBQUFBLE1BQ25CLE9BQU87QUFBQSxNQUNQLEtBQUs7QUFBQSxNQUNMLFdBQVc7QUFBQSxNQUNYLFNBQVM7QUFBQSxNQUNULFNBQVM7QUFBQSxNQUNULGVBQWU7QUFBQSxNQUNmLGdCQUFnQjtBQUFBLE1BQ2hCLGlCQUFpQjtBQUFBLE1BQ2pCLFlBQVk7QUFBQSxJQUNkO0FBQUEsRUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxJQUFJLFdBQW9CO0FBQ3RCLFVBQU0sVUFBVSxLQUFLLGFBQWEsc0VBQW9CO0FBRXRELFdBQU8sc0ZBQVksQ0FBQyxPQUFPO0FBQUEsRUFDN0I7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsSUFBSSxTQUFTLEtBQThCO0FBQ3pDLFVBQU0sVUFBVSxzRkFBWSxDQUFDLEdBQUc7QUFFaEMsUUFBSSxTQUFTO0FBQ1gsV0FBSyxhQUFhLHNFQUFvQixFQUFFLE1BQU07QUFBQSxJQUNoRCxPQUFPO0FBQ0wsV0FBSyxnQkFBZ0Isc0VBQW9CO0FBQUEsSUFDM0M7QUFFQSxRQUFJLE9BQU8sS0FBSyxxQkFBcUI7QUFBWSxXQUFLLGlCQUFpQixPQUFPO0FBQUEsRUFDaEY7QUFDRjtBQUVBLElBQU8seUNBQVEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pZHMtZW50ZXJwcmlzZS13Yy8uL3NyYy9jb21wb25lbnRzL2lkcy1tb250aC12aWV3L2lkcy1tb250aC12aWV3LWF0dHJpYnV0ZS1taXhpbi50cz84OTc5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGF0dHJpYnV0ZXMgfSBmcm9tICcuLi8uLi9jb3JlL2lkcy1hdHRyaWJ1dGVzJztcbmltcG9ydCB7IGRlZXBDbG9uZSB9IGZyb20gJy4uLy4uL3V0aWxzL2lkcy1kZWVwLWNsb25lLXV0aWxzL2lkcy1kZWVwLWNsb25lLXV0aWxzJztcbmltcG9ydCB7IHN0cmluZ1RvQm9vbCB9IGZyb20gJy4uLy4uL3V0aWxzL2lkcy1zdHJpbmctdXRpbHMvaWRzLXN0cmluZy11dGlscyc7XG5pbXBvcnQgeyBJZHNDb25zdHJ1Y3RvciB9IGZyb20gJy4uLy4uL2NvcmUvaWRzLWVsZW1lbnQnO1xuXG5pbXBvcnQgdHlwZSB7XG4gIElkc1JhbmdlU2V0dGluZ3MsXG4gIElkc1JhbmdlU2V0dGluZ3NJbnRlcmZhY2UsXG4gIElkc0xlZ2VuZCxcbiAgSWRzTGVnZW5kU2V0dGluZ3MsXG4gIElkc0Rpc2FibGVTZXR0aW5nc1xufSBmcm9tICcuL2lkcy1tb250aC12aWV3LWNvbW1vbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9udGhWaWV3QXR0cmlidXRlTWl4aW5JbnRlcmZhY2Uge1xuICAvLyBhcyBpbnN0YW5jZSBmdW5jdGlvbnNcbiAgb25EaXNhYmxlU2V0dGluZ3NDaGFuZ2U/KG5ld1ZhbHVlOiBJZHNEaXNhYmxlU2V0dGluZ3MpOiB2b2lkO1xuICBvbkxlZ2VuZFNldHRpbmdzQ2hhbmdlPyhuZXdWYWx1ZTogSWRzTGVnZW5kU2V0dGluZ3MpOiB2b2lkO1xuICBvblJhbmdlU2V0dGluZ3NDaGFuZ2U/KG5ld1ZhbHVlOiBJZHNSYW5nZVNldHRpbmdzKTogdm9pZDtcbiAgb25Vc2VSYW5nZUNoYW5nZT8obmV3VmFsdWU6IGJvb2xlYW4pOiB2b2lkO1xufVxuXG50eXBlIENvbnN0cmFpbnRzID0gSWRzQ29uc3RydWN0b3I8TW9udGhWaWV3QXR0cmlidXRlTWl4aW5JbnRlcmZhY2UgJiBJZHNSYW5nZVNldHRpbmdzSW50ZXJmYWNlPjtcblxuY29uc3QgaXNWYWxpZExlZ2VuZEFycmF5ID0gKHZhbDogSWRzTGVnZW5kU2V0dGluZ3MpID0+IEFycmF5LmlzQXJyYXkodmFsKVxuICAmJiB2YWwubGVuZ3RoID4gMFxuICAmJiB2YWwuZXZlcnkoXG4gICAgKGl0ZW06IGFueSkgPT4gaXRlbS5uYW1lICYmIGl0ZW0uY29sb3IgJiYgKGl0ZW0uZGF0ZXMgfHwgaXRlbS5kYXlPZldlZWspXG4gICk7XG5cbi8qKlxuICogQSBtaXhpbiB0aGF0IGFkZHMgc2hhcmVkIGF0dHJpYnV0ZSBzZXR0ZXJzL2dldHRlcnMvY2FsbGJhY2tzIHJlbGF0ZWQgdG8gSWRzTW9udGhWaWV3IGJlaGF2aW9ycy5cbiAqIEBtaXhpbiBJZHNNb250aFZpZXdBdHRyaWJ1dGVNaXhpblxuICogQHBhcmFtIHthbnl9IHN1cGVyY2xhc3MgQWNjZXB0cyBhIHN1cGVyY2xhc3MgYW5kIGNyZWF0ZXMgYSBuZXcgc3ViY2xhc3MgZnJvbSBpdC5cbiAqIEByZXR1cm5zIHthbnl9IFRoZSBleHRlbmRlZCBvYmplY3RcbiAqL1xuY29uc3QgSWRzTW9udGhWaWV3QXR0cmlidXRlTWl4aW4gPSA8VCBleHRlbmRzIENvbnN0cmFpbnRzPihzdXBlcmNsYXNzOiBUKSA9PiBjbGFzcyBleHRlbmRzIHN1cGVyY2xhc3Mge1xuICAjZGlzYWJsZVNldHRpbmdzOiBJZHNEaXNhYmxlU2V0dGluZ3MgPSB7XG4gICAgZGF0ZXM6IFtdLFxuICAgIHllYXJzOiBbXSxcbiAgICBtaW5EYXRlOiAnJyxcbiAgICBtYXhEYXRlOiAnJyxcbiAgICBkYXlPZldlZWs6IFtdLFxuICAgIGlzRW5hYmxlOiBmYWxzZVxuICB9O1xuXG4gICNjdXJyZW50TGVnZW5kOiBJZHNMZWdlbmRTZXR0aW5ncyA9IFtdO1xuXG4gICNyYW5nZVNldHRpbmdzOiBJZHNSYW5nZVNldHRpbmdzID0ge1xuICAgIHN0YXJ0OiBudWxsLFxuICAgIGVuZDogbnVsbCxcbiAgICBzZXBhcmF0b3I6ICcgLSAnLFxuICAgIG1pbkRheXM6IDAsXG4gICAgbWF4RGF5czogMCxcbiAgICBzZWxlY3RGb3J3YXJkOiBmYWxzZSxcbiAgICBzZWxlY3RCYWNrd2FyZDogZmFsc2UsXG4gICAgaW5jbHVkZURpc2FibGVkOiBmYWxzZSxcbiAgICBzZWxlY3RXZWVrOiBmYWxzZVxuICB9O1xuXG4gIGNvbnN0cnVjdG9yKC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgc3VwZXIoLi4uYXJncyk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IGF0dHJpYnV0ZXMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIC4uLihzdXBlcmNsYXNzIGFzIGFueSkuYXR0cmlidXRlcyxcbiAgICAgIGF0dHJpYnV0ZXMuUkFOR0VfU0VUVElOR1MsXG4gICAgICBhdHRyaWJ1dGVzLlVTRV9SQU5HRVxuICAgIF07XG4gIH1cblxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaz8uKCk7XG4gIH1cblxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpOiB2b2lkIHtcbiAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaz8uKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge0lkc0Rpc2FibGVTZXR0aW5nc30gZGlzYWJsZSBzZXR0aW5ncyBvYmplY3RcbiAgICovXG4gIGdldCBkaXNhYmxlU2V0dGluZ3MoKTogSWRzRGlzYWJsZVNldHRpbmdzIHtcbiAgICByZXR1cm4gdGhpcy4jZGlzYWJsZVNldHRpbmdzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBkaXNhYmxlIHNldHRpbmdzXG4gICAqIEBwYXJhbSB7SWRzRGlzYWJsZVNldHRpbmdzfSB2YWwgc2V0dGluZ3MgdG8gYmUgYXNzaWduZWQgdG8gZGVmYXVsdCBkaXNhYmxlIHNldHRpbmdzXG4gICAqL1xuICBzZXQgZGlzYWJsZVNldHRpbmdzKHZhbDogSWRzRGlzYWJsZVNldHRpbmdzKSB7XG4gICAgdGhpcy4jZGlzYWJsZVNldHRpbmdzID0ge1xuICAgICAgLi4udGhpcy4jZGlzYWJsZVNldHRpbmdzLFxuICAgICAgLi4uZGVlcENsb25lKHZhbClcbiAgICB9O1xuXG4gICAgaWYgKHR5cGVvZiB0aGlzLm9uRGlzYWJsZVNldHRpbmdzQ2hhbmdlID09PSAnZnVuY3Rpb24nKSB0aGlzLm9uRGlzYWJsZVNldHRpbmdzQ2hhbmdlKHRoaXMuI2Rpc2FibGVTZXR0aW5ncyk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge0lkc0xlZ2VuZFNldHRpbmdzfSBhcnJheSBvZiBsZWdlbmQgaXRlbXNcbiAgICovXG4gIGdldCBsZWdlbmQoKTogSWRzTGVnZW5kU2V0dGluZ3Mge1xuICAgIHJldHVybiB0aGlzLiNjdXJyZW50TGVnZW5kO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBhcnJheSBvZiBsZWdlbmQgaXRlbXMgdG8gbW9udGggdmlldyBjb21wb25lbnRcbiAgICogVmFsaWRhdGlvbiBvZiBkYXRhIGlzIHByb3ZpZGVkIGJ5IHRoZSBtb250aCB2aWV3IGNvbXBvbmVudFxuICAgKiBAcGFyYW0ge0lkc0xlZ2VuZFNldHRpbmdzfSB2YWwgYXJyYXkgb2YgbGVnZW5kIGl0ZW1zXG4gICAqL1xuICBzZXQgbGVnZW5kKHZhbDogSWRzTGVnZW5kU2V0dGluZ3MpIHtcbiAgICBpZiAodmFsID09PSBudWxsIHx8IChBcnJheS5pc0FycmF5KHZhbCkgJiYgIXZhbC5sZW5ndGgpKSB7XG4gICAgICB0aGlzLiNjdXJyZW50TGVnZW5kID0gW107XG4gICAgfSBlbHNlIGlmIChpc1ZhbGlkTGVnZW5kQXJyYXkodmFsKSkge1xuICAgICAgdGhpcy4jY3VycmVudExlZ2VuZCA9IGRlZXBDbG9uZSh2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2lkcy1tb250aC12aWV3OiBJbnZhbGlkIGxlZ2VuZCBkYXRhIHByb3ZpZGVkJyk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB0aGlzLm9uTGVnZW5kU2V0dGluZ3NDaGFuZ2UgPT09ICdmdW5jdGlvbicpIHRoaXMub25MZWdlbmRTZXR0aW5nc0NoYW5nZSh0aGlzLiNjdXJyZW50TGVnZW5kKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kIGxlZ2VuZCBvYmplY3QgYnkgZGF0ZSBwcm92aWRlZFxuICAgKiBAcGFyYW0ge0RhdGV9IGRhdGUgdG8gY2hlY2sgaWYgaGFzIGFueSBsZWdlbmRcbiAgICogQHJldHVybnMge0lkc0xlZ2VuZCB8IHVuZGVmaW5lZH0gbGVnZW5kIG9iamVjdCBmb3IgYSBzcGVjaWZpYyBkYXRlXG4gICAqL1xuICBnZXRMZWdlbmRCeURhdGUoZGF0ZTogRGF0ZSk6IElkc0xlZ2VuZCB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKCF0aGlzLiNjdXJyZW50TGVnZW5kKSByZXR1cm47XG5cbiAgICByZXR1cm4gdGhpcy4jY3VycmVudExlZ2VuZC5maW5kKChsZWdlbmQ6IElkc0xlZ2VuZCkgPT4ge1xuICAgICAgY29uc3QgaWZEYXlPZldlZWsgPSBsZWdlbmQuZGF5T2ZXZWVrPy5pbmNsdWRlcyhkYXRlLmdldERheSgpKTtcbiAgICAgIGNvbnN0IGlmRGF0ZSA9IGxlZ2VuZC5kYXRlcz8uc29tZSgoaXRlbTogYW55KSA9PiBuZXcgRGF0ZShpdGVtKS5nZXRUaW1lKCkgPT09IGRhdGUuZ2V0VGltZSgpKTtcbiAgICAgIHJldHVybiBpZkRheU9mV2VlayB8fCBpZkRhdGU7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge0lkc1JhbmdlU2V0dGluZ3N9IHJhbmdlIHNldHRpbmdzIG9iamVjdFxuICAgKi9cbiAgZ2V0IHJhbmdlU2V0dGluZ3MoKTogSWRzUmFuZ2VTZXR0aW5ncyB7XG4gICAgcmV0dXJuIHRoaXMuI3JhbmdlU2V0dGluZ3M7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHJhbmdlIHNlbGVjdGlvbiBzZXR0aW5nc1xuICAgKiBAcGFyYW0ge0lkc1JhbmdlU2V0dGluZ3N9IHZhbCBzZXR0aW5ncyB0byBiZSBhc3NpZ25lZCB0byBkZWZhdWx0IHJhbmdlIHNldHRpbmdzXG4gICAqL1xuICBzZXQgcmFuZ2VTZXR0aW5ncyh2YWw6IElkc1JhbmdlU2V0dGluZ3MpIHtcbiAgICBpZiAoIXZhbCB8fCB2YWwgPT09IG51bGwpIHRoaXMucmVzZXRSYW5nZVNldHRpbmdzKCk7XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLiNyYW5nZVNldHRpbmdzID0ge1xuICAgICAgICAuLi50aGlzLiNyYW5nZVNldHRpbmdzLFxuICAgICAgICAuLi5kZWVwQ2xvbmUodmFsKVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHRoaXMub25SYW5nZVNldHRpbmdzQ2hhbmdlID09PSAnZnVuY3Rpb24nKSB0aGlzLm9uUmFuZ2VTZXR0aW5nc0NoYW5nZSh2YWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGByYW5nZVNldHRpbmdzYCBvYmplY3QgYmFjayB0byBpdHMgb3JpZ2luYWwgZGVmYXVsdHNcbiAgICovXG4gIHJlc2V0UmFuZ2VTZXR0aW5ncygpIHtcbiAgICB0aGlzLnJhbmdlU2V0dGluZ3MgPSB7XG4gICAgICBzdGFydDogbnVsbCxcbiAgICAgIGVuZDogbnVsbCxcbiAgICAgIHNlcGFyYXRvcjogJyAtICcsXG4gICAgICBtaW5EYXlzOiAwLFxuICAgICAgbWF4RGF5czogMCxcbiAgICAgIHNlbGVjdEZvcndhcmQ6IGZhbHNlLFxuICAgICAgc2VsZWN0QmFja3dhcmQ6IGZhbHNlLFxuICAgICAgaW5jbHVkZURpc2FibGVkOiBmYWxzZSxcbiAgICAgIHNlbGVjdFdlZWs6IGZhbHNlXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiB1c2UtcmFuZ2UgYXR0cmlidXRlXG4gICAqIEByZXR1cm5zIHtib29sZWFufSB1c2VSYW5nZSBwYXJhbSBjb252ZXJ0ZWQgdG8gYm9vbGVhbiBmcm9tIGF0dHJpYnV0ZSB2YWx1ZVxuICAgKi9cbiAgZ2V0IHVzZVJhbmdlKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGF0dHJWYWwgPSB0aGlzLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLlVTRV9SQU5HRSk7XG5cbiAgICByZXR1cm4gc3RyaW5nVG9Cb29sKGF0dHJWYWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB3aGV0aGVyIG9yIG5vdCB0aGUgY29tcG9uZW50IHNob3VsZCBiZSBhIHJhbmdlIHBpY2tlclxuICAgKiBAcGFyYW0ge3N0cmluZ3xib29sZWFufG51bGx9IHZhbCB1c2VSYW5nZSBwYXJhbSB2YWx1ZVxuICAgKi9cbiAgc2V0IHVzZVJhbmdlKHZhbDogc3RyaW5nIHwgYm9vbGVhbiB8IG51bGwpIHtcbiAgICBjb25zdCBib29sVmFsID0gc3RyaW5nVG9Cb29sKHZhbCk7XG5cbiAgICBpZiAoYm9vbFZhbCkge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5VU0VfUkFOR0UsICd0cnVlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZXMuVVNFX1JBTkdFKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHRoaXMub25Vc2VSYW5nZUNoYW5nZSA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5vblVzZVJhbmdlQ2hhbmdlKGJvb2xWYWwpO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBJZHNNb250aFZpZXdBdHRyaWJ1dGVNaXhpbjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/ids-month-view/ids-month-view-attribute-mixin.ts\n");

/***/ }),

/***/ "./src/components/ids-month-view/ids-month-view-common.ts":
/*!****************************************************************!*\
  !*** ./src/components/ids-month-view/ids-month-view-common.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BASE_Y_OFFSET\": () => (/* binding */ BASE_Y_OFFSET),\n/* harmony export */   \"MAX_EVENT_COUNT\": () => (/* binding */ MAX_EVENT_COUNT),\n/* harmony export */   \"MAX_MONTH\": () => (/* binding */ MAX_MONTH),\n/* harmony export */   \"MIN_MONTH\": () => (/* binding */ MIN_MONTH),\n/* harmony export */   \"WEEK_LENGTH\": () => (/* binding */ WEEK_LENGTH)\n/* harmony export */ });\nconst MIN_MONTH = 0;\nconst MAX_MONTH = 11;\nconst WEEK_LENGTH = 7;\nconst BASE_Y_OFFSET = 35;\nconst MAX_EVENT_COUNT = 3;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9pZHMtbW9udGgtdmlldy9pZHMtbW9udGgtdmlldy1jb21tb24udHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBTyxNQUFNLFlBQVk7QUFDbEIsTUFBTSxZQUFZO0FBQ2xCLE1BQU0sY0FBYztBQUNwQixNQUFNLGdCQUFnQjtBQUN0QixNQUFNLGtCQUFrQiIsInNvdXJjZXMiOlsid2VicGFjazovL2lkcy1lbnRlcnByaXNlLXdjLy4vc3JjL2NvbXBvbmVudHMvaWRzLW1vbnRoLXZpZXcvaWRzLW1vbnRoLXZpZXctY29tbW9uLnRzP2U1OTMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IE1JTl9NT05USCA9IDA7XG5leHBvcnQgY29uc3QgTUFYX01PTlRIID0gMTE7XG5leHBvcnQgY29uc3QgV0VFS19MRU5HVEggPSA3O1xuZXhwb3J0IGNvbnN0IEJBU0VfWV9PRkZTRVQgPSAzNTtcbmV4cG9ydCBjb25zdCBNQVhfRVZFTlRfQ09VTlQgPSAzO1xuXG5leHBvcnQgdHlwZSBJZHNSYW5nZVNldHRpbmdzID0ge1xuICBzdGFydD86IGFueSxcbiAgZW5kPzogYW55LFxuICBzZXBhcmF0b3I6IHN0cmluZyxcbiAgbWluRGF5cz86IG51bWJlcixcbiAgbWF4RGF5cz86IG51bWJlcixcbiAgc2VsZWN0Rm9yd2FyZD86IGJvb2xlYW4sXG4gIHNlbGVjdEJhY2t3YXJkPzogYm9vbGVhbixcbiAgaW5jbHVkZURpc2FibGVkPzogYm9vbGVhbixcbiAgc2VsZWN0V2Vlaz86IGJvb2xlYW5cbn07XG5leHBvcnQgaW50ZXJmYWNlIElkc1JhbmdlU2V0dGluZ3NJbnRlcmZhY2Uge1xuICByYW5nZVNldHRpbmdzPzogSWRzUmFuZ2VTZXR0aW5ncztcbn1cblxuZXhwb3J0IHR5cGUgSWRzRGlzYWJsZVNldHRpbmdzID0ge1xuICBkYXRlcz86IEFycmF5PHN0cmluZz4sXG4gIHllYXJzPzogQXJyYXk8bnVtYmVyPixcbiAgbWluRGF0ZT86IHN0cmluZyxcbiAgbWF4RGF0ZT86IHN0cmluZyxcbiAgZGF5T2ZXZWVrPzogQXJyYXk8bnVtYmVyPixcbiAgaXNFbmFibGU/OiBib29sZWFuXG59O1xuXG5leHBvcnQgdHlwZSBJZHNMZWdlbmQgPSB7XG4gIG5hbWU6IHN0cmluZyxcbiAgY29sb3I6IHN0cmluZyxcbiAgZGF0ZXM/OiBBcnJheTxzdHJpbmc+LFxuICBkYXlPZldlZWs/OiBBcnJheTxudW1iZXI+XG59O1xuXG5leHBvcnQgdHlwZSBJZHNMZWdlbmRTZXR0aW5ncyA9IEFycmF5PElkc0xlZ2VuZD4gfCBudWxsO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/ids-month-view/ids-month-view-common.ts\n");

/***/ }),

/***/ "./src/components/ids-month-view/ids-month-view.ts":
/*!*********************************************************!*\
  !*** ./src/components/ids-month-view/ids-month-view.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ids_month_view_default)\n/* harmony export */ });\n/* harmony import */ var _core_ids_decorators__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/ids-decorators */ \"./src/core/ids-decorators.ts\");\n/* harmony import */ var _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/ids-attributes */ \"./src/core/ids-attributes.ts\");\n/* harmony import */ var _mixins_ids_events_mixin_ids_events_mixin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../mixins/ids-events-mixin/ids-events-mixin */ \"./src/mixins/ids-events-mixin/ids-events-mixin.ts\");\n/* harmony import */ var _mixins_ids_date_attribute_mixin_ids_date_attribute_mixin__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../mixins/ids-date-attribute-mixin/ids-date-attribute-mixin */ \"./src/mixins/ids-date-attribute-mixin/ids-date-attribute-mixin.ts\");\n/* harmony import */ var _mixins_ids_theme_mixin_ids_theme_mixin__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../mixins/ids-theme-mixin/ids-theme-mixin */ \"./src/mixins/ids-theme-mixin/ids-theme-mixin.ts\");\n/* harmony import */ var _mixins_ids_locale_mixin_ids_locale_mixin__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../mixins/ids-locale-mixin/ids-locale-mixin */ \"./src/mixins/ids-locale-mixin/ids-locale-mixin.ts\");\n/* harmony import */ var _mixins_ids_calendar_events_mixin_ids_calendar_events_mixin__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../mixins/ids-calendar-events-mixin/ids-calendar-events-mixin */ \"./src/mixins/ids-calendar-events-mixin/ids-calendar-events-mixin.ts\");\n/* harmony import */ var _core_ids_element__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/ids-element */ \"./src/core/ids-element.ts\");\n/* harmony import */ var _ids_month_view_attribute_mixin__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ids-month-view-attribute-mixin */ \"./src/components/ids-month-view/ids-month-view-attribute-mixin.ts\");\n/* harmony import */ var _utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../utils/ids-date-utils/ids-date-utils */ \"./src/utils/ids-date-utils/ids-date-utils.ts\");\n/* harmony import */ var _utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../utils/ids-string-utils/ids-string-utils */ \"./src/utils/ids-string-utils/ids-string-utils.ts\");\n/* harmony import */ var _ids_button_ids_button__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../ids-button/ids-button */ \"./src/components/ids-button/ids-button.ts\");\n/* harmony import */ var _ids_icon_ids_icon__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../ids-icon/ids-icon */ \"./src/components/ids-icon/ids-icon.ts\");\n/* harmony import */ var _ids_text_ids_text__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../ids-text/ids-text */ \"./src/components/ids-text/ids-text.ts\");\n/* harmony import */ var _ids_trigger_field_ids_trigger_button__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../ids-trigger-field/ids-trigger-button */ \"./src/components/ids-trigger-field/ids-trigger-button.ts\");\n/* harmony import */ var _ids_month_view_scss__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./ids-month-view.scss */ \"./src/components/ids-month-view/ids-month-view.scss\");\n/* harmony import */ var _ids_calendar_ids_calendar_event__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../ids-calendar/ids-calendar-event */ \"./src/components/ids-calendar/ids-calendar-event.ts\");\n/* harmony import */ var _ids_date_picker_ids_date_picker_common__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../ids-date-picker/ids-date-picker-common */ \"./src/components/ids-date-picker/ids-date-picker-common.ts\");\n/* harmony import */ var _ids_month_view_common__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./ids-month-view-common */ \"./src/components/ids-month-view/ids-month-view-common.ts\");\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __decorateClass = (decorators, target, key, kind) => {\n  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key) : target;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--)\n    if (decorator = decorators[i])\n      result = (kind ? decorator(target, key, result) : decorator(result)) || result;\n  if (kind && result)\n    __defProp(target, key, result);\n  return result;\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst Base = (0,_ids_month_view_attribute_mixin__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(\n  (0,_mixins_ids_date_attribute_mixin_ids_date_attribute_mixin__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(\n    (0,_mixins_ids_calendar_events_mixin_ids_calendar_events_mixin__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(\n      (0,_mixins_ids_theme_mixin_ids_theme_mixin__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(\n        (0,_mixins_ids_locale_mixin_ids_locale_mixin__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(\n          (0,_mixins_ids_events_mixin_ids_events_mixin__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(\n            _core_ids_element__WEBPACK_IMPORTED_MODULE_7__[\"default\"]\n          )\n        )\n      )\n    )\n  )\n);\nlet IdsMonthView = class extends Base {\n  constructor() {\n    super();\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.#attachEventHandlers();\n    this.#attachKeyboardListeners();\n    this.#renderMonth();\n  }\n  // Flag value for custom calendar event\n  #isCustom = false;\n  /**\n   * Return the attributes we handle as getters/setters\n   * @returns {Array} The attributes in an array\n   */\n  static get attributes() {\n    return [\n      ...super.attributes,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.COMPACT,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.END_DATE,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.FIRST_DAY_OF_WEEK,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.IS_DATEPICKER,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SHOW_PICKLIST_MONTH,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SHOW_PICKLIST_WEEK,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SHOW_PICKLIST_YEAR,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SHOW_TODAY,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.START_DATE\n    ];\n  }\n  /**\n   * Inner template contents\n   * @returns {string} The template\n   */\n  template() {\n    return `<div class=\"ids-month-view ${this.compact ? \"is-compact\" : \"is-fullsize\"}${this.isDatePicker ? \" is-date-picker\" : \"\"}\" part=\"container\">\n      <div class=\"month-view-container\" part=\"table-container\">\n        <table class=\"month-view-table\" aria-label=\"${this.localeAPI?.translate(\"Calendar\")}\" role=\"application\">\n          <thead class=\"month-view-table-header\">\n            <tr></tr>\n          </thead>\n          <tbody></tbody>\n        </table>\n      </div>\n    </div>`;\n  }\n  /**\n   * Establish internal event handlers\n   * @returns {void}\n   */\n  #attachEventHandlers() {\n    this.offEvent(\"click.month-view-dayselect\");\n    this.onEvent(\"click.month-view-dayselect\", this.container?.querySelector(\"tbody\"), (e) => {\n      this.#daySelectClick(e.target.closest(\"td\"));\n    });\n    this.offEvent(\"mouseover.month-view-range\");\n    this.onEvent(\"mouseover.month-view-range\", this.container?.querySelector(\"tbody\"), (e) => {\n      const element = e.target.closest(\"td\");\n      if (!element)\n        return;\n      const { year, month, day } = element.dataset;\n      this.#rangePropagation(year, month, day);\n    });\n    this.offEvent(\"mouseleave.month-view-range\");\n    this.onEvent(\"mouseleave.month-view-range\", this.container?.querySelector(\"tbody\"), () => {\n      this.container?.querySelectorAll(\"td\").forEach((item) => item.classList.remove(\"range-next\", \"range-prev\"));\n    });\n    this.onEvent(\"click.overflow\", this.container, (evt) => {\n      if (evt.target.tagName === \"IDS-TEXT\" && evt.target.classList.contains(\"events-overflow\")) {\n        evt.stopPropagation();\n        const date = new Date(evt.target.getAttribute(\"data-date\"));\n        this.triggerEvent(\"overflow-click\", this, {\n          detail: { date },\n          bubbles: true,\n          cancelable: true,\n          composed: true\n        });\n      }\n    });\n    return this;\n  }\n  onLanguageChange = () => {\n    this.setDirection();\n    this.#renderMonth();\n  };\n  onLocaleChange = () => {\n    this.setDirection();\n    this.#renderMonth();\n  };\n  /**\n   * Establish Internal Keyboard shortcuts\n   * @returns {object} this class-instance object for chaining\n   */\n  #attachKeyboardListeners() {\n    const keys = [33, 34, 35, 36, 37, 38, 39, 40, 187, 189];\n    if (this.#isDisplayRange()) {\n      this.offEvent(\"keydown.month-view-keyboard\");\n    } else {\n      this.offEvent(\"keydown.month-view-keyboard\");\n      this.onEvent(\"keydown.month-view-keyboard\", this.container?.querySelector(\".month-view-table\"), (e) => {\n        const key = e.keyCode;\n        if (keys.includes(key)) {\n          e.stopPropagation();\n          e.stopImmediatePropagation();\n          e.preventDefault();\n        }\n        if (this.useRange) {\n          if (this.rangeSettings.start) {\n            if (key === 27) {\n              this.rangeSettings.start = null;\n              this.#clearRangeClasses();\n              this.selectDay(this.year, this.month, this.day);\n              this.focus();\n            }\n            if (key === 38) {\n              this.changeDate(\"previous-week\", true);\n              this.#rangePropagation(this.year, this.month, this.day);\n            }\n            if (key === 40) {\n              this.changeDate(\"next-week\", true);\n              this.#rangePropagation(this.year, this.month, this.day);\n            }\n            if (key === 39 || key === 187 && e.shiftKey) {\n              this.changeDate(\"next-day\", true);\n              this.#rangePropagation(this.year, this.month, this.day);\n            }\n            if (key === 37 || key === 189 && !e.shiftKey) {\n              this.changeDate(\"previous-day\", true);\n              this.#rangePropagation(this.year, this.month, this.day);\n            }\n            if (key === 13 || key === 32) {\n              this.#setRangeSelection(this.year, this.month, this.day);\n              this.#triggerSelectedEvent();\n            }\n            this.focus();\n            return;\n          }\n          if (key === 13 || key === 32) {\n            if (this.rangeSettings.selectWeek) {\n              this.#rangeSelectWeek(this.year, this.month, this.day);\n              this.#triggerSelectedEvent();\n            } else {\n              this.#setRangeSelection(this.year, this.month, this.day);\n              this.focus();\n            }\n          }\n        }\n        if (key === 38) {\n          this.changeDate(\"previous-week\");\n        }\n        if (key === 40) {\n          this.changeDate(\"next-week\");\n        }\n        if (key === 39 || key === 187 && e.shiftKey) {\n          this.changeDate(\"next-day\");\n        }\n        if (key === 37 || key === 189 && !e.shiftKey) {\n          this.changeDate(\"previous-day\");\n        }\n        if (key === 33 && !e.altKey && !(e.ctrlKey || e.metaKey)) {\n          this.changeDate(\"previous-month\");\n        }\n        if (key === 34 && !e.altKey && !(e.ctrlKey || e.metaKey)) {\n          this.changeDate(\"next-month\");\n        }\n        if (key === 33 && (e.ctrlKey || e.metaKey)) {\n          this.changeDate(\"previous-year\");\n        }\n        if (key === 34 && (e.ctrlKey || e.metaKey)) {\n          this.changeDate(\"next-year\");\n        }\n        if (key === 36) {\n          this.changeDate(\"start-month\");\n        }\n        if (key === 35) {\n          this.changeDate(\"end-month\");\n        }\n        if (key === 84) {\n          this.changeDate(\"today\");\n        }\n        if ((keys.includes(key) || key === 84) && !this.isDatePicker || (key === 32 || key === 13)) {\n          this.#triggerSelectedEvent();\n        }\n        if (keys.includes(key) || key === 84) {\n          if (this.isDatePicker) {\n            this.selectDay(this.year, this.month, this.day);\n          }\n          this.focus();\n        }\n      });\n    }\n    return this;\n  }\n  /**\n   * Add/remove legend HTML to the container\n   */\n  #renderLegend() {\n    const template = this.legend && this.legend.length > 0 ? `\n      <div class=\"month-view-legend\">\n        ${this.legend.map((item) => `\n          <div class=\"month-view-legend-item ${item.cssClass || \"\"}\">\n            <span class=\"month-view-legend-swatch\" data-color=\"${item.color}\"></span>\n            <ids-text class=\"month-view-legend-text\" ${item.fontSize ? `font-size=\"${item.fontSize}\"` : \"\"}>${item.name}</ids-text>\n          </div>\n        `).join(\"\")}\n      </div>\n    ` : \"\";\n    this.container?.querySelector(\".month-view-legend\")?.remove();\n    this.container?.querySelector(\".month-view-container\")?.insertAdjacentHTML(\"beforeend\", template);\n    this.#colorToVar();\n  }\n  /**\n   * Change month/year/day by event type\n   * @param {string} type of event to be called\n   * @param {boolean} limitMonth date changing is limited only to the current month\n   */\n  changeDate(type, limitMonth = false) {\n    if (type === \"next-month\") {\n      if (this.localeAPI?.isIslamic()) {\n        const umalqura = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.gregorianToUmalqura)(this.activeDate);\n        const year = umalqura.month === _ids_month_view_common__WEBPACK_IMPORTED_MODULE_18__.MAX_MONTH ? umalqura.year + 1 : umalqura.year;\n        const month = umalqura.month === _ids_month_view_common__WEBPACK_IMPORTED_MODULE_18__.MAX_MONTH ? _ids_month_view_common__WEBPACK_IMPORTED_MODULE_18__.MIN_MONTH : umalqura.month + 1;\n        const gregorian = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.umalquraToGregorian)(year, month, umalqura.day === 30 ? 1 : umalqura.day);\n        this.day = gregorian.getDate();\n        this.year = gregorian.getFullYear();\n        this.month = gregorian.getMonth();\n      } else {\n        this.year = this.month === _ids_month_view_common__WEBPACK_IMPORTED_MODULE_18__.MAX_MONTH ? this.year + 1 : this.year;\n        this.month = this.month === _ids_month_view_common__WEBPACK_IMPORTED_MODULE_18__.MAX_MONTH ? _ids_month_view_common__WEBPACK_IMPORTED_MODULE_18__.MIN_MONTH : this.month + 1;\n        this.day = this.#getDayInMonth(this.day);\n      }\n    }\n    if (type === \"previous-month\") {\n      if (this.localeAPI?.isIslamic()) {\n        const umalqura = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.gregorianToUmalqura)(this.activeDate);\n        const year = umalqura.month === _ids_month_view_common__WEBPACK_IMPORTED_MODULE_18__.MIN_MONTH ? umalqura.year - 1 : umalqura.year;\n        const month = umalqura.month === _ids_month_view_common__WEBPACK_IMPORTED_MODULE_18__.MIN_MONTH ? _ids_month_view_common__WEBPACK_IMPORTED_MODULE_18__.MAX_MONTH : umalqura.month - 1;\n        const gregorian = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.umalquraToGregorian)(year, month, umalqura.day === 30 ? 1 : umalqura.day);\n        this.day = gregorian.getDate();\n        this.year = gregorian.getFullYear();\n        this.month = gregorian.getMonth();\n      } else {\n        this.year = this.month === _ids_month_view_common__WEBPACK_IMPORTED_MODULE_18__.MIN_MONTH ? this.year - 1 : this.year;\n        this.month = this.month === _ids_month_view_common__WEBPACK_IMPORTED_MODULE_18__.MIN_MONTH ? _ids_month_view_common__WEBPACK_IMPORTED_MODULE_18__.MAX_MONTH : this.month - 1;\n        this.day = this.#getDayInMonth(this.day);\n      }\n    }\n    if (type === \"next-day\") {\n      const lastDayOfMonth = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.lastDayOfMonthDate)(this.year, this.month, this.day, this.localeAPI?.isIslamic());\n      if (lastDayOfMonth.getDate() === this.day && limitMonth)\n        return;\n      if (this.localeAPI?.isIslamic()) {\n        const nextDate = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.addDate)(this.activeDate, 1, \"days\");\n        this.day = nextDate.getDate();\n        this.year = nextDate.getFullYear();\n        this.month = nextDate.getMonth();\n        return;\n      }\n      if (lastDayOfMonth.getDate() === this.day) {\n        const nextDate = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.addDate)(lastDayOfMonth, 1, \"days\");\n        this.year = nextDate.getFullYear();\n        this.month = nextDate.getMonth();\n        this.day = nextDate.getDate();\n      } else {\n        this.day += 1;\n      }\n    }\n    if (type === \"previous-day\") {\n      const firstDayOfMonth = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.firstDayOfMonthDate)(this.year, this.month, this.day, this.localeAPI?.isIslamic());\n      if (firstDayOfMonth.getDate() === this.day && limitMonth)\n        return;\n      if (this.localeAPI?.isIslamic()) {\n        const prevDate = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.subtractDate)(this.activeDate, 1, \"days\");\n        this.day = prevDate.getDate();\n        this.year = prevDate.getFullYear();\n        this.month = prevDate.getMonth();\n        return;\n      }\n      if (firstDayOfMonth.getDate() === this.day) {\n        const prevDate = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.subtractDate)(firstDayOfMonth, 1, \"days\");\n        this.year = prevDate.getFullYear();\n        this.month = prevDate.getMonth();\n        this.day = prevDate.getDate();\n      } else {\n        this.day -= 1;\n      }\n    }\n    if (type === \"next-year\") {\n      if (this.localeAPI?.isIslamic()) {\n        const umalqura = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.gregorianToUmalqura)(this.activeDate);\n        const gregorian = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.umalquraToGregorian)(\n          umalqura.year + 1,\n          umalqura.month,\n          umalqura.day === 30 ? 1 : umalqura.day\n        );\n        this.day = gregorian.getDate();\n        this.month = gregorian.getMonth();\n        this.year = gregorian.getFullYear();\n      } else {\n        const y = this.year + 1;\n        this.year = y;\n        this.day = this.#getDayInMonth(this.day);\n      }\n    }\n    if (type === \"previous-year\") {\n      if (this.localeAPI?.isIslamic()) {\n        const umalqura = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.gregorianToUmalqura)(this.activeDate);\n        const gregorian = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.umalquraToGregorian)(\n          umalqura.year - 1,\n          umalqura.month,\n          umalqura.day === 30 ? 1 : umalqura.day\n        );\n        this.day = gregorian.getDate();\n        this.month = gregorian.getMonth();\n        this.year = gregorian.getFullYear();\n      } else {\n        const y = this.year - 1;\n        this.year = y;\n        this.day = this.#getDayInMonth(this.day);\n      }\n    }\n    if (type === \"today\") {\n      const now = new Date();\n      this.day = now.getDate();\n      this.year = now.getFullYear();\n      this.month = now.getMonth();\n      if (this.useRange) {\n        this.rangeSettings.start = now.getTime();\n        this.rangeSettings.end = now.getTime();\n      }\n    }\n    if (type === \"next-week\") {\n      const nextWeek = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.addDate)(this.activeDate, _ids_month_view_common__WEBPACK_IMPORTED_MODULE_18__.WEEK_LENGTH, \"days\");\n      const lastDayOfMonth = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.lastDayOfMonthDate)(this.year, this.month, this.day, this.localeAPI?.isIslamic());\n      if (nextWeek > lastDayOfMonth && limitMonth)\n        return;\n      this.day = nextWeek.getDate();\n      if (nextWeek > lastDayOfMonth || this.localeAPI?.isIslamic()) {\n        this.year = nextWeek.getFullYear();\n        this.month = nextWeek.getMonth();\n      }\n    }\n    if (type === \"previous-week\") {\n      const prevWeek = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.subtractDate)(this.activeDate, _ids_month_view_common__WEBPACK_IMPORTED_MODULE_18__.WEEK_LENGTH, \"days\");\n      const firstDayOfMonth = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.firstDayOfMonthDate)(this.year, this.month, this.day, this.localeAPI?.isIslamic());\n      if (prevWeek < firstDayOfMonth && limitMonth)\n        return;\n      this.day = prevWeek.getDate();\n      if (prevWeek < firstDayOfMonth || this.localeAPI?.isIslamic()) {\n        this.year = prevWeek.getFullYear();\n        this.month = prevWeek.getMonth();\n      }\n    }\n    if (type === \"start-month\") {\n      const firstDayOfMonth = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.firstDayOfMonthDate)(this.year, this.month, this.day, this.localeAPI?.isIslamic());\n      this.day = firstDayOfMonth.getDate();\n      if (this.localeAPI?.isIslamic()) {\n        this.year = firstDayOfMonth.getFullYear();\n        this.month = firstDayOfMonth.getMonth();\n      }\n    }\n    if (type === \"end-month\") {\n      const lastDayOfMonth = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.lastDayOfMonthDate)(this.year, this.month, this.day, this.localeAPI?.isIslamic());\n      this.day = lastDayOfMonth.getDate();\n      if (this.localeAPI?.isIslamic()) {\n        this.month = lastDayOfMonth.getMonth();\n        this.year = lastDayOfMonth.getFullYear();\n      }\n    }\n    this.triggerDateChange(this.activeDate, type);\n  }\n  /**\n   * Day cell clicked\n   * @param {HTMLElement} element The element.\n   */\n  #daySelectClick(element) {\n    if (!element)\n      return;\n    const { month, year, day } = element.dataset;\n    const isDisabled = element.classList.contains(\"is-disabled\");\n    if (!isDisabled) {\n      this.#setRangeSelection(year, month, day);\n      this.day = day;\n      if ((0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_10__.stringToNumber)(month) !== this.month || this.localeAPI?.isIslamic()) {\n        this.month = month;\n      }\n      if ((0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_10__.stringToNumber)(year) !== this.year || this.localeAPI?.isIslamic()) {\n        this.year = year;\n      }\n      this.focus();\n      this.#triggerSelectedEvent();\n    }\n  }\n  /**\n   * Add given year, month, day to the range selection\n   * @param {number} year to add to the range selection\n   * @param {number} month to add to the range selection\n   * @param {number} day to add to the range selection\n   */\n  #setRangeSelection(year, month, day) {\n    if (!this.useRange)\n      return;\n    const date = new Date(year, month, day);\n    const dateTime = date.getTime();\n    const diff = this.rangeSettings.start ? (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.daysDiff)(this.rangeSettings.start, date) : 0;\n    const rangeStarted = this.rangeSettings.start && !this.rangeSettings.end;\n    const canSelectBoth = !(this.rangeSettings.selectBackward || this.rangeSettings.selectForward);\n    const selectBackward = this.rangeSettings.selectBackward && diff < 0;\n    const selectForward = this.rangeSettings.selectForward && diff > 0;\n    const startDate = new Date(this.rangeSettings.start);\n    const startTime = startDate.getTime();\n    const minDays = this.rangeSettings.minDays;\n    const maxDays = this.rangeSettings.maxDays;\n    const minRangeExceeded = minDays > 0 && Math.abs(diff) < minDays;\n    const maxRangeExceeded = maxDays > 0 && Math.abs(diff) > maxDays;\n    const minRangeDate = diff >= 0 ? (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.addDate)(startDate, minDays, \"days\") : (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.subtractDate)(startDate, minDays, \"days\");\n    this.selectDay(year, month, day);\n    if (this.rangeSettings.selectWeek) {\n      return;\n    }\n    if (rangeStarted && !maxRangeExceeded && (canSelectBoth || selectBackward || selectForward)) {\n      if (minRangeExceeded) {\n        this.rangeSettings.end = dateTime >= startTime ? minRangeDate.getTime() : this.rangeSettings.start;\n        this.rangeSettings.start = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.subtractDate)(this.rangeSettings.end, minDays, \"days\");\n        this.#renderRangeSelection();\n        return;\n      }\n      this.rangeSettings.end = dateTime >= startTime ? dateTime : this.rangeSettings.start;\n      this.rangeSettings.start = dateTime <= startTime ? dateTime : this.rangeSettings.start;\n      this.#renderRangeSelection();\n    } else {\n      this.rangeSettings.start = dateTime;\n      this.rangeSettings.end = null;\n      this.#clearRangeClasses();\n    }\n  }\n  /**\n   * Helper to clear range selection CSS classes\n   */\n  #clearRangeClasses() {\n    this.container?.querySelectorAll(\"td\").forEach(\n      (item) => item.classList.remove(\n        \"range-next\",\n        \"range-prev\",\n        \"range-selection\",\n        \"not-included\"\n      )\n    );\n  }\n  /**\n   * Add CSS classes and selected attrs to tables cells when range selection is completed\n   */\n  #renderRangeSelection() {\n    if (!this.useRange)\n      return;\n    const startRange = new Date(this.rangeSettings.start);\n    const endRange = new Date(this.rangeSettings.end);\n    const days = this.rangeSettings.end ? (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.daysDiff)(startRange, endRange) : 0;\n    this.#clearRangeClasses();\n    Array.from({ length: days + 1 }).forEach((_, index) => {\n      const rangeDay = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.addDate)(startRange, index, \"days\");\n      const selectedQuery = [\n        \"td\",\n        `[data-year=\"${rangeDay.getFullYear()}\"]`,\n        `[data-month=\"${rangeDay.getMonth()}\"]`,\n        `[data-day=\"${rangeDay.getDate()}\"]`\n      ].join(\"\");\n      const element = this.container?.querySelector(selectedQuery);\n      element?.classList.add(\"range-selection\");\n      if (!this.rangeSettings.includeDisabled) {\n        element?.classList.add(\"not-included\");\n      }\n      if ((index === 0 || index === days) && !this.rangeSettings.selectWeek) {\n        element?.setAttribute(\"aria-selected\", \"true\");\n        element?.setAttribute(\"role\", \"gridcell\");\n        element?.classList.add(\"is-selected\");\n      }\n    });\n  }\n  /**\n   * Helper to check if date is in the range selection\n   * @param {Date} date to check if is in range selection\n   * @returns {boolean} whether the date is in range selection\n   */\n  #isRangeByDate(date) {\n    const startRange = new Date(this.rangeSettings.start);\n    const endRange = new Date(this.rangeSettings.end);\n    return date.getTime() >= startRange.getTime() && date.getTime() <= endRange.getTime();\n  }\n  /**\n   * Helper to handle week selection\n   * @param {string|number} year to add to the range selection\n   * @param {string|number} month to add to the range selection\n   * @param {string|number} day to add to the range selection\n   */\n  #rangeSelectWeek(year, month, day) {\n    const firstDayOfWeek = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.firstDayOfWeekDate)(\n      new Date(year, month, day),\n      this.firstDayOfWeek\n    );\n    if (firstDayOfWeek.getTime() !== this.rangeSettings.start?.getTime()) {\n      this.rangeSettings.start = firstDayOfWeek;\n      this.rangeSettings.end = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.addDate)(this.rangeSettings.start, _ids_month_view_common__WEBPACK_IMPORTED_MODULE_18__.WEEK_LENGTH - 1, \"days\");\n      this.selectDay();\n      this.#renderRangeSelection();\n    }\n  }\n  /**\n   * Add CSS classes to table cells when range selection is in progress\n   * Starting from the range settings start\n   * @param {string|number} year to add to the range selection\n   * @param {string|number} month to add to the range selection\n   * @param {string|number} day to add to the range selection\n   */\n  #rangePropagation(year, month, day) {\n    if (!this.useRange)\n      return;\n    if (this.rangeSettings.selectWeek) {\n      this.#rangeSelectWeek(year, month, day);\n      return;\n    }\n    if (this.rangeSettings.start && !(this.rangeSettings.end && this.rangeSettings.start)) {\n      const startRange = new Date(this.rangeSettings.start);\n      const endRange = new Date(year, month, day);\n      const diff = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.daysDiff)(startRange, endRange);\n      this.#clearRangeClasses();\n      const canSelectBoth = !(this.rangeSettings.selectBackward || this.rangeSettings.selectForward);\n      const selectBackward = this.rangeSettings.selectBackward && diff < 0;\n      const selectForward = this.rangeSettings.selectForward && diff > 0;\n      const maxDays = this.rangeSettings.maxDays;\n      const maxRangeExceeded = maxDays > 0 && Math.abs(diff) > maxDays;\n      if (diff !== 0 && !maxRangeExceeded && (canSelectBoth || selectBackward || selectForward)) {\n        Array.from({ length: Math.abs(diff) }).forEach((_, index) => {\n          const rangeDay = diff > 0 ? (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.addDate)(startRange, index + 1, \"days\") : (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.subtractDate)(startRange, index + 1, \"days\");\n          const selectedQuery = [\n            \"td\",\n            `[data-year=\"${rangeDay.getFullYear()}\"]`,\n            `[data-month=\"${rangeDay.getMonth()}\"]`,\n            `[data-day=\"${rangeDay.getDate()}\"]`\n          ].join(\"\");\n          this.container?.querySelector(selectedQuery)?.classList.add(diff > 0 ? \"range-next\" : \"range-prev\");\n          if (!this.rangeSettings.includeDisabled) {\n            this.container?.querySelector(selectedQuery)?.classList.add(\"not-included\");\n          }\n        });\n      }\n    }\n  }\n  /**\n   * Defines if a date is in disabled settings\n   * @param {Date} date to check\n   * @returns {boolean} wheter or not the date is disabled\n   */\n  isDisabledByDate(date) {\n    const {\n      years,\n      dayOfWeek,\n      dates,\n      minDate,\n      maxDate,\n      isEnable\n    } = this.disableSettings;\n    const isOutOfDisplayRange = this.#isDisplayRange() && (date < this.startDate || date > this.endDate);\n    const ifYear = years.some(\n      (item) => item === date.getFullYear()\n    );\n    const ifDayOfWeek = dayOfWeek.some(\n      (item) => item === date.getDay()\n    );\n    const ifDates = dates.some(\n      (item) => new Date(item).getTime() === date.getTime()\n    );\n    const ifMinMaxDate = date <= new Date(minDate) || date >= new Date(maxDate);\n    const ifBySettings = ifYear || ifDayOfWeek || ifDates || ifMinMaxDate;\n    const withReverse = isEnable ? !ifBySettings : ifBySettings;\n    return withReverse || isOutOfDisplayRange;\n  }\n  /**\n   * Helper to get month format for first day of a month or first day of the display range\n   * @param {Date} date date to check\n   * @param {Date} rangeStartsOn very first day of the display range\n   * @returns {string|undefined} Intl.DateTimeFormat options month format (numeric, long, short)\n   */\n  #monthInDayFormat(date, rangeStartsOn) {\n    const isFirstDayOfRange = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.daysDiff)(date, rangeStartsOn) === 0;\n    const isFirstDayOfMonth = this.localeAPI?.isIslamic() ? (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.gregorianToUmalqura)(date).day === 1 : date.getDate() === 1;\n    if (this.#isDisplayRange() && (isFirstDayOfRange || isFirstDayOfMonth)) {\n      return \"short\";\n    }\n    return void 0;\n  }\n  /**\n   * Table cell HTML template with locale, data attributes\n   * @param {number} weekIndex number of week in month starting from 0\n   * @returns {string} table cell HTML template\n   */\n  #getCellTemplate(weekIndex) {\n    const firstDayOfRange = this.#isDisplayRange() ? this.startDate : (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.firstDayOfMonthDate)(this.year, this.month, this.day, this.localeAPI?.isIslamic());\n    const lastDayOfRange = this.#isDisplayRange() ? this.endDate : (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.lastDayOfMonthDate)(this.year, this.month, this.day, this.localeAPI?.isIslamic());\n    const rangeStartsOn = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.firstDayOfWeekDate)(firstDayOfRange, this.firstDayOfWeek);\n    const now = new Date();\n    const isCompact = this.compact;\n    return Array.from({ length: _ids_month_view_common__WEBPACK_IMPORTED_MODULE_18__.WEEK_LENGTH }).map((_, index) => {\n      const date = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.addDate)(rangeStartsOn, weekIndex * _ids_month_view_common__WEBPACK_IMPORTED_MODULE_18__.WEEK_LENGTH + index, \"days\");\n      const monthFormat = this.#monthInDayFormat(date, rangeStartsOn);\n      const dayText = this.localeAPI?.formatDate(date, {\n        day: \"numeric\",\n        month: monthFormat,\n        numberingSystem: \"latn\"\n      });\n      const ariaLabel = this.localeAPI?.formatDate(date, { dateStyle: \"full\" });\n      const day = date.getDate();\n      const month = date.getMonth();\n      const year = date.getFullYear();\n      const dateMatch = day === this.day && year === this.year && month === this.month;\n      const isSelected = !this.useRange && dateMatch;\n      const isSelectedWithRange = this.useRange && !this.rangeSettings.start && dateMatch;\n      const isDisabled = this.isDisabledByDate(date);\n      const isAlternate = !this.#isDisplayRange() && (date < firstDayOfRange || date > lastDayOfRange);\n      const legend = this.getLegendByDate(date);\n      const isRangeSelection = this.#isRangeByDate(date);\n      const isToday = year === now.getFullYear() && month === now.getMonth() && day === now.getDate();\n      const classAttr = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_10__.buildClassAttrib)(\n        isAlternate && \"alternate\",\n        legend && \"has-legend\",\n        isDisabled && \"is-disabled\",\n        (isSelected || isSelectedWithRange) && \"is-selected\",\n        monthFormat && \"month-label\",\n        isRangeSelection && \"range-selection\",\n        isToday && \"is-today\"\n      );\n      const selectedAttr = isSelected || isSelectedWithRange ? 'aria-selected=\"true\" tabindex=\"0\" role=\"gridcell\"' : 'role=\"link\"';\n      const dataAttr = [`data-year=\"${year}\"`, `data-month=\"${month}\"`, `data-day=\"${day}\"`].join(\" \");\n      const colorAttr = legend ? `data-color=\"${legend.color}\"` : \"\";\n      const dateKey = this.generateDateKey(new Date(year, month, day));\n      let cellTemplate = `<td aria-label=\"${ariaLabel}\" ${dataAttr} ${classAttr} ${selectedAttr} ${colorAttr}>\n        <span class=\"day-container\">\n          <ids-text\n            aria-hidden=\"true\"\n            class=\"day-text\"\n            font-size=\"14\"\n          >${dayText}</ids-text>\n        </span>\n        ${isCompact ? \"\" : `<div class=\"events-container\" data-key=\"${dateKey}\"></div>`}\n      </td>`;\n      if (typeof this.state.onDayRender === \"function\") {\n        cellTemplate = this.state.onDayRender(cellTemplate, dateKey);\n      }\n      return cellTemplate;\n    }).join(\"\");\n  }\n  /**\n   * Add week days HTML to the table\n   */\n  #renderWeekDays() {\n    const weekDayKeys = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n    const weekDays = weekDayKeys.map((item) => this.localeAPI?.translate(`${this.compact ? \"DayNarrow\" : \"DayAbbreviated\"}${item}`));\n    const weekDaysTemplate = weekDays.map((el, index) => {\n      const weekday = weekDays[(index + this.firstDayOfWeek) % _ids_month_view_common__WEBPACK_IMPORTED_MODULE_18__.WEEK_LENGTH];\n      return `\n        <th>\n          <ids-text\n            class=\"weekday-text\"\n            font-size=\"14\"\n          >${weekday}</ids-text>\n        </th>\n      `;\n    }).join(\"\");\n    this.container?.querySelectorAll(\"thead th\").forEach((el) => el.remove());\n    this.container?.querySelector(\"thead tr\")?.insertAdjacentHTML(\"beforeend\", weekDaysTemplate);\n  }\n  /**\n   * Add month HTML to the table\n   */\n  #renderMonth() {\n    const weeksCount = this.#isDisplayRange() ? (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.weeksInRange)(this.startDate, this.endDate, this.firstDayOfWeek) : (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.weeksInMonth)(this.year, this.month, this.day, this.firstDayOfWeek, this.localeAPI?.isIslamic());\n    this.triggerEvent(\"beforerendermonth\", this, { bubbles: true, composed: true });\n    const rowsTemplate = Array.from({ length: weeksCount }).map((_, weekIndex) => `<tr>${this.#getCellTemplate(weekIndex)}</tr>`).join(\"\");\n    this.container?.querySelectorAll(\"tbody tr\").forEach((el) => el.remove());\n    this.container?.querySelector(\"tbody\")?.insertAdjacentHTML(\"beforeend\", rowsTemplate);\n    this.#renderWeekDays();\n    this.#colorToVar();\n    this.state.hasRendered = true;\n    if (!this.compact && !this.isDatePicker) {\n      this.renderEventsData();\n    }\n  }\n  /**\n   * Gets calendar events within the selected/active day\n   * @returns {CalendarEventData[]} calendar events data\n   */\n  getActiveDayEvents() {\n    const activeDay = this.getSelectedDay();\n    let eventElems = activeDay ? [...activeDay.querySelectorAll(\"ids-calendar-event\")] : [];\n    if (this.#isCustom && activeDay) {\n      const customCalendarEvents = activeDay.querySelectorAll(\".events-container > [slot]\");\n      eventElems = activeDay ? [...customCalendarEvents] : [];\n    }\n    const events = eventElems.map((elem) => elem.eventData);\n    return events;\n  }\n  /**\n   * Trigger selected event with current params\n   * @returns {void}\n   */\n  #triggerSelectedEvent() {\n    if (this.isDisabledByDate(this.activeDate)) {\n      return;\n    }\n    const args = {\n      detail: {\n        elem: this,\n        date: this.activeDate,\n        useRange: this.useRange,\n        rangeStart: this.useRange && this.rangeSettings.start ? new Date(this.rangeSettings.start) : null,\n        rangeEnd: this.useRange && this.rangeSettings.end ? new Date(this.rangeSettings.end) : null,\n        value: this.getFormattedDate(this.activeDate)\n      },\n      bubbles: true,\n      cancelable: true,\n      composed: true\n    };\n    if (!this.compact && !this.isDatePicker) {\n      args.detail.events = this.getActiveDayEvents();\n    }\n    this.triggerEvent(\"dayselected\", this, args);\n  }\n  /**\n   * Add selectable attribute to active day\n   * @param {number} year a given year\n   * @param {number} month a given month\n   * @param {number} day a given day\n   */\n  selectDay(year, month, day) {\n    this.#makeAllDeselected();\n    const selectedQuery = `td[data-year=\"${year}\"][data-month=\"${month}\"][data-day=\"${day}\"]`;\n    const selected = this.container?.querySelector(selectedQuery);\n    if (selected)\n      this.#makeSelected(selected);\n  }\n  /**\n   * Makes a specified day in the Month View table appear \"selected\"\n   * @param {HTMLTableCellElement} elem the element to make appear \"selected\"\n   * @returns {void}\n   */\n  #makeSelected(elem) {\n    if (!elem)\n      return;\n    elem.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.TABINDEX, \"0\");\n    elem.setAttribute(\"aria-selected\", \"true\");\n    elem.setAttribute(\"role\", \"gridcell\");\n    elem.classList.add(\"is-selected\");\n  }\n  /**\n   * Makes a specified day in the Month View table appear \"selected\"\n   * @param {HTMLTableCellElement} elem the element to make appear \"selected\"\n   * @returns {void}\n   */\n  #makeDeselected(elem) {\n    if (!elem)\n      return;\n    elem.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.TABINDEX);\n    elem.removeAttribute(\"aria-selected\");\n    elem.setAttribute(\"role\", \"link\");\n    elem.classList.remove(\"is-selected\");\n  }\n  /**\n   * Clears all previously-selected days from the Month View\n   */\n  #makeAllDeselected() {\n    this.container?.querySelectorAll(\"td.is-selected\")?.forEach((item) => {\n      this.#makeDeselected(item);\n    });\n  }\n  /**\n   * Whether or not it should show range of dates instead of one month view\n   * @returns {boolean} startDate and endDate are set\n   */\n  #isDisplayRange() {\n    return (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.isValidDate)(this.startDate) && (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.isValidDate)(this.endDate) && this.endDate >= this.startDate;\n  }\n  /**\n   * Helper to check if the month has a day\n   * @param {number} day to check\n   * @returns {number} day of the month either active or first\n   */\n  #getDayInMonth(day) {\n    const numberOfDays = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.daysInMonth)(this.year, this.month);\n    return day > numberOfDays ? 1 : day;\n  }\n  /**\n   * Iterate legend items with color data and add color css variable\n   */\n  #colorToVar() {\n    this.container?.querySelectorAll(\"[data-color]\").forEach((el) => {\n      const color = el.dataset.color;\n      const isHex = color?.includes(\"#\");\n      if (color) {\n        el.style = `--legend-color: ${isHex ? color : `var(--ids-color-palette-${color})`}`;\n      }\n    });\n  }\n  /**\n   * Queries selected day cell element\n   * @returns {HTMLElement} selected day\n   */\n  getSelectedDay() {\n    const selectedQuery = `td[data-year=\"${this.year}\"][data-month=\"${this.month}\"][data-day=\"${this.day}\"]`;\n    return this.container?.querySelector(selectedQuery) || null;\n  }\n  /**\n   * Focuses the active/selected day\n   * @returns {void}\n   */\n  focus() {\n    const selectedDay = this.getSelectedDay();\n    if (selectedDay) {\n      const isDisabled = selectedDay.classList.contains(\"is-disabled\");\n      if (!isDisabled) {\n        this.#makeAllDeselected();\n        this.#makeSelected(selectedDay);\n        selectedDay.focus();\n      }\n    }\n  }\n  /**\n   * Inherited from `IdsDateAttributeMixin`\n   * @returns {void}\n   */\n  onFirstDayOfWeekChange() {\n    if (this.container)\n      this.#renderMonth();\n  }\n  /**\n   * Inherited from `IdsDateAttributeMixin`\n   * @returns {void}\n   */\n  onMonthChange() {\n    if (!this.container)\n      return;\n    if (this.#isDisplayRange()) {\n      this.selectDay(this.year, this.month, this.day);\n    } else {\n      this.#renderMonth();\n      this.#renderRangeSelection();\n    }\n  }\n  /**\n   * Inherited from `IdsDateAttributeMixin`\n   * @returns {void}\n   */\n  onYearChange() {\n    if (!this.container)\n      return;\n    if (this.#isDisplayRange()) {\n      this.selectDay(this.year, this.month, this.day);\n    } else {\n      this.#renderMonth();\n      this.#renderRangeSelection();\n    }\n  }\n  /**\n   * Inherited from `IdsDateAttributeMixin`\n   * @param {number} numberVal new value\n   * @param {boolean} validates true if the new value passed is valid\n   * @returns {void}\n   */\n  onDayChange(numberVal, validates) {\n    if (!this.container)\n      return;\n    if (!(this.rangeSettings.start || this.useRange) && !this.isDatePicker) {\n      this.selectDay(this.year, this.month, validates ? numberVal : this.day);\n    }\n  }\n  /**\n   * start-date attribute\n   * @returns {Date | null} startDate date parsed from attribute value\n   */\n  get startDate() {\n    const attrVal = this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.START_DATE) ?? \"\";\n    const attrDate = new Date(attrVal);\n    if (attrVal && (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.isValidDate)(attrDate)) {\n      return attrDate;\n    }\n    return null;\n  }\n  /**\n   * Set start of the range to show\n   * @param {string | Date | null} val startDate param value\n   */\n  set startDate(val) {\n    if (val) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.START_DATE, String(val));\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.START_DATE);\n    }\n    if (this.container) {\n      this.#renderMonth();\n      this.#attachKeyboardListeners();\n    }\n  }\n  /**\n   * end-date attribute\n   * @returns {Date|null} endDate date parsed from attribute value\n   */\n  get endDate() {\n    const attrVal = this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.END_DATE) ?? \"\";\n    const attrDate = new Date(attrVal);\n    if (attrVal && (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.isValidDate)(attrDate)) {\n      return attrDate;\n    }\n    return null;\n  }\n  /**\n   * Set end of the range to show\n   * @param {Date | string | null} val endDate param value\n   */\n  set endDate(val) {\n    if (val) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.END_DATE, String(val));\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.END_DATE);\n    }\n    if (this.container) {\n      this.#renderMonth();\n      this.#attachKeyboardListeners();\n    }\n  }\n  /**\n   * compact attribute\n   * @returns {boolean} compact param converted to boolean from attribute value\n   */\n  get compact() {\n    const attrVal = this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.COMPACT);\n    return (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_10__.stringToBool)(attrVal);\n  }\n  /**\n   * Set whether or not the component should be compact view\n   * @param {string|boolean|null} val compact param value\n   */\n  set compact(val) {\n    const boolVal = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_10__.stringToBool)(val);\n    if (boolVal) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.COMPACT, \"true\");\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.COMPACT);\n    }\n    this.container?.classList.toggle(\"is-fullsize\", !boolVal);\n    this.container?.classList.toggle(\"is-compact\", boolVal);\n    if (this.container) {\n      this.#renderWeekDays();\n    }\n  }\n  /**\n   * is-date-picker attribute\n   * @returns {boolean} isDatePicker param converted to boolean from attribute value\n   */\n  get isDatePicker() {\n    const attrVal = this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.IS_DATEPICKER);\n    return (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_10__.stringToBool)(attrVal);\n  }\n  /**\n   * Set whether or not the component is used in datepicker popup\n   * @param {string|boolean|null} val compact param value\n   */\n  set isDatePicker(val) {\n    const boolVal = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_10__.stringToBool)(val);\n    if (boolVal) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.IS_DATEPICKER, \"true\");\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.IS_DATEPICKER);\n    }\n    this.container?.classList.toggle(\"is-date-picker\", boolVal);\n  }\n  onDisableSettingsChange() {\n    this.#renderMonth();\n  }\n  onLegendSettingsChange(val) {\n    if (!this.container)\n      return;\n    this.#renderMonth();\n    this.#renderLegend();\n    this.container.classList[val && val.length ? \"add\" : \"remove\"](\"has-legend\");\n  }\n  onRangeSettingsChange(val) {\n    if (!this.container)\n      return;\n    if (this.useRange && val?.start) {\n      this.selectDay();\n    } else {\n      this.#clearRangeClasses();\n      this.selectDay(this.year, this.month, this.day);\n    }\n    this.container.classList.toggle(\"range-select-week\", this.rangeSettings.selectWeek);\n    this.#renderRangeSelection();\n  }\n  onUseRangeChange(newValue) {\n    if (newValue) {\n      this.selectDay();\n      this.#renderRangeSelection();\n    } else {\n      this.#clearRangeClasses();\n      this.selectDay(this.year, this.month, this.day);\n    }\n  }\n  /**\n   * show-picklist-year attribute, default is true\n   * @returns {boolean} showPicklistYear param converted to boolean from attribute value\n   */\n  get showPicklistYear() {\n    const attrVal = this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SHOW_PICKLIST_YEAR);\n    if (attrVal) {\n      return (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_10__.stringToBool)(attrVal);\n    }\n    return true;\n  }\n  /**\n   * Whether or not to show a list of years in the toolbar datepicker picklist\n   * @param {string | boolean | null} val value to be set as show-picklist-year attribute converted to boolean\n   */\n  set showPicklistYear(val) {\n    const boolVal = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_10__.stringToBool)(val);\n    this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SHOW_PICKLIST_YEAR, String(boolVal));\n  }\n  /**\n   * show-picklist-month attribute, default is true\n   * @returns {boolean} showPicklistMonth param converted to boolean from attribute value\n   */\n  get showPicklistMonth() {\n    const attrVal = this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SHOW_PICKLIST_MONTH);\n    if (attrVal) {\n      return (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_10__.stringToBool)(attrVal);\n    }\n    return true;\n  }\n  /**\n   * Whether or not to show a list of months in the toolbar datepicker picklist\n   * @param {string | boolean | null} val value to be set as show-picklist-month attribute converted to boolean\n   */\n  set showPicklistMonth(val) {\n    const boolVal = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_10__.stringToBool)(val);\n    this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SHOW_PICKLIST_MONTH, String(boolVal));\n  }\n  /**\n   * show-picklist-week attribute\n   * @returns {boolean} showPicklistWeek param converted to boolean from attribute value\n   */\n  get showPicklistWeek() {\n    return (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_10__.stringToBool)(this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SHOW_PICKLIST_WEEK));\n  }\n  /**\n   * Whether or not to show week numbers in the toolbar datepicker picklist\n   * @param {string | boolean | null} val value to be set as show-picklist-week attribute converted to boolean\n   */\n  set showPicklistWeek(val) {\n    const boolVal = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_10__.stringToBool)(val);\n    if (boolVal) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SHOW_PICKLIST_WEEK, \"true\");\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SHOW_PICKLIST_WEEK);\n    }\n  }\n  /**\n   * Remove month view calendar events and overflow elements\n   */\n  removeAllEvents() {\n    this.container?.querySelectorAll(\".events-container\").forEach((container) => {\n      container.innerHTML = \"\";\n    });\n  }\n  /**\n   * Groups calendar events by day using dateKey as key\n   * @param {CalendarEventData[]} events calendar events data\n   * @returns {Record<string, Array<CalendarEventData>>} collection of calendar events\n   */\n  #groupEventsByDay(events) {\n    const dayEvents = {};\n    events.forEach((event) => {\n      const dateKey = this.generateDateKey(new Date(event.starts)).toString();\n      if (!dayEvents[dateKey])\n        dayEvents[dateKey] = [];\n      dayEvents[dateKey].push(event);\n    });\n    return dayEvents;\n  }\n  /**\n   * Filter calendar events data by current month\n   * @param {CalendarEventData[]} data calendar events data\n   * @returns {CalendarEventData[]} calendar events within month\n   */\n  filterEventsByMonth(data = []) {\n    return data.filter((event) => {\n      const eventStart = new Date(event.starts);\n      return this.startDate && this.endDate ? this.startDate <= eventStart && eventStart < this.endDate : eventStart.getMonth() === this.month && eventStart.getFullYear() === this.year;\n    });\n  }\n  /**\n   * Render Calendar Events data inside month view\n   * @param {boolean} forceRender skip data fetch\n   */\n  async renderEventsData(forceRender = false) {\n    if (!forceRender && typeof this.state.beforeEventsRender === \"function\") {\n      const startDate = this.startDate || new Date(this.year, this.month, 1);\n      const endDate = this.endDate || new Date(this.year, this.month + 1, 0);\n      this.eventsData = await this.state.beforeEventsRender(startDate, endDate);\n      return;\n    }\n    this.removeAllEvents();\n    if (!this.state.hasRendered || !this.eventsData?.length)\n      return;\n    const eventsInRange = this.filterEventsByMonth(this.eventsData);\n    const monthEvents = this.#groupEventsByDay(eventsInRange);\n    const customCalendarEvent = this.querySelector('[slot=\"customCalendarEvent\"]');\n    for (const dateKey in monthEvents) {\n      if (monthEvents.hasOwnProperty(dateKey)) {\n        this.#renderDayEvents(dateKey, monthEvents[dateKey], customCalendarEvent);\n      }\n    }\n  }\n  /**\n   * Counts number of days for calendar events\n   * @param {Date} start start date\n   * @param {Date} end end date\n   * @returns {number} days\n   */\n  #countDays(start, end) {\n    return Math.ceil((end.getTime() - start.getTime()) / (1e3 * 60 * 60 * 24));\n  }\n  /**\n   * Renders calendar events within corresponding date's table cell\n   * @param {string} dateKey generated date key\n   * @param {CalendarEventData[]} events calendar events\n   * @param {any} customCalendarEvent custom calendar events\n   */\n  #renderDayEvents(dateKey, events, customCalendarEvent) {\n    if (!this.container)\n      return;\n    const eventsContainer = this.container?.querySelector(`.events-container[data-key=\"${dateKey}\"]`);\n    const orders = [...eventsContainer?.childNodes || []].map((elem) => elem.order);\n    const baseOrder = orders.length ? Math.max(...orders) + 1 : 0;\n    let isOverflowing = false;\n    events.forEach((event, index) => {\n      const start = new Date(event.starts);\n      const end = new Date(event.ends);\n      const days = this.#countDays(start, end) || 1;\n      for (let i = 0; i < days; i++) {\n        const calendarEvent = this.#newCalendarEvent(customCalendarEvent);\n        const eventType = this.eventTypesData?.find((et) => et.id === event.type) ?? null;\n        const eventOrder = baseOrder + index;\n        calendarEvent.eventTypeData = eventType;\n        calendarEvent.eventData = event;\n        calendarEvent.cssClass = [\"is-month-view\"];\n        calendarEvent.order = eventOrder;\n        if (i > 0) {\n          start.setDate(start.getDate() + 1);\n        }\n        const day = start.getDate();\n        const year = start.getFullYear();\n        const month = start.getMonth();\n        calendarEvent.dateKey = `${year}${month}${day}`;\n        const dateCell = this.container?.querySelector(`td[data-year=\"${year}\"][data-month=\"${month}\"][data-day=\"${day}\"]`);\n        if (dateCell) {\n          if (days > 1) {\n            const extraCss = [\"all-day\"];\n            if (i === 0) {\n              extraCss.push(\"calendar-event-start\");\n            } else if (i === days - 1) {\n              extraCss.push(\"calendar-event-ends\");\n            } else {\n              extraCss.push(\"calendar-event-continue\");\n            }\n            calendarEvent.cssClass = extraCss;\n          }\n          const eventYOffset = this.generateYOffset(calendarEvent);\n          calendarEvent.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.Y_OFFSET, `${eventYOffset}px`);\n          isOverflowing = this.isEventOverflowing(calendarEvent);\n          calendarEvent.hidden = isOverflowing;\n          dateCell.querySelector(\".events-container\")?.appendChild(calendarEvent);\n          const container = dateCell.querySelector(\".events-container\");\n          this.triggerEvent(\"beforeeventrendered\", this, {\n            detail: {\n              elem: this,\n              events: this.eventsData,\n              event: calendarEvent,\n              dateCell: calendarEvent,\n              container\n            },\n            bubbles: true\n          });\n          container?.appendChild(calendarEvent);\n          this.triggerEvent(\"aftereventrendered\", this, {\n            detail: {\n              elem: this,\n              events: this.eventsData,\n              event: calendarEvent,\n              dateCell: calendarEvent,\n              container\n            },\n            bubbles: true\n          });\n        }\n      }\n    });\n    if (isOverflowing && eventsContainer) {\n      this.#renderEventsOverflow(eventsContainer, dateKey);\n    }\n  }\n  /**\n   * Renders clickable event overflow element\n   * Specifies number of calendar events overflowing the container\n   * @param {Element} eventsContainer date specific event container elemeent\n   * @param {string} dateKey generated date key\n   */\n  #renderEventsOverflow(eventsContainer, dateKey) {\n    if (!eventsContainer)\n      return;\n    const calendarEvents = [...eventsContainer.childNodes];\n    const hiddenEvents = calendarEvents.filter((elem) => elem.hidden);\n    const year = dateKey.substring(0, 4);\n    const month = parseInt(dateKey.substring(4, 6)) + 1;\n    const day = dateKey.substring(6);\n    const date = `${month}/${day}/${year}`;\n    const tmpl = `\n      <ids-text data-date=\"${date}\" class=\"events-overflow\" font-size=\"12\">\n        ${hiddenEvents.length}+ ${this.localeAPI.translate(\"More\")}\n      </ids-text>\n    `;\n    eventsContainer.insertAdjacentHTML(\"beforeend\", tmpl);\n  }\n  /**\n   * Generates new IdsCalendarEvent\n   * @param {IdsCalendarEvent} customCalendarEvent optional custom event to use instead of default\n   * @returns {IdsCalendarEvent} calendar event\n   */\n  #newCalendarEvent(customCalendarEvent) {\n    if (customCalendarEvent?.name === \"MonthViewCalendarEventTemplate\") {\n      const eventTemplate = customCalendarEvent.assignedNodes()[0];\n      if (eventTemplate) {\n        this.#isCustom = true;\n        return eventTemplate.cloneNode(true);\n      }\n    }\n    return new _ids_calendar_ids_calendar_event__WEBPACK_IMPORTED_MODULE_16__[\"default\"]();\n  }\n  /**\n   * Selects the Month View's current day from a stringified date\n   * @param {string} val string representation of a date\n   */\n  selectDayFromValue(val) {\n    let usableValue = val;\n    if (this.useRange && this.rangeSettings.separator && this.rangeSettings.end) {\n      usableValue = (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_9__.removeDateRange)(val, this.rangeSettings.separator);\n    }\n    const { month, day, year } = (0,_ids_date_picker_ids_date_picker_common__WEBPACK_IMPORTED_MODULE_17__.getDateValuesFromString)(usableValue);\n    this.day = day;\n    this.month = month;\n    this.year = year;\n    if (this.useRange) {\n      this.selectDay();\n      this.#renderRangeSelection();\n    } else {\n      this.#clearRangeClasses();\n      this.selectDay(year, month, day);\n    }\n  }\n  /**\n   * Function that fires as the day cell is rendered.\n   * @returns {void}\n   */\n  get onDayRender() {\n    return this.state.onDayRender;\n  }\n  set onDayRender(func) {\n    this.state.onDayRender = func;\n  }\n  /**\n   * Calculates the event Y_OFFSET value to set the event pill top position\n   * @param {IdsCalendarEvent} event IdsCalendarEvent\n   * @returns {number} yOffset\n   */\n  generateYOffset(event) {\n    return event.order * 16 + _ids_month_view_common__WEBPACK_IMPORTED_MODULE_18__.BASE_Y_OFFSET;\n  }\n  /**\n   * Checks if the event pills exceed the MAX_EVENT_COUNT in a day cell\n   * @param {IdsCalendarEvent} event IdsCalendarEvent\n   * @returns {boolean} isEventOverflowing\n   */\n  isEventOverflowing(event) {\n    return event.order > _ids_month_view_common__WEBPACK_IMPORTED_MODULE_18__.MAX_EVENT_COUNT - 1;\n  }\n};\nIdsMonthView = __decorateClass([\n  (0,_core_ids_decorators__WEBPACK_IMPORTED_MODULE_0__.customElement)(\"ids-month-view\"),\n  (0,_core_ids_decorators__WEBPACK_IMPORTED_MODULE_0__.scss)(_ids_month_view_scss__WEBPACK_IMPORTED_MODULE_15__[\"default\"])\n], IdsMonthView);\nvar ids_month_view_default = IdsMonthView;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9pZHMtbW9udGgtdmlldy9pZHMtbW9udGgtdmlldy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW9DO0FBQ1Q7QUFFQTtBQUNPO0FBQ1I7QUFDQztBQUNRO0FBQ1o7QUFDZ0I7QUFpQmhDO0FBS0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdZO0FBQ3dEO0FBQ25DO0FBY2pDO0FBZ0JQLE1BQU0sT0FBTywyRUFBMEI7QUFBMUIsRUFDWCxxR0FBcUI7QUFBckIsSUFDRSx1R0FBc0I7QUFBdEIsTUFDRSxtRkFBYTtBQUFiLFFBQ0UscUZBQWM7QUFBZCxVQUNFLHFGQUFjO0FBQWQsWUFDRSx5REFBVTtBQUFWLFVBQ0Y7QUFBQSxRQUNGO0FBQUEsTUFDRjtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQ0Y7QUFlQSxJQUFNLGVBQU4sY0FBMkIsS0FBMEM7QUFBQSxFQUNuRSxjQUFjO0FBQ1osVUFBTTtBQUFBLEVBQ1I7QUFBQSxFQUVBLG9CQUFvQjtBQUNsQixVQUFNLGtCQUFrQjtBQUN4QixTQUFLLHFCQUFxQjtBQUMxQixTQUFLLHlCQUF5QjtBQUM5QixTQUFLLGFBQWE7QUFBQSxFQUNwQjtBQUFBO0FBQUEsRUFHQSxZQUFZO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1aLFdBQVcsYUFBNEI7QUFDckMsV0FBTztBQUFBLE1BQ0wsR0FBRyxNQUFNO0FBQUEsTUFDVCxvRUFBa0I7QUFBUCxNQUNYLHFFQUFtQjtBQUFSLE1BQ1gsOEVBQTRCO0FBQWpCLE1BQ1gsMEVBQXdCO0FBQWIsTUFDWCxnRkFBOEI7QUFBbkIsTUFDWCwrRUFBNkI7QUFBbEIsTUFDWCwrRUFBNkI7QUFBbEIsTUFDWCx1RUFBcUI7QUFBVixNQUNYLHVFQUFxQjtBQUFWLElBQ2I7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLFdBQW1CO0FBQ2pCLFdBQU8sOEJBQThCLEtBQUssVUFBVSxlQUFl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QSxFQUM5QiwwREFBSSxDQUFDLDZEQUFNO0FBQUEsR0FDTjtBQWdqRE4sSUFBTyx5QkFBUSIsInNvdXJjZXMiOlsid2VicGFjazovL2lkcy1lbnRlcnByaXNlLXdjLy4vc3JjL2NvbXBvbmVudHMvaWRzLW1vbnRoLXZpZXcvaWRzLW1vbnRoLXZpZXcudHM/MjU3NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjdXN0b21FbGVtZW50LCBzY3NzIH0gZnJvbSAnLi4vLi4vY29yZS9pZHMtZGVjb3JhdG9ycyc7XG5pbXBvcnQgeyBhdHRyaWJ1dGVzIH0gZnJvbSAnLi4vLi4vY29yZS9pZHMtYXR0cmlidXRlcyc7XG5cbmltcG9ydCBJZHNFdmVudHNNaXhpbiBmcm9tICcuLi8uLi9taXhpbnMvaWRzLWV2ZW50cy1taXhpbi9pZHMtZXZlbnRzLW1peGluJztcbmltcG9ydCBJZHNEYXRlQXR0cmlidXRlTWl4aW4gZnJvbSAnLi4vLi4vbWl4aW5zL2lkcy1kYXRlLWF0dHJpYnV0ZS1taXhpbi9pZHMtZGF0ZS1hdHRyaWJ1dGUtbWl4aW4nO1xuaW1wb3J0IElkc1RoZW1lTWl4aW4gZnJvbSAnLi4vLi4vbWl4aW5zL2lkcy10aGVtZS1taXhpbi9pZHMtdGhlbWUtbWl4aW4nO1xuaW1wb3J0IElkc0xvY2FsZU1peGluIGZyb20gJy4uLy4uL21peGlucy9pZHMtbG9jYWxlLW1peGluL2lkcy1sb2NhbGUtbWl4aW4nO1xuaW1wb3J0IElkc0NhbGVuZGFyRXZlbnRzTWl4aW4gZnJvbSAnLi4vLi4vbWl4aW5zL2lkcy1jYWxlbmRhci1ldmVudHMtbWl4aW4vaWRzLWNhbGVuZGFyLWV2ZW50cy1taXhpbic7XG5pbXBvcnQgSWRzRWxlbWVudCBmcm9tICcuLi8uLi9jb3JlL2lkcy1lbGVtZW50JztcbmltcG9ydCBJZHNNb250aFZpZXdBdHRyaWJ1dGVNaXhpbiBmcm9tICcuL2lkcy1tb250aC12aWV3LWF0dHJpYnV0ZS1taXhpbic7XG5cbi8vIEltcG9ydCBVdGlsc1xuaW1wb3J0IHtcbiAgYWRkRGF0ZSxcbiAgZGF5c0RpZmYsXG4gIGRheXNJbk1vbnRoLFxuICBmaXJzdERheU9mTW9udGhEYXRlLFxuICBmaXJzdERheU9mV2Vla0RhdGUsXG4gIGdyZWdvcmlhblRvVW1hbHF1cmEsXG4gIGlzVmFsaWREYXRlLFxuICBsYXN0RGF5T2ZNb250aERhdGUsXG4gIHN1YnRyYWN0RGF0ZSxcbiAgdW1hbHF1cmFUb0dyZWdvcmlhbixcbiAgd2Vla3NJbk1vbnRoLFxuICB3ZWVrc0luUmFuZ2UsXG4gIHJlbW92ZURhdGVSYW5nZVxufSBmcm9tICcuLi8uLi91dGlscy9pZHMtZGF0ZS11dGlscy9pZHMtZGF0ZS11dGlscyc7XG5pbXBvcnQge1xuICBzdHJpbmdUb0Jvb2wsXG4gIHN0cmluZ1RvTnVtYmVyLFxuICBidWlsZENsYXNzQXR0cmliLFxufSBmcm9tICcuLi8uLi91dGlscy9pZHMtc3RyaW5nLXV0aWxzL2lkcy1zdHJpbmctdXRpbHMnO1xuXG4vLyBTdXBwb3J0aW5nIGNvbXBvbmVudHNcbmltcG9ydCAnLi4vaWRzLWJ1dHRvbi9pZHMtYnV0dG9uJztcbmltcG9ydCAnLi4vaWRzLWljb24vaWRzLWljb24nO1xuaW1wb3J0ICcuLi9pZHMtdGV4dC9pZHMtdGV4dCc7XG5pbXBvcnQgJy4uL2lkcy10cmlnZ2VyLWZpZWxkL2lkcy10cmlnZ2VyLWJ1dHRvbic7XG5cbi8vIEltcG9ydCBTdHlsZXNcbmltcG9ydCBzdHlsZXMgZnJvbSAnLi9pZHMtbW9udGgtdmlldy5zY3NzJztcbmltcG9ydCBJZHNDYWxlbmRhckV2ZW50LCB7IENhbGVuZGFyRXZlbnREYXRhLCBDYWxlbmRhckV2ZW50VHlwZURhdGEgfSBmcm9tICcuLi9pZHMtY2FsZW5kYXIvaWRzLWNhbGVuZGFyLWV2ZW50JztcbmltcG9ydCB7IGdldERhdGVWYWx1ZXNGcm9tU3RyaW5nIH0gZnJvbSAnLi4vaWRzLWRhdGUtcGlja2VyL2lkcy1kYXRlLXBpY2tlci1jb21tb24nO1xuXG5pbXBvcnQgdHlwZSB7XG4gIElkc1JhbmdlU2V0dGluZ3MsXG4gIElkc0Rpc2FibGVTZXR0aW5ncyxcbiAgSWRzTGVnZW5kU2V0dGluZ3MsXG59IGZyb20gJy4vaWRzLW1vbnRoLXZpZXctY29tbW9uJztcbmltcG9ydCB7XG4gIEJBU0VfWV9PRkZTRVQsXG4gIE1JTl9NT05USCxcbiAgTUFYX01PTlRILFxuICBNQVhfRVZFTlRfQ09VTlQsXG4gIFdFRUtfTEVOR1RILFxuICBJZHNSYW5nZVNldHRpbmdzSW50ZXJmYWNlXG59IGZyb20gJy4vaWRzLW1vbnRoLXZpZXctY29tbW9uJztcblxuZXhwb3J0IHR5cGUgSWRzRGF5c2VsZWN0ZWRFdmVudCA9IEN1c3RvbUV2ZW50SW5pdCAmIHtcbiAgZGV0YWlsOiB7XG4gICAgZWxlbTogSWRzTW9udGhWaWV3LFxuICAgIGRhdGU6IERhdGUsXG4gICAgdXNlUmFuZ2U6IGJvb2xlYW4sXG4gICAgcmFuZ2VTdGFydDogRGF0ZSB8IG51bGwsXG4gICAgcmFuZ2VFbmQ6IERhdGUgfCBudWxsLFxuICAgIGV2ZW50cz86IENhbGVuZGFyRXZlbnREYXRhW11cbiAgfSxcbiAgYnViYmxlcz86IGJvb2xlYW47XG4gIGNhbmNlbGFibGU/OiBib29sZWFuO1xuICBjb21wb3NlZD86IGJvb2xlYW47XG59O1xuXG5jb25zdCBCYXNlID0gSWRzTW9udGhWaWV3QXR0cmlidXRlTWl4aW4oXG4gIElkc0RhdGVBdHRyaWJ1dGVNaXhpbihcbiAgICBJZHNDYWxlbmRhckV2ZW50c01peGluKFxuICAgICAgSWRzVGhlbWVNaXhpbihcbiAgICAgICAgSWRzTG9jYWxlTWl4aW4oXG4gICAgICAgICAgSWRzRXZlbnRzTWl4aW4oXG4gICAgICAgICAgICBJZHNFbGVtZW50XG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICApXG4pO1xuXG4vKipcbiAqIElEUyBNb250aCBWaWV3IENvbXBvbmVudFxuICogQHR5cGUge0lkc01vbnRoVmlld31cbiAqIEBpbmhlcml0cyBJZHNFbGVtZW50XG4gKiBAbWl4ZXMgSWRzTG9jYWxlTWl4aW5cbiAqIEBtaXhlcyBJZHNFdmVudHNNaXhpblxuICogQG1peGVzIElkc1RoZW1lTWl4aW5cbiAqIEBtaXhlcyBJZHNDYWxlbmRhckV2ZW50c01peGluXG4gKiBAcGFydCBjb250YWluZXIgLSB0aGUgY29udGFpbmVyIG9mIHRoZSBjb21wb25lbnRcbiAqIEBwYXJ0IHRhYmxlLWNvbnRhaW5lciAtIHRoZSBjb250YWluZXIgb2YgdGhlIGNhbGVuZGFyIHRhYmxlXG4gKi9cbkBjdXN0b21FbGVtZW50KCdpZHMtbW9udGgtdmlldycpXG5Ac2NzcyhzdHlsZXMpXG5jbGFzcyBJZHNNb250aFZpZXcgZXh0ZW5kcyBCYXNlIGltcGxlbWVudHMgSWRzUmFuZ2VTZXR0aW5nc0ludGVyZmFjZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHRoaXMuI2F0dGFjaEV2ZW50SGFuZGxlcnMoKTtcbiAgICB0aGlzLiNhdHRhY2hLZXlib2FyZExpc3RlbmVycygpO1xuICAgIHRoaXMuI3JlbmRlck1vbnRoKCk7XG4gIH1cblxuICAvLyBGbGFnIHZhbHVlIGZvciBjdXN0b20gY2FsZW5kYXIgZXZlbnRcbiAgI2lzQ3VzdG9tID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgYXR0cmlidXRlcyB3ZSBoYW5kbGUgYXMgZ2V0dGVycy9zZXR0ZXJzXG4gICAqIEByZXR1cm5zIHtBcnJheX0gVGhlIGF0dHJpYnV0ZXMgaW4gYW4gYXJyYXlcbiAgICovXG4gIHN0YXRpYyBnZXQgYXR0cmlidXRlcygpOiBBcnJheTxzdHJpbmc+IHtcbiAgICByZXR1cm4gW1xuICAgICAgLi4uc3VwZXIuYXR0cmlidXRlcyxcbiAgICAgIGF0dHJpYnV0ZXMuQ09NUEFDVCxcbiAgICAgIGF0dHJpYnV0ZXMuRU5EX0RBVEUsXG4gICAgICBhdHRyaWJ1dGVzLkZJUlNUX0RBWV9PRl9XRUVLLFxuICAgICAgYXR0cmlidXRlcy5JU19EQVRFUElDS0VSLFxuICAgICAgYXR0cmlidXRlcy5TSE9XX1BJQ0tMSVNUX01PTlRILFxuICAgICAgYXR0cmlidXRlcy5TSE9XX1BJQ0tMSVNUX1dFRUssXG4gICAgICBhdHRyaWJ1dGVzLlNIT1dfUElDS0xJU1RfWUVBUixcbiAgICAgIGF0dHJpYnV0ZXMuU0hPV19UT0RBWSxcbiAgICAgIGF0dHJpYnV0ZXMuU1RBUlRfREFURSxcbiAgICBdO1xuICB9XG5cbiAgLyoqXG4gICAqIElubmVyIHRlbXBsYXRlIGNvbnRlbnRzXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSB0ZW1wbGF0ZVxuICAgKi9cbiAgdGVtcGxhdGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYDxkaXYgY2xhc3M9XCJpZHMtbW9udGgtdmlldyAke3RoaXMuY29tcGFjdCA/ICdpcy1jb21wYWN0JyA6ICdpcy1mdWxsc2l6ZSd9JHt0aGlzLmlzRGF0ZVBpY2tlciA/ICcgaXMtZGF0ZS1waWNrZXInIDogJyd9XCIgcGFydD1cImNvbnRhaW5lclwiPlxuICAgICAgPGRpdiBjbGFzcz1cIm1vbnRoLXZpZXctY29udGFpbmVyXCIgcGFydD1cInRhYmxlLWNvbnRhaW5lclwiPlxuICAgICAgICA8dGFibGUgY2xhc3M9XCJtb250aC12aWV3LXRhYmxlXCIgYXJpYS1sYWJlbD1cIiR7dGhpcy5sb2NhbGVBUEk/LnRyYW5zbGF0ZSgnQ2FsZW5kYXInKX1cIiByb2xlPVwiYXBwbGljYXRpb25cIj5cbiAgICAgICAgICA8dGhlYWQgY2xhc3M9XCJtb250aC12aWV3LXRhYmxlLWhlYWRlclwiPlxuICAgICAgICAgICAgPHRyPjwvdHI+XG4gICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICA8dGJvZHk+PC90Ym9keT5cbiAgICAgICAgPC90YWJsZT5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PmA7XG4gIH1cblxuICAvKipcbiAgICogRXN0YWJsaXNoIGludGVybmFsIGV2ZW50IGhhbmRsZXJzXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgI2F0dGFjaEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgLy8gRGF5IHNlbGVjdCBldmVudFxuICAgIHRoaXMub2ZmRXZlbnQoJ2NsaWNrLm1vbnRoLXZpZXctZGF5c2VsZWN0Jyk7XG4gICAgdGhpcy5vbkV2ZW50KCdjbGljay5tb250aC12aWV3LWRheXNlbGVjdCcsIHRoaXMuY29udGFpbmVyPy5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLCAoZTogTW91c2VFdmVudCkgPT4ge1xuICAgICAgdGhpcy4jZGF5U2VsZWN0Q2xpY2soKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCd0ZCcpKTtcbiAgICB9KTtcblxuICAgIC8vIFJhbmdlIHNlbGVjdGlvbiBldmVudFxuICAgIHRoaXMub2ZmRXZlbnQoJ21vdXNlb3Zlci5tb250aC12aWV3LXJhbmdlJyk7XG4gICAgdGhpcy5vbkV2ZW50KCdtb3VzZW92ZXIubW9udGgtdmlldy1yYW5nZScsIHRoaXMuY29udGFpbmVyPy5xdWVyeVNlbGVjdG9yKCd0Ym9keScpLCAoZTogTW91c2VFdmVudCkgPT4ge1xuICAgICAgY29uc3QgZWxlbWVudCA9IChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xvc2VzdCgndGQnKTtcblxuICAgICAgaWYgKCFlbGVtZW50KSByZXR1cm47XG5cbiAgICAgIGNvbnN0IHsgeWVhciwgbW9udGgsIGRheSB9ID0gZWxlbWVudC5kYXRhc2V0O1xuXG4gICAgICB0aGlzLiNyYW5nZVByb3BhZ2F0aW9uKHllYXIsIG1vbnRoLCBkYXkpO1xuICAgIH0pO1xuXG4gICAgLy8gQ2xlYXIgcmFuZ2Ugc2VsZWN0aW9uIHdoZW4gaG92ZXIgb3V0c2lkZVxuICAgIHRoaXMub2ZmRXZlbnQoJ21vdXNlbGVhdmUubW9udGgtdmlldy1yYW5nZScpO1xuICAgIHRoaXMub25FdmVudCgnbW91c2VsZWF2ZS5tb250aC12aWV3LXJhbmdlJywgdGhpcy5jb250YWluZXI/LnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5JyksICgpID0+IHtcbiAgICAgIHRoaXMuY29udGFpbmVyPy5xdWVyeVNlbGVjdG9yQWxsKCd0ZCcpXG4gICAgICAgIC5mb3JFYWNoKChpdGVtOiBIVE1MRWxlbWVudCkgPT4gaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdyYW5nZS1uZXh0JywgJ3JhbmdlLXByZXYnKSk7XG4gICAgfSk7XG5cbiAgICAvLyBFdmVudHMgT3ZlcmZsb3cgY2xpY2sgZXZlbnRcbiAgICB0aGlzLm9uRXZlbnQoJ2NsaWNrLm92ZXJmbG93JywgdGhpcy5jb250YWluZXIsIChldnQ6IGFueSkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQudGFnTmFtZSA9PT0gJ0lEUy1URVhUJyAmJiBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZXZlbnRzLW92ZXJmbG93JykpIHtcbiAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZXZ0LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZGF0ZScpKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyRXZlbnQoJ292ZXJmbG93LWNsaWNrJywgdGhpcywge1xuICAgICAgICAgIGRldGFpbDogeyBkYXRlIH0sXG4gICAgICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgICAgIGNvbXBvc2VkOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBvbkxhbmd1YWdlQ2hhbmdlID0gKCkgPT4ge1xuICAgIHRoaXMuc2V0RGlyZWN0aW9uKCk7XG4gICAgdGhpcy4jcmVuZGVyTW9udGgoKTtcbiAgfTtcblxuICBvbkxvY2FsZUNoYW5nZSA9ICgpID0+IHtcbiAgICB0aGlzLnNldERpcmVjdGlvbigpO1xuICAgIHRoaXMuI3JlbmRlck1vbnRoKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEVzdGFibGlzaCBJbnRlcm5hbCBLZXlib2FyZCBzaG9ydGN1dHNcbiAgICogQHJldHVybnMge29iamVjdH0gdGhpcyBjbGFzcy1pbnN0YW5jZSBvYmplY3QgZm9yIGNoYWluaW5nXG4gICAqL1xuICAjYXR0YWNoS2V5Ym9hcmRMaXN0ZW5lcnMoKTogYW55IHtcbiAgICAvLyBHcm91cCBrZXkgY29kZXMgdG8gc3RvcCBrZXlib2FyZCBldmVudCwgdHJpZ2dlciBkYXlzZWxlY3RlZCBldmVudCBhbmQgZm9jdXMgYWN0aXZlIGRheVxuICAgIGNvbnN0IGtleXMgPSBbMzMsIDM0LCAzNSwgMzYsIDM3LCAzOCwgMzksIDQwLCAxODcsIDE4OV07XG5cbiAgICAvLyBSYW5nZSBjYWxlbmRhciBkb2Vzbid0IGhhdmUga2V5Ym9hcmQgc2hvcnRjdXRzXG4gICAgaWYgKHRoaXMuI2lzRGlzcGxheVJhbmdlKCkpIHtcbiAgICAgIHRoaXMub2ZmRXZlbnQoJ2tleWRvd24ubW9udGgtdmlldy1rZXlib2FyZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9mZkV2ZW50KCdrZXlkb3duLm1vbnRoLXZpZXcta2V5Ym9hcmQnKTtcbiAgICAgIHRoaXMub25FdmVudCgna2V5ZG93bi5tb250aC12aWV3LWtleWJvYXJkJywgdGhpcy5jb250YWluZXI/LnF1ZXJ5U2VsZWN0b3IoJy5tb250aC12aWV3LXRhYmxlJyksIChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGtleSA9IGUua2V5Q29kZTtcblxuICAgICAgICBpZiAoa2V5cy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdoZW4gcmFuZ2Ugc2VsZWN0aW9uIGlzIHN0YXJ0ZWRcbiAgICAgICAgaWYgKHRoaXMudXNlUmFuZ2UpIHtcbiAgICAgICAgICBpZiAodGhpcy5yYW5nZVNldHRpbmdzLnN0YXJ0KSB7XG4gICAgICAgICAgICAvLyBFc2NhcGUgcmVzZXRzIHJhbmdlIHNlbGVjdGlvblxuICAgICAgICAgICAgaWYgKGtleSA9PT0gMjcpIHtcbiAgICAgICAgICAgICAgdGhpcy5yYW5nZVNldHRpbmdzLnN0YXJ0ID0gbnVsbDtcbiAgICAgICAgICAgICAgdGhpcy4jY2xlYXJSYW5nZUNsYXNzZXMoKTtcbiAgICAgICAgICAgICAgdGhpcy5zZWxlY3REYXkodGhpcy55ZWFyLCB0aGlzLm1vbnRoLCB0aGlzLmRheSk7XG4gICAgICAgICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQXJyb3cgVXAgaW5jbHVkZXMgcmFuZ2Ugc3RhcnQgYW5kIHNhbWUgZGF5IHByZXZpb3VzIHdlZWtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IDM4KSB7XG4gICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGF0ZSgncHJldmlvdXMtd2VlaycsIHRydWUpO1xuICAgICAgICAgICAgICB0aGlzLiNyYW5nZVByb3BhZ2F0aW9uKHRoaXMueWVhciwgdGhpcy5tb250aCwgdGhpcy5kYXkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBcnJvdyBEb3duIGluY2x1ZGVzIHJhbmdlIHN0YXJ0IGFuZCBzYW1lIGRheSBuZXh0IHdlZWtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IDQwKSB7XG4gICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGF0ZSgnbmV4dC13ZWVrJywgdHJ1ZSk7XG4gICAgICAgICAgICAgIHRoaXMuI3JhbmdlUHJvcGFnYXRpb24odGhpcy55ZWFyLCB0aGlzLm1vbnRoLCB0aGlzLmRheSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFycm93IFJpZ2h0IG9yICsga2V5IGluY2x1ZGVzIG5leHQgZGF5IHRvIHJhbmdlIHNlbGVjdGlvblxuICAgICAgICAgICAgaWYgKGtleSA9PT0gMzkgfHwgKGtleSA9PT0gMTg3ICYmIGUuc2hpZnRLZXkpKSB7XG4gICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGF0ZSgnbmV4dC1kYXknLCB0cnVlKTtcbiAgICAgICAgICAgICAgdGhpcy4jcmFuZ2VQcm9wYWdhdGlvbih0aGlzLnllYXIsIHRoaXMubW9udGgsIHRoaXMuZGF5KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQXJyb3cgTGVmdCBvciAtIGtleSBpbmNsdWRlcyBwcmV2aW91cyBkYXkgdG8gcmFuZ2Ugc2VsZWN0aW9uXG4gICAgICAgICAgICBpZiAoa2V5ID09PSAzNyB8fCAoa2V5ID09PSAxODkgJiYgIWUuc2hpZnRLZXkpKSB7XG4gICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGF0ZSgncHJldmlvdXMtZGF5JywgdHJ1ZSk7XG4gICAgICAgICAgICAgIHRoaXMuI3JhbmdlUHJvcGFnYXRpb24odGhpcy55ZWFyLCB0aGlzLm1vbnRoLCB0aGlzLmRheSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEVudGVyIG9yIHNwYWNlIGtleSBjb21wbGV0ZXMgcmFuZ2Ugc2VsZWN0aW9uIGlmIHN0YXJ0ZWRcbiAgICAgICAgICAgIGlmIChrZXkgPT09IDEzIHx8IGtleSA9PT0gMzIpIHtcbiAgICAgICAgICAgICAgdGhpcy4jc2V0UmFuZ2VTZWxlY3Rpb24odGhpcy55ZWFyLCB0aGlzLm1vbnRoLCB0aGlzLmRheSk7XG4gICAgICAgICAgICAgIHRoaXMuI3RyaWdnZXJTZWxlY3RlZEV2ZW50KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuZm9jdXMoKTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEVudGVyIG9yIHNwYWNlIGtleSBzdGFydHMgcmFuZ2Ugc2VsZWN0aW9uXG4gICAgICAgICAgaWYgKGtleSA9PT0gMTMgfHwga2V5ID09PSAzMikge1xuICAgICAgICAgICAgaWYgKHRoaXMucmFuZ2VTZXR0aW5ncy5zZWxlY3RXZWVrKSB7XG4gICAgICAgICAgICAgIHRoaXMuI3JhbmdlU2VsZWN0V2Vlayh0aGlzLnllYXIsIHRoaXMubW9udGgsIHRoaXMuZGF5KTtcbiAgICAgICAgICAgICAgdGhpcy4jdHJpZ2dlclNlbGVjdGVkRXZlbnQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuI3NldFJhbmdlU2VsZWN0aW9uKHRoaXMueWVhciwgdGhpcy5tb250aCwgdGhpcy5kYXkpO1xuICAgICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQXJyb3cgVXAgc2VsZWN0cyBzYW1lIGRheSBwcmV2aW91cyB3ZWVrXG4gICAgICAgIGlmIChrZXkgPT09IDM4KSB7XG4gICAgICAgICAgdGhpcy5jaGFuZ2VEYXRlKCdwcmV2aW91cy13ZWVrJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBcnJvdyBEb3duIHNlbGVjdHMgc2FtZSBkYXkgbmV4dCB3ZWVrXG4gICAgICAgIGlmIChrZXkgPT09IDQwKSB7XG4gICAgICAgICAgdGhpcy5jaGFuZ2VEYXRlKCduZXh0LXdlZWsnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFycm93IFJpZ2h0IG9yICsga2V5IHNlbGVjdHMgbmV4dCBkYXlcbiAgICAgICAgaWYgKGtleSA9PT0gMzkgfHwgKGtleSA9PT0gMTg3ICYmIGUuc2hpZnRLZXkpKSB7XG4gICAgICAgICAgdGhpcy5jaGFuZ2VEYXRlKCduZXh0LWRheScpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQXJyb3cgTGVmdCBvciAtIGtleSBzZWxlY3RzIHByZXZpb3VzIGRheVxuICAgICAgICBpZiAoa2V5ID09PSAzNyB8fCAoa2V5ID09PSAxODkgJiYgIWUuc2hpZnRLZXkpKSB7XG4gICAgICAgICAgdGhpcy5jaGFuZ2VEYXRlKCdwcmV2aW91cy1kYXknKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFBhZ2UgVXAgc2VsZWN0cyBzYW1lIGRheSBwcmV2aW91cyBtb250aFxuICAgICAgICBpZiAoa2V5ID09PSAzMyAmJiAhZS5hbHRLZXkgJiYgIShlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSkge1xuICAgICAgICAgIHRoaXMuY2hhbmdlRGF0ZSgncHJldmlvdXMtbW9udGgnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFBhZ2UgRG93biBzZWxlY3RzIHNhbWUgZGF5IG5leHQgbW9udGhcbiAgICAgICAgaWYgKGtleSA9PT0gMzQgJiYgIWUuYWx0S2V5ICYmICEoZS5jdHJsS2V5IHx8IGUubWV0YUtleSkpIHtcbiAgICAgICAgICB0aGlzLmNoYW5nZURhdGUoJ25leHQtbW9udGgnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGN0cmwgKyBQYWdlIFVwIHNlbGVjdHMgc2FtZSBkYXkgcHJldmlvdXMgeWVhclxuICAgICAgICBpZiAoa2V5ID09PSAzMyAmJiAoZS5jdHJsS2V5IHx8IGUubWV0YUtleSkpIHtcbiAgICAgICAgICB0aGlzLmNoYW5nZURhdGUoJ3ByZXZpb3VzLXllYXInKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGN0cmwgKyBQYWdlIERvd24gc2VsZWN0cyBzYW1lIGRheSBuZXh0IHllYXJcbiAgICAgICAgaWYgKGtleSA9PT0gMzQgJiYgKGUuY3RybEtleSB8fCBlLm1ldGFLZXkpKSB7XG4gICAgICAgICAgdGhpcy5jaGFuZ2VEYXRlKCduZXh0LXllYXInKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEhvbWUgbW92ZXMgdG8gc3RhcnQgb2YgdGhlIG1vbnRoXG4gICAgICAgIGlmIChrZXkgPT09IDM2KSB7XG4gICAgICAgICAgdGhpcy5jaGFuZ2VEYXRlKCdzdGFydC1tb250aCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRW5kIG1vdmVzIHRvIGVuZCBvZiB0aGUgbW9udGhcbiAgICAgICAgaWYgKGtleSA9PT0gMzUpIHtcbiAgICAgICAgICB0aGlzLmNoYW5nZURhdGUoJ2VuZC1tb250aCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gJ3QnIHNlbGVjdHMgdG9kYXlcbiAgICAgICAgaWYgKGtleSA9PT0gODQpIHtcbiAgICAgICAgICB0aGlzLmNoYW5nZURhdGUoJ3RvZGF5Jyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQga2V5cyBpbmNsdWRpbmcgRW50ZXIgb3IgU3BhY2UgdHJpZ2dlcnMgZGF5c2VsZWN0ZWQgZXZlbnQgaW4gcmVndWxhciBjYWxlbmRhclxuICAgICAgICBpZiAoKChrZXlzLmluY2x1ZGVzKGtleSkgfHwga2V5ID09PSA4NCkgJiYgIXRoaXMuaXNEYXRlUGlja2VyKSB8fCAoa2V5ID09PSAzMiB8fCBrZXkgPT09IDEzKSkge1xuICAgICAgICAgIHRoaXMuI3RyaWdnZXJTZWxlY3RlZEV2ZW50KCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoa2V5cy5pbmNsdWRlcyhrZXkpIHx8IGtleSA9PT0gODQpIHtcbiAgICAgICAgICBpZiAodGhpcy5pc0RhdGVQaWNrZXIpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0RGF5KHRoaXMueWVhciwgdGhpcy5tb250aCwgdGhpcy5kYXkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZC9yZW1vdmUgbGVnZW5kIEhUTUwgdG8gdGhlIGNvbnRhaW5lclxuICAgKi9cbiAgI3JlbmRlckxlZ2VuZCgpOiB2b2lkIHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICh0aGlzLmxlZ2VuZCAmJiB0aGlzLmxlZ2VuZC5sZW5ndGggPiAwKSA/IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJtb250aC12aWV3LWxlZ2VuZFwiPlxuICAgICAgICAke3RoaXMubGVnZW5kLm1hcCgoaXRlbTogYW55KSA9PiBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cIm1vbnRoLXZpZXctbGVnZW5kLWl0ZW0gJHtpdGVtLmNzc0NsYXNzIHx8ICcnfVwiPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtb250aC12aWV3LWxlZ2VuZC1zd2F0Y2hcIiBkYXRhLWNvbG9yPVwiJHtpdGVtLmNvbG9yfVwiPjwvc3Bhbj5cbiAgICAgICAgICAgIDxpZHMtdGV4dCBjbGFzcz1cIm1vbnRoLXZpZXctbGVnZW5kLXRleHRcIiAke2l0ZW0uZm9udFNpemUgPyBgZm9udC1zaXplPVwiJHtpdGVtLmZvbnRTaXplfVwiYCA6ICcnfT4ke2l0ZW0ubmFtZX08L2lkcy10ZXh0PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgKS5qb2luKCcnKX1cbiAgICAgIDwvZGl2PlxuICAgIGAgOiAnJztcblxuICAgIC8vIENsZWFyL2FkZCBIVE1MXG4gICAgdGhpcy5jb250YWluZXI/LnF1ZXJ5U2VsZWN0b3IoJy5tb250aC12aWV3LWxlZ2VuZCcpPy5yZW1vdmUoKTtcbiAgICB0aGlzLmNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcignLm1vbnRoLXZpZXctY29udGFpbmVyJyk/Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgdGVtcGxhdGUpO1xuXG4gICAgdGhpcy4jY29sb3JUb1ZhcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoYW5nZSBtb250aC95ZWFyL2RheSBieSBldmVudCB0eXBlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIG9mIGV2ZW50IHRvIGJlIGNhbGxlZFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGxpbWl0TW9udGggZGF0ZSBjaGFuZ2luZyBpcyBsaW1pdGVkIG9ubHkgdG8gdGhlIGN1cnJlbnQgbW9udGhcbiAgICovXG4gIGNoYW5nZURhdGUodHlwZTogc3RyaW5nLCBsaW1pdE1vbnRoID0gZmFsc2UpOiB2b2lkIHtcbiAgICBpZiAodHlwZSA9PT0gJ25leHQtbW9udGgnKSB7XG4gICAgICBpZiAodGhpcy5sb2NhbGVBUEk/LmlzSXNsYW1pYygpKSB7XG4gICAgICAgIGNvbnN0IHVtYWxxdXJhID0gZ3JlZ29yaWFuVG9VbWFscXVyYSh0aGlzLmFjdGl2ZURhdGUpO1xuICAgICAgICBjb25zdCB5ZWFyID0gdW1hbHF1cmEubW9udGggPT09IE1BWF9NT05USCA/IHVtYWxxdXJhLnllYXIgKyAxIDogdW1hbHF1cmEueWVhcjtcbiAgICAgICAgY29uc3QgbW9udGggPSB1bWFscXVyYS5tb250aCA9PT0gTUFYX01PTlRIID8gTUlOX01PTlRIIDogdW1hbHF1cmEubW9udGggKyAxO1xuICAgICAgICBjb25zdCBncmVnb3JpYW4gPSB1bWFscXVyYVRvR3JlZ29yaWFuKHllYXIsIG1vbnRoLCB1bWFscXVyYS5kYXkgPT09IDMwID8gMSA6IHVtYWxxdXJhLmRheSk7XG5cbiAgICAgICAgdGhpcy5kYXkgPSBncmVnb3JpYW4uZ2V0RGF0ZSgpO1xuICAgICAgICB0aGlzLnllYXIgPSBncmVnb3JpYW4uZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgdGhpcy5tb250aCA9IGdyZWdvcmlhbi5nZXRNb250aCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy55ZWFyID0gdGhpcy5tb250aCA9PT0gTUFYX01PTlRIID8gdGhpcy55ZWFyICsgMSA6IHRoaXMueWVhcjtcbiAgICAgICAgdGhpcy5tb250aCA9IHRoaXMubW9udGggPT09IE1BWF9NT05USCA/IE1JTl9NT05USCA6IHRoaXMubW9udGggKyAxO1xuICAgICAgICB0aGlzLmRheSA9IHRoaXMuI2dldERheUluTW9udGgodGhpcy5kYXkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlID09PSAncHJldmlvdXMtbW9udGgnKSB7XG4gICAgICBpZiAodGhpcy5sb2NhbGVBUEk/LmlzSXNsYW1pYygpKSB7XG4gICAgICAgIGNvbnN0IHVtYWxxdXJhID0gZ3JlZ29yaWFuVG9VbWFscXVyYSh0aGlzLmFjdGl2ZURhdGUpO1xuICAgICAgICBjb25zdCB5ZWFyID0gdW1hbHF1cmEubW9udGggPT09IE1JTl9NT05USCA/IHVtYWxxdXJhLnllYXIgLSAxIDogdW1hbHF1cmEueWVhcjtcbiAgICAgICAgY29uc3QgbW9udGggPSB1bWFscXVyYS5tb250aCA9PT0gTUlOX01PTlRIID8gTUFYX01PTlRIIDogdW1hbHF1cmEubW9udGggLSAxO1xuICAgICAgICBjb25zdCBncmVnb3JpYW4gPSB1bWFscXVyYVRvR3JlZ29yaWFuKHllYXIsIG1vbnRoLCB1bWFscXVyYS5kYXkgPT09IDMwID8gMSA6IHVtYWxxdXJhLmRheSk7XG5cbiAgICAgICAgdGhpcy5kYXkgPSBncmVnb3JpYW4uZ2V0RGF0ZSgpO1xuICAgICAgICB0aGlzLnllYXIgPSBncmVnb3JpYW4uZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgdGhpcy5tb250aCA9IGdyZWdvcmlhbi5nZXRNb250aCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy55ZWFyID0gdGhpcy5tb250aCA9PT0gTUlOX01PTlRIID8gdGhpcy55ZWFyIC0gMSA6IHRoaXMueWVhcjtcbiAgICAgICAgdGhpcy5tb250aCA9IHRoaXMubW9udGggPT09IE1JTl9NT05USCA/IE1BWF9NT05USCA6IHRoaXMubW9udGggLSAxO1xuICAgICAgICB0aGlzLmRheSA9IHRoaXMuI2dldERheUluTW9udGgodGhpcy5kYXkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlID09PSAnbmV4dC1kYXknKSB7XG4gICAgICBjb25zdCBsYXN0RGF5T2ZNb250aCA9IGxhc3REYXlPZk1vbnRoRGF0ZSh0aGlzLnllYXIsIHRoaXMubW9udGgsIHRoaXMuZGF5LCB0aGlzLmxvY2FsZUFQST8uaXNJc2xhbWljKCkpO1xuXG4gICAgICBpZiAobGFzdERheU9mTW9udGguZ2V0RGF0ZSgpID09PSB0aGlzLmRheSAmJiBsaW1pdE1vbnRoKSByZXR1cm47XG5cbiAgICAgIGlmICh0aGlzLmxvY2FsZUFQST8uaXNJc2xhbWljKCkpIHtcbiAgICAgICAgY29uc3QgbmV4dERhdGUgPSBhZGREYXRlKHRoaXMuYWN0aXZlRGF0ZSwgMSwgJ2RheXMnKTtcblxuICAgICAgICB0aGlzLmRheSA9IG5leHREYXRlLmdldERhdGUoKTtcbiAgICAgICAgdGhpcy55ZWFyID0gbmV4dERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgdGhpcy5tb250aCA9IG5leHREYXRlLmdldE1vbnRoKCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBOZXh0IG1vbnRoL3llYXIgd2l0aCByZXJlbmRlclxuICAgICAgaWYgKGxhc3REYXlPZk1vbnRoLmdldERhdGUoKSA9PT0gdGhpcy5kYXkpIHtcbiAgICAgICAgY29uc3QgbmV4dERhdGUgPSBhZGREYXRlKGxhc3REYXlPZk1vbnRoLCAxLCAnZGF5cycpO1xuXG4gICAgICAgIHRoaXMueWVhciA9IG5leHREYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIHRoaXMubW9udGggPSBuZXh0RGF0ZS5nZXRNb250aCgpO1xuICAgICAgICB0aGlzLmRheSA9IG5leHREYXRlLmdldERhdGUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEp1c3QgaW5jcmVhc2UgZGF5IHdpdGhvdXQgcmVyZW5kZXJcbiAgICAgICAgdGhpcy5kYXkgKz0gMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZSA9PT0gJ3ByZXZpb3VzLWRheScpIHtcbiAgICAgIGNvbnN0IGZpcnN0RGF5T2ZNb250aCA9IGZpcnN0RGF5T2ZNb250aERhdGUodGhpcy55ZWFyLCB0aGlzLm1vbnRoLCB0aGlzLmRheSwgdGhpcy5sb2NhbGVBUEk/LmlzSXNsYW1pYygpKTtcblxuICAgICAgaWYgKGZpcnN0RGF5T2ZNb250aC5nZXREYXRlKCkgPT09IHRoaXMuZGF5ICYmIGxpbWl0TW9udGgpIHJldHVybjtcblxuICAgICAgaWYgKHRoaXMubG9jYWxlQVBJPy5pc0lzbGFtaWMoKSkge1xuICAgICAgICBjb25zdCBwcmV2RGF0ZSA9IHN1YnRyYWN0RGF0ZSh0aGlzLmFjdGl2ZURhdGUsIDEsICdkYXlzJyk7XG5cbiAgICAgICAgdGhpcy5kYXkgPSBwcmV2RGF0ZS5nZXREYXRlKCk7XG4gICAgICAgIHRoaXMueWVhciA9IHByZXZEYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIHRoaXMubW9udGggPSBwcmV2RGF0ZS5nZXRNb250aCgpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gUHJldmlvdXMgbW9udGgveWVhciB3aXRoIHJlcmVuZGVyXG4gICAgICBpZiAoZmlyc3REYXlPZk1vbnRoLmdldERhdGUoKSA9PT0gdGhpcy5kYXkpIHtcbiAgICAgICAgY29uc3QgcHJldkRhdGUgPSBzdWJ0cmFjdERhdGUoZmlyc3REYXlPZk1vbnRoLCAxLCAnZGF5cycpO1xuXG4gICAgICAgIHRoaXMueWVhciA9IHByZXZEYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIHRoaXMubW9udGggPSBwcmV2RGF0ZS5nZXRNb250aCgpO1xuICAgICAgICB0aGlzLmRheSA9IHByZXZEYXRlLmdldERhdGUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEp1c3QgZGVjcmVhc2UgZGF5IHdpdGhvdXQgcmVyZW5kZXJcbiAgICAgICAgdGhpcy5kYXkgLT0gMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZSA9PT0gJ25leHQteWVhcicpIHtcbiAgICAgIGlmICh0aGlzLmxvY2FsZUFQST8uaXNJc2xhbWljKCkpIHtcbiAgICAgICAgY29uc3QgdW1hbHF1cmEgPSBncmVnb3JpYW5Ub1VtYWxxdXJhKHRoaXMuYWN0aXZlRGF0ZSk7XG4gICAgICAgIGNvbnN0IGdyZWdvcmlhbiA9IHVtYWxxdXJhVG9HcmVnb3JpYW4oXG4gICAgICAgICAgdW1hbHF1cmEueWVhciArIDEsXG4gICAgICAgICAgdW1hbHF1cmEubW9udGgsXG4gICAgICAgICAgdW1hbHF1cmEuZGF5ID09PSAzMCA/IDEgOiB1bWFscXVyYS5kYXlcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLmRheSA9IGdyZWdvcmlhbi5nZXREYXRlKCk7XG4gICAgICAgIHRoaXMubW9udGggPSBncmVnb3JpYW4uZ2V0TW9udGgoKTtcbiAgICAgICAgdGhpcy55ZWFyID0gZ3JlZ29yaWFuLmdldEZ1bGxZZWFyKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB5ID0gdGhpcy55ZWFyICsgMTtcbiAgICAgICAgdGhpcy55ZWFyID0geTtcbiAgICAgICAgdGhpcy5kYXkgPSB0aGlzLiNnZXREYXlJbk1vbnRoKHRoaXMuZGF5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZSA9PT0gJ3ByZXZpb3VzLXllYXInKSB7XG4gICAgICBpZiAodGhpcy5sb2NhbGVBUEk/LmlzSXNsYW1pYygpKSB7XG4gICAgICAgIGNvbnN0IHVtYWxxdXJhID0gZ3JlZ29yaWFuVG9VbWFscXVyYSh0aGlzLmFjdGl2ZURhdGUpO1xuICAgICAgICBjb25zdCBncmVnb3JpYW4gPSB1bWFscXVyYVRvR3JlZ29yaWFuKFxuICAgICAgICAgIHVtYWxxdXJhLnllYXIgLSAxLFxuICAgICAgICAgIHVtYWxxdXJhLm1vbnRoLFxuICAgICAgICAgIHVtYWxxdXJhLmRheSA9PT0gMzAgPyAxIDogdW1hbHF1cmEuZGF5XG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5kYXkgPSBncmVnb3JpYW4uZ2V0RGF0ZSgpO1xuICAgICAgICB0aGlzLm1vbnRoID0gZ3JlZ29yaWFuLmdldE1vbnRoKCk7XG4gICAgICAgIHRoaXMueWVhciA9IGdyZWdvcmlhbi5nZXRGdWxsWWVhcigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgeSA9IHRoaXMueWVhciAtIDE7XG4gICAgICAgIHRoaXMueWVhciA9IHk7XG4gICAgICAgIHRoaXMuZGF5ID0gdGhpcy4jZ2V0RGF5SW5Nb250aCh0aGlzLmRheSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHR5cGUgPT09ICd0b2RheScpIHtcbiAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG5cbiAgICAgIHRoaXMuZGF5ID0gbm93LmdldERhdGUoKTtcbiAgICAgIHRoaXMueWVhciA9IG5vdy5nZXRGdWxsWWVhcigpO1xuICAgICAgdGhpcy5tb250aCA9IG5vdy5nZXRNb250aCgpO1xuXG4gICAgICBpZiAodGhpcy51c2VSYW5nZSkge1xuICAgICAgICB0aGlzLnJhbmdlU2V0dGluZ3Muc3RhcnQgPSBub3cuZ2V0VGltZSgpO1xuICAgICAgICB0aGlzLnJhbmdlU2V0dGluZ3MuZW5kID0gbm93LmdldFRpbWUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZSA9PT0gJ25leHQtd2VlaycpIHtcbiAgICAgIGNvbnN0IG5leHRXZWVrID0gYWRkRGF0ZSh0aGlzLmFjdGl2ZURhdGUsIFdFRUtfTEVOR1RILCAnZGF5cycpO1xuICAgICAgY29uc3QgbGFzdERheU9mTW9udGggPSBsYXN0RGF5T2ZNb250aERhdGUodGhpcy55ZWFyLCB0aGlzLm1vbnRoLCB0aGlzLmRheSwgdGhpcy5sb2NhbGVBUEk/LmlzSXNsYW1pYygpKTtcblxuICAgICAgaWYgKG5leHRXZWVrID4gbGFzdERheU9mTW9udGggJiYgbGltaXRNb250aCkgcmV0dXJuO1xuXG4gICAgICB0aGlzLmRheSA9IG5leHRXZWVrLmdldERhdGUoKTtcblxuICAgICAgaWYgKG5leHRXZWVrID4gbGFzdERheU9mTW9udGggfHwgdGhpcy5sb2NhbGVBUEk/LmlzSXNsYW1pYygpKSB7XG4gICAgICAgIHRoaXMueWVhciA9IG5leHRXZWVrLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIHRoaXMubW9udGggPSBuZXh0V2Vlay5nZXRNb250aCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlID09PSAncHJldmlvdXMtd2VlaycpIHtcbiAgICAgIGNvbnN0IHByZXZXZWVrID0gc3VidHJhY3REYXRlKHRoaXMuYWN0aXZlRGF0ZSwgV0VFS19MRU5HVEgsICdkYXlzJyk7XG4gICAgICBjb25zdCBmaXJzdERheU9mTW9udGggPSBmaXJzdERheU9mTW9udGhEYXRlKHRoaXMueWVhciwgdGhpcy5tb250aCwgdGhpcy5kYXksIHRoaXMubG9jYWxlQVBJPy5pc0lzbGFtaWMoKSk7XG5cbiAgICAgIGlmIChwcmV2V2VlayA8IGZpcnN0RGF5T2ZNb250aCAmJiBsaW1pdE1vbnRoKSByZXR1cm47XG5cbiAgICAgIHRoaXMuZGF5ID0gcHJldldlZWsuZ2V0RGF0ZSgpO1xuXG4gICAgICBpZiAocHJldldlZWsgPCBmaXJzdERheU9mTW9udGggfHwgdGhpcy5sb2NhbGVBUEk/LmlzSXNsYW1pYygpKSB7XG4gICAgICAgIHRoaXMueWVhciA9IHByZXZXZWVrLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIHRoaXMubW9udGggPSBwcmV2V2Vlay5nZXRNb250aCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlID09PSAnc3RhcnQtbW9udGgnKSB7XG4gICAgICBjb25zdCBmaXJzdERheU9mTW9udGggPSBmaXJzdERheU9mTW9udGhEYXRlKHRoaXMueWVhciwgdGhpcy5tb250aCwgdGhpcy5kYXksIHRoaXMubG9jYWxlQVBJPy5pc0lzbGFtaWMoKSk7XG5cbiAgICAgIHRoaXMuZGF5ID0gZmlyc3REYXlPZk1vbnRoLmdldERhdGUoKTtcblxuICAgICAgaWYgKHRoaXMubG9jYWxlQVBJPy5pc0lzbGFtaWMoKSkge1xuICAgICAgICB0aGlzLnllYXIgPSBmaXJzdERheU9mTW9udGguZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgdGhpcy5tb250aCA9IGZpcnN0RGF5T2ZNb250aC5nZXRNb250aCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlID09PSAnZW5kLW1vbnRoJykge1xuICAgICAgY29uc3QgbGFzdERheU9mTW9udGggPSBsYXN0RGF5T2ZNb250aERhdGUodGhpcy55ZWFyLCB0aGlzLm1vbnRoLCB0aGlzLmRheSwgdGhpcy5sb2NhbGVBUEk/LmlzSXNsYW1pYygpKTtcblxuICAgICAgdGhpcy5kYXkgPSBsYXN0RGF5T2ZNb250aC5nZXREYXRlKCk7XG5cbiAgICAgIGlmICh0aGlzLmxvY2FsZUFQST8uaXNJc2xhbWljKCkpIHtcbiAgICAgICAgdGhpcy5tb250aCA9IGxhc3REYXlPZk1vbnRoLmdldE1vbnRoKCk7XG4gICAgICAgIHRoaXMueWVhciA9IGxhc3REYXlPZk1vbnRoLmdldEZ1bGxZZWFyKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy50cmlnZ2VyRGF0ZUNoYW5nZSh0aGlzLmFjdGl2ZURhdGUsIHR5cGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIERheSBjZWxsIGNsaWNrZWRcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCBUaGUgZWxlbWVudC5cbiAgICovXG4gICNkYXlTZWxlY3RDbGljayhlbGVtZW50OiBudWxsIHwgSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBpZiAoIWVsZW1lbnQpIHJldHVybjtcblxuICAgIGNvbnN0IHsgbW9udGgsIHllYXIsIGRheSB9OiBhbnkgPSBlbGVtZW50LmRhdGFzZXQ7XG4gICAgY29uc3QgaXNEaXNhYmxlZCA9IGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1kaXNhYmxlZCcpO1xuXG4gICAgaWYgKCFpc0Rpc2FibGVkKSB7XG4gICAgICB0aGlzLiNzZXRSYW5nZVNlbGVjdGlvbih5ZWFyLCBtb250aCwgZGF5KTtcblxuICAgICAgdGhpcy5kYXkgPSBkYXk7XG5cbiAgICAgIGlmIChzdHJpbmdUb051bWJlcihtb250aCkgIT09IHRoaXMubW9udGggfHwgdGhpcy5sb2NhbGVBUEk/LmlzSXNsYW1pYygpKSB7XG4gICAgICAgIHRoaXMubW9udGggPSBtb250aDtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0cmluZ1RvTnVtYmVyKHllYXIpICE9PSB0aGlzLnllYXIgfHwgdGhpcy5sb2NhbGVBUEk/LmlzSXNsYW1pYygpKSB7XG4gICAgICAgIHRoaXMueWVhciA9IHllYXI7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgIHRoaXMuI3RyaWdnZXJTZWxlY3RlZEV2ZW50KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBnaXZlbiB5ZWFyLCBtb250aCwgZGF5IHRvIHRoZSByYW5nZSBzZWxlY3Rpb25cbiAgICogQHBhcmFtIHtudW1iZXJ9IHllYXIgdG8gYWRkIHRvIHRoZSByYW5nZSBzZWxlY3Rpb25cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1vbnRoIHRvIGFkZCB0byB0aGUgcmFuZ2Ugc2VsZWN0aW9uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkYXkgdG8gYWRkIHRvIHRoZSByYW5nZSBzZWxlY3Rpb25cbiAgICovXG4gICNzZXRSYW5nZVNlbGVjdGlvbih5ZWFyOiBudW1iZXIsIG1vbnRoOiBudW1iZXIsIGRheTogbnVtYmVyIHwgdW5kZWZpbmVkKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnVzZVJhbmdlKSByZXR1cm47XG5cbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheSk7XG4gICAgY29uc3QgZGF0ZVRpbWUgPSBkYXRlLmdldFRpbWUoKTtcbiAgICBjb25zdCBkaWZmID0gdGhpcy5yYW5nZVNldHRpbmdzLnN0YXJ0ID8gZGF5c0RpZmYodGhpcy5yYW5nZVNldHRpbmdzLnN0YXJ0LCBkYXRlKSA6IDA7XG4gICAgY29uc3QgcmFuZ2VTdGFydGVkID0gdGhpcy5yYW5nZVNldHRpbmdzLnN0YXJ0ICYmICF0aGlzLnJhbmdlU2V0dGluZ3MuZW5kO1xuICAgIGNvbnN0IGNhblNlbGVjdEJvdGggPSAhKHRoaXMucmFuZ2VTZXR0aW5ncy5zZWxlY3RCYWNrd2FyZCB8fCB0aGlzLnJhbmdlU2V0dGluZ3Muc2VsZWN0Rm9yd2FyZCk7XG4gICAgY29uc3Qgc2VsZWN0QmFja3dhcmQgPSB0aGlzLnJhbmdlU2V0dGluZ3Muc2VsZWN0QmFja3dhcmQgJiYgZGlmZiA8IDA7XG4gICAgY29uc3Qgc2VsZWN0Rm9yd2FyZCA9IHRoaXMucmFuZ2VTZXR0aW5ncy5zZWxlY3RGb3J3YXJkICYmIGRpZmYgPiAwO1xuICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKHRoaXMucmFuZ2VTZXR0aW5ncy5zdGFydCBhcyBzdHJpbmcpO1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IHN0YXJ0RGF0ZS5nZXRUaW1lKCk7XG4gICAgY29uc3QgbWluRGF5cyA9IHRoaXMucmFuZ2VTZXR0aW5ncy5taW5EYXlzO1xuICAgIGNvbnN0IG1heERheXMgPSB0aGlzLnJhbmdlU2V0dGluZ3MubWF4RGF5cztcbiAgICBjb25zdCBtaW5SYW5nZUV4Y2VlZGVkID0gKG1pbkRheXMgYXMgbnVtYmVyKSA+IDAgJiYgTWF0aC5hYnMoZGlmZikgPCAobWluRGF5cyBhcyBudW1iZXIpO1xuICAgIGNvbnN0IG1heFJhbmdlRXhjZWVkZWQgPSAobWF4RGF5cyBhcyBudW1iZXIpID4gMCAmJiBNYXRoLmFicyhkaWZmKSA+IChtYXhEYXlzIGFzIG51bWJlcik7XG4gICAgY29uc3QgbWluUmFuZ2VEYXRlID0gZGlmZiA+PSAwXG4gICAgICA/IGFkZERhdGUoc3RhcnREYXRlLCAobWluRGF5cyBhcyBudW1iZXIpLCAnZGF5cycpXG4gICAgICA6IHN1YnRyYWN0RGF0ZShzdGFydERhdGUsIChtaW5EYXlzIGFzIG51bWJlciksICdkYXlzJyk7XG5cbiAgICB0aGlzLnNlbGVjdERheSh5ZWFyLCBtb250aCwgZGF5KTtcblxuICAgIGlmICh0aGlzLnJhbmdlU2V0dGluZ3Muc2VsZWN0V2Vlaykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFN0YXJ0IGlzIHNldFxuICAgIGlmIChyYW5nZVN0YXJ0ZWQgJiYgIW1heFJhbmdlRXhjZWVkZWQgJiYgKGNhblNlbGVjdEJvdGggfHwgc2VsZWN0QmFja3dhcmQgfHwgc2VsZWN0Rm9yd2FyZCkpIHtcbiAgICAgIGlmIChtaW5SYW5nZUV4Y2VlZGVkKSB7XG4gICAgICAgIHRoaXMucmFuZ2VTZXR0aW5ncy5lbmQgPSBkYXRlVGltZSA+PSBzdGFydFRpbWUgPyBtaW5SYW5nZURhdGUuZ2V0VGltZSgpIDogdGhpcy5yYW5nZVNldHRpbmdzLnN0YXJ0O1xuICAgICAgICB0aGlzLnJhbmdlU2V0dGluZ3Muc3RhcnQgPSBzdWJ0cmFjdERhdGUodGhpcy5yYW5nZVNldHRpbmdzLmVuZCwgKG1pbkRheXMgYXMgbnVtYmVyKSwgJ2RheXMnKTtcblxuICAgICAgICB0aGlzLiNyZW5kZXJSYW5nZVNlbGVjdGlvbigpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5yYW5nZVNldHRpbmdzLmVuZCA9IGRhdGVUaW1lID49IHN0YXJ0VGltZSA/IGRhdGVUaW1lIDogdGhpcy5yYW5nZVNldHRpbmdzLnN0YXJ0O1xuICAgICAgdGhpcy5yYW5nZVNldHRpbmdzLnN0YXJ0ID0gZGF0ZVRpbWUgPD0gc3RhcnRUaW1lID8gZGF0ZVRpbWUgOiB0aGlzLnJhbmdlU2V0dGluZ3Muc3RhcnQ7XG5cbiAgICAgIHRoaXMuI3JlbmRlclJhbmdlU2VsZWN0aW9uKCk7XG4gICAgICAvLyBTdGFydCBub3Qgc2V0IG9yIGJvdGggbm90IHNldFxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJhbmdlU2V0dGluZ3Muc3RhcnQgPSBkYXRlVGltZTtcbiAgICAgIHRoaXMucmFuZ2VTZXR0aW5ncy5lbmQgPSBudWxsO1xuXG4gICAgICB0aGlzLiNjbGVhclJhbmdlQ2xhc3NlcygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgdG8gY2xlYXIgcmFuZ2Ugc2VsZWN0aW9uIENTUyBjbGFzc2VzXG4gICAqL1xuICAjY2xlYXJSYW5nZUNsYXNzZXMoKTogdm9pZCB7XG4gICAgdGhpcy5jb250YWluZXI/LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkJylcbiAgICAgIC5mb3JFYWNoKFxuICAgICAgICAoaXRlbTogSFRNTEVsZW1lbnQpID0+IGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcbiAgICAgICAgICAncmFuZ2UtbmV4dCcsXG4gICAgICAgICAgJ3JhbmdlLXByZXYnLFxuICAgICAgICAgICdyYW5nZS1zZWxlY3Rpb24nLFxuICAgICAgICAgICdub3QtaW5jbHVkZWQnXG4gICAgICAgIClcbiAgICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIENTUyBjbGFzc2VzIGFuZCBzZWxlY3RlZCBhdHRycyB0byB0YWJsZXMgY2VsbHMgd2hlbiByYW5nZSBzZWxlY3Rpb24gaXMgY29tcGxldGVkXG4gICAqL1xuICAjcmVuZGVyUmFuZ2VTZWxlY3Rpb24oKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnVzZVJhbmdlKSByZXR1cm47XG4gICAgY29uc3Qgc3RhcnRSYW5nZSA9IG5ldyBEYXRlKHRoaXMucmFuZ2VTZXR0aW5ncy5zdGFydCk7XG4gICAgY29uc3QgZW5kUmFuZ2UgPSBuZXcgRGF0ZSh0aGlzLnJhbmdlU2V0dGluZ3MuZW5kKTtcbiAgICBjb25zdCBkYXlzID0gdGhpcy5yYW5nZVNldHRpbmdzLmVuZCA/IGRheXNEaWZmKHN0YXJ0UmFuZ2UsIGVuZFJhbmdlKSA6IDA7XG5cbiAgICB0aGlzLiNjbGVhclJhbmdlQ2xhc3NlcygpO1xuXG4gICAgQXJyYXkuZnJvbSh7IGxlbmd0aDogZGF5cyArIDEgfSkuZm9yRWFjaCgoXywgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IHJhbmdlRGF5ID0gYWRkRGF0ZShzdGFydFJhbmdlLCBpbmRleCwgJ2RheXMnKTtcbiAgICAgIGNvbnN0IHNlbGVjdGVkUXVlcnkgPSBbXG4gICAgICAgICd0ZCcsXG4gICAgICAgIGBbZGF0YS15ZWFyPVwiJHtyYW5nZURheS5nZXRGdWxsWWVhcigpfVwiXWAsXG4gICAgICAgIGBbZGF0YS1tb250aD1cIiR7cmFuZ2VEYXkuZ2V0TW9udGgoKX1cIl1gLFxuICAgICAgICBgW2RhdGEtZGF5PVwiJHtyYW5nZURheS5nZXREYXRlKCl9XCJdYFxuICAgICAgXS5qb2luKCcnKTtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcihzZWxlY3RlZFF1ZXJ5KTtcblxuICAgICAgZWxlbWVudD8uY2xhc3NMaXN0LmFkZCgncmFuZ2Utc2VsZWN0aW9uJyk7XG5cbiAgICAgIGlmICghdGhpcy5yYW5nZVNldHRpbmdzLmluY2x1ZGVEaXNhYmxlZCkge1xuICAgICAgICBlbGVtZW50Py5jbGFzc0xpc3QuYWRkKCdub3QtaW5jbHVkZWQnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKChpbmRleCA9PT0gMCB8fCBpbmRleCA9PT0gZGF5cykgJiYgIXRoaXMucmFuZ2VTZXR0aW5ncy5zZWxlY3RXZWVrKSB7XG4gICAgICAgIGVsZW1lbnQ/LnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsICd0cnVlJyk7XG4gICAgICAgIGVsZW1lbnQ/LnNldEF0dHJpYnV0ZSgncm9sZScsICdncmlkY2VsbCcpO1xuICAgICAgICBlbGVtZW50Py5jbGFzc0xpc3QuYWRkKCdpcy1zZWxlY3RlZCcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciB0byBjaGVjayBpZiBkYXRlIGlzIGluIHRoZSByYW5nZSBzZWxlY3Rpb25cbiAgICogQHBhcmFtIHtEYXRlfSBkYXRlIHRvIGNoZWNrIGlmIGlzIGluIHJhbmdlIHNlbGVjdGlvblxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gd2hldGhlciB0aGUgZGF0ZSBpcyBpbiByYW5nZSBzZWxlY3Rpb25cbiAgICovXG4gICNpc1JhbmdlQnlEYXRlKGRhdGU6IERhdGUpOiBib29sZWFuIHtcbiAgICBjb25zdCBzdGFydFJhbmdlID0gbmV3IERhdGUodGhpcy5yYW5nZVNldHRpbmdzLnN0YXJ0KTtcbiAgICBjb25zdCBlbmRSYW5nZSA9IG5ldyBEYXRlKHRoaXMucmFuZ2VTZXR0aW5ncy5lbmQpO1xuXG4gICAgcmV0dXJuIGRhdGUuZ2V0VGltZSgpID49IHN0YXJ0UmFuZ2UuZ2V0VGltZSgpXG4gICAgICAmJiBkYXRlLmdldFRpbWUoKSA8PSBlbmRSYW5nZS5nZXRUaW1lKCk7XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyIHRvIGhhbmRsZSB3ZWVrIHNlbGVjdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IHllYXIgdG8gYWRkIHRvIHRoZSByYW5nZSBzZWxlY3Rpb25cbiAgICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBtb250aCB0byBhZGQgdG8gdGhlIHJhbmdlIHNlbGVjdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGRheSB0byBhZGQgdG8gdGhlIHJhbmdlIHNlbGVjdGlvblxuICAgKi9cbiAgI3JhbmdlU2VsZWN0V2VlayhcbiAgICB5ZWFyOiBzdHJpbmcgfCBudW1iZXIgfCB1bmRlZmluZWQsXG4gICAgbW9udGg6IHN0cmluZyB8IG51bWJlciB8IHVuZGVmaW5lZCxcbiAgICBkYXk6IHN0cmluZyB8IG51bWJlciB8IHVuZGVmaW5lZFxuICApOiB2b2lkIHtcbiAgICBjb25zdCBmaXJzdERheU9mV2VlazogRGF0ZSA9IGZpcnN0RGF5T2ZXZWVrRGF0ZShcbiAgICAgIG5ldyBEYXRlKHllYXIgYXMgbnVtYmVyLCBtb250aCBhcyBudW1iZXIsIGRheSBhcyBudW1iZXIpLFxuICAgICAgdGhpcy5maXJzdERheU9mV2Vla1xuICAgICk7XG5cbiAgICBpZiAoZmlyc3REYXlPZldlZWsuZ2V0VGltZSgpICE9PSB0aGlzLnJhbmdlU2V0dGluZ3Muc3RhcnQ/LmdldFRpbWUoKSkge1xuICAgICAgdGhpcy5yYW5nZVNldHRpbmdzLnN0YXJ0ID0gZmlyc3REYXlPZldlZWs7XG4gICAgICB0aGlzLnJhbmdlU2V0dGluZ3MuZW5kID0gYWRkRGF0ZSh0aGlzLnJhbmdlU2V0dGluZ3Muc3RhcnQsIFdFRUtfTEVOR1RIIC0gMSwgJ2RheXMnKTtcblxuICAgICAgdGhpcy5zZWxlY3REYXkoKTtcbiAgICAgIHRoaXMuI3JlbmRlclJhbmdlU2VsZWN0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBDU1MgY2xhc3NlcyB0byB0YWJsZSBjZWxscyB3aGVuIHJhbmdlIHNlbGVjdGlvbiBpcyBpbiBwcm9ncmVzc1xuICAgKiBTdGFydGluZyBmcm9tIHRoZSByYW5nZSBzZXR0aW5ncyBzdGFydFxuICAgKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IHllYXIgdG8gYWRkIHRvIHRoZSByYW5nZSBzZWxlY3Rpb25cbiAgICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBtb250aCB0byBhZGQgdG8gdGhlIHJhbmdlIHNlbGVjdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGRheSB0byBhZGQgdG8gdGhlIHJhbmdlIHNlbGVjdGlvblxuICAgKi9cbiAgI3JhbmdlUHJvcGFnYXRpb24oXG4gICAgeWVhcjogc3RyaW5nIHwgbnVtYmVyIHwgdW5kZWZpbmVkLFxuICAgIG1vbnRoOiBzdHJpbmcgfCBudW1iZXIgfCB1bmRlZmluZWQsXG4gICAgZGF5OiBzdHJpbmcgfCBudW1iZXIgfCB1bmRlZmluZWRcbiAgKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnVzZVJhbmdlKSByZXR1cm47XG5cbiAgICBpZiAodGhpcy5yYW5nZVNldHRpbmdzLnNlbGVjdFdlZWspIHtcbiAgICAgIHRoaXMuI3JhbmdlU2VsZWN0V2Vlayh5ZWFyLCBtb250aCwgZGF5KTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnJhbmdlU2V0dGluZ3Muc3RhcnQgJiYgISh0aGlzLnJhbmdlU2V0dGluZ3MuZW5kICYmIHRoaXMucmFuZ2VTZXR0aW5ncy5zdGFydCkpIHtcbiAgICAgIGNvbnN0IHN0YXJ0UmFuZ2UgPSBuZXcgRGF0ZSh0aGlzLnJhbmdlU2V0dGluZ3Muc3RhcnQpO1xuICAgICAgY29uc3QgZW5kUmFuZ2UgPSBuZXcgRGF0ZSh5ZWFyIGFzIG51bWJlciwgbW9udGggYXMgbnVtYmVyLCBkYXkgYXMgbnVtYmVyKTtcbiAgICAgIGNvbnN0IGRpZmYgPSBkYXlzRGlmZihzdGFydFJhbmdlLCBlbmRSYW5nZSk7XG5cbiAgICAgIHRoaXMuI2NsZWFyUmFuZ2VDbGFzc2VzKCk7XG5cbiAgICAgIGNvbnN0IGNhblNlbGVjdEJvdGggPSAhKHRoaXMucmFuZ2VTZXR0aW5ncy5zZWxlY3RCYWNrd2FyZCB8fCB0aGlzLnJhbmdlU2V0dGluZ3Muc2VsZWN0Rm9yd2FyZCk7XG4gICAgICBjb25zdCBzZWxlY3RCYWNrd2FyZCA9IHRoaXMucmFuZ2VTZXR0aW5ncy5zZWxlY3RCYWNrd2FyZCAmJiBkaWZmIDwgMDtcbiAgICAgIGNvbnN0IHNlbGVjdEZvcndhcmQgPSB0aGlzLnJhbmdlU2V0dGluZ3Muc2VsZWN0Rm9yd2FyZCAmJiBkaWZmID4gMDtcbiAgICAgIGNvbnN0IG1heERheXMgPSB0aGlzLnJhbmdlU2V0dGluZ3MubWF4RGF5cztcbiAgICAgIGNvbnN0IG1heFJhbmdlRXhjZWVkZWQgPSAobWF4RGF5cyBhcyBudW1iZXIpID4gMCAmJiBNYXRoLmFicyhkaWZmKSA+IChtYXhEYXlzIGFzIG51bWJlcik7XG5cbiAgICAgIGlmIChkaWZmICE9PSAwICYmICFtYXhSYW5nZUV4Y2VlZGVkICYmIChjYW5TZWxlY3RCb3RoIHx8IHNlbGVjdEJhY2t3YXJkIHx8IHNlbGVjdEZvcndhcmQpKSB7XG4gICAgICAgIEFycmF5LmZyb20oeyBsZW5ndGg6IE1hdGguYWJzKGRpZmYpIH0pLmZvckVhY2goKF8sIGluZGV4KSA9PiB7XG4gICAgICAgICAgY29uc3QgcmFuZ2VEYXkgPSBkaWZmID4gMFxuICAgICAgICAgICAgPyBhZGREYXRlKHN0YXJ0UmFuZ2UsIGluZGV4ICsgMSwgJ2RheXMnKVxuICAgICAgICAgICAgOiBzdWJ0cmFjdERhdGUoc3RhcnRSYW5nZSwgaW5kZXggKyAxLCAnZGF5cycpO1xuICAgICAgICAgIGNvbnN0IHNlbGVjdGVkUXVlcnkgPSBbXG4gICAgICAgICAgICAndGQnLFxuICAgICAgICAgICAgYFtkYXRhLXllYXI9XCIke3JhbmdlRGF5LmdldEZ1bGxZZWFyKCl9XCJdYCxcbiAgICAgICAgICAgIGBbZGF0YS1tb250aD1cIiR7cmFuZ2VEYXkuZ2V0TW9udGgoKX1cIl1gLFxuICAgICAgICAgICAgYFtkYXRhLWRheT1cIiR7cmFuZ2VEYXkuZ2V0RGF0ZSgpfVwiXWBcbiAgICAgICAgICBdLmpvaW4oJycpO1xuXG4gICAgICAgICAgdGhpcy5jb250YWluZXI/LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0ZWRRdWVyeSlcbiAgICAgICAgICAgID8uY2xhc3NMaXN0LmFkZChkaWZmID4gMCA/ICdyYW5nZS1uZXh0JyA6ICdyYW5nZS1wcmV2Jyk7XG5cbiAgICAgICAgICBpZiAoIXRoaXMucmFuZ2VTZXR0aW5ncy5pbmNsdWRlRGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyPy5xdWVyeVNlbGVjdG9yKHNlbGVjdGVkUXVlcnkpPy5jbGFzc0xpc3QuYWRkKCdub3QtaW5jbHVkZWQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEZWZpbmVzIGlmIGEgZGF0ZSBpcyBpbiBkaXNhYmxlZCBzZXR0aW5nc1xuICAgKiBAcGFyYW0ge0RhdGV9IGRhdGUgdG8gY2hlY2tcbiAgICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRlciBvciBub3QgdGhlIGRhdGUgaXMgZGlzYWJsZWRcbiAgICovXG4gIGlzRGlzYWJsZWRCeURhdGUoZGF0ZTogRGF0ZSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHtcbiAgICAgIHllYXJzLFxuICAgICAgZGF5T2ZXZWVrLFxuICAgICAgZGF0ZXMsXG4gICAgICBtaW5EYXRlLFxuICAgICAgbWF4RGF0ZSxcbiAgICAgIGlzRW5hYmxlXG4gICAgfTogSWRzRGlzYWJsZVNldHRpbmdzID0gdGhpcy5kaXNhYmxlU2V0dGluZ3M7XG5cbiAgICBjb25zdCBpc091dE9mRGlzcGxheVJhbmdlOiBib29sZWFuID0gdGhpcy4jaXNEaXNwbGF5UmFuZ2UoKVxuICAgICAgJiYgKGRhdGUgPCAodGhpcy5zdGFydERhdGUgYXMgRGF0ZSkgfHwgZGF0ZSA+ICh0aGlzLmVuZERhdGUgYXMgRGF0ZSkpO1xuICAgIGNvbnN0IGlmWWVhcjogYm9vbGVhbiA9ICh5ZWFycyBhcyBBcnJheTxudW1iZXI+KS5zb21lKFxuICAgICAgKGl0ZW06IG51bWJlcikgPT4gaXRlbSA9PT0gZGF0ZS5nZXRGdWxsWWVhcigpXG4gICAgKTtcbiAgICBjb25zdCBpZkRheU9mV2VlazogYm9vbGVhbiA9IChkYXlPZldlZWsgYXMgQXJyYXk8bnVtYmVyPikuc29tZShcbiAgICAgIChpdGVtOiBudW1iZXIpID0+IGl0ZW0gPT09IGRhdGUuZ2V0RGF5KClcbiAgICApO1xuICAgIGNvbnN0IGlmRGF0ZXM6IGJvb2xlYW4gPSAoZGF0ZXMgYXMgQXJyYXk8c3RyaW5nPikuc29tZShcbiAgICAgIChpdGVtOiBzdHJpbmcpID0+IChuZXcgRGF0ZShpdGVtKSkuZ2V0VGltZSgpID09PSBkYXRlLmdldFRpbWUoKVxuICAgICk7XG4gICAgY29uc3QgaWZNaW5NYXhEYXRlOiBib29sZWFuID0gZGF0ZSA8PSBuZXcgRGF0ZShtaW5EYXRlIGFzIHN0cmluZykgfHwgZGF0ZSA+PSBuZXcgRGF0ZShtYXhEYXRlIGFzIHN0cmluZyk7XG4gICAgY29uc3QgaWZCeVNldHRpbmdzOiBib29sZWFuID0gaWZZZWFyIHx8IGlmRGF5T2ZXZWVrIHx8IGlmRGF0ZXMgfHwgaWZNaW5NYXhEYXRlO1xuICAgIGNvbnN0IHdpdGhSZXZlcnNlOiBib29sZWFuID0gaXNFbmFibGUgPyAhaWZCeVNldHRpbmdzIDogaWZCeVNldHRpbmdzO1xuXG4gICAgcmV0dXJuIHdpdGhSZXZlcnNlIHx8IGlzT3V0T2ZEaXNwbGF5UmFuZ2U7XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyIHRvIGdldCBtb250aCBmb3JtYXQgZm9yIGZpcnN0IGRheSBvZiBhIG1vbnRoIG9yIGZpcnN0IGRheSBvZiB0aGUgZGlzcGxheSByYW5nZVxuICAgKiBAcGFyYW0ge0RhdGV9IGRhdGUgZGF0ZSB0byBjaGVja1xuICAgKiBAcGFyYW0ge0RhdGV9IHJhbmdlU3RhcnRzT24gdmVyeSBmaXJzdCBkYXkgb2YgdGhlIGRpc3BsYXkgcmFuZ2VcbiAgICogQHJldHVybnMge3N0cmluZ3x1bmRlZmluZWR9IEludGwuRGF0ZVRpbWVGb3JtYXQgb3B0aW9ucyBtb250aCBmb3JtYXQgKG51bWVyaWMsIGxvbmcsIHNob3J0KVxuICAgKi9cbiAgI21vbnRoSW5EYXlGb3JtYXQoZGF0ZTogRGF0ZSwgcmFuZ2VTdGFydHNPbjogRGF0ZSk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgaXNGaXJzdERheU9mUmFuZ2UgPSBkYXlzRGlmZihkYXRlLCByYW5nZVN0YXJ0c09uKSA9PT0gMDtcbiAgICBjb25zdCBpc0ZpcnN0RGF5T2ZNb250aCA9IHRoaXMubG9jYWxlQVBJPy5pc0lzbGFtaWMoKVxuICAgICAgPyBncmVnb3JpYW5Ub1VtYWxxdXJhKGRhdGUpLmRheSA9PT0gMVxuICAgICAgOiBkYXRlLmdldERhdGUoKSA9PT0gMTtcblxuICAgIGlmICh0aGlzLiNpc0Rpc3BsYXlSYW5nZSgpICYmIChpc0ZpcnN0RGF5T2ZSYW5nZSB8fCBpc0ZpcnN0RGF5T2ZNb250aCkpIHtcbiAgICAgIHJldHVybiAnc2hvcnQnO1xuICAgIH1cblxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogVGFibGUgY2VsbCBIVE1MIHRlbXBsYXRlIHdpdGggbG9jYWxlLCBkYXRhIGF0dHJpYnV0ZXNcbiAgICogQHBhcmFtIHtudW1iZXJ9IHdlZWtJbmRleCBudW1iZXIgb2Ygd2VlayBpbiBtb250aCBzdGFydGluZyBmcm9tIDBcbiAgICogQHJldHVybnMge3N0cmluZ30gdGFibGUgY2VsbCBIVE1MIHRlbXBsYXRlXG4gICAqL1xuICAjZ2V0Q2VsbFRlbXBsYXRlKHdlZWtJbmRleDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBjb25zdCBmaXJzdERheU9mUmFuZ2U6IERhdGUgPSB0aGlzLiNpc0Rpc3BsYXlSYW5nZSgpXG4gICAgICA/ICh0aGlzLnN0YXJ0RGF0ZSBhcyBEYXRlKVxuICAgICAgOiBmaXJzdERheU9mTW9udGhEYXRlKHRoaXMueWVhciwgdGhpcy5tb250aCwgdGhpcy5kYXksIHRoaXMubG9jYWxlQVBJPy5pc0lzbGFtaWMoKSk7XG4gICAgY29uc3QgbGFzdERheU9mUmFuZ2U6IERhdGUgPSB0aGlzLiNpc0Rpc3BsYXlSYW5nZSgpXG4gICAgICA/ICh0aGlzLmVuZERhdGUgYXMgRGF0ZSlcbiAgICAgIDogbGFzdERheU9mTW9udGhEYXRlKHRoaXMueWVhciwgdGhpcy5tb250aCwgdGhpcy5kYXksIHRoaXMubG9jYWxlQVBJPy5pc0lzbGFtaWMoKSk7XG4gICAgY29uc3QgcmFuZ2VTdGFydHNPbiA9IGZpcnN0RGF5T2ZXZWVrRGF0ZShmaXJzdERheU9mUmFuZ2UsIHRoaXMuZmlyc3REYXlPZldlZWspO1xuICAgIGNvbnN0IG5vdzogRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgaXNDb21wYWN0ID0gdGhpcy5jb21wYWN0O1xuXG4gICAgcmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGg6IFdFRUtfTEVOR1RIIH0pLm1hcCgoXywgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IGRhdGU6IERhdGUgPSBhZGREYXRlKHJhbmdlU3RhcnRzT24sICh3ZWVrSW5kZXggKiBXRUVLX0xFTkdUSCkgKyBpbmRleCwgJ2RheXMnKTtcbiAgICAgIGNvbnN0IG1vbnRoRm9ybWF0OiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLiNtb250aEluRGF5Rm9ybWF0KGRhdGUsIHJhbmdlU3RhcnRzT24pO1xuICAgICAgY29uc3QgZGF5VGV4dDogc3RyaW5nID0gdGhpcy5sb2NhbGVBUEk/LmZvcm1hdERhdGUoZGF0ZSwge1xuICAgICAgICBkYXk6ICdudW1lcmljJyxcbiAgICAgICAgbW9udGg6IG1vbnRoRm9ybWF0LFxuICAgICAgICBudW1iZXJpbmdTeXN0ZW06ICdsYXRuJ1xuICAgICAgfSk7XG4gICAgICBjb25zdCBhcmlhTGFiZWw6IHN0cmluZyA9IHRoaXMubG9jYWxlQVBJPy5mb3JtYXREYXRlKGRhdGUsIHsgZGF0ZVN0eWxlOiAnZnVsbCcgfSk7XG4gICAgICBjb25zdCBkYXk6IG51bWJlciA9IGRhdGUuZ2V0RGF0ZSgpO1xuICAgICAgY29uc3QgbW9udGg6IG51bWJlciA9IGRhdGUuZ2V0TW9udGgoKTtcbiAgICAgIGNvbnN0IHllYXI6IG51bWJlciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgIGNvbnN0IGRhdGVNYXRjaDogYm9vbGVhbiA9IGRheSA9PT0gdGhpcy5kYXkgJiYgeWVhciA9PT0gdGhpcy55ZWFyICYmIG1vbnRoID09PSB0aGlzLm1vbnRoO1xuICAgICAgY29uc3QgaXNTZWxlY3RlZDogYm9vbGVhbiA9ICF0aGlzLnVzZVJhbmdlICYmIGRhdGVNYXRjaDtcbiAgICAgIGNvbnN0IGlzU2VsZWN0ZWRXaXRoUmFuZ2U6IGJvb2xlYW4gPSB0aGlzLnVzZVJhbmdlICYmICF0aGlzLnJhbmdlU2V0dGluZ3Muc3RhcnQgJiYgZGF0ZU1hdGNoO1xuICAgICAgY29uc3QgaXNEaXNhYmxlZDogYm9vbGVhbiA9IHRoaXMuaXNEaXNhYmxlZEJ5RGF0ZShkYXRlKTtcbiAgICAgIGNvbnN0IGlzQWx0ZXJuYXRlOiBib29sZWFuID0gIXRoaXMuI2lzRGlzcGxheVJhbmdlKCkgJiYgKGRhdGUgPCBmaXJzdERheU9mUmFuZ2UgfHwgZGF0ZSA+IGxhc3REYXlPZlJhbmdlKTtcbiAgICAgIGNvbnN0IGxlZ2VuZDogYW55ID0gdGhpcy5nZXRMZWdlbmRCeURhdGUoZGF0ZSk7XG4gICAgICBjb25zdCBpc1JhbmdlU2VsZWN0aW9uOiBib29sZWFuID0gdGhpcy4jaXNSYW5nZUJ5RGF0ZShkYXRlKTtcbiAgICAgIGNvbnN0IGlzVG9kYXk6IGJvb2xlYW4gPSB5ZWFyID09PSBub3cuZ2V0RnVsbFllYXIoKSAmJiBtb250aCA9PT0gbm93LmdldE1vbnRoKCkgJiYgZGF5ID09PSBub3cuZ2V0RGF0ZSgpO1xuICAgICAgY29uc3QgY2xhc3NBdHRyOiBzdHJpbmcgPSBidWlsZENsYXNzQXR0cmliKFxuICAgICAgICBpc0FsdGVybmF0ZSAmJiAnYWx0ZXJuYXRlJyxcbiAgICAgICAgbGVnZW5kICYmICdoYXMtbGVnZW5kJyxcbiAgICAgICAgaXNEaXNhYmxlZCAmJiAnaXMtZGlzYWJsZWQnLFxuICAgICAgICAoaXNTZWxlY3RlZCB8fCBpc1NlbGVjdGVkV2l0aFJhbmdlKSAmJiAnaXMtc2VsZWN0ZWQnLFxuICAgICAgICBtb250aEZvcm1hdCAmJiAnbW9udGgtbGFiZWwnLFxuICAgICAgICBpc1JhbmdlU2VsZWN0aW9uICYmICdyYW5nZS1zZWxlY3Rpb24nLFxuICAgICAgICBpc1RvZGF5ICYmICdpcy10b2RheSdcbiAgICAgICk7XG4gICAgICBjb25zdCBzZWxlY3RlZEF0dHI6IHN0cmluZyA9IGlzU2VsZWN0ZWQgfHwgaXNTZWxlY3RlZFdpdGhSYW5nZVxuICAgICAgICA/ICdhcmlhLXNlbGVjdGVkPVwidHJ1ZVwiIHRhYmluZGV4PVwiMFwiIHJvbGU9XCJncmlkY2VsbFwiJyA6ICdyb2xlPVwibGlua1wiJztcbiAgICAgIGNvbnN0IGRhdGFBdHRyOiBzdHJpbmcgPSBbYGRhdGEteWVhcj1cIiR7eWVhcn1cImAsIGBkYXRhLW1vbnRoPVwiJHttb250aH1cImAsIGBkYXRhLWRheT1cIiR7ZGF5fVwiYF0uam9pbignICcpO1xuICAgICAgY29uc3QgY29sb3JBdHRyOiBzdHJpbmcgPSBsZWdlbmQgPyBgZGF0YS1jb2xvcj1cIiR7bGVnZW5kLmNvbG9yfVwiYCA6ICcnO1xuICAgICAgY29uc3QgZGF0ZUtleSA9IHRoaXMuZ2VuZXJhdGVEYXRlS2V5KG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXkpKTtcblxuICAgICAgbGV0IGNlbGxUZW1wbGF0ZSA9IGA8dGQgYXJpYS1sYWJlbD1cIiR7YXJpYUxhYmVsfVwiICR7ZGF0YUF0dHJ9ICR7Y2xhc3NBdHRyfSAke3NlbGVjdGVkQXR0cn0gJHtjb2xvckF0dHJ9PlxuICAgICAgICA8c3BhbiBjbGFzcz1cImRheS1jb250YWluZXJcIj5cbiAgICAgICAgICA8aWRzLXRleHRcbiAgICAgICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgICAgICAgICBjbGFzcz1cImRheS10ZXh0XCJcbiAgICAgICAgICAgIGZvbnQtc2l6ZT1cIjE0XCJcbiAgICAgICAgICA+JHtkYXlUZXh0fTwvaWRzLXRleHQ+XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgICAgJHtpc0NvbXBhY3QgPyAnJyA6IGA8ZGl2IGNsYXNzPVwiZXZlbnRzLWNvbnRhaW5lclwiIGRhdGEta2V5PVwiJHtkYXRlS2V5fVwiPjwvZGl2PmB9XG4gICAgICA8L3RkPmA7XG4gICAgICBpZiAodHlwZW9mIHRoaXMuc3RhdGUub25EYXlSZW5kZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY2VsbFRlbXBsYXRlID0gdGhpcy5zdGF0ZS5vbkRheVJlbmRlcihjZWxsVGVtcGxhdGUsIGRhdGVLZXkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNlbGxUZW1wbGF0ZTtcbiAgICB9KS5qb2luKCcnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgd2VlayBkYXlzIEhUTUwgdG8gdGhlIHRhYmxlXG4gICAqL1xuICAjcmVuZGVyV2Vla0RheXMoKTogdm9pZCB7XG4gICAgY29uc3Qgd2Vla0RheUtleXMgPSBbJ1N1bicsICdNb24nLCAnVHVlJywgJ1dlZCcsICdUaHUnLCAnRnJpJywgJ1NhdCddO1xuICAgIGNvbnN0IHdlZWtEYXlzID0gd2Vla0RheUtleXMubWFwKChpdGVtKSA9PiB0aGlzLmxvY2FsZUFQST8udHJhbnNsYXRlKGAke3RoaXMuY29tcGFjdCA/ICdEYXlOYXJyb3cnIDogJ0RheUFiYnJldmlhdGVkJ30ke2l0ZW19YCkpO1xuXG4gICAgY29uc3Qgd2Vla0RheXNUZW1wbGF0ZSA9IHdlZWtEYXlzLm1hcCgoZWw6IGFueSwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgY29uc3Qgd2Vla2RheSA9IHdlZWtEYXlzWyhpbmRleCArIHRoaXMuZmlyc3REYXlPZldlZWspICUgV0VFS19MRU5HVEhdO1xuXG4gICAgICByZXR1cm4gYFxuICAgICAgICA8dGg+XG4gICAgICAgICAgPGlkcy10ZXh0XG4gICAgICAgICAgICBjbGFzcz1cIndlZWtkYXktdGV4dFwiXG4gICAgICAgICAgICBmb250LXNpemU9XCIxNFwiXG4gICAgICAgICAgPiR7d2Vla2RheX08L2lkcy10ZXh0PlxuICAgICAgICA8L3RoPlxuICAgICAgYDtcbiAgICB9KS5qb2luKCcnKTtcblxuICAgIC8vIENsZWFyL2FkZCBIVE1MXG4gICAgdGhpcy5jb250YWluZXI/LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoZWFkIHRoJykuZm9yRWFjaCgoZWw6IEVsZW1lbnQpID0+IGVsLnJlbW92ZSgpKTtcbiAgICB0aGlzLmNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcigndGhlYWQgdHInKT8uaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCB3ZWVrRGF5c1RlbXBsYXRlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgbW9udGggSFRNTCB0byB0aGUgdGFibGVcbiAgICovXG4gICNyZW5kZXJNb250aCgpOiB2b2lkIHtcbiAgICBjb25zdCB3ZWVrc0NvdW50ID0gdGhpcy4jaXNEaXNwbGF5UmFuZ2UoKVxuICAgICAgPyB3ZWVrc0luUmFuZ2UodGhpcy5zdGFydERhdGUsIHRoaXMuZW5kRGF0ZSwgdGhpcy5maXJzdERheU9mV2VlaylcbiAgICAgIDogd2Vla3NJbk1vbnRoKHRoaXMueWVhciwgdGhpcy5tb250aCwgdGhpcy5kYXksIHRoaXMuZmlyc3REYXlPZldlZWssIHRoaXMubG9jYWxlQVBJPy5pc0lzbGFtaWMoKSk7XG4gICAgdGhpcy50cmlnZ2VyRXZlbnQoJ2JlZm9yZXJlbmRlcm1vbnRoJywgdGhpcywgeyBidWJibGVzOiB0cnVlLCBjb21wb3NlZDogdHJ1ZSB9KTtcblxuICAgIGNvbnN0IHJvd3NUZW1wbGF0ZSA9IEFycmF5LmZyb20oeyBsZW5ndGg6IHdlZWtzQ291bnQgfSkubWFwKChfLCB3ZWVrSW5kZXgpID0+IGA8dHI+JHt0aGlzLiNnZXRDZWxsVGVtcGxhdGUod2Vla0luZGV4KX08L3RyPmApLmpvaW4oJycpO1xuXG4gICAgLy8gQ2xlYXIvYWRkIEhUTUxcbiAgICB0aGlzLmNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvckFsbCgndGJvZHkgdHInKS5mb3JFYWNoKChlbDogRWxlbWVudCkgPT4gZWwucmVtb3ZlKCkpO1xuICAgIHRoaXMuY29udGFpbmVyPy5xdWVyeVNlbGVjdG9yKCd0Ym9keScpPy5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIHJvd3NUZW1wbGF0ZSk7XG5cbiAgICB0aGlzLiNyZW5kZXJXZWVrRGF5cygpO1xuICAgIHRoaXMuI2NvbG9yVG9WYXIoKTtcbiAgICB0aGlzLnN0YXRlLmhhc1JlbmRlcmVkID0gdHJ1ZTtcblxuICAgIGlmICghdGhpcy5jb21wYWN0ICYmICF0aGlzLmlzRGF0ZVBpY2tlcikge1xuICAgICAgdGhpcy5yZW5kZXJFdmVudHNEYXRhKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgY2FsZW5kYXIgZXZlbnRzIHdpdGhpbiB0aGUgc2VsZWN0ZWQvYWN0aXZlIGRheVxuICAgKiBAcmV0dXJucyB7Q2FsZW5kYXJFdmVudERhdGFbXX0gY2FsZW5kYXIgZXZlbnRzIGRhdGFcbiAgICovXG4gIGdldEFjdGl2ZURheUV2ZW50cygpOiBDYWxlbmRhckV2ZW50RGF0YVtdIHtcbiAgICBjb25zdCBhY3RpdmVEYXkgPSB0aGlzLmdldFNlbGVjdGVkRGF5KCk7XG4gICAgbGV0IGV2ZW50RWxlbXMgPSBhY3RpdmVEYXkgPyBbLi4uYWN0aXZlRGF5LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lkcy1jYWxlbmRhci1ldmVudCcpXSA6IFtdO1xuICAgIGlmICh0aGlzLiNpc0N1c3RvbSAmJiBhY3RpdmVEYXkpIHtcbiAgICAgIGNvbnN0IGN1c3RvbUNhbGVuZGFyRXZlbnRzOiBhbnkgPSBhY3RpdmVEYXkucXVlcnlTZWxlY3RvckFsbCgnLmV2ZW50cy1jb250YWluZXIgPiBbc2xvdF0nKTtcbiAgICAgIGV2ZW50RWxlbXMgPSBhY3RpdmVEYXkgPyBbLi4uY3VzdG9tQ2FsZW5kYXJFdmVudHNdIDogW107XG4gICAgfVxuICAgIGNvbnN0IGV2ZW50cyA9IGV2ZW50RWxlbXMubWFwKChlbGVtOiBhbnkpID0+IGVsZW0uZXZlbnREYXRhKTtcblxuICAgIHJldHVybiBldmVudHM7XG4gIH1cblxuICAvKipcbiAgICogVHJpZ2dlciBzZWxlY3RlZCBldmVudCB3aXRoIGN1cnJlbnQgcGFyYW1zXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgI3RyaWdnZXJTZWxlY3RlZEV2ZW50KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzRGlzYWJsZWRCeURhdGUodGhpcy5hY3RpdmVEYXRlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGFyZ3M6IElkc0RheXNlbGVjdGVkRXZlbnQgPSB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgZWxlbTogdGhpcyxcbiAgICAgICAgZGF0ZTogdGhpcy5hY3RpdmVEYXRlLFxuICAgICAgICB1c2VSYW5nZTogdGhpcy51c2VSYW5nZSxcbiAgICAgICAgcmFuZ2VTdGFydDogdGhpcy51c2VSYW5nZSAmJiB0aGlzLnJhbmdlU2V0dGluZ3Muc3RhcnQgPyBuZXcgRGF0ZSh0aGlzLnJhbmdlU2V0dGluZ3Muc3RhcnQpIDogbnVsbCxcbiAgICAgICAgcmFuZ2VFbmQ6IHRoaXMudXNlUmFuZ2UgJiYgdGhpcy5yYW5nZVNldHRpbmdzLmVuZCA/IG5ldyBEYXRlKHRoaXMucmFuZ2VTZXR0aW5ncy5lbmQpIDogbnVsbCxcbiAgICAgICAgdmFsdWU6IHRoaXMuZ2V0Rm9ybWF0dGVkRGF0ZSh0aGlzLmFjdGl2ZURhdGUpXG4gICAgICB9LFxuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWUsXG4gICAgICBjb21wb3NlZDogdHJ1ZVxuICAgIH07XG5cbiAgICAvLyBGb3IgZnVsbC1zaXplZCBub24gZGF0ZXBpY2tlciBtb250aCB2aWV3XG4gICAgaWYgKCF0aGlzLmNvbXBhY3QgJiYgIXRoaXMuaXNEYXRlUGlja2VyKSB7XG4gICAgICBhcmdzLmRldGFpbC5ldmVudHMgPSB0aGlzLmdldEFjdGl2ZURheUV2ZW50cygpO1xuICAgIH1cblxuICAgIHRoaXMudHJpZ2dlckV2ZW50KCdkYXlzZWxlY3RlZCcsIHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBzZWxlY3RhYmxlIGF0dHJpYnV0ZSB0byBhY3RpdmUgZGF5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5ZWFyIGEgZ2l2ZW4geWVhclxuICAgKiBAcGFyYW0ge251bWJlcn0gbW9udGggYSBnaXZlbiBtb250aFxuICAgKiBAcGFyYW0ge251bWJlcn0gZGF5IGEgZ2l2ZW4gZGF5XG4gICAqL1xuICBzZWxlY3REYXkoeWVhcj86IGFueSwgbW9udGg/OiBhbnksIGRheT86IGFueSk6IHZvaWQge1xuICAgIC8vIENsZWFyIGJlZm9yZVxuICAgIHRoaXMuI21ha2VBbGxEZXNlbGVjdGVkKCk7XG4gICAgY29uc3Qgc2VsZWN0ZWRRdWVyeSA9IGB0ZFtkYXRhLXllYXI9XCIke3llYXJ9XCJdW2RhdGEtbW9udGg9XCIke21vbnRofVwiXVtkYXRhLWRheT1cIiR7ZGF5fVwiXWA7XG4gICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLmNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcjxIVE1MVGFibGVDZWxsRWxlbWVudD4oc2VsZWN0ZWRRdWVyeSk7XG4gICAgaWYgKHNlbGVjdGVkKSB0aGlzLiNtYWtlU2VsZWN0ZWQoc2VsZWN0ZWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1ha2VzIGEgc3BlY2lmaWVkIGRheSBpbiB0aGUgTW9udGggVmlldyB0YWJsZSBhcHBlYXIgXCJzZWxlY3RlZFwiXG4gICAqIEBwYXJhbSB7SFRNTFRhYmxlQ2VsbEVsZW1lbnR9IGVsZW0gdGhlIGVsZW1lbnQgdG8gbWFrZSBhcHBlYXIgXCJzZWxlY3RlZFwiXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgI21ha2VTZWxlY3RlZChlbGVtOiBIVE1MVGFibGVDZWxsRWxlbWVudCk6IHZvaWQge1xuICAgIGlmICghZWxlbSkgcmV0dXJuO1xuICAgIGVsZW0uc2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuVEFCSU5ERVgsICcwJyk7XG4gICAgZWxlbS5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAndHJ1ZScpO1xuICAgIGVsZW0uc2V0QXR0cmlidXRlKCdyb2xlJywgJ2dyaWRjZWxsJyk7XG4gICAgZWxlbS5jbGFzc0xpc3QuYWRkKCdpcy1zZWxlY3RlZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1ha2VzIGEgc3BlY2lmaWVkIGRheSBpbiB0aGUgTW9udGggVmlldyB0YWJsZSBhcHBlYXIgXCJzZWxlY3RlZFwiXG4gICAqIEBwYXJhbSB7SFRNTFRhYmxlQ2VsbEVsZW1lbnR9IGVsZW0gdGhlIGVsZW1lbnQgdG8gbWFrZSBhcHBlYXIgXCJzZWxlY3RlZFwiXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgI21ha2VEZXNlbGVjdGVkKGVsZW06IEhUTUxUYWJsZUNlbGxFbGVtZW50KTogdm9pZCB7XG4gICAgaWYgKCFlbGVtKSByZXR1cm47XG4gICAgZWxlbS5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlcy5UQUJJTkRFWCk7XG4gICAgZWxlbS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnKTtcbiAgICBlbGVtLnNldEF0dHJpYnV0ZSgncm9sZScsICdsaW5rJyk7XG4gICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1zZWxlY3RlZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyBhbGwgcHJldmlvdXNseS1zZWxlY3RlZCBkYXlzIGZyb20gdGhlIE1vbnRoIFZpZXdcbiAgICovXG4gICNtYWtlQWxsRGVzZWxlY3RlZCgpOiB2b2lkIHtcbiAgICB0aGlzLmNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvckFsbDxIVE1MVGFibGVDZWxsRWxlbWVudD4oJ3RkLmlzLXNlbGVjdGVkJyk/LmZvckVhY2goKGl0ZW06IEhUTUxUYWJsZUNlbGxFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLiNtYWtlRGVzZWxlY3RlZChpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIG9yIG5vdCBpdCBzaG91bGQgc2hvdyByYW5nZSBvZiBkYXRlcyBpbnN0ZWFkIG9mIG9uZSBtb250aCB2aWV3XG4gICAqIEByZXR1cm5zIHtib29sZWFufSBzdGFydERhdGUgYW5kIGVuZERhdGUgYXJlIHNldFxuICAgKi9cbiAgI2lzRGlzcGxheVJhbmdlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBpc1ZhbGlkRGF0ZSh0aGlzLnN0YXJ0RGF0ZSlcbiAgICAgICYmIGlzVmFsaWREYXRlKHRoaXMuZW5kRGF0ZSlcbiAgICAgICYmICh0aGlzLmVuZERhdGUgYXMgRGF0ZSkgPj0gKHRoaXMuc3RhcnREYXRlIGFzIERhdGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciB0byBjaGVjayBpZiB0aGUgbW9udGggaGFzIGEgZGF5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkYXkgdG8gY2hlY2tcbiAgICogQHJldHVybnMge251bWJlcn0gZGF5IG9mIHRoZSBtb250aCBlaXRoZXIgYWN0aXZlIG9yIGZpcnN0XG4gICAqL1xuICAjZ2V0RGF5SW5Nb250aChkYXk6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgbnVtYmVyT2ZEYXlzID0gZGF5c0luTW9udGgodGhpcy55ZWFyLCB0aGlzLm1vbnRoKTtcblxuICAgIHJldHVybiBkYXkgPiBudW1iZXJPZkRheXMgPyAxIDogZGF5O1xuICB9XG5cbiAgLyoqXG4gICAqIEl0ZXJhdGUgbGVnZW5kIGl0ZW1zIHdpdGggY29sb3IgZGF0YSBhbmQgYWRkIGNvbG9yIGNzcyB2YXJpYWJsZVxuICAgKi9cbiAgI2NvbG9yVG9WYXIoKTogdm9pZCB7XG4gICAgdGhpcy5jb250YWluZXI/LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNvbG9yXScpXG4gICAgICAuZm9yRWFjaCgoZWw6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBjb2xvciA9IGVsLmRhdGFzZXQuY29sb3I7XG4gICAgICAgIGNvbnN0IGlzSGV4ID0gY29sb3I/LmluY2x1ZGVzKCcjJyk7XG5cbiAgICAgICAgaWYgKGNvbG9yKSB7XG4gICAgICAgICAgZWwuc3R5bGUgPSBgLS1sZWdlbmQtY29sb3I6ICR7aXNIZXggPyBjb2xvciA6IGB2YXIoLS1pZHMtY29sb3ItcGFsZXR0ZS0ke2NvbG9yfSlgfWA7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFF1ZXJpZXMgc2VsZWN0ZWQgZGF5IGNlbGwgZWxlbWVudFxuICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9IHNlbGVjdGVkIGRheVxuICAgKi9cbiAgZ2V0U2VsZWN0ZWREYXkoKTogSFRNTFRhYmxlQ2VsbEVsZW1lbnQgfCBudWxsIHtcbiAgICBjb25zdCBzZWxlY3RlZFF1ZXJ5ID0gYHRkW2RhdGEteWVhcj1cIiR7dGhpcy55ZWFyfVwiXVtkYXRhLW1vbnRoPVwiJHt0aGlzLm1vbnRofVwiXVtkYXRhLWRheT1cIiR7dGhpcy5kYXl9XCJdYDtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI/LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0ZWRRdWVyeSkgfHwgbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb2N1c2VzIHRoZSBhY3RpdmUvc2VsZWN0ZWQgZGF5XG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgZm9jdXMoKTogdm9pZCB7XG4gICAgY29uc3Qgc2VsZWN0ZWREYXkgPSB0aGlzLmdldFNlbGVjdGVkRGF5KCk7XG4gICAgaWYgKHNlbGVjdGVkRGF5KSB7XG4gICAgICBjb25zdCBpc0Rpc2FibGVkID0gc2VsZWN0ZWREYXkuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1kaXNhYmxlZCcpO1xuICAgICAgaWYgKCFpc0Rpc2FibGVkKSB7XG4gICAgICAgIHRoaXMuI21ha2VBbGxEZXNlbGVjdGVkKCk7XG4gICAgICAgIHRoaXMuI21ha2VTZWxlY3RlZChzZWxlY3RlZERheSk7XG4gICAgICAgIHNlbGVjdGVkRGF5LmZvY3VzKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEluaGVyaXRlZCBmcm9tIGBJZHNEYXRlQXR0cmlidXRlTWl4aW5gXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgb25GaXJzdERheU9mV2Vla0NoYW5nZSgpIHtcbiAgICBpZiAodGhpcy5jb250YWluZXIpIHRoaXMuI3JlbmRlck1vbnRoKCk7XG4gIH1cblxuICAvKipcbiAgICogSW5oZXJpdGVkIGZyb20gYElkc0RhdGVBdHRyaWJ1dGVNaXhpbmBcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBvbk1vbnRoQ2hhbmdlKCkge1xuICAgIGlmICghdGhpcy5jb250YWluZXIpIHJldHVybjtcblxuICAgIC8vIE1vbnRoIGNoYW5nZSBpbiByYW5nZSBjYWxlbmRhciBkb2Vzbid0IHRyaWdnZXIgYSByZXJlbmRlciwganVzdCBzZWxlY3RzIGEgZGF5XG4gICAgaWYgKHRoaXMuI2lzRGlzcGxheVJhbmdlKCkpIHtcbiAgICAgIHRoaXMuc2VsZWN0RGF5KHRoaXMueWVhciwgdGhpcy5tb250aCwgdGhpcy5kYXkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiNyZW5kZXJNb250aCgpO1xuICAgICAgdGhpcy4jcmVuZGVyUmFuZ2VTZWxlY3Rpb24oKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW5oZXJpdGVkIGZyb20gYElkc0RhdGVBdHRyaWJ1dGVNaXhpbmBcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBvblllYXJDaGFuZ2UoKSB7XG4gICAgaWYgKCF0aGlzLmNvbnRhaW5lcikgcmV0dXJuO1xuXG4gICAgLy8gWWVhciBjaGFuZ2UgaW4gcmFuZ2UgY2FsZW5kYXIgZG9lc24ndCB0cmlnZ2VyIGEgcmVyZW5kZXIsIGp1c3Qgc2VsZWN0cyBhIGRheVxuICAgIGlmICh0aGlzLiNpc0Rpc3BsYXlSYW5nZSgpKSB7XG4gICAgICB0aGlzLnNlbGVjdERheSh0aGlzLnllYXIsIHRoaXMubW9udGgsIHRoaXMuZGF5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4jcmVuZGVyTW9udGgoKTtcbiAgICAgIHRoaXMuI3JlbmRlclJhbmdlU2VsZWN0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEluaGVyaXRlZCBmcm9tIGBJZHNEYXRlQXR0cmlidXRlTWl4aW5gXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBudW1iZXJWYWwgbmV3IHZhbHVlXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsaWRhdGVzIHRydWUgaWYgdGhlIG5ldyB2YWx1ZSBwYXNzZWQgaXMgdmFsaWRcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBvbkRheUNoYW5nZShudW1iZXJWYWw6IG51bWJlciwgdmFsaWRhdGVzOiBib29sZWFuKSB7XG4gICAgaWYgKCF0aGlzLmNvbnRhaW5lcikgcmV0dXJuO1xuXG4gICAgaWYgKCEodGhpcy5yYW5nZVNldHRpbmdzLnN0YXJ0IHx8IHRoaXMudXNlUmFuZ2UpICYmICF0aGlzLmlzRGF0ZVBpY2tlcikge1xuICAgICAgdGhpcy5zZWxlY3REYXkodGhpcy55ZWFyLCB0aGlzLm1vbnRoLCB2YWxpZGF0ZXMgPyBudW1iZXJWYWwgOiB0aGlzLmRheSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHN0YXJ0LWRhdGUgYXR0cmlidXRlXG4gICAqIEByZXR1cm5zIHtEYXRlIHwgbnVsbH0gc3RhcnREYXRlIGRhdGUgcGFyc2VkIGZyb20gYXR0cmlidXRlIHZhbHVlXG4gICAqL1xuICBnZXQgc3RhcnREYXRlKCk6IERhdGUgfCBudWxsIHtcbiAgICBjb25zdCBhdHRyVmFsID0gdGhpcy5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5TVEFSVF9EQVRFKSA/PyAnJztcbiAgICBjb25zdCBhdHRyRGF0ZSA9IG5ldyBEYXRlKGF0dHJWYWwpO1xuXG4gICAgaWYgKGF0dHJWYWwgJiYgaXNWYWxpZERhdGUoYXR0ckRhdGUpKSB7XG4gICAgICByZXR1cm4gYXR0ckRhdGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHN0YXJ0IG9mIHRoZSByYW5nZSB0byBzaG93XG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgRGF0ZSB8IG51bGx9IHZhbCBzdGFydERhdGUgcGFyYW0gdmFsdWVcbiAgICovXG4gIHNldCBzdGFydERhdGUodmFsOiBzdHJpbmcgfCBEYXRlIHwgbnVsbCkge1xuICAgIGlmICh2YWwpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuU1RBUlRfREFURSwgU3RyaW5nKHZhbCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGVzLlNUQVJUX0RBVEUpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbnRhaW5lcikge1xuICAgICAgdGhpcy4jcmVuZGVyTW9udGgoKTtcbiAgICAgIHRoaXMuI2F0dGFjaEtleWJvYXJkTGlzdGVuZXJzKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGVuZC1kYXRlIGF0dHJpYnV0ZVxuICAgKiBAcmV0dXJucyB7RGF0ZXxudWxsfSBlbmREYXRlIGRhdGUgcGFyc2VkIGZyb20gYXR0cmlidXRlIHZhbHVlXG4gICAqL1xuICBnZXQgZW5kRGF0ZSgpOiBEYXRlIHwgbnVsbCB7XG4gICAgY29uc3QgYXR0clZhbCA9IHRoaXMuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuRU5EX0RBVEUpID8/ICcnO1xuICAgIGNvbnN0IGF0dHJEYXRlID0gbmV3IERhdGUoYXR0clZhbCk7XG5cbiAgICBpZiAoYXR0clZhbCAmJiBpc1ZhbGlkRGF0ZShhdHRyRGF0ZSkpIHtcbiAgICAgIHJldHVybiBhdHRyRGF0ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgZW5kIG9mIHRoZSByYW5nZSB0byBzaG93XG4gICAqIEBwYXJhbSB7RGF0ZSB8IHN0cmluZyB8IG51bGx9IHZhbCBlbmREYXRlIHBhcmFtIHZhbHVlXG4gICAqL1xuICBzZXQgZW5kRGF0ZSh2YWw6IERhdGUgfCBzdHJpbmcgfCBudWxsKSB7XG4gICAgaWYgKHZhbCkge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5FTkRfREFURSwgU3RyaW5nKHZhbCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGVzLkVORF9EQVRFKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb250YWluZXIpIHtcbiAgICAgIHRoaXMuI3JlbmRlck1vbnRoKCk7XG4gICAgICB0aGlzLiNhdHRhY2hLZXlib2FyZExpc3RlbmVycygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBjb21wYWN0IGF0dHJpYnV0ZVxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gY29tcGFjdCBwYXJhbSBjb252ZXJ0ZWQgdG8gYm9vbGVhbiBmcm9tIGF0dHJpYnV0ZSB2YWx1ZVxuICAgKi9cbiAgZ2V0IGNvbXBhY3QoKTogYm9vbGVhbiB7XG4gICAgY29uc3QgYXR0clZhbCA9IHRoaXMuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuQ09NUEFDVCk7XG5cbiAgICByZXR1cm4gc3RyaW5nVG9Cb29sKGF0dHJWYWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB3aGV0aGVyIG9yIG5vdCB0aGUgY29tcG9uZW50IHNob3VsZCBiZSBjb21wYWN0IHZpZXdcbiAgICogQHBhcmFtIHtzdHJpbmd8Ym9vbGVhbnxudWxsfSB2YWwgY29tcGFjdCBwYXJhbSB2YWx1ZVxuICAgKi9cbiAgc2V0IGNvbXBhY3QodmFsOiBzdHJpbmcgfCBib29sZWFuIHwgbnVsbCkge1xuICAgIGNvbnN0IGJvb2xWYWwgPSBzdHJpbmdUb0Jvb2wodmFsKTtcblxuICAgIGlmIChib29sVmFsKSB7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLkNPTVBBQ1QsICd0cnVlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZXMuQ09NUEFDVCk7XG4gICAgfVxuXG4gICAgLy8gVG9nZ2xlIGNvbnRhaW5lciBDU1MgY2xhc3NcbiAgICB0aGlzLmNvbnRhaW5lcj8uY2xhc3NMaXN0LnRvZ2dsZSgnaXMtZnVsbHNpemUnLCAhYm9vbFZhbCk7XG4gICAgdGhpcy5jb250YWluZXI/LmNsYXNzTGlzdC50b2dnbGUoJ2lzLWNvbXBhY3QnLCBib29sVmFsKTtcblxuICAgIGlmICh0aGlzLmNvbnRhaW5lcikge1xuICAgICAgLy8gUmVuZGVyIHJlbGF0ZWQgdmlld3NcbiAgICAgIHRoaXMuI3JlbmRlcldlZWtEYXlzKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGlzLWRhdGUtcGlja2VyIGF0dHJpYnV0ZVxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gaXNEYXRlUGlja2VyIHBhcmFtIGNvbnZlcnRlZCB0byBib29sZWFuIGZyb20gYXR0cmlidXRlIHZhbHVlXG4gICAqL1xuICBnZXQgaXNEYXRlUGlja2VyKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGF0dHJWYWwgPSB0aGlzLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLklTX0RBVEVQSUNLRVIpO1xuXG4gICAgcmV0dXJuIHN0cmluZ1RvQm9vbChhdHRyVmFsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgd2hldGhlciBvciBub3QgdGhlIGNvbXBvbmVudCBpcyB1c2VkIGluIGRhdGVwaWNrZXIgcG9wdXBcbiAgICogQHBhcmFtIHtzdHJpbmd8Ym9vbGVhbnxudWxsfSB2YWwgY29tcGFjdCBwYXJhbSB2YWx1ZVxuICAgKi9cbiAgc2V0IGlzRGF0ZVBpY2tlcih2YWw6IHN0cmluZyB8IGJvb2xlYW4gfCBudWxsKSB7XG4gICAgY29uc3QgYm9vbFZhbCA9IHN0cmluZ1RvQm9vbCh2YWwpO1xuXG4gICAgaWYgKGJvb2xWYWwpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuSVNfREFURVBJQ0tFUiwgJ3RydWUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlcy5JU19EQVRFUElDS0VSKTtcbiAgICB9XG5cbiAgICAvLyBUb2dnbGUgY29udGFpbmVyIENTUyBjbGFzc1xuICAgIHRoaXMuY29udGFpbmVyPy5jbGFzc0xpc3QudG9nZ2xlKCdpcy1kYXRlLXBpY2tlcicsIGJvb2xWYWwpO1xuICB9XG5cbiAgb25EaXNhYmxlU2V0dGluZ3NDaGFuZ2UoKSB7XG4gICAgdGhpcy4jcmVuZGVyTW9udGgoKTtcbiAgfVxuXG4gIG9uTGVnZW5kU2V0dGluZ3NDaGFuZ2UodmFsOiBJZHNMZWdlbmRTZXR0aW5ncykge1xuICAgIGlmICghdGhpcy5jb250YWluZXIpIHJldHVybjtcblxuICAgIHRoaXMuI3JlbmRlck1vbnRoKCk7XG4gICAgdGhpcy4jcmVuZGVyTGVnZW5kKCk7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0W3ZhbCAmJiB2YWwubGVuZ3RoID8gJ2FkZCcgOiAncmVtb3ZlJ10oJ2hhcy1sZWdlbmQnKTtcbiAgfVxuXG4gIG9uUmFuZ2VTZXR0aW5nc0NoYW5nZSh2YWw6IElkc1JhbmdlU2V0dGluZ3MpIHtcbiAgICBpZiAoIXRoaXMuY29udGFpbmVyKSByZXR1cm47XG5cbiAgICBpZiAodGhpcy51c2VSYW5nZSAmJiB2YWw/LnN0YXJ0KSB7XG4gICAgICB0aGlzLnNlbGVjdERheSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiNjbGVhclJhbmdlQ2xhc3NlcygpO1xuICAgICAgdGhpcy5zZWxlY3REYXkodGhpcy55ZWFyLCB0aGlzLm1vbnRoLCB0aGlzLmRheSk7XG4gICAgfVxuXG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZSgncmFuZ2Utc2VsZWN0LXdlZWsnLCB0aGlzLnJhbmdlU2V0dGluZ3Muc2VsZWN0V2Vlayk7XG4gICAgdGhpcy4jcmVuZGVyUmFuZ2VTZWxlY3Rpb24oKTtcbiAgfVxuXG4gIG9uVXNlUmFuZ2VDaGFuZ2UobmV3VmFsdWU6IGJvb2xlYW4pIHtcbiAgICBpZiAobmV3VmFsdWUpIHtcbiAgICAgIHRoaXMuc2VsZWN0RGF5KCk7XG4gICAgICB0aGlzLiNyZW5kZXJSYW5nZVNlbGVjdGlvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiNjbGVhclJhbmdlQ2xhc3NlcygpO1xuICAgICAgdGhpcy5zZWxlY3REYXkodGhpcy55ZWFyLCB0aGlzLm1vbnRoLCB0aGlzLmRheSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHNob3ctcGlja2xpc3QteWVhciBhdHRyaWJ1dGUsIGRlZmF1bHQgaXMgdHJ1ZVxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gc2hvd1BpY2tsaXN0WWVhciBwYXJhbSBjb252ZXJ0ZWQgdG8gYm9vbGVhbiBmcm9tIGF0dHJpYnV0ZSB2YWx1ZVxuICAgKi9cbiAgZ2V0IHNob3dQaWNrbGlzdFllYXIoKTogYm9vbGVhbiB7XG4gICAgY29uc3QgYXR0clZhbCA9IHRoaXMuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuU0hPV19QSUNLTElTVF9ZRUFSKTtcblxuICAgIGlmIChhdHRyVmFsKSB7XG4gICAgICByZXR1cm4gc3RyaW5nVG9Cb29sKGF0dHJWYWwpO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgb3Igbm90IHRvIHNob3cgYSBsaXN0IG9mIHllYXJzIGluIHRoZSB0b29sYmFyIGRhdGVwaWNrZXIgcGlja2xpc3RcbiAgICogQHBhcmFtIHtzdHJpbmcgfCBib29sZWFuIHwgbnVsbH0gdmFsIHZhbHVlIHRvIGJlIHNldCBhcyBzaG93LXBpY2tsaXN0LXllYXIgYXR0cmlidXRlIGNvbnZlcnRlZCB0byBib29sZWFuXG4gICAqL1xuICBzZXQgc2hvd1BpY2tsaXN0WWVhcih2YWw6IHN0cmluZyB8IGJvb2xlYW4gfCBudWxsKSB7XG4gICAgY29uc3QgYm9vbFZhbCA9IHN0cmluZ1RvQm9vbCh2YWwpO1xuXG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5TSE9XX1BJQ0tMSVNUX1lFQVIsIFN0cmluZyhib29sVmFsKSk7XG4gIH1cblxuICAvKipcbiAgICogc2hvdy1waWNrbGlzdC1tb250aCBhdHRyaWJ1dGUsIGRlZmF1bHQgaXMgdHJ1ZVxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gc2hvd1BpY2tsaXN0TW9udGggcGFyYW0gY29udmVydGVkIHRvIGJvb2xlYW4gZnJvbSBhdHRyaWJ1dGUgdmFsdWVcbiAgICovXG4gIGdldCBzaG93UGlja2xpc3RNb250aCgpOiBib29sZWFuIHtcbiAgICBjb25zdCBhdHRyVmFsID0gdGhpcy5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5TSE9XX1BJQ0tMSVNUX01PTlRIKTtcblxuICAgIGlmIChhdHRyVmFsKSB7XG4gICAgICByZXR1cm4gc3RyaW5nVG9Cb29sKGF0dHJWYWwpO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgb3Igbm90IHRvIHNob3cgYSBsaXN0IG9mIG1vbnRocyBpbiB0aGUgdG9vbGJhciBkYXRlcGlja2VyIHBpY2tsaXN0XG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgYm9vbGVhbiB8IG51bGx9IHZhbCB2YWx1ZSB0byBiZSBzZXQgYXMgc2hvdy1waWNrbGlzdC1tb250aCBhdHRyaWJ1dGUgY29udmVydGVkIHRvIGJvb2xlYW5cbiAgICovXG4gIHNldCBzaG93UGlja2xpc3RNb250aCh2YWw6IHN0cmluZyB8IGJvb2xlYW4gfCBudWxsKSB7XG4gICAgY29uc3QgYm9vbFZhbCA9IHN0cmluZ1RvQm9vbCh2YWwpO1xuXG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5TSE9XX1BJQ0tMSVNUX01PTlRILCBTdHJpbmcoYm9vbFZhbCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIHNob3ctcGlja2xpc3Qtd2VlayBhdHRyaWJ1dGVcbiAgICogQHJldHVybnMge2Jvb2xlYW59IHNob3dQaWNrbGlzdFdlZWsgcGFyYW0gY29udmVydGVkIHRvIGJvb2xlYW4gZnJvbSBhdHRyaWJ1dGUgdmFsdWVcbiAgICovXG4gIGdldCBzaG93UGlja2xpc3RXZWVrKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBzdHJpbmdUb0Jvb2wodGhpcy5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5TSE9XX1BJQ0tMSVNUX1dFRUspKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIG9yIG5vdCB0byBzaG93IHdlZWsgbnVtYmVycyBpbiB0aGUgdG9vbGJhciBkYXRlcGlja2VyIHBpY2tsaXN0XG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgYm9vbGVhbiB8IG51bGx9IHZhbCB2YWx1ZSB0byBiZSBzZXQgYXMgc2hvdy1waWNrbGlzdC13ZWVrIGF0dHJpYnV0ZSBjb252ZXJ0ZWQgdG8gYm9vbGVhblxuICAgKi9cbiAgc2V0IHNob3dQaWNrbGlzdFdlZWsodmFsOiBzdHJpbmcgfCBib29sZWFuIHwgbnVsbCkge1xuICAgIGNvbnN0IGJvb2xWYWwgPSBzdHJpbmdUb0Jvb2wodmFsKTtcblxuICAgIGlmIChib29sVmFsKSB7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLlNIT1dfUElDS0xJU1RfV0VFSywgJ3RydWUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlcy5TSE9XX1BJQ0tMSVNUX1dFRUspO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgbW9udGggdmlldyBjYWxlbmRhciBldmVudHMgYW5kIG92ZXJmbG93IGVsZW1lbnRzXG4gICAqL1xuICByZW1vdmVBbGxFdmVudHMoKTogdm9pZCB7XG4gICAgdGhpcy5jb250YWluZXJcbiAgICAgID8ucXVlcnlTZWxlY3RvckFsbCgnLmV2ZW50cy1jb250YWluZXInKVxuICAgICAgLmZvckVhY2goKGNvbnRhaW5lcjogRWxlbWVudCkgPT4geyBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7IH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdyb3VwcyBjYWxlbmRhciBldmVudHMgYnkgZGF5IHVzaW5nIGRhdGVLZXkgYXMga2V5XG4gICAqIEBwYXJhbSB7Q2FsZW5kYXJFdmVudERhdGFbXX0gZXZlbnRzIGNhbGVuZGFyIGV2ZW50cyBkYXRhXG4gICAqIEByZXR1cm5zIHtSZWNvcmQ8c3RyaW5nLCBBcnJheTxDYWxlbmRhckV2ZW50RGF0YT4+fSBjb2xsZWN0aW9uIG9mIGNhbGVuZGFyIGV2ZW50c1xuICAgKi9cbiAgI2dyb3VwRXZlbnRzQnlEYXkoZXZlbnRzOiBDYWxlbmRhckV2ZW50RGF0YVtdKTogUmVjb3JkPHN0cmluZywgQXJyYXk8Q2FsZW5kYXJFdmVudERhdGE+PiB7XG4gICAgY29uc3QgZGF5RXZlbnRzOiBSZWNvcmQ8c3RyaW5nLCBBcnJheTxDYWxlbmRhckV2ZW50RGF0YT4+ID0ge307XG5cbiAgICBldmVudHMuZm9yRWFjaCgoZXZlbnQ6IENhbGVuZGFyRXZlbnREYXRhKSA9PiB7XG4gICAgICBjb25zdCBkYXRlS2V5ID0gdGhpcy5nZW5lcmF0ZURhdGVLZXkobmV3IERhdGUoZXZlbnQuc3RhcnRzKSkudG9TdHJpbmcoKTtcbiAgICAgIGlmICghZGF5RXZlbnRzW2RhdGVLZXldKSBkYXlFdmVudHNbZGF0ZUtleV0gPSBbXTtcbiAgICAgIGRheUV2ZW50c1tkYXRlS2V5XS5wdXNoKGV2ZW50KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBkYXlFdmVudHM7XG4gIH1cblxuICAvKipcbiAgICogRmlsdGVyIGNhbGVuZGFyIGV2ZW50cyBkYXRhIGJ5IGN1cnJlbnQgbW9udGhcbiAgICogQHBhcmFtIHtDYWxlbmRhckV2ZW50RGF0YVtdfSBkYXRhIGNhbGVuZGFyIGV2ZW50cyBkYXRhXG4gICAqIEByZXR1cm5zIHtDYWxlbmRhckV2ZW50RGF0YVtdfSBjYWxlbmRhciBldmVudHMgd2l0aGluIG1vbnRoXG4gICAqL1xuICBmaWx0ZXJFdmVudHNCeU1vbnRoKGRhdGE6IENhbGVuZGFyRXZlbnREYXRhW10gPSBbXSk6IENhbGVuZGFyRXZlbnREYXRhW10ge1xuICAgIHJldHVybiBkYXRhLmZpbHRlcigoZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IGV2ZW50U3RhcnQgPSBuZXcgRGF0ZShldmVudC5zdGFydHMpO1xuICAgICAgcmV0dXJuIHRoaXMuc3RhcnREYXRlICYmIHRoaXMuZW5kRGF0ZSA/IHRoaXMuc3RhcnREYXRlIDw9IGV2ZW50U3RhcnQgJiYgZXZlbnRTdGFydCA8IHRoaXMuZW5kRGF0ZVxuICAgICAgICA6IGV2ZW50U3RhcnQuZ2V0TW9udGgoKSA9PT0gdGhpcy5tb250aCAmJiBldmVudFN0YXJ0LmdldEZ1bGxZZWFyKCkgPT09IHRoaXMueWVhcjtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXIgQ2FsZW5kYXIgRXZlbnRzIGRhdGEgaW5zaWRlIG1vbnRoIHZpZXdcbiAgICogQHBhcmFtIHtib29sZWFufSBmb3JjZVJlbmRlciBza2lwIGRhdGEgZmV0Y2hcbiAgICovXG4gIGFzeW5jIHJlbmRlckV2ZW50c0RhdGEoZm9yY2VSZW5kZXIgPSBmYWxzZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghZm9yY2VSZW5kZXIgJiYgdHlwZW9mIHRoaXMuc3RhdGUuYmVmb3JlRXZlbnRzUmVuZGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjb25zdCBzdGFydERhdGUgPSB0aGlzLnN0YXJ0RGF0ZSB8fCBuZXcgRGF0ZSh0aGlzLnllYXIsIHRoaXMubW9udGgsIDEpO1xuICAgICAgY29uc3QgZW5kRGF0ZSA9IHRoaXMuZW5kRGF0ZSB8fCBuZXcgRGF0ZSh0aGlzLnllYXIsIHRoaXMubW9udGggKyAxLCAwKTtcbiAgICAgIHRoaXMuZXZlbnRzRGF0YSA9IGF3YWl0IHRoaXMuc3RhdGUuYmVmb3JlRXZlbnRzUmVuZGVyKHN0YXJ0RGF0ZSwgZW5kRGF0ZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5yZW1vdmVBbGxFdmVudHMoKTtcblxuICAgIGlmICghdGhpcy5zdGF0ZS5oYXNSZW5kZXJlZCB8fCAhdGhpcy5ldmVudHNEYXRhPy5sZW5ndGgpIHJldHVybjtcblxuICAgIGNvbnN0IGV2ZW50c0luUmFuZ2UgPSB0aGlzLmZpbHRlckV2ZW50c0J5TW9udGgodGhpcy5ldmVudHNEYXRhKTtcbiAgICBjb25zdCBtb250aEV2ZW50cyA9IHRoaXMuI2dyb3VwRXZlbnRzQnlEYXkoZXZlbnRzSW5SYW5nZSk7XG5cbiAgICBjb25zdCBjdXN0b21DYWxlbmRhckV2ZW50OiBhbnkgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJ1tzbG90PVwiY3VzdG9tQ2FsZW5kYXJFdmVudFwiXScpO1xuICAgIGZvciAoY29uc3QgZGF0ZUtleSBpbiBtb250aEV2ZW50cykge1xuICAgICAgaWYgKG1vbnRoRXZlbnRzLmhhc093blByb3BlcnR5KGRhdGVLZXkpKSB7XG4gICAgICAgIHRoaXMuI3JlbmRlckRheUV2ZW50cyhkYXRlS2V5LCBtb250aEV2ZW50c1tkYXRlS2V5XSwgY3VzdG9tQ2FsZW5kYXJFdmVudCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvdW50cyBudW1iZXIgb2YgZGF5cyBmb3IgY2FsZW5kYXIgZXZlbnRzXG4gICAqIEBwYXJhbSB7RGF0ZX0gc3RhcnQgc3RhcnQgZGF0ZVxuICAgKiBAcGFyYW0ge0RhdGV9IGVuZCBlbmQgZGF0ZVxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBkYXlzXG4gICAqL1xuICAjY291bnREYXlzKHN0YXJ0OiBEYXRlLCBlbmQ6IERhdGUpOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLmNlaWwoKGVuZC5nZXRUaW1lKCkgLSBzdGFydC5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIGNhbGVuZGFyIGV2ZW50cyB3aXRoaW4gY29ycmVzcG9uZGluZyBkYXRlJ3MgdGFibGUgY2VsbFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGF0ZUtleSBnZW5lcmF0ZWQgZGF0ZSBrZXlcbiAgICogQHBhcmFtIHtDYWxlbmRhckV2ZW50RGF0YVtdfSBldmVudHMgY2FsZW5kYXIgZXZlbnRzXG4gICAqIEBwYXJhbSB7YW55fSBjdXN0b21DYWxlbmRhckV2ZW50IGN1c3RvbSBjYWxlbmRhciBldmVudHNcbiAgICovXG4gICNyZW5kZXJEYXlFdmVudHMoZGF0ZUtleTogc3RyaW5nLCBldmVudHM6IENhbGVuZGFyRXZlbnREYXRhW10sIGN1c3RvbUNhbGVuZGFyRXZlbnQ/OiBhbnkpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuY29udGFpbmVyKSByZXR1cm47XG5cbiAgICBjb25zdCBldmVudHNDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcihgLmV2ZW50cy1jb250YWluZXJbZGF0YS1rZXk9XCIke2RhdGVLZXl9XCJdYCk7XG4gICAgY29uc3Qgb3JkZXJzID0gWy4uLihldmVudHNDb250YWluZXI/LmNoaWxkTm9kZXMpIHx8IFtdXS5tYXAoKGVsZW06IGFueSkgPT4gZWxlbS5vcmRlcik7XG4gICAgY29uc3QgYmFzZU9yZGVyID0gb3JkZXJzLmxlbmd0aCA/IE1hdGgubWF4KC4uLm9yZGVycykgKyAxIDogMDtcbiAgICBsZXQgaXNPdmVyZmxvd2luZyA9IGZhbHNlO1xuICAgIGV2ZW50cy5mb3JFYWNoKChldmVudDogQ2FsZW5kYXJFdmVudERhdGEsIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gbmV3IERhdGUoZXZlbnQuc3RhcnRzKTtcbiAgICAgIGNvbnN0IGVuZCA9IG5ldyBEYXRlKGV2ZW50LmVuZHMpO1xuICAgICAgY29uc3QgZGF5cyA9IHRoaXMuI2NvdW50RGF5cyhzdGFydCwgZW5kKSB8fCAxO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRheXM7IGkrKykge1xuICAgICAgICBjb25zdCBjYWxlbmRhckV2ZW50ID0gdGhpcy4jbmV3Q2FsZW5kYXJFdmVudChjdXN0b21DYWxlbmRhckV2ZW50KTtcbiAgICAgICAgY29uc3QgZXZlbnRUeXBlID0gdGhpcy5ldmVudFR5cGVzRGF0YT8uZmluZCgoZXQ6IENhbGVuZGFyRXZlbnRUeXBlRGF0YSkgPT4gZXQuaWQgPT09IGV2ZW50LnR5cGUpID8/IG51bGw7XG4gICAgICAgIGNvbnN0IGV2ZW50T3JkZXIgPSBiYXNlT3JkZXIgKyBpbmRleDtcbiAgICAgICAgY2FsZW5kYXJFdmVudC5ldmVudFR5cGVEYXRhID0gZXZlbnRUeXBlO1xuICAgICAgICBjYWxlbmRhckV2ZW50LmV2ZW50RGF0YSA9IGV2ZW50O1xuICAgICAgICBjYWxlbmRhckV2ZW50LmNzc0NsYXNzID0gWydpcy1tb250aC12aWV3J107XG4gICAgICAgIGNhbGVuZGFyRXZlbnQub3JkZXIgPSBldmVudE9yZGVyO1xuXG4gICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgIHN0YXJ0LnNldERhdGUoc3RhcnQuZ2V0RGF0ZSgpICsgMSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkYXkgPSBzdGFydC5nZXREYXRlKCk7XG4gICAgICAgIGNvbnN0IHllYXIgPSBzdGFydC5nZXRGdWxsWWVhcigpO1xuICAgICAgICBjb25zdCBtb250aCA9IHN0YXJ0LmdldE1vbnRoKCk7XG4gICAgICAgIGNhbGVuZGFyRXZlbnQuZGF0ZUtleSA9IGAke3llYXJ9JHttb250aH0ke2RheX1gO1xuICAgICAgICBjb25zdCBkYXRlQ2VsbCA9IHRoaXMuY29udGFpbmVyPy5xdWVyeVNlbGVjdG9yKGB0ZFtkYXRhLXllYXI9XCIke3llYXJ9XCJdW2RhdGEtbW9udGg9XCIke21vbnRofVwiXVtkYXRhLWRheT1cIiR7ZGF5fVwiXWApO1xuXG4gICAgICAgIGlmIChkYXRlQ2VsbCkge1xuICAgICAgICAgIC8vIG11bHRpIGRheSBldmVudHNcbiAgICAgICAgICBpZiAoZGF5cyA+IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4dHJhQ3NzID0gWydhbGwtZGF5J107XG5cbiAgICAgICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICAgIGV4dHJhQ3NzLnB1c2goJ2NhbGVuZGFyLWV2ZW50LXN0YXJ0Jyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGkgPT09IGRheXMgLSAxKSB7XG4gICAgICAgICAgICAgIGV4dHJhQ3NzLnB1c2goJ2NhbGVuZGFyLWV2ZW50LWVuZHMnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGV4dHJhQ3NzLnB1c2goJ2NhbGVuZGFyLWV2ZW50LWNvbnRpbnVlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhbGVuZGFyRXZlbnQuY3NzQ2xhc3MgPSBleHRyYUNzcztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBldmVudFlPZmZzZXQgPSB0aGlzLmdlbmVyYXRlWU9mZnNldChjYWxlbmRhckV2ZW50KTtcbiAgICAgICAgICBjYWxlbmRhckV2ZW50LnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLllfT0ZGU0VULCBgJHtldmVudFlPZmZzZXR9cHhgKTtcbiAgICAgICAgICAvLyBoaWRlIG92ZXJmbG93aW5nIGV2ZW50XG4gICAgICAgICAgaXNPdmVyZmxvd2luZyA9IHRoaXMuaXNFdmVudE92ZXJmbG93aW5nKGNhbGVuZGFyRXZlbnQpO1xuICAgICAgICAgIGNhbGVuZGFyRXZlbnQuaGlkZGVuID0gaXNPdmVyZmxvd2luZztcbiAgICAgICAgICBkYXRlQ2VsbC5xdWVyeVNlbGVjdG9yKCcuZXZlbnRzLWNvbnRhaW5lcicpPy5hcHBlbmRDaGlsZChjYWxlbmRhckV2ZW50IGFzIGFueSk7XG5cbiAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkYXRlQ2VsbC5xdWVyeVNlbGVjdG9yKCcuZXZlbnRzLWNvbnRhaW5lcicpO1xuICAgICAgICAgIHRoaXMudHJpZ2dlckV2ZW50KCdiZWZvcmVldmVudHJlbmRlcmVkJywgdGhpcywge1xuICAgICAgICAgICAgZGV0YWlsOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBlbGVtOiB0aGlzLFxuICAgICAgICAgICAgICBldmVudHM6IHRoaXMuZXZlbnRzRGF0YSxcbiAgICAgICAgICAgICAgZXZlbnQ6IGNhbGVuZGFyRXZlbnQsXG4gICAgICAgICAgICAgIGRhdGVDZWxsOiBjYWxlbmRhckV2ZW50LFxuICAgICAgICAgICAgICBjb250YWluZXJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBidWJibGVzOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29udGFpbmVyPy5hcHBlbmRDaGlsZChjYWxlbmRhckV2ZW50IGFzIGFueSk7XG4gICAgICAgICAgdGhpcy50cmlnZ2VyRXZlbnQoJ2FmdGVyZXZlbnRyZW5kZXJlZCcsIHRoaXMsIHtcbiAgICAgICAgICAgIGRldGFpbDpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgZWxlbTogdGhpcyxcbiAgICAgICAgICAgICAgZXZlbnRzOiB0aGlzLmV2ZW50c0RhdGEsXG4gICAgICAgICAgICAgIGV2ZW50OiBjYWxlbmRhckV2ZW50LFxuICAgICAgICAgICAgICBkYXRlQ2VsbDogY2FsZW5kYXJFdmVudCxcbiAgICAgICAgICAgICAgY29udGFpbmVyXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYnViYmxlczogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoaXNPdmVyZmxvd2luZyAmJiBldmVudHNDb250YWluZXIpIHtcbiAgICAgIHRoaXMuI3JlbmRlckV2ZW50c092ZXJmbG93KGV2ZW50c0NvbnRhaW5lciwgZGF0ZUtleSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgY2xpY2thYmxlIGV2ZW50IG92ZXJmbG93IGVsZW1lbnRcbiAgICogU3BlY2lmaWVzIG51bWJlciBvZiBjYWxlbmRhciBldmVudHMgb3ZlcmZsb3dpbmcgdGhlIGNvbnRhaW5lclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGV2ZW50c0NvbnRhaW5lciBkYXRlIHNwZWNpZmljIGV2ZW50IGNvbnRhaW5lciBlbGVtZWVudFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGF0ZUtleSBnZW5lcmF0ZWQgZGF0ZSBrZXlcbiAgICovXG4gICNyZW5kZXJFdmVudHNPdmVyZmxvdyhldmVudHNDb250YWluZXI6IGFueSwgZGF0ZUtleTogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKCFldmVudHNDb250YWluZXIpIHJldHVybjtcblxuICAgIGNvbnN0IGNhbGVuZGFyRXZlbnRzID0gWy4uLmV2ZW50c0NvbnRhaW5lci5jaGlsZE5vZGVzXTtcbiAgICBjb25zdCBoaWRkZW5FdmVudHMgPSBjYWxlbmRhckV2ZW50cy5maWx0ZXIoKGVsZW06IElkc0NhbGVuZGFyRXZlbnQpID0+IGVsZW0uaGlkZGVuKTtcbiAgICBjb25zdCB5ZWFyID0gZGF0ZUtleS5zdWJzdHJpbmcoMCwgNCk7XG4gICAgY29uc3QgbW9udGggPSBwYXJzZUludChkYXRlS2V5LnN1YnN0cmluZyg0LCA2KSkgKyAxO1xuICAgIGNvbnN0IGRheSA9IGRhdGVLZXkuc3Vic3RyaW5nKDYpO1xuICAgIGNvbnN0IGRhdGUgPSBgJHttb250aH0vJHtkYXl9LyR7eWVhcn1gO1xuICAgIGNvbnN0IHRtcGwgPSBgXG4gICAgICA8aWRzLXRleHQgZGF0YS1kYXRlPVwiJHtkYXRlfVwiIGNsYXNzPVwiZXZlbnRzLW92ZXJmbG93XCIgZm9udC1zaXplPVwiMTJcIj5cbiAgICAgICAgJHtoaWRkZW5FdmVudHMubGVuZ3RofSsgJHt0aGlzLmxvY2FsZUFQSS50cmFuc2xhdGUoJ01vcmUnKX1cbiAgICAgIDwvaWRzLXRleHQ+XG4gICAgYDtcblxuICAgIGV2ZW50c0NvbnRhaW5lci5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIHRtcGwpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBuZXcgSWRzQ2FsZW5kYXJFdmVudFxuICAgKiBAcGFyYW0ge0lkc0NhbGVuZGFyRXZlbnR9IGN1c3RvbUNhbGVuZGFyRXZlbnQgb3B0aW9uYWwgY3VzdG9tIGV2ZW50IHRvIHVzZSBpbnN0ZWFkIG9mIGRlZmF1bHRcbiAgICogQHJldHVybnMge0lkc0NhbGVuZGFyRXZlbnR9IGNhbGVuZGFyIGV2ZW50XG4gICAqL1xuICAjbmV3Q2FsZW5kYXJFdmVudChjdXN0b21DYWxlbmRhckV2ZW50PzogYW55KTogYW55IHtcbiAgICBpZiAoY3VzdG9tQ2FsZW5kYXJFdmVudD8ubmFtZSA9PT0gJ01vbnRoVmlld0NhbGVuZGFyRXZlbnRUZW1wbGF0ZScpIHtcbiAgICAgIGNvbnN0IGV2ZW50VGVtcGxhdGUgPSBjdXN0b21DYWxlbmRhckV2ZW50LmFzc2lnbmVkTm9kZXMoKVswXTtcbiAgICAgIGlmIChldmVudFRlbXBsYXRlKSB7XG4gICAgICAgIHRoaXMuI2lzQ3VzdG9tID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGV2ZW50VGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IElkc0NhbGVuZGFyRXZlbnQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3RzIHRoZSBNb250aCBWaWV3J3MgY3VycmVudCBkYXkgZnJvbSBhIHN0cmluZ2lmaWVkIGRhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBkYXRlXG4gICAqL1xuICBzZWxlY3REYXlGcm9tVmFsdWUodmFsOiBzdHJpbmcpIHtcbiAgICBsZXQgdXNhYmxlVmFsdWUgPSB2YWw7XG4gICAgaWYgKHRoaXMudXNlUmFuZ2UgJiYgdGhpcy5yYW5nZVNldHRpbmdzLnNlcGFyYXRvciAmJiB0aGlzLnJhbmdlU2V0dGluZ3MuZW5kKSB7XG4gICAgICB1c2FibGVWYWx1ZSA9IHJlbW92ZURhdGVSYW5nZSh2YWwsIHRoaXMucmFuZ2VTZXR0aW5ncy5zZXBhcmF0b3IpO1xuICAgIH1cblxuICAgIGNvbnN0IHsgbW9udGgsIGRheSwgeWVhciB9ID0gZ2V0RGF0ZVZhbHVlc0Zyb21TdHJpbmcodXNhYmxlVmFsdWUpO1xuICAgIHRoaXMuZGF5ID0gZGF5O1xuICAgIHRoaXMubW9udGggPSBtb250aDtcbiAgICB0aGlzLnllYXIgPSB5ZWFyO1xuXG4gICAgaWYgKHRoaXMudXNlUmFuZ2UpIHtcbiAgICAgIHRoaXMuc2VsZWN0RGF5KCk7XG4gICAgICB0aGlzLiNyZW5kZXJSYW5nZVNlbGVjdGlvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiNjbGVhclJhbmdlQ2xhc3NlcygpO1xuICAgICAgdGhpcy5zZWxlY3REYXkoeWVhciwgbW9udGgsIGRheSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZ1bmN0aW9uIHRoYXQgZmlyZXMgYXMgdGhlIGRheSBjZWxsIGlzIHJlbmRlcmVkLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIHB1YmxpYyBnZXQgb25EYXlSZW5kZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUub25EYXlSZW5kZXI7XG4gIH1cblxuICBwdWJsaWMgc2V0IG9uRGF5UmVuZGVyKGZ1bmMpIHtcbiAgICB0aGlzLnN0YXRlLm9uRGF5UmVuZGVyID0gZnVuYztcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGVzIHRoZSBldmVudCBZX09GRlNFVCB2YWx1ZSB0byBzZXQgdGhlIGV2ZW50IHBpbGwgdG9wIHBvc2l0aW9uXG4gICAqIEBwYXJhbSB7SWRzQ2FsZW5kYXJFdmVudH0gZXZlbnQgSWRzQ2FsZW5kYXJFdmVudFxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSB5T2Zmc2V0XG4gICAqL1xuICBnZW5lcmF0ZVlPZmZzZXQoZXZlbnQ6IElkc0NhbGVuZGFyRXZlbnQpOiBudW1iZXIge1xuICAgIHJldHVybiAoZXZlbnQub3JkZXIgKiAxNikgKyBCQVNFX1lfT0ZGU0VUO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgZXZlbnQgcGlsbHMgZXhjZWVkIHRoZSBNQVhfRVZFTlRfQ09VTlQgaW4gYSBkYXkgY2VsbFxuICAgKiBAcGFyYW0ge0lkc0NhbGVuZGFyRXZlbnR9IGV2ZW50IElkc0NhbGVuZGFyRXZlbnRcbiAgICogQHJldHVybnMge2Jvb2xlYW59IGlzRXZlbnRPdmVyZmxvd2luZ1xuICAgKi9cbiAgaXNFdmVudE92ZXJmbG93aW5nKGV2ZW50OiBJZHNDYWxlbmRhckV2ZW50KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGV2ZW50Lm9yZGVyID4gTUFYX0VWRU5UX0NPVU5UIC0gMTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBJZHNNb250aFZpZXc7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/ids-month-view/ids-month-view.ts\n");

/***/ }),

/***/ "./src/mixins/ids-calendar-events-mixin/ids-calendar-events-mixin.ts":
/*!***************************************************************************!*\
  !*** ./src/mixins/ids-calendar-events-mixin/ids-calendar-events-mixin.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ids_calendar_events_mixin_default)\n/* harmony export */ });\n/* harmony import */ var _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/ids-attributes */ \"./src/core/ids-attributes.ts\");\n/* harmony import */ var _utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/ids-string-utils/ids-string-utils */ \"./src/utils/ids-string-utils/ids-string-utils.ts\");\n\n\nconst IdsCalendarEventsMixin = (superclass) => class extends superclass {\n  #eventsData = [];\n  #eventTypesData = [];\n  constructor(...args) {\n    super(...args);\n  }\n  static get attributes() {\n    return [\n      ...superclass.attributes,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VIEW_PICKER,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.HIDDEN\n    ];\n  }\n  /**\n   * Set calendar events to display on week view\n   * @param {CalendarEventData[]} data array of events\n   */\n  set eventsData(data) {\n    this.#eventsData = this.sortEventsByDate(data);\n    this.renderEventsData?.(true);\n    this.onEventsChange?.(this.#eventsData);\n  }\n  /**\n   * Gets calendar events\n   * @returns {CalendarEventData[]} array of events\n   */\n  get eventsData() {\n    return this.#eventsData;\n  }\n  /**\n   * Set event types for week view\n   * @param {CalendarEventTypeData[]} data array of event types\n   */\n  set eventTypesData(data) {\n    this.#eventTypesData = data;\n    this.renderEventsData?.(true);\n    this.onEventTypesChange?.(data);\n  }\n  /**\n   * Gets event types of week view\n   * @returns {CalendarEventTypeData[]} array of event types\n   */\n  get eventTypesData() {\n    return this.#eventTypesData;\n  }\n  /**\n   * Allows setting async function to fetch calendar event data\n   * Passes startDate and endDate as callback arguments\n   * @param {Function} fn Async function\n   */\n  set beforeEventsRender(fn) {\n    this.state.beforeEventsRender = fn;\n    this.renderEventsData?.();\n  }\n  /**\n   * Sets whether view picker is visible in toolbar\n   * @param {string|boolean} value show view picker if true\n   */\n  set viewPicker(value) {\n    const doShowViewPicker = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_1__.stringToBool)(value);\n    if (doShowViewPicker) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VIEW_PICKER, \"\");\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VIEW_PICKER);\n    }\n    if (typeof this.onViewPickerChange === \"function\") {\n      this.onViewPickerChange(doShowViewPicker);\n    }\n  }\n  /**\n   * Gets view picker value\n   * @returns {boolean} true if view picker enabled\n   */\n  get viewPicker() {\n    return this.hasAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VIEW_PICKER);\n  }\n  /**\n   * Handles global html hidden attribute changes\n   * @param {boolean|string} value hidden value\n   */\n  onHiddenChange(value) {\n    if ((0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_1__.stringToBool)(value)) {\n      this.container?.classList.add(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.HIDDEN);\n    } else {\n      this.container?.classList.remove(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.HIDDEN);\n    }\n  }\n  /**\n   * Sort calender events by date\n   * @param {CalendarEventData[]} data calendar events\n   * @returns {CalendarEventData[]} sorted calendar events\n   */\n  sortEventsByDate(data) {\n    return data.slice().sort((a, b) => {\n      const aStart = new Date(a.starts);\n      const bStart = new Date(b.starts);\n      return aStart.getTime() - bStart.getTime();\n    });\n  }\n  /**\n   * Creates date key used in component\n   * Format - [year][month][date]\n   * @param {Date} date Date obj\n   * @returns {number} 20200421\n   */\n  generateDateKey(date) {\n    const year = date.getFullYear();\n    const month = date.getMonth().toString();\n    const day = date.getDate().toString();\n    return parseInt(`${year}${month.padStart(2, \"0\")}${day.padStart(2, \"0\")}`);\n  }\n  /**\n   * Removes IdsCalendarEvent components from view\n   */\n  removeAllEvents() {\n    const events = this.container?.querySelectorAll(\"ids-calendar-event\");\n    events?.forEach((event) => event.remove());\n  }\n  /**\n   * Create view picker template used in month/week views\n   * @param {string} view month | week \\ day\n   * @returns {string} view picker template\n   */\n  createViewPickerTemplate(view) {\n    const value = view[0].toUpperCase() + view.slice(1).toLowerCase();\n    return `\n      <ids-menu-button id=\"view-picker-btn\" menu=\"view-picker\" value=\"${view}\" dropdown-icon display-selected-text>\n        <span><ids-text translate-text=\"true\">${value}</ids-text></span>\n      </ids-menu-button>\n      <ids-popup-menu id=\"view-picker\" trigger-type=\"click\" target=\"#view-picker-btn\">\n        <ids-menu-group select=\"single\">\n          <ids-menu-item value=\"month\" selected=\"${view === \"month\"}\">\n            <ids-text translate-text=\"true\">Month</ids-text>\n          </ids-menu-item>\n          <ids-menu-item value=\"week\" selected=\"${view === \"week\"}\">\n            <ids-text translate-text=\"true\">Week</ids-text>\n          </ids-menu-item>\n          <ids-menu-item value=\"day\" selected=\"${view === \"day\"}\">\n            <ids-text translate-text=\"true\">Day</ids-text>\n          </ids-menu-item>\n        </ids-menu-group>\n      </ids-popup-menu>\n    `;\n  }\n  /**\n   * Handle view picker after render\n   */\n  viewPickerConnected() {\n    const button = this.container?.querySelector(\"#view-picker-btn\");\n    if (button) {\n      button.configureMenu();\n    }\n  }\n  /**\n   * Attach view picker events\n   * @param {string} view month | week\n   */\n  attachViewPickerEvents(view) {\n    const menu = this.container?.querySelector(\"#view-picker\");\n    if (menu && view) {\n      this.offEvent(`selected.${view}-view-picker`, menu);\n      this.onEvent(`selected.${view}-view-picker`, menu, (evt) => {\n        evt.stopPropagation();\n        this.#triggerViewChange(evt.detail.value);\n      });\n    }\n  }\n  /**\n   * Trigger viewchange event used in month/week views\n   * @param {IdsCalendarViewType} view month | week | day\n   * @param {Date} activeDate date\n   */\n  #triggerViewChange(view, activeDate) {\n    if (!view)\n      return;\n    this.triggerEvent(\"viewchange\", this, {\n      detail: {\n        view,\n        elem: this,\n        date: activeDate\n      },\n      bubbles: true,\n      cancelable: true,\n      composed: true\n    });\n  }\n  /**\n   * Triggers date change event used in month/week views\n   * @param {Date} date date\n   * @param {string} type context/reason for the date change, if applicable\n   */\n  triggerDateChange(date, type) {\n    this.triggerEvent(\"datechange\", this, {\n      detail: {\n        date,\n        type\n      },\n      bubbles: true,\n      cancelable: true,\n      composed: true\n    });\n  }\n  /**\n   * Get event by id\n   * @param {string} id event id\n   * @returns {CalendarEventData} event data\n   */\n  getEventById(id) {\n    return this.#eventsData.find((item) => item.id === id);\n  }\n  /**\n   * Get IdsCalendarEvent elem by id\n   * @param {string} id event id\n   * @returns {IdsCalendarEvent} calendar event component\n   */\n  getEventElemById(id) {\n    return this.container?.querySelector(`ids-calendar-event[data-id=\"${id}\"]`);\n  }\n  /**\n   * Gets calendar event type by id\n   * @param {string} id event type id\n   * @returns {CalendarEventTypeData} calendar event type\n   */\n  getEventTypeById(id) {\n    return this.#eventTypesData.find((item) => id === item.id);\n  }\n  /**\n   * @param {IdsCalendarViewType} val View Picker setting type\n   */\n  setViewPickerValue(val) {\n    const viewPickerEl = this.container?.querySelector(\"#view-picker-btn\");\n    if (viewPickerEl)\n      viewPickerEl.value = val;\n  }\n};\nvar ids_calendar_events_mixin_default = IdsCalendarEventsMixin;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWl4aW5zL2lkcy1jYWxlbmRhci1ldmVudHMtbWl4aW4vaWRzLWNhbGVuZGFyLWV2ZW50cy1taXhpbi50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFDMkI7QUFHRTtBQWM3QixNQUFNLHlCQUF5QixDQUF3QixlQUFrQixjQUFjLFdBQVc7QUFBQSxFQUNoRyxjQUFtQyxDQUFDO0FBQUEsRUFFcEMsa0JBQTJDLENBQUM7QUFBQSxFQUU1QyxlQUFlLE1BQWE7QUFDMUIsVUFBTSxHQUFHLElBQUk7QUFBQSxFQUNmO0FBQUEsRUFFQSxXQUFXLGFBQWE7QUFDdEIsV0FBTztBQUFBLE1BQ0wsR0FBSSxXQUFtQjtBQUFBLE1BQ3ZCLHdFQUFzQjtBQUFYLE1BQ1gsbUVBQWlCO0FBQU4sSUFDYjtBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsSUFBSSxXQUFXLE1BQTJCO0FBQ3hDLFNBQUssY0FBYyxLQUFLLGlCQUFpQixJQUFJO0FBQzdDLFNBQUssbUJBQW1CLElBQUk7QUFDNUIsU0FBSyxpQkFBaUIsS0FBSyxXQUFXO0FBQUEsRUFDeEM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsSUFBSSxhQUFrQztBQUNwQyxXQUFPLEtBQUs7QUFBQSxFQUNkO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLElBQUksZUFBZSxNQUErQjtBQUNoRCxTQUFLLGtCQUFrQjtBQUN2QixTQUFLLG1CQUFtQixJQUFJO0FBQzVCLFNBQUsscUJBQXFCLElBQUk7QUFBQSxFQUNoQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxJQUFJLGlCQUEwQztBQUM1QyxXQUFPLEtBQUs7QUFBQSxFQUNkO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0EsSUFBSSxtQkFBbUIsSUFBK0U7QUFDcEcsU0FBSyxNQUFNLHFCQUFxQjtBQUNoQyxTQUFLLG1CQUFtQjtBQUFBLEVBQzFCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLElB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QUFNO0FBRVgsU0FBSyxhQUFhLGNBQWMsTUFBTTtBQUFBLE1BQ3BDLFFBQVE7QUFBQSxRQUNOO0FBQUEsUUFDQSxNQUFNO0FBQUEsUUFDTixNQUFNO0FBQUEsTUFDUjtBQUFBLE1BQ0EsU0FBUztBQUFBLE1BQ1QsWUFBWTtBQUFBLE1BQ1osVUFBVTtBQUFBLElBQ1osQ0FBQztBQUFBLEVBQ0g7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPQSxrQkFBa0IsTUFBWSxNQUFjO0FBQzFDLFNBQUssYUFBYSxjQUFjLE1BQU07QUFBQSxNQUNwQyxRQUFRO0FBQUEsUUFDTjtBQUFBLFFBQ0E7QUFBQSxNQUNGO0FBQUEsTUFDQSxTQUFTO0FBQUEsTUFDVCxZQUFZO0FBQUEsTUFDWixVQUFVO0FBQUEsSUFDWixDQUFDO0FBQUEsRUFDSDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9BLGFBQWEsSUFBMkM7QUFDdEQsV0FBTyxLQUFLLFlBQVksS0FBSyxDQUFDLFNBQTRCLEtBQUssT0FBTyxFQUFFO0FBQUEsRUFDMUU7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPQSxpQkFBaUIsSUFBaUQ7QUFDaEUsV0FBTyxLQUFLLFdBQVcsY0FBZ0MsK0JBQStCLE1BQU07QUFBQSxFQUM5RjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9BLGlCQUFpQixJQUFzRDtBQUNyRSxXQUFPLEtBQUssZ0JBQWdCLEtBQUssQ0FBQyxTQUFnQyxPQUFPLEtBQUssRUFBRTtBQUFBLEVBQ2xGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxtQkFBbUIsS0FBMEI7QUFDM0MsVUFBTSxlQUFlLEtBQUssV0FBVyxjQUE2QixrQkFBa0I7QUFDcEYsUUFBSTtBQUFjLG1CQUFhLFFBQVE7QUFBQSxFQUN6QztBQUNGO0FBRUEsSUFBTyxvQ0FBUSIsInNvdXJjZXMiOlsid2VicGFjazovL2lkcy1lbnRlcnByaXNlLXdjLy4vc3JjL21peGlucy9pZHMtY2FsZW5kYXItZXZlbnRzLW1peGluL2lkcy1jYWxlbmRhci1ldmVudHMtbWl4aW4udHM/MDU1YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgSWRzQ2FsZW5kYXJFdmVudCwgeyBDYWxlbmRhckV2ZW50RGF0YSwgQ2FsZW5kYXJFdmVudFR5cGVEYXRhIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9pZHMtY2FsZW5kYXIvaWRzLWNhbGVuZGFyLWV2ZW50JztcbmltcG9ydCB7IGF0dHJpYnV0ZXMgfSBmcm9tICcuLi8uLi9jb3JlL2lkcy1hdHRyaWJ1dGVzJztcbmltcG9ydCB7IElkc0NvbnN0cnVjdG9yIH0gZnJvbSAnLi4vLi4vY29yZS9pZHMtZWxlbWVudCc7XG5pbXBvcnQgeyBFdmVudHNNaXhpbkludGVyZmFjZSB9IGZyb20gJy4uL2lkcy1ldmVudHMtbWl4aW4vaWRzLWV2ZW50cy1taXhpbic7XG5pbXBvcnQgeyBzdHJpbmdUb0Jvb2wgfSBmcm9tICcuLi8uLi91dGlscy9pZHMtc3RyaW5nLXV0aWxzL2lkcy1zdHJpbmctdXRpbHMnO1xuaW1wb3J0IHR5cGUgSWRzTWVudUJ1dHRvbiBmcm9tICcuLi8uLi9jb21wb25lbnRzL2lkcy1tZW51LWJ1dHRvbi9pZHMtbWVudS1idXR0b24nO1xuXG5leHBvcnQgaW50ZXJmYWNlIENhbGVuZGFyRXZlbnRzSGFuZGxlciB7XG4gIHJlbmRlckV2ZW50c0RhdGE/KGZvcmNlUmVuZGVyPzogYm9vbGVhbik6IHZvaWQ7XG4gIG9uRXZlbnRzQ2hhbmdlPyhkYXRhOiBDYWxlbmRhckV2ZW50RGF0YVtdKTogdm9pZDtcbiAgb25FdmVudFR5cGVzQ2hhbmdlPyhkYXRhOiBDYWxlbmRhckV2ZW50VHlwZURhdGFbXSk6IHZvaWQ7XG4gIG9uVmlld1BpY2tlckNoYW5nZT8oZG9TaG93PzogYm9vbGVhbik6IHZvaWQ7XG59XG5cbnR5cGUgQ29uc3RyYWludHMgPSBJZHNDb25zdHJ1Y3RvcjxFdmVudHNNaXhpbkludGVyZmFjZSAmIENhbGVuZGFyRXZlbnRzSGFuZGxlcj47XG5cbnR5cGUgSWRzQ2FsZW5kYXJWaWV3VHlwZSA9ICdtb250aCcgfCAneWVhcicgfCAnZGF5JztcblxuY29uc3QgSWRzQ2FsZW5kYXJFdmVudHNNaXhpbiA9IDxUIGV4dGVuZHMgQ29uc3RyYWludHM+KHN1cGVyY2xhc3M6IFQpID0+IGNsYXNzIGV4dGVuZHMgc3VwZXJjbGFzcyB7XG4gICNldmVudHNEYXRhOiBDYWxlbmRhckV2ZW50RGF0YVtdID0gW107XG5cbiAgI2V2ZW50VHlwZXNEYXRhOiBDYWxlbmRhckV2ZW50VHlwZURhdGFbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgc3VwZXIoLi4uYXJncyk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IGF0dHJpYnV0ZXMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIC4uLihzdXBlcmNsYXNzIGFzIGFueSkuYXR0cmlidXRlcyxcbiAgICAgIGF0dHJpYnV0ZXMuVklFV19QSUNLRVIsXG4gICAgICBhdHRyaWJ1dGVzLkhJRERFTlxuICAgIF07XG4gIH1cblxuICAvKipcbiAgICogU2V0IGNhbGVuZGFyIGV2ZW50cyB0byBkaXNwbGF5IG9uIHdlZWsgdmlld1xuICAgKiBAcGFyYW0ge0NhbGVuZGFyRXZlbnREYXRhW119IGRhdGEgYXJyYXkgb2YgZXZlbnRzXG4gICAqL1xuICBzZXQgZXZlbnRzRGF0YShkYXRhOiBDYWxlbmRhckV2ZW50RGF0YVtdKSB7XG4gICAgdGhpcy4jZXZlbnRzRGF0YSA9IHRoaXMuc29ydEV2ZW50c0J5RGF0ZShkYXRhKTtcbiAgICB0aGlzLnJlbmRlckV2ZW50c0RhdGE/Lih0cnVlKTtcbiAgICB0aGlzLm9uRXZlbnRzQ2hhbmdlPy4odGhpcy4jZXZlbnRzRGF0YSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxlbmRhciBldmVudHNcbiAgICogQHJldHVybnMge0NhbGVuZGFyRXZlbnREYXRhW119IGFycmF5IG9mIGV2ZW50c1xuICAgKi9cbiAgZ2V0IGV2ZW50c0RhdGEoKTogQ2FsZW5kYXJFdmVudERhdGFbXSB7XG4gICAgcmV0dXJuIHRoaXMuI2V2ZW50c0RhdGE7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGV2ZW50IHR5cGVzIGZvciB3ZWVrIHZpZXdcbiAgICogQHBhcmFtIHtDYWxlbmRhckV2ZW50VHlwZURhdGFbXX0gZGF0YSBhcnJheSBvZiBldmVudCB0eXBlc1xuICAgKi9cbiAgc2V0IGV2ZW50VHlwZXNEYXRhKGRhdGE6IENhbGVuZGFyRXZlbnRUeXBlRGF0YVtdKSB7XG4gICAgdGhpcy4jZXZlbnRUeXBlc0RhdGEgPSBkYXRhO1xuICAgIHRoaXMucmVuZGVyRXZlbnRzRGF0YT8uKHRydWUpO1xuICAgIHRoaXMub25FdmVudFR5cGVzQ2hhbmdlPy4oZGF0YSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBldmVudCB0eXBlcyBvZiB3ZWVrIHZpZXdcbiAgICogQHJldHVybnMge0NhbGVuZGFyRXZlbnRUeXBlRGF0YVtdfSBhcnJheSBvZiBldmVudCB0eXBlc1xuICAgKi9cbiAgZ2V0IGV2ZW50VHlwZXNEYXRhKCk6IENhbGVuZGFyRXZlbnRUeXBlRGF0YVtdIHtcbiAgICByZXR1cm4gdGhpcy4jZXZlbnRUeXBlc0RhdGE7XG4gIH1cblxuICAvKipcbiAgICogQWxsb3dzIHNldHRpbmcgYXN5bmMgZnVuY3Rpb24gdG8gZmV0Y2ggY2FsZW5kYXIgZXZlbnQgZGF0YVxuICAgKiBQYXNzZXMgc3RhcnREYXRlIGFuZCBlbmREYXRlIGFzIGNhbGxiYWNrIGFyZ3VtZW50c1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBBc3luYyBmdW5jdGlvblxuICAgKi9cbiAgc2V0IGJlZm9yZUV2ZW50c1JlbmRlcihmbjogKChzdGFydERhdGU6IERhdGUsIGVuZERhdGU6IERhdGUpID0+IFByb21pc2U8Q2FsZW5kYXJFdmVudERhdGFbXT4pIHwgbnVsbCkge1xuICAgIHRoaXMuc3RhdGUuYmVmb3JlRXZlbnRzUmVuZGVyID0gZm47XG4gICAgdGhpcy5yZW5kZXJFdmVudHNEYXRhPy4oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHdoZXRoZXIgdmlldyBwaWNrZXIgaXMgdmlzaWJsZSBpbiB0b29sYmFyXG4gICAqIEBwYXJhbSB7c3RyaW5nfGJvb2xlYW59IHZhbHVlIHNob3cgdmlldyBwaWNrZXIgaWYgdHJ1ZVxuICAgKi9cbiAgc2V0IHZpZXdQaWNrZXIodmFsdWU6IHN0cmluZyB8IGJvb2xlYW4pIHtcbiAgICBjb25zdCBkb1Nob3dWaWV3UGlja2VyID0gc3RyaW5nVG9Cb29sKHZhbHVlKTtcbiAgICBpZiAoZG9TaG93Vmlld1BpY2tlcikge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5WSUVXX1BJQ0tFUiwgJycpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGVzLlZJRVdfUElDS0VSKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHRoaXMub25WaWV3UGlja2VyQ2hhbmdlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLm9uVmlld1BpY2tlckNoYW5nZShkb1Nob3dWaWV3UGlja2VyKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB2aWV3IHBpY2tlciB2YWx1ZVxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB2aWV3IHBpY2tlciBlbmFibGVkXG4gICAqL1xuICBnZXQgdmlld1BpY2tlcigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoYXR0cmlidXRlcy5WSUVXX1BJQ0tFUik7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyBnbG9iYWwgaHRtbCBoaWRkZW4gYXR0cmlidXRlIGNoYW5nZXNcbiAgICogQHBhcmFtIHtib29sZWFufHN0cmluZ30gdmFsdWUgaGlkZGVuIHZhbHVlXG4gICAqL1xuICBvbkhpZGRlbkNoYW5nZSh2YWx1ZTogYm9vbGVhbiB8IHN0cmluZykge1xuICAgIGlmIChzdHJpbmdUb0Jvb2wodmFsdWUpKSB7XG4gICAgICB0aGlzLmNvbnRhaW5lcj8uY2xhc3NMaXN0LmFkZChhdHRyaWJ1dGVzLkhJRERFTik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY29udGFpbmVyPy5jbGFzc0xpc3QucmVtb3ZlKGF0dHJpYnV0ZXMuSElEREVOKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU29ydCBjYWxlbmRlciBldmVudHMgYnkgZGF0ZVxuICAgKiBAcGFyYW0ge0NhbGVuZGFyRXZlbnREYXRhW119IGRhdGEgY2FsZW5kYXIgZXZlbnRzXG4gICAqIEByZXR1cm5zIHtDYWxlbmRhckV2ZW50RGF0YVtdfSBzb3J0ZWQgY2FsZW5kYXIgZXZlbnRzXG4gICAqL1xuICBzb3J0RXZlbnRzQnlEYXRlKGRhdGE6IENhbGVuZGFyRXZlbnREYXRhW10pOiBDYWxlbmRhckV2ZW50RGF0YVtdIHtcbiAgICByZXR1cm4gZGF0YS5zbGljZSgpLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGNvbnN0IGFTdGFydCA9IG5ldyBEYXRlKGEuc3RhcnRzKTtcbiAgICAgIGNvbnN0IGJTdGFydCA9IG5ldyBEYXRlKGIuc3RhcnRzKTtcbiAgICAgIHJldHVybiBhU3RhcnQuZ2V0VGltZSgpIC0gYlN0YXJ0LmdldFRpbWUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGRhdGUga2V5IHVzZWQgaW4gY29tcG9uZW50XG4gICAqIEZvcm1hdCAtIFt5ZWFyXVttb250aF1bZGF0ZV1cbiAgICogQHBhcmFtIHtEYXRlfSBkYXRlIERhdGUgb2JqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IDIwMjAwNDIxXG4gICAqL1xuICBnZW5lcmF0ZURhdGVLZXkoZGF0ZTogRGF0ZSk6IG51bWJlciB7XG4gICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICBjb25zdCBtb250aCA9IGRhdGUuZ2V0TW9udGgoKS50b1N0cmluZygpO1xuICAgIGNvbnN0IGRheSA9IGRhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCk7XG5cbiAgICByZXR1cm4gcGFyc2VJbnQoYCR7eWVhcn0ke21vbnRoLnBhZFN0YXJ0KDIsICcwJyl9JHtkYXkucGFkU3RhcnQoMiwgJzAnKX1gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIElkc0NhbGVuZGFyRXZlbnQgY29tcG9uZW50cyBmcm9tIHZpZXdcbiAgICovXG4gIHJlbW92ZUFsbEV2ZW50cygpOiB2b2lkIHtcbiAgICBjb25zdCBldmVudHMgPSB0aGlzLmNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvckFsbDxJZHNDYWxlbmRhckV2ZW50PignaWRzLWNhbGVuZGFyLWV2ZW50Jyk7XG4gICAgZXZlbnRzPy5mb3JFYWNoKChldmVudDogSWRzQ2FsZW5kYXJFdmVudCkgPT4gZXZlbnQucmVtb3ZlKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSB2aWV3IHBpY2tlciB0ZW1wbGF0ZSB1c2VkIGluIG1vbnRoL3dlZWsgdmlld3NcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZpZXcgbW9udGggfCB3ZWVrIFxcIGRheVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSB2aWV3IHBpY2tlciB0ZW1wbGF0ZVxuICAgKi9cbiAgY3JlYXRlVmlld1BpY2tlclRlbXBsYXRlKHZpZXc6ICdtb250aCcgfCAnd2VlaycgfCAnZGF5Jyk6IHN0cmluZyB7XG4gICAgY29uc3QgdmFsdWUgPSB2aWV3WzBdLnRvVXBwZXJDYXNlKCkgKyB2aWV3LnNsaWNlKDEpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICByZXR1cm4gYFxuICAgICAgPGlkcy1tZW51LWJ1dHRvbiBpZD1cInZpZXctcGlja2VyLWJ0blwiIG1lbnU9XCJ2aWV3LXBpY2tlclwiIHZhbHVlPVwiJHt2aWV3fVwiIGRyb3Bkb3duLWljb24gZGlzcGxheS1zZWxlY3RlZC10ZXh0PlxuICAgICAgICA8c3Bhbj48aWRzLXRleHQgdHJhbnNsYXRlLXRleHQ9XCJ0cnVlXCI+JHt2YWx1ZX08L2lkcy10ZXh0Pjwvc3Bhbj5cbiAgICAgIDwvaWRzLW1lbnUtYnV0dG9uPlxuICAgICAgPGlkcy1wb3B1cC1tZW51IGlkPVwidmlldy1waWNrZXJcIiB0cmlnZ2VyLXR5cGU9XCJjbGlja1wiIHRhcmdldD1cIiN2aWV3LXBpY2tlci1idG5cIj5cbiAgICAgICAgPGlkcy1tZW51LWdyb3VwIHNlbGVjdD1cInNpbmdsZVwiPlxuICAgICAgICAgIDxpZHMtbWVudS1pdGVtIHZhbHVlPVwibW9udGhcIiBzZWxlY3RlZD1cIiR7dmlldyA9PT0gJ21vbnRoJ31cIj5cbiAgICAgICAgICAgIDxpZHMtdGV4dCB0cmFuc2xhdGUtdGV4dD1cInRydWVcIj5Nb250aDwvaWRzLXRleHQ+XG4gICAgICAgICAgPC9pZHMtbWVudS1pdGVtPlxuICAgICAgICAgIDxpZHMtbWVudS1pdGVtIHZhbHVlPVwid2Vla1wiIHNlbGVjdGVkPVwiJHt2aWV3ID09PSAnd2Vlayd9XCI+XG4gICAgICAgICAgICA8aWRzLXRleHQgdHJhbnNsYXRlLXRleHQ9XCJ0cnVlXCI+V2VlazwvaWRzLXRleHQ+XG4gICAgICAgICAgPC9pZHMtbWVudS1pdGVtPlxuICAgICAgICAgIDxpZHMtbWVudS1pdGVtIHZhbHVlPVwiZGF5XCIgc2VsZWN0ZWQ9XCIke3ZpZXcgPT09ICdkYXknfVwiPlxuICAgICAgICAgICAgPGlkcy10ZXh0IHRyYW5zbGF0ZS10ZXh0PVwidHJ1ZVwiPkRheTwvaWRzLXRleHQ+XG4gICAgICAgICAgPC9pZHMtbWVudS1pdGVtPlxuICAgICAgICA8L2lkcy1tZW51LWdyb3VwPlxuICAgICAgPC9pZHMtcG9wdXAtbWVudT5cbiAgICBgO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSB2aWV3IHBpY2tlciBhZnRlciByZW5kZXJcbiAgICovXG4gIHZpZXdQaWNrZXJDb25uZWN0ZWQoKTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uID0gdGhpcy5jb250YWluZXI/LnF1ZXJ5U2VsZWN0b3I8SWRzTWVudUJ1dHRvbj4oJyN2aWV3LXBpY2tlci1idG4nKTtcblxuICAgIGlmIChidXR0b24pIHtcbiAgICAgIGJ1dHRvbi5jb25maWd1cmVNZW51KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEF0dGFjaCB2aWV3IHBpY2tlciBldmVudHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZpZXcgbW9udGggfCB3ZWVrXG4gICAqL1xuICBhdHRhY2hWaWV3UGlja2VyRXZlbnRzKHZpZXc6ICdtb250aCcgfCAnd2VlaycpIHtcbiAgICBjb25zdCBtZW51ID0gdGhpcy5jb250YWluZXI/LnF1ZXJ5U2VsZWN0b3IoJyN2aWV3LXBpY2tlcicpO1xuXG4gICAgaWYgKG1lbnUgJiYgdmlldykge1xuICAgICAgdGhpcy5vZmZFdmVudChgc2VsZWN0ZWQuJHt2aWV3fS12aWV3LXBpY2tlcmAsIG1lbnUpO1xuICAgICAgdGhpcy5vbkV2ZW50KGBzZWxlY3RlZC4ke3ZpZXd9LXZpZXctcGlja2VyYCwgbWVudSwgKGV2dDogQ3VzdG9tRXZlbnQpID0+IHtcbiAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLiN0cmlnZ2VyVmlld0NoYW5nZShldnQuZGV0YWlsLnZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyIHZpZXdjaGFuZ2UgZXZlbnQgdXNlZCBpbiBtb250aC93ZWVrIHZpZXdzXG4gICAqIEBwYXJhbSB7SWRzQ2FsZW5kYXJWaWV3VHlwZX0gdmlldyBtb250aCB8IHdlZWsgfCBkYXlcbiAgICogQHBhcmFtIHtEYXRlfSBhY3RpdmVEYXRlIGRhdGVcbiAgICovXG4gICN0cmlnZ2VyVmlld0NoYW5nZSh2aWV3OiBJZHNDYWxlbmRhclZpZXdUeXBlLCBhY3RpdmVEYXRlPzogRGF0ZSk6IHZvaWQge1xuICAgIGlmICghdmlldykgcmV0dXJuO1xuXG4gICAgdGhpcy50cmlnZ2VyRXZlbnQoJ3ZpZXdjaGFuZ2UnLCB0aGlzLCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgdmlldyxcbiAgICAgICAgZWxlbTogdGhpcyxcbiAgICAgICAgZGF0ZTogYWN0aXZlRGF0ZVxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgY29tcG9zZWQ6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyBkYXRlIGNoYW5nZSBldmVudCB1c2VkIGluIG1vbnRoL3dlZWsgdmlld3NcbiAgICogQHBhcmFtIHtEYXRlfSBkYXRlIGRhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgY29udGV4dC9yZWFzb24gZm9yIHRoZSBkYXRlIGNoYW5nZSwgaWYgYXBwbGljYWJsZVxuICAgKi9cbiAgdHJpZ2dlckRhdGVDaGFuZ2UoZGF0ZTogRGF0ZSwgdHlwZTogc3RyaW5nKSB7XG4gICAgdGhpcy50cmlnZ2VyRXZlbnQoJ2RhdGVjaGFuZ2UnLCB0aGlzLCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgZGF0ZSxcbiAgICAgICAgdHlwZVxuICAgICAgfSxcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgY29tcG9zZWQ6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgZXZlbnQgYnkgaWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIGV2ZW50IGlkXG4gICAqIEByZXR1cm5zIHtDYWxlbmRhckV2ZW50RGF0YX0gZXZlbnQgZGF0YVxuICAgKi9cbiAgZ2V0RXZlbnRCeUlkKGlkOiBzdHJpbmcpOiBDYWxlbmRhckV2ZW50RGF0YSB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuI2V2ZW50c0RhdGEuZmluZCgoaXRlbTogQ2FsZW5kYXJFdmVudERhdGEpID0+IGl0ZW0uaWQgPT09IGlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgSWRzQ2FsZW5kYXJFdmVudCBlbGVtIGJ5IGlkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBldmVudCBpZFxuICAgKiBAcmV0dXJucyB7SWRzQ2FsZW5kYXJFdmVudH0gY2FsZW5kYXIgZXZlbnQgY29tcG9uZW50XG4gICAqL1xuICBnZXRFdmVudEVsZW1CeUlkKGlkOiBzdHJpbmcpOiBJZHNDYWxlbmRhckV2ZW50IHwgdW5kZWZpbmVkIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyPy5xdWVyeVNlbGVjdG9yPElkc0NhbGVuZGFyRXZlbnQ+KGBpZHMtY2FsZW5kYXItZXZlbnRbZGF0YS1pZD1cIiR7aWR9XCJdYCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjYWxlbmRhciBldmVudCB0eXBlIGJ5IGlkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBldmVudCB0eXBlIGlkXG4gICAqIEByZXR1cm5zIHtDYWxlbmRhckV2ZW50VHlwZURhdGF9IGNhbGVuZGFyIGV2ZW50IHR5cGVcbiAgICovXG4gIGdldEV2ZW50VHlwZUJ5SWQoaWQ6IHN0cmluZyB8IG51bGwpOiBDYWxlbmRhckV2ZW50VHlwZURhdGEgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLiNldmVudFR5cGVzRGF0YS5maW5kKChpdGVtOiBDYWxlbmRhckV2ZW50VHlwZURhdGEpID0+IGlkID09PSBpdGVtLmlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0lkc0NhbGVuZGFyVmlld1R5cGV9IHZhbCBWaWV3IFBpY2tlciBzZXR0aW5nIHR5cGVcbiAgICovXG4gIHNldFZpZXdQaWNrZXJWYWx1ZSh2YWw6IElkc0NhbGVuZGFyVmlld1R5cGUpIHtcbiAgICBjb25zdCB2aWV3UGlja2VyRWwgPSB0aGlzLmNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcjxJZHNNZW51QnV0dG9uPignI3ZpZXctcGlja2VyLWJ0bicpO1xuICAgIGlmICh2aWV3UGlja2VyRWwpIHZpZXdQaWNrZXJFbC52YWx1ZSA9IHZhbDtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgSWRzQ2FsZW5kYXJFdmVudHNNaXhpbjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/mixins/ids-calendar-events-mixin/ids-calendar-events-mixin.ts\n");

/***/ })

}]);