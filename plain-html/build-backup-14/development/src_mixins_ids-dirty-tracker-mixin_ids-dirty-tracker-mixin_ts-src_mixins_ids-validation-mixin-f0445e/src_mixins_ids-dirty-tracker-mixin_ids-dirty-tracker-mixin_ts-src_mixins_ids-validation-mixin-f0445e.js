"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkids_enterprise_wc"] = self["webpackChunkids_enterprise_wc"] || []).push([["src_mixins_ids-dirty-tracker-mixin_ids-dirty-tracker-mixin_ts-src_mixins_ids-validation-mixin-f0445e"],{

/***/ "./src/mixins/ids-dirty-tracker-mixin/ids-dirty-tracker-mixin.ts":
/*!***********************************************************************!*\
  !*** ./src/mixins/ids-dirty-tracker-mixin/ids-dirty-tracker-mixin.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ids_dirty_tracker_mixin_default)\n/* harmony export */ });\n/* harmony import */ var _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/ids-attributes */ \"./src/core/ids-attributes.ts\");\n/* harmony import */ var _utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/ids-string-utils/ids-string-utils */ \"./src/utils/ids-string-utils/ids-string-utils.ts\");\n\n\nconst IdsDirtyTrackerMixin = (superclass) => class extends superclass {\n  constructor(...args) {\n    super(...args);\n  }\n  connectedCallback() {\n    super.connectedCallback?.();\n    this.handleDirtyTracker();\n    window.requestAnimationFrame(() => {\n      this.resetDirtyTracker();\n    });\n  }\n  static get attributes() {\n    return [\n      ...superclass.attributes,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.DIRTY_TRACKER\n    ];\n  }\n  dirty = {\n    original: \"\"\n  };\n  isDirty = false;\n  isCheckbox = false;\n  isEditor = false;\n  isRadioGroup = false;\n  dirtyContainer;\n  /**\n   * Handle dirty tracker values\n   * @returns {void}\n   */\n  handleDirtyTracker() {\n    const thisAsInput = this;\n    this.isCheckbox = thisAsInput.input?.getAttribute(\"type\") === \"checkbox\";\n    this.isEditor = !!thisAsInput.input?.classList.contains(\"source-textarea\");\n    this.isRadioGroup = !!thisAsInput.input?.classList.contains(\"ids-radio-group\");\n    if (`${this.dirtyTracker}`.toLowerCase() === \"true\") {\n      if (thisAsInput.input) {\n        const val = this.valMethod(thisAsInput.input);\n        this.dirty = { original: val };\n        this.dirtyTrackerEvents();\n      }\n    } else {\n      this.destroyDirtyTracker();\n    }\n  }\n  /**\n   * Check if dirty tracker icon exists if not add it\n   * @private\n   * @returns {void}\n   */\n  appendDirtyTrackerIcon() {\n    const thisAsInput = this;\n    let icon = this.shadowRoot?.querySelector(\".icon-dirty\");\n    if (!icon) {\n      icon = document.createElement(\"ids-icon\");\n      icon.setAttribute(\"icon\", \"dirty-filled\");\n      icon.setAttribute(\"size\", \"small\");\n      icon.setAttribute(\"part\", \"dirty-tracker-icon\");\n      icon.className = \"icon-dirty\";\n      if (this.localeAPI?.isRTL())\n        icon?.setAttribute(\"dir\", \"rtl\");\n      if (this.isCheckbox) {\n        thisAsInput.labelEl?.appendChild(icon);\n        this.dirtyContainer = thisAsInput.labelEl;\n      } else if (this.isRadioGroup) {\n        const refEl = this.shadowRoot?.querySelector(\"slot\");\n        thisAsInput.input?.insertBefore(icon, refEl);\n        this.dirtyContainer = thisAsInput.input;\n      } else if (this.isEditor) {\n        this.dirtyContainer = this.shadowRoot?.querySelector(\".editor-content\");\n        this.dirtyContainer?.appendChild(icon);\n      } else if (this.tagName === \"IDS-DROPDOWN\" || this.tagName === \"IDS-MULTISELECT\") {\n        this.dirtyContainer = thisAsInput.input?.fieldContainer;\n        this.dirtyContainer?.prepend(icon);\n      } else {\n        thisAsInput.fieldContainer?.prepend(icon);\n        this.dirtyContainer = thisAsInput.fieldContainer;\n      }\n    }\n  }\n  /**\n   * Remove if dirty tracker icon exists\n   * @private\n   * @returns {void}\n   */\n  removeDirtyTrackerIcon() {\n    const icon = this.dirtyContainer?.querySelector(\".icon-dirty\");\n    if (icon) {\n      icon.remove();\n    }\n  }\n  /**\n   * Check if dirty tracker msg exists if not add it\n   * @private\n   * @returns {void}\n   */\n  appendDirtyTrackerMsg() {\n    let msg = this.labelEl?.querySelector(\".msg-dirty\");\n    if (!msg) {\n      msg = document.createElement(\"ids-text\");\n      msg.setAttribute(\"audible\", \"true\");\n      msg.className = \"msg-dirty\";\n      msg.innerHTML = \", Modified\";\n      this.labelEl?.appendChild(msg);\n    }\n  }\n  /**\n   * Remove if dirty tracker msg exists\n   * @private\n   * @returns {void}\n   */\n  removeDirtyTrackerMsg() {\n    let msg = this.labelEl?.querySelector(\".msg-dirty\");\n    if (msg) {\n      msg.remove();\n    }\n    msg = this.input?.shadowRoot?.querySelector(\".icon-dirty\");\n    if (msg) {\n      msg.remove();\n    }\n  }\n  /**\n   * Get the value or checked attribute if checkbox or radio\n   * @private\n   * @param {object} el .\n   * @returns {any} element value\n   */\n  valMethod(el) {\n    const thisAsInput = this;\n    let r;\n    if (this.isRadioGroup) {\n      r = thisAsInput.checked;\n    } else if (this.isCheckbox) {\n      r = `${thisAsInput.checked}`.toLowerCase() === \"true\";\n    } else if (this.isEditor) {\n      r = thisAsInput.value;\n    } else {\n      r = el?.value;\n    }\n    return r;\n  }\n  /**\n   * Set dirtyTracker\n   * @private\n   * @param {string} val The current element value\n   * @returns {void}\n   */\n  setDirtyTracker(val) {\n    if (typeof val === \"undefined\") {\n      this.handleDirtyTracker();\n      return;\n    }\n    this.isDirty = this.dirty?.original !== val;\n    if (this.isDirty) {\n      this.appendDirtyTrackerMsg();\n      this.appendDirtyTrackerIcon();\n    } else {\n      this.removeDirtyTrackerMsg();\n      this.removeDirtyTrackerIcon();\n    }\n  }\n  /**\n   * Handle dirty tracker events\n   * @private\n   * @param {string} option If 'remove', will remove attached events\n   * @returns {void}\n   */\n  dirtyTrackerEvents(option = \"\") {\n    const thisAsInput = this;\n    if (this.input) {\n      const eventName = \"change.dirtytrackermixin\";\n      if (option === \"remove\") {\n        const handler = this?.handledEvents?.get(eventName);\n        if (handler && handler.target === thisAsInput.input) {\n          this.offEvent(eventName, thisAsInput.input);\n        }\n      } else {\n        this.offEvent(eventName);\n        this.onEvent(eventName, thisAsInput.input, () => {\n          const val = this.valMethod(thisAsInput.input);\n          this.setDirtyTracker(val);\n        });\n      }\n    }\n  }\n  /** Handle Languages Changes */\n  onLanguageChange = () => {\n    const icon = this.dirtyContainer?.querySelector(\".icon-dirty\");\n    if (this.localeAPI?.isRTL())\n      icon?.setAttribute(\"dir\", \"rtl\");\n    else\n      icon?.removeAttribute(\"dir\");\n  };\n  /**\n   * Reset dirty tracker\n   * @returns {void}\n   */\n  resetDirtyTracker() {\n    if (this.dirty) {\n      this.removeDirtyTrackerIcon();\n      this.removeDirtyTrackerMsg();\n      this.dirty = { original: this.valMethod(this.input) };\n    } else {\n      this.handleDirtyTracker();\n    }\n    this.isDirty = false;\n  }\n  /**\n   * Destroy dirty tracker\n   * @returns {void}\n   */\n  destroyDirtyTracker() {\n    this.dirtyTrackerEvents(\"remove\");\n    this.removeDirtyTrackerIcon();\n    this.removeDirtyTrackerMsg();\n    this.dirty = null;\n  }\n  /**\n   * Runs optional callback, if possible\n   * @private\n   * @returns {void}\n   */\n  #onDirtyTrackerChange() {\n    if (typeof this.onDirtyTrackerChange === \"function\") {\n      this.onDirtyTrackerChange(this.dirtyTracker);\n    }\n  }\n  /**\n   * Set the dirty tracking feature on to indicate a changed field\n   * @param {boolean|string} value If true will set `dirty-tracker` attribute\n   */\n  set dirtyTracker(value) {\n    const val = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_1__.stringToBool)(value);\n    if (val) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.DIRTY_TRACKER, val.toString());\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.DIRTY_TRACKER);\n    }\n    this.#onDirtyTrackerChange();\n    this.handleDirtyTracker();\n  }\n  get dirtyTracker() {\n    return (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_1__.stringToBool)(this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.DIRTY_TRACKER));\n  }\n};\nvar ids_dirty_tracker_mixin_default = IdsDirtyTrackerMixin;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWl4aW5zL2lkcy1kaXJ0eS10cmFja2VyLW1peGluL2lkcy1kaXJ0eS10cmFja2VyLW1peGluLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEyQjtBQUNFO0FBaUI3QixNQUFNLHVCQUF1QixDQUF3QixlQUFrQixjQUFjLFdBQVc7QUFBQSxFQUM5RixlQUFlLE1BQWE7QUFDMUIsVUFBTSxHQUFHLElBQUk7QUFBQSxFQUNmO0FBQUEsRUFFQSxvQkFBb0I7QUFDbEIsVUFBTSxvQkFBb0I7QUFDMUIsU0FBSyxtQkFBbUI7QUFFeEIsV0FBTyxzQkFBc0IsTUFBTTtBQUNqQyxXQUFLLGtCQUFrQjtBQUFBLElBQ3pCLENBQUM7QUFBQSxFQUNIO0FBQUEsRUFFQSxXQUFXLGFBQWE7QUFDdEIsV0FBTztBQUFBLE1BQ0wsR0FBSSxXQUFtQjtBQUFBLE1BQ3ZCLDBFQUF3QjtBQUFiLElBQ2I7QUFBQSxFQUNGO0FBQUEsRUFFQSxRQUFhO0FBQUEsSUFDWCxVQUFVO0FBQUEsRUFDWjtBQUFBLEVBRUEsVUFBVTtBQUFBLEVBRVYsYUFBYTtBQUFBLEVBRWIsV0FBVztBQUFBLEVBRVgsZUFBZTtBQUFBLEVBRWY7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEscUJBQXFCO0FBQ25CLFVBQU0sY0FBYztBQUNwQixTQUFLLGFBQWEsWUFBWSxPQUFPLGFBQWEsTUFBTSxNQUFNO0FBQzlELFNBQUssV0FBVyxDQUFDLENBQUMsWUFBWSxPQUFPLFVBQVUsU0FBUyxpQkFBaUI7QUFDekUsU0FBSyxlQUFlLENBQUMsQ0FBQyxZQUFZLE9BQU8sVUFBVSxTQUFTLGlCQUFpQjtBQUU3RSxRQUFJLEdBQUcsS0FBSyxlQUFlLFlBQVksTUFBTSxRQUFRO0FBQ25ELFVBQUksWUFBWSxPQUFPO0FBQ3JCLGNBQU0sTUFBTSxLQUFLLFVBQVUsWUFBWSxLQUFLO0FBQzVDLGFBQUssUUFBUSxFQUFFLFVBQVUsSUFBSTtBQUM3QixhQUFLLG1CQUFtQjtBQUFBLE1BQzFCO0FBQUEsSUFDRixP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QUMxQjtBQUNBLFNBQUssVUFBVTtBQUFBLEVBQ2pCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLHNCQUFzQjtBQUNwQixTQUFLLG1CQUFtQixRQUFRO0FBQ2hDLFNBQUssdUJBQXVCO0FBQzVCLFNBQUssc0JBQXNCO0FBQzNCLFNBQUssUUFBUTtBQUFBLEVBQ2Y7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPQSx3QkFBd0I7QUFDdEIsUUFBSSxPQUFPLEtBQUsseUJBQXlCLFlBQVk7QUFDbkQsV0FBSyxxQkFBcUIsS0FBSyxZQUFZO0FBQUEsSUFDN0M7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLElBQUksYUFBYSxPQUFPO0FBQ3RCLFVBQU0sTUFBTSxzRkFBWSxDQUFDLEtBQUs7QUFDOUIsUUFBSSxLQUFLO0FBQ1AsV0FBSyxhQUFhLDBFQUF3QixFQUFFLElBQUksU0FBUyxDQUFDO0FBQUEsSUFDNUQsT0FBTztBQUNMLFdBQUssZ0JBQWdCLDBFQUF3QjtBQUFBLElBQy9DO0FBRUEsU0FBSyxzQkFBc0I7QUFDM0IsU0FBSyxtQkFBbUI7QUFBQSxFQUMxQjtBQUFBLEVBRUEsSUFBSSxlQUFlO0FBQUUsV0FBTyxzRkFBWSxDQUFDLEtBQUssYUFBYSwwRUFBd0IsQ0FBQztBQUFBLEVBQUc7QUFDekY7QUFFQSxJQUFPLGtDQUFRIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaWRzLWVudGVycHJpc2Utd2MvLi9zcmMvbWl4aW5zL2lkcy1kaXJ0eS10cmFja2VyLW1peGluL2lkcy1kaXJ0eS10cmFja2VyLW1peGluLnRzPzkyNmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXR0cmlidXRlcyB9IGZyb20gJy4uLy4uL2NvcmUvaWRzLWF0dHJpYnV0ZXMnO1xuaW1wb3J0IHsgc3RyaW5nVG9Cb29sIH0gZnJvbSAnLi4vLi4vdXRpbHMvaWRzLXN0cmluZy11dGlscy9pZHMtc3RyaW5nLXV0aWxzJztcbmltcG9ydCB7IElkc0NvbnN0cnVjdG9yIH0gZnJvbSAnLi4vLi4vY29yZS9pZHMtZWxlbWVudCc7XG5pbXBvcnQgeyBFdmVudHNNaXhpbkludGVyZmFjZSB9IGZyb20gJy4uL2lkcy1ldmVudHMtbWl4aW4vaWRzLWV2ZW50cy1taXhpbic7XG5pbXBvcnQgeyBJZHNJbnB1dEludGVyZmFjZSB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvaWRzLWlucHV0L2lkcy1pbnB1dC1hdHRyaWJ1dGVzJztcbmltcG9ydCB7IExvY2FsZU1peGluSW50ZXJmYWNlIH0gZnJvbSAnLi4vaWRzLWxvY2FsZS1taXhpbi9pZHMtbG9jYWxlLW1peGluJztcblxuZXhwb3J0IGludGVyZmFjZSBEaXJ0eVRyYWNrZXJIYW5kbGVyIHtcbiAgb25EaXJ0eVRyYWNrZXJDaGFuZ2U/KGVuYWJsZWQ6IGJvb2xlYW4pOiB2b2lkO1xufVxuXG50eXBlIENvbnN0cmFpbnRzID0gSWRzQ29uc3RydWN0b3I8RXZlbnRzTWl4aW5JbnRlcmZhY2UgJiBEaXJ0eVRyYWNrZXJIYW5kbGVyICYgTG9jYWxlTWl4aW5JbnRlcmZhY2U+O1xuXG4vKipcbiAqIFRyYWNrIGNoYW5nZXMgb24gaW5wdXRzIGVsZW1lbnRzIGFuZCBzaG93IGEgZGlydHkgaW5kaWNhdG9yLlxuICogQHBhcmFtIHthbnl9IHN1cGVyY2xhc3MgQWNjZXB0cyBhIHN1cGVyY2xhc3MgYW5kIGNyZWF0ZXMgYSBuZXcgc3ViY2xhc3MgZnJvbSBpdFxuICogQHJldHVybnMge2FueX0gVGhlIGV4dGVuZGVkIG9iamVjdFxuICovXG5jb25zdCBJZHNEaXJ0eVRyYWNrZXJNaXhpbiA9IDxUIGV4dGVuZHMgQ29uc3RyYWludHM+KHN1cGVyY2xhc3M6IFQpID0+IGNsYXNzIGV4dGVuZHMgc3VwZXJjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgc3VwZXIoLi4uYXJncyk7XG4gIH1cblxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaz8uKCk7XG4gICAgdGhpcy5oYW5kbGVEaXJ0eVRyYWNrZXIoKTtcblxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgdGhpcy5yZXNldERpcnR5VHJhY2tlcigpO1xuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGdldCBhdHRyaWJ1dGVzKCkge1xuICAgIHJldHVybiBbXG4gICAgICAuLi4oc3VwZXJjbGFzcyBhcyBhbnkpLmF0dHJpYnV0ZXMsXG4gICAgICBhdHRyaWJ1dGVzLkRJUlRZX1RSQUNLRVJcbiAgICBdO1xuICB9XG5cbiAgZGlydHk6IGFueSA9IHtcbiAgICBvcmlnaW5hbDogJydcbiAgfTtcblxuICBpc0RpcnR5ID0gZmFsc2U7XG5cbiAgaXNDaGVja2JveCA9IGZhbHNlO1xuXG4gIGlzRWRpdG9yID0gZmFsc2U7XG5cbiAgaXNSYWRpb0dyb3VwID0gZmFsc2U7XG5cbiAgZGlydHlDb250YWluZXI/OiBIVE1MRWxlbWVudCB8IFNWR0VsZW1lbnQgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgZGlydHkgdHJhY2tlciB2YWx1ZXNcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBoYW5kbGVEaXJ0eVRyYWNrZXIoKSB7XG4gICAgY29uc3QgdGhpc0FzSW5wdXQgPSB0aGlzIGFzIElkc0lucHV0SW50ZXJmYWNlO1xuICAgIHRoaXMuaXNDaGVja2JveCA9IHRoaXNBc0lucHV0LmlucHV0Py5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSA9PT0gJ2NoZWNrYm94JztcbiAgICB0aGlzLmlzRWRpdG9yID0gISF0aGlzQXNJbnB1dC5pbnB1dD8uY2xhc3NMaXN0LmNvbnRhaW5zKCdzb3VyY2UtdGV4dGFyZWEnKTtcbiAgICB0aGlzLmlzUmFkaW9Hcm91cCA9ICEhdGhpc0FzSW5wdXQuaW5wdXQ/LmNsYXNzTGlzdC5jb250YWlucygnaWRzLXJhZGlvLWdyb3VwJyk7XG5cbiAgICBpZiAoYCR7dGhpcy5kaXJ0eVRyYWNrZXJ9YC50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZScpIHtcbiAgICAgIGlmICh0aGlzQXNJbnB1dC5pbnB1dCkge1xuICAgICAgICBjb25zdCB2YWwgPSB0aGlzLnZhbE1ldGhvZCh0aGlzQXNJbnB1dC5pbnB1dCk7XG4gICAgICAgIHRoaXMuZGlydHkgPSB7IG9yaWdpbmFsOiB2YWwgfTtcbiAgICAgICAgdGhpcy5kaXJ0eVRyYWNrZXJFdmVudHMoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kZXN0cm95RGlydHlUcmFja2VyKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGRpcnR5IHRyYWNrZXIgaWNvbiBleGlzdHMgaWYgbm90IGFkZCBpdFxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGFwcGVuZERpcnR5VHJhY2tlckljb24oKSB7XG4gICAgY29uc3QgdGhpc0FzSW5wdXQgPSB0aGlzIGFzIElkc0lucHV0SW50ZXJmYWNlO1xuICAgIGxldCBpY29uID0gdGhpcy5zaGFkb3dSb290Py5xdWVyeVNlbGVjdG9yKCcuaWNvbi1kaXJ0eScpO1xuICAgIGlmICghaWNvbikge1xuICAgICAgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lkcy1pY29uJyk7XG4gICAgICBpY29uLnNldEF0dHJpYnV0ZSgnaWNvbicsICdkaXJ0eS1maWxsZWQnKTtcbiAgICAgIGljb24uc2V0QXR0cmlidXRlKCdzaXplJywgJ3NtYWxsJyk7XG4gICAgICBpY29uLnNldEF0dHJpYnV0ZSgncGFydCcsICdkaXJ0eS10cmFja2VyLWljb24nKTtcbiAgICAgIGljb24uY2xhc3NOYW1lID0gJ2ljb24tZGlydHknO1xuICAgICAgaWYgKHRoaXMubG9jYWxlQVBJPy5pc1JUTCgpKSBpY29uPy5zZXRBdHRyaWJ1dGUoJ2RpcicsICdydGwnKTtcbiAgICAgIGlmICh0aGlzLmlzQ2hlY2tib3gpIHtcbiAgICAgICAgdGhpc0FzSW5wdXQubGFiZWxFbD8uYXBwZW5kQ2hpbGQoaWNvbik7XG4gICAgICAgIHRoaXMuZGlydHlDb250YWluZXIgPSB0aGlzQXNJbnB1dC5sYWJlbEVsO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmlzUmFkaW9Hcm91cCkge1xuICAgICAgICBjb25zdCByZWZFbCA9IHRoaXMuc2hhZG93Um9vdD8ucXVlcnlTZWxlY3Rvcignc2xvdCcpO1xuICAgICAgICB0aGlzQXNJbnB1dC5pbnB1dD8uaW5zZXJ0QmVmb3JlKGljb24sIHJlZkVsKTtcbiAgICAgICAgdGhpcy5kaXJ0eUNvbnRhaW5lciA9IHRoaXNBc0lucHV0LmlucHV0O1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmlzRWRpdG9yKSB7XG4gICAgICAgIHRoaXMuZGlydHlDb250YWluZXIgPSB0aGlzLnNoYWRvd1Jvb3Q/LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0b3ItY29udGVudCcpO1xuICAgICAgICB0aGlzLmRpcnR5Q29udGFpbmVyPy5hcHBlbmRDaGlsZChpY29uKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy50YWdOYW1lID09PSAnSURTLURST1BET1dOJyB8fCB0aGlzLnRhZ05hbWUgPT09ICdJRFMtTVVMVElTRUxFQ1QnKSB7XG4gICAgICAgIHRoaXMuZGlydHlDb250YWluZXIgPSB0aGlzQXNJbnB1dC5pbnB1dD8uZmllbGRDb250YWluZXI7XG4gICAgICAgIHRoaXMuZGlydHlDb250YWluZXI/LnByZXBlbmQoaWNvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzQXNJbnB1dC5maWVsZENvbnRhaW5lcj8ucHJlcGVuZChpY29uKTtcbiAgICAgICAgdGhpcy5kaXJ0eUNvbnRhaW5lciA9IHRoaXNBc0lucHV0LmZpZWxkQ29udGFpbmVyO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgaWYgZGlydHkgdHJhY2tlciBpY29uIGV4aXN0c1xuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIHJlbW92ZURpcnR5VHJhY2tlckljb24oKSB7XG4gICAgY29uc3QgaWNvbiA9IHRoaXMuZGlydHlDb250YWluZXI/LnF1ZXJ5U2VsZWN0b3IoJy5pY29uLWRpcnR5Jyk7XG4gICAgaWYgKGljb24pIHtcbiAgICAgIGljb24ucmVtb3ZlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGRpcnR5IHRyYWNrZXIgbXNnIGV4aXN0cyBpZiBub3QgYWRkIGl0XG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgYXBwZW5kRGlydHlUcmFja2VyTXNnKCkge1xuICAgIGxldCBtc2cgPSAodGhpcyBhcyBJZHNJbnB1dEludGVyZmFjZSkubGFiZWxFbD8ucXVlcnlTZWxlY3RvcignLm1zZy1kaXJ0eScpO1xuICAgIGlmICghbXNnKSB7XG4gICAgICBtc2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZHMtdGV4dCcpO1xuICAgICAgbXNnLnNldEF0dHJpYnV0ZSgnYXVkaWJsZScsICd0cnVlJyk7XG4gICAgICBtc2cuY2xhc3NOYW1lID0gJ21zZy1kaXJ0eSc7XG4gICAgICBtc2cuaW5uZXJIVE1MID0gJywgTW9kaWZpZWQnO1xuICAgICAgKHRoaXMgYXMgSWRzSW5wdXRJbnRlcmZhY2UpLmxhYmVsRWw/LmFwcGVuZENoaWxkKG1zZyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBpZiBkaXJ0eSB0cmFja2VyIG1zZyBleGlzdHNcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICByZW1vdmVEaXJ0eVRyYWNrZXJNc2coKSB7XG4gICAgbGV0IG1zZyA9ICh0aGlzIGFzIElkc0lucHV0SW50ZXJmYWNlKS5sYWJlbEVsPy5xdWVyeVNlbGVjdG9yKCcubXNnLWRpcnR5Jyk7XG4gICAgaWYgKG1zZykge1xuICAgICAgbXNnLnJlbW92ZSgpO1xuICAgIH1cbiAgICBtc2cgPSAodGhpcyBhcyBJZHNJbnB1dEludGVyZmFjZSkuaW5wdXQ/LnNoYWRvd1Jvb3Q/LnF1ZXJ5U2VsZWN0b3IoJy5pY29uLWRpcnR5Jyk7XG4gICAgaWYgKG1zZykge1xuICAgICAgbXNnLnJlbW92ZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9yIGNoZWNrZWQgYXR0cmlidXRlIGlmIGNoZWNrYm94IG9yIHJhZGlvXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBlbCAuXG4gICAqIEByZXR1cm5zIHthbnl9IGVsZW1lbnQgdmFsdWVcbiAgICovXG4gIHZhbE1ldGhvZChlbDogYW55KSB7XG4gICAgY29uc3QgdGhpc0FzSW5wdXQgPSB0aGlzIGFzIElkc0lucHV0SW50ZXJmYWNlO1xuICAgIGxldCByO1xuICAgIGlmICh0aGlzLmlzUmFkaW9Hcm91cCkge1xuICAgICAgciA9IHRoaXNBc0lucHV0LmNoZWNrZWQ7XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzQ2hlY2tib3gpIHtcbiAgICAgIHIgPSBgJHt0aGlzQXNJbnB1dC5jaGVja2VkfWAudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnO1xuICAgIH0gZWxzZSBpZiAodGhpcy5pc0VkaXRvcikge1xuICAgICAgciA9IHRoaXNBc0lucHV0LnZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByID0gZWw/LnZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgZGlydHlUcmFja2VyXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWwgVGhlIGN1cnJlbnQgZWxlbWVudCB2YWx1ZVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIHNldERpcnR5VHJhY2tlcih2YWw/OiBzdHJpbmcpIHtcbiAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMuaGFuZGxlRGlydHlUcmFja2VyKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5pc0RpcnR5ID0gdGhpcy5kaXJ0eT8ub3JpZ2luYWwgIT09IHZhbDtcbiAgICBpZiAodGhpcy5pc0RpcnR5KSB7XG4gICAgICB0aGlzLmFwcGVuZERpcnR5VHJhY2tlck1zZygpO1xuICAgICAgdGhpcy5hcHBlbmREaXJ0eVRyYWNrZXJJY29uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlRGlydHlUcmFja2VyTXNnKCk7XG4gICAgICB0aGlzLnJlbW92ZURpcnR5VHJhY2tlckljb24oKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIGRpcnR5IHRyYWNrZXIgZXZlbnRzXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb24gSWYgJ3JlbW92ZScsIHdpbGwgcmVtb3ZlIGF0dGFjaGVkIGV2ZW50c1xuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGRpcnR5VHJhY2tlckV2ZW50cyhvcHRpb24gPSAnJykge1xuICAgIGNvbnN0IHRoaXNBc0lucHV0ID0gdGhpcyBhcyBJZHNJbnB1dEludGVyZmFjZTtcbiAgICBpZiAoKHRoaXMgYXMgSWRzSW5wdXRJbnRlcmZhY2UpLmlucHV0KSB7XG4gICAgICBjb25zdCBldmVudE5hbWUgPSAnY2hhbmdlLmRpcnR5dHJhY2tlcm1peGluJztcbiAgICAgIGlmIChvcHRpb24gPT09ICdyZW1vdmUnKSB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXIgPSB0aGlzPy5oYW5kbGVkRXZlbnRzPy5nZXQoZXZlbnROYW1lKTtcbiAgICAgICAgaWYgKGhhbmRsZXIgJiYgaGFuZGxlci50YXJnZXQgPT09IHRoaXNBc0lucHV0LmlucHV0KSB7XG4gICAgICAgICAgdGhpcy5vZmZFdmVudChldmVudE5hbWUsIHRoaXNBc0lucHV0LmlucHV0KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vZmZFdmVudChldmVudE5hbWUpO1xuICAgICAgICB0aGlzLm9uRXZlbnQoZXZlbnROYW1lLCB0aGlzQXNJbnB1dC5pbnB1dCwgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHZhbCA9IHRoaXMudmFsTWV0aG9kKHRoaXNBc0lucHV0LmlucHV0KTtcbiAgICAgICAgICB0aGlzLnNldERpcnR5VHJhY2tlcih2YWwpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKiogSGFuZGxlIExhbmd1YWdlcyBDaGFuZ2VzICovXG4gIG9uTGFuZ3VhZ2VDaGFuZ2UgPSAoKSA9PiB7XG4gICAgY29uc3QgaWNvbiA9IHRoaXMuZGlydHlDb250YWluZXI/LnF1ZXJ5U2VsZWN0b3IoJy5pY29uLWRpcnR5Jyk7XG4gICAgaWYgKHRoaXMubG9jYWxlQVBJPy5pc1JUTCgpKSBpY29uPy5zZXRBdHRyaWJ1dGUoJ2RpcicsICdydGwnKTtcbiAgICBlbHNlIGljb24/LnJlbW92ZUF0dHJpYnV0ZSgnZGlyJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlc2V0IGRpcnR5IHRyYWNrZXJcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICByZXNldERpcnR5VHJhY2tlcigpIHtcbiAgICBpZiAodGhpcy5kaXJ0eSkge1xuICAgICAgdGhpcy5yZW1vdmVEaXJ0eVRyYWNrZXJJY29uKCk7XG4gICAgICB0aGlzLnJlbW92ZURpcnR5VHJhY2tlck1zZygpO1xuICAgICAgdGhpcy5kaXJ0eSA9IHsgb3JpZ2luYWw6IHRoaXMudmFsTWV0aG9kKCh0aGlzIGFzIElkc0lucHV0SW50ZXJmYWNlKS5pbnB1dCkgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oYW5kbGVEaXJ0eVRyYWNrZXIoKTtcbiAgICB9XG4gICAgdGhpcy5pc0RpcnR5ID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogRGVzdHJveSBkaXJ0eSB0cmFja2VyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgZGVzdHJveURpcnR5VHJhY2tlcigpIHtcbiAgICB0aGlzLmRpcnR5VHJhY2tlckV2ZW50cygncmVtb3ZlJyk7XG4gICAgdGhpcy5yZW1vdmVEaXJ0eVRyYWNrZXJJY29uKCk7XG4gICAgdGhpcy5yZW1vdmVEaXJ0eVRyYWNrZXJNc2coKTtcbiAgICB0aGlzLmRpcnR5ID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSdW5zIG9wdGlvbmFsIGNhbGxiYWNrLCBpZiBwb3NzaWJsZVxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gICNvbkRpcnR5VHJhY2tlckNoYW5nZSgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMub25EaXJ0eVRyYWNrZXJDaGFuZ2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMub25EaXJ0eVRyYWNrZXJDaGFuZ2UodGhpcy5kaXJ0eVRyYWNrZXIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGRpcnR5IHRyYWNraW5nIGZlYXR1cmUgb24gdG8gaW5kaWNhdGUgYSBjaGFuZ2VkIGZpZWxkXG4gICAqIEBwYXJhbSB7Ym9vbGVhbnxzdHJpbmd9IHZhbHVlIElmIHRydWUgd2lsbCBzZXQgYGRpcnR5LXRyYWNrZXJgIGF0dHJpYnV0ZVxuICAgKi9cbiAgc2V0IGRpcnR5VHJhY2tlcih2YWx1ZSkge1xuICAgIGNvbnN0IHZhbCA9IHN0cmluZ1RvQm9vbCh2YWx1ZSk7XG4gICAgaWYgKHZhbCkge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5ESVJUWV9UUkFDS0VSLCB2YWwudG9TdHJpbmcoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZXMuRElSVFlfVFJBQ0tFUik7XG4gICAgfVxuXG4gICAgdGhpcy4jb25EaXJ0eVRyYWNrZXJDaGFuZ2UoKTtcbiAgICB0aGlzLmhhbmRsZURpcnR5VHJhY2tlcigpO1xuICB9XG5cbiAgZ2V0IGRpcnR5VHJhY2tlcigpIHsgcmV0dXJuIHN0cmluZ1RvQm9vbCh0aGlzLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLkRJUlRZX1RSQUNLRVIpKTsgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgSWRzRGlydHlUcmFja2VyTWl4aW47XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/mixins/ids-dirty-tracker-mixin/ids-dirty-tracker-mixin.ts\n");

/***/ }),

/***/ "./src/mixins/ids-validation-mixin/ids-validation-mixin.ts":
/*!*****************************************************************!*\
  !*** ./src/mixins/ids-validation-mixin/ids-validation-mixin.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ids_validation_mixin_default)\n/* harmony export */ });\n/* harmony import */ var _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/ids-attributes */ \"./src/core/ids-attributes.ts\");\n/* harmony import */ var _utils_ids_object_utils_ids_object_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/ids-object-utils/ids-object-utils */ \"./src/utils/ids-object-utils/ids-object-utils.ts\");\n/* harmony import */ var _utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/ids-date-utils/ids-date-utils */ \"./src/utils/ids-date-utils/ids-date-utils.ts\");\n\n\n\nconst IdsValidationMixin = (superclass) => class extends superclass {\n  isTypeNotValid;\n  constructor(...args) {\n    super(...args);\n  }\n  connectedCallback() {\n    super.connectedCallback?.();\n    this.handleValidation();\n  }\n  static get attributes() {\n    return [\n      ...superclass.attributes,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VALIDATE,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VALIDATION_EVENTS,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VALIDATION_ICON,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VALIDATION_ID,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VALIDATION_MESSAGE,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VALIDATION_TYPE\n    ];\n  }\n  // Map of rules to use\n  useRules = /* @__PURE__ */ new Map();\n  // List of events to validate on\n  validationEventsList = [];\n  // Default icon\n  VALIDATION_DEFAULT_ICON = \"user-profile\";\n  // Icons\n  VALIDATION_ICONS = {\n    alert: \"alert\",\n    error: \"error\",\n    info: \"info\",\n    success: \"success\"\n  };\n  /**\n   * Handle the validation rules\n   * @returns {void}\n   */\n  handleValidation() {\n    const thisAsInput = this;\n    const isRadioGroup = thisAsInput.input?.classList.contains(\"ids-radio-group\");\n    const canRadio = !isRadioGroup || !!(isRadioGroup && this.querySelector(\"ids-radio\"));\n    if (thisAsInput.labelEl && typeof this.validate === \"string\" && canRadio) {\n      const events = this.validationEvents && typeof this.validationEvents === \"string\" ? this.validationEvents : \"change.validationmixin blur.validationmixin\";\n      this.validationEventsList = [...new Set(events.split(\" \"))];\n      const getRule = (id) => ({ id, rule: this.rules[id] });\n      let isRulesAdded = false;\n      this.validate.split(\" \").forEach((strRule) => {\n        if (!getRule(strRule).rule)\n          return;\n        if (strRule === \"required\") {\n          thisAsInput.labelEl?.classList.add(\"required\");\n          thisAsInput.input?.setAttribute(\"aria-required\", true);\n          if (isRadioGroup) {\n            const radioArr = [].slice.call(this.querySelectorAll(\"ids-radio\"));\n            radioArr.forEach((r) => r.input.setAttribute(\"required\", \"required\"));\n          }\n          this.validationElems?.editor?.setAttribute(\"aria-required\", true);\n        }\n        const setRules = (input) => {\n          const useRules = this.useRules.get(input);\n          if (useRules) {\n            const found = useRules.some((r) => r.id === strRule);\n            if (!found) {\n              const mergeRule = [...useRules, getRule(strRule)];\n              this.useRules.set(input, mergeRule);\n              isRulesAdded = true;\n            }\n          } else {\n            this.useRules.set(input, [getRule(strRule)]);\n            isRulesAdded = true;\n          }\n        };\n        setRules(thisAsInput.input);\n      });\n      if (isRulesAdded) {\n        this.handleValidationEvents();\n      }\n      const arrayValidate = this.validate?.split(\" \");\n      let rules = this.useRules.get(thisAsInput.input);\n      if (thisAsInput.input && rules?.length > arrayValidate?.length) {\n        const removed = [];\n        arrayValidate.forEach((id) => {\n          rules = rules.filter((r) => {\n            if (r.id === id)\n              return true;\n            removed.push(r.id);\n            return false;\n          });\n        });\n        removed.forEach((id) => this.removeValidationMessage({ id }));\n        this.useRules.set(thisAsInput.input, rules);\n      }\n    } else {\n      this.destroyValidation();\n    }\n  }\n  /**\n   * Check the validation and add/remove errors as needed\n   * @private\n   * @returns {void}\n   */\n  checkValidation() {\n    const checkRules = (input) => {\n      this.isTypeNotValid = {};\n      let isValid = true;\n      const useRules = this.useRules.get(input);\n      useRules?.forEach((thisRule) => {\n        if (thisRule.rule !== void 0 && !thisRule.rule?.check(input) && this.isTypeNotValid) {\n          this.addMessage(thisRule.rule);\n          isValid = false;\n          this.isTypeNotValid[thisRule.rule.type] = true;\n        } else if (thisRule.rule !== void 0) {\n          this.removeMessage(thisRule.rule);\n        }\n      });\n      this.isTypeNotValid = null;\n      this.triggerEvent(\"validate\", this, { detail: { elem: this, value: this.value, isValid } });\n    };\n    if (this.input) {\n      checkRules(this.input);\n    }\n  }\n  /**\n   * Add validation rule/s\n   * @param {IdsValidationRule} [rule] incoming rule/s settings\n   * @returns {void}\n   */\n  addValidationRule(rule) {\n    const isValid = (val) => typeof val === \"string\" && val !== \"\";\n    const addToValidate = [];\n    let isRulesAdded = false;\n    const addRule = (newRule) => {\n      const { id, type, message } = newRule;\n      if (isValid(id) && isValid(type) && isValid(message) && typeof newRule.check === \"function\") {\n        if (!this.rules[id]) {\n          isRulesAdded = true;\n          this.rules[id] = newRule;\n          if (!this.validate || !new RegExp(id).test(this.validate))\n            addToValidate.push(id);\n        }\n      }\n    };\n    if (rule?.constructor === Array) {\n      rule.forEach((r) => addRule(r));\n    } else {\n      addRule(rule);\n    }\n    if (isRulesAdded) {\n      if (addToValidate.length) {\n        const val = this.validate ? `${this.validate} ` : \"\";\n        this.validate = `${val}${[...new Set(addToValidate)].join(\" \")}`;\n      }\n      this.handleValidation();\n    }\n  }\n  /**\n   * Remove validation rule/s\n   * @param {string} [ruleId] incoming rule/s id\n   * @returns {void}\n   */\n  removeValidationRule(ruleId) {\n    const isValid = (val) => typeof val === \"string\" && val !== \"\";\n    let validate = this.validate;\n    let isRulesRemoved = false;\n    const removeRule = (id) => {\n      if (isValid(id) && this.rules[id] && new RegExp(id).test(validate)) {\n        isRulesRemoved = true;\n        delete this.rules[id];\n        validate = validate?.replace(id, \"\") || null;\n      }\n    };\n    if (ruleId?.constructor === Array) {\n      ruleId.forEach((id) => removeRule(id));\n    } else {\n      removeRule(ruleId);\n    }\n    if (isRulesRemoved) {\n      this.validate = validate?.replace(/\\s\\s+/g, \" \").trim() || null;\n    }\n  }\n  /**\n   * Add validation message/s\n   * @param {Array|object} [message] incoming message/s settings\n   * @returns {void}\n   */\n  addValidationMessage(message) {\n    const addMessage = (obj) => {\n      if ((0,_utils_ids_object_utils_ids_object_utils__WEBPACK_IMPORTED_MODULE_1__.isObjectAndNotEmpty)(obj))\n        this.addMessage(obj);\n    };\n    if (message?.constructor === Array) {\n      message.forEach((m) => addMessage(m));\n    } else {\n      addMessage(message);\n    }\n  }\n  /**\n   * Remove validation message/s\n   * @param {Array|object} [message] incoming message/s settings\n   * @returns {void}\n   */\n  removeValidationMessage(message) {\n    const removeMessage = (obj) => {\n      if ((0,_utils_ids_object_utils_ids_object_utils__WEBPACK_IMPORTED_MODULE_1__.isObjectAndNotEmpty)(obj))\n        this.removeMessage(obj);\n    };\n    if (message?.constructor === Array) {\n      message.forEach((m) => removeMessage(m));\n    } else {\n      removeMessage(message);\n    }\n  }\n  /**\n   * Add a message to an input\n   * @param {object} [settings] incoming settings\n   * @returns {void}\n   */\n  addMessage(settings) {\n    const {\n      id,\n      type,\n      message,\n      icon\n    } = settings;\n    const thisAsInput = this;\n    if (!id)\n      return;\n    let elem = this.shadowRoot?.querySelector(`[validation-id=\"${id}\"]`);\n    if (elem)\n      return;\n    const regex = new RegExp(`^\\\\b(${Object.keys(this.VALIDATION_ICONS).join(\"|\")})\\\\b$`, \"g\");\n    const isValidationIcon = type && regex.test(type);\n    let audible = isValidationIcon ? type.replace(/^./, type[0].toUpperCase()) : null;\n    audible = audible ? `<ids-text audible=\"true\">${audible} </ids-text>` : \"\";\n    let cssClass = \"validation-message\";\n    let iconName = type ? this.VALIDATION_ICONS[type] : \"\";\n    const messageId = `${thisAsInput.input?.getAttribute(\"id\")}-${settings.type}`;\n    if (!iconName && type === \"icon\") {\n      iconName = icon || this.VALIDATION_DEFAULT_ICON;\n      cssClass += iconName ? \" has-custom-icon\" : \"\";\n    }\n    cssClass += isValidationIcon ? ` ${type}` : \"\";\n    cssClass += this.disabled ? \" disabled\" : \"\";\n    const iconHtml = iconName ? `<ids-icon icon=\"${iconName}\" class=\"ids-icon\"></ids-icon>` : \"\";\n    elem = document.createElement(\"div\");\n    elem.setAttribute(\"id\", messageId);\n    elem.setAttribute(\"validation-id\", id);\n    elem.setAttribute(\"type\", type);\n    elem.className = cssClass;\n    elem.innerHTML = `${iconHtml}<ids-text error=\"true\" class=\"message-text\">${audible}${message}</ids-text>`;\n    this.validationElems?.main?.classList.add(type);\n    thisAsInput.fieldContainer?.classList.add(type ?? \"\");\n    thisAsInput.input?.setAttribute(\"aria-describedby\", messageId);\n    thisAsInput.input?.setAttribute(\"aria-invalid\", \"true\");\n    const rootEl = this.shadowRoot?.querySelector(\".ids-input, .ids-textarea, .ids-checkbox\");\n    const parent = rootEl || this.shadowRoot;\n    parent?.appendChild(elem);\n    const isRadioGroup = thisAsInput.input?.classList.contains(\"ids-radio-group\");\n    if (isRadioGroup) {\n      const radioArr = [].slice.call(this.querySelectorAll(\"ids-radio\"));\n      radioArr.forEach((r) => r.setAttribute(\"validation-has-error\", \"true\"));\n    }\n  }\n  /**\n   * Remove the message(s) from an input\n   * @param {object} [settings] incoming settings\n   * @returns {void}\n   */\n  removeMessage(settings) {\n    const thisAsInput = this;\n    const id = settings.id;\n    let type = settings.type;\n    const removeMsg = (elem) => {\n      if (elem) {\n        const thisId = id === null || typeof id === \"undefined\" ? elem.getAttribute(\"id\") : id;\n        if (!type) {\n          type = elem.getAttribute(\"type\");\n        }\n        if (!this.isTypeNotValid) {\n          this.isTypeNotValid = {};\n        }\n        elem.remove?.();\n        if (this.validationId === thisId) {\n          this.validationId = null;\n          this.validationType = null;\n          this.validationMessage = null;\n          this.validationIcon = null;\n        }\n      }\n    };\n    const el = this.shadowRoot?.querySelector(`[validation-id=\"${id}\"]`);\n    if (el) {\n      removeMsg(el);\n    } else if (type && (id === null || typeof id === \"undefined\")) {\n      const typeElms = this.shadowRoot?.querySelectorAll(`.validation-message[type=\"${type}\"]`);\n      typeElms.forEach((typeEl) => removeMsg(typeEl));\n    }\n    if (type) {\n      if (this.isTypeNotValid && !this.isTypeNotValid[type]) {\n        thisAsInput.fieldContainer?.classList.remove(type);\n        thisAsInput.input?.removeAttribute(\"aria-describedby\");\n        thisAsInput.input?.removeAttribute(\"aria-invalid\");\n      }\n    }\n    const isRadioGroup = thisAsInput.input?.classList.contains(\"ids-radio-group\");\n    if (isRadioGroup) {\n      const radioArr = [].slice.call(this.querySelectorAll(\"ids-radio\"));\n      radioArr.forEach((r) => r.removeAttribute(\"validation-has-error\"));\n    }\n    if (type)\n      this.validationElems?.main?.classList.remove(type);\n  }\n  /**\n   * Remove all the validation messages\n   * @returns {void}\n   */\n  removeAllValidationMessages() {\n    const nodes = [].slice.call(this.shadowRoot?.querySelectorAll(\".validation-message\"));\n    nodes.forEach((node) => {\n      const messageSettings = {\n        id: node.getAttribute(\"validation-id\")\n      };\n      const type = node.getAttribute(\"type\");\n      if (type) {\n        messageSettings.type = type;\n      }\n      this.removeMessage(messageSettings);\n    });\n  }\n  /**\n   * Set validation message manually\n   * @returns {void}\n   */\n  setMessageManually() {\n    const getVal = (val) => typeof val === \"string\" && val.trim() !== \"\" ? val.trim() : \"\";\n    const id = getVal(this.validationId);\n    const type = getVal(this.validationType);\n    const message = getVal(this.validationMessage);\n    const icon = getVal(this.validationIcon);\n    if (id && type && message) {\n      const args = { id, type, message, icon };\n      this.removeMessage(args);\n      this.addMessage(args);\n    }\n  }\n  /**\n   * Handle validation events\n   * @private\n   * @param {string} option If 'remove', will remove attached events\n   * @returns {void}\n   */\n  handleValidationEvents(option = \"\") {\n    const validationEvents = (input) => {\n      this.validationEventsList.forEach((eventName) => {\n        if (option === \"remove\") {\n          const handler = this.handledEvents.get(eventName);\n          if (handler && handler.target === input) {\n            this.offEvent(eventName, input);\n          }\n        } else {\n          this.onEvent(eventName, input, () => {\n            this.checkValidation();\n          });\n        }\n      });\n    };\n    if (this.input) {\n      validationEvents(this.input);\n    }\n  }\n  /**\n   * Destroy the validation mixin\n   * @returns {void}\n   */\n  destroyValidation() {\n    const destroy = (input) => {\n      const useRules = this.useRules.get(input);\n      if (useRules) {\n        this.handleValidationEvents(\"remove\");\n        this.useRules.delete(input);\n      }\n      if (!/\\brequired\\b/gi.test(this.validate)) {\n        this.labelEl?.classList.remove(\"required\");\n        input.removeAttribute(\"aria-required\");\n        this.validationElems?.editor?.removeAttribute(\"aria-required\");\n      }\n      this.removeAllValidationMessages();\n    };\n    if (this.input) {\n      destroy(this.input);\n    }\n  }\n  /**\n   * Set all validation rules\n   * @private\n   */\n  rules = {\n    /**\n     * Required validation rule\n     * @private\n     */\n    required: {\n      check: (input) => {\n        if (input.getAttribute(\"type\") === \"checkbox\") {\n          return input.checked;\n        }\n        if (input.classList.contains(\"ids-radio-group\")) {\n          return input.getRootNode()?.host?.checked;\n        }\n        const val = input.value;\n        return !(val === null || typeof val === \"string\" && val === \"\" || typeof val === \"number\" && Number.isNaN(val));\n      },\n      message: \"Required\",\n      type: \"error\",\n      id: \"required\"\n    },\n    /**\n     * Email validation rule\n     * @private\n     */\n    email: {\n      check: (input) => {\n        const val = input.value;\n        const regex = /^([\\w-]+(?:\\.[\\w-]+)*)@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,16}(?:\\.[a-z]{2})?)$/i;\n        return val.length ? regex.test(val) : true;\n      },\n      message: \"Email address not valid\",\n      type: \"error\",\n      id: \"email\"\n    },\n    date: {\n      check(input) {\n        const hostCompoment = input.getRootNode().host;\n        const val = input.value;\n        if (input instanceof Date) {\n          return input && input.getTime && !Number.isNaN(input.getTime());\n        }\n        const dateFormat = hostCompoment.format;\n        const options = {};\n        if (dateFormat) {\n          options.dateFormat = dateFormat;\n        }\n        this.message = hostCompoment.localeAPI.translate(\"InvalidDate\", { showBrackets: false });\n        const parsedDate = hostCompoment.localeAPI.parseDate(val, options);\n        return !(parsedDate === void 0 && val !== \"\");\n      },\n      message: \"Invalid Date\",\n      type: \"error\",\n      id: \"date\"\n    },\n    time: {\n      check(input) {\n        const hostCompoment = input.getRootNode().host;\n        const val = input.value;\n        if (!val)\n          return true;\n        const defaultFormat = hostCompoment.localeAPI.calendar(hostCompoment.localeAPI.locale.name).timeFormat;\n        const attrFormat = hostCompoment.format;\n        const format = attrFormat || defaultFormat;\n        this.message = hostCompoment.localeAPI.translate(\"InvalidTime\", { showBrackets: false });\n        const parsedTime = hostCompoment.localeAPI.parseDate(val, { dateFormat: format, strictTime: true });\n        return (0,_utils_ids_date_utils_ids_date_utils__WEBPACK_IMPORTED_MODULE_2__.isValidDate)(parsedTime);\n      },\n      message: \"Invalid Time\",\n      type: \"error\",\n      id: \"time\"\n    }\n  };\n  /**\n   * Sets the validation check to use\n   * @param {string} value The `validate` attribute\n   */\n  set validate(value) {\n    if (value) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VALIDATE, value);\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VALIDATE);\n    }\n    this.handleValidation();\n  }\n  get validate() {\n    return this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VALIDATE);\n  }\n  /**\n   * Sets which events to fire validation on\n   * @param {string} value The `validation-events` attribute\n   */\n  set validationEvents(value) {\n    if (value) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VALIDATION_EVENTS, value);\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VALIDATION_EVENTS);\n    }\n    this.handleValidation();\n  }\n  get validationEvents() {\n    return this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VALIDATION_EVENTS);\n  }\n  /**\n   * Sets  message icon, use with manually messages thru markup\n   * @param {string} value The value\n   */\n  set validationIcon(value) {\n    if (value) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VALIDATION_ICON, value);\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VALIDATION_ICON);\n    }\n    this.setMessageManually();\n  }\n  get validationIcon() {\n    return this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VALIDATION_ICON);\n  }\n  /**\n   * Sets  message id, use with manually messages thru markup\n   * @param {string} value The value\n   */\n  set validationId(value) {\n    if (value) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VALIDATION_ID, value);\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VALIDATION_ID);\n    }\n    this.setMessageManually();\n  }\n  get validationId() {\n    return this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VALIDATION_ID);\n  }\n  /**\n   * Sets message string, use with manually messages thru markup\n   * @param {string} value The value\n   */\n  set validationMessage(value) {\n    if (value) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VALIDATION_MESSAGE, value);\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VALIDATION_MESSAGE);\n    }\n    this.setMessageManually();\n  }\n  get validationMessage() {\n    return this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VALIDATION_MESSAGE);\n  }\n  /**\n   * Sets message type, use with manually messages thru markup\n   * @param {string} value The value\n   */\n  set validationType(value) {\n    if (value) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VALIDATION_TYPE, value);\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VALIDATION_TYPE);\n    }\n    this.setMessageManually();\n  }\n  get validationType() {\n    return this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.VALIDATION_TYPE);\n  }\n  /**\n   * Return if the field is valid or not\n   * @returns {boolean} true if invalid\n   */\n  get isValid() {\n    return this.shadowRoot?.querySelectorAll(\".validation-message\").length === 0;\n  }\n  /**\n   * Return if the current validation errors\n   * @returns {Array<IdsValidationErrorMessage>} The current errors\n   */\n  get validationMessages() {\n    const msgs = [];\n    this.shadowRoot?.querySelectorAll(\".validation-message\").forEach((message) => {\n      msgs.push({\n        message: message.querySelector(\"ids-text\")?.childNodes[1].textContent || \"\",\n        type: message.getAttribute(\"type\") || \"\",\n        id: message.getAttribute(\"validation-id\") || \"\"\n      });\n    });\n    return msgs;\n  }\n};\nvar ids_validation_mixin_default = IdsValidationMixin;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWl4aW5zL2lkcy12YWxpZGF0aW9uLW1peGluL2lkcy12YWxpZGF0aW9uLW1peGluLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDMkI7QUFFUztBQUNSO0FBc0M1QixNQUFNLHFCQUFxQixDQUF3QixlQUFrQixjQUFjLFdBQVc7QUFBQSxFQUM1RjtBQUFBLEVBRUEsZUFBZSxNQUFhO0FBQzFCLFVBQU0sR0FBRyxJQUFJO0FBQUEsRUFDZjtBQUFBLEVBRUEsb0JBQW9CO0FBQ2xCLFVBQU0sb0JBQW9CO0FBQzFCLFNBQUssaUJBQWlCO0FBQUEsRUFDeEI7QUFBQSxFQUVBLFdBQVcsYUFBYTtBQUN0QixXQUFPO0FBQUEsTUFDTCxHQUFJLFdBQW1CO0FBQUEsTUFDdkIscUVBQW1CO0FBQVIsTUFDWCw4RUFBNEI7QUFBakIsTUFDWCw0RUFBMEI7QUFBZixNQUNYLDBFQUF3QjtBQUFiLE1BQ1gsK0VBQTZCO0FBQWxCLE1BQ1gsNEVBQTBCO0FBQWYsSUFDYjtBQUFBLEVBQ0Y7QUFBQTtBQUFBLEVBR0EsV0FBVyxvQkFBSSxJQUFJO0FBQUE7QUFBQSxFQUduQix1QkFBNEIsQ0FBQztBQUFBO0FBQUEsRUFHN0IsMEJBQTBCO0FBQUE7QUFBQSxFQUcxQixtQkFBd0I7QUFBQSxJQUN0QixPQUFPO0FBQUEsSUFDUCxPQUFPO0FBQUEsSUFDUCxNQUFNO0FBQUEsSUFDTixTQUFTO0FBQUEsRUFDWDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxtQkFBbUI7QUFDakIsVUFBTSxjQUFjO0FBQ3BCLFVBQU0sZUFBZSxZQUFZLE9BQU8sVUFBVSxTQUFTLGlCQUFpQjtBQUM1RSxVQUFNLFdBQWEsQ0FBQyxnQkFBa0IsQ0FBQyxFQUFFLGdCQUFnQixLQUFLLGNBQWMsV0FBVztBQUV2RixRQUFJLFlBQVksV0FBVyxPQUFPLEtBQUssYUFBYSxZQUFZLFVBQVU7QUFJeEUsWUFBTSxTQUFVLEtBQUssb0JBQW9CLE9BQU8sS0FBSyxxQkFBcUIsV0FDdEUsS0FBSyxtQkFB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QixFQUFFLFFBQVEsQ0FBQyxZQUFxQjtBQUNyRixXQUFLLEtBQUs7QUFBQSxRQUNSLFNBQVMsUUFBUSxjQUFjLFVBQVUsR0FBRyxXQUFXLENBQUMsRUFBRSxlQUFlO0FBQUEsUUFDekUsTUFBTSxRQUFRLGFBQWEsTUFBTSxLQUFLO0FBQUEsUUFDdEMsSUFBSSxRQUFRLGFBQWEsZUFBZSxLQUFLO0FBQUEsTUFDL0MsQ0FBQztBQUFBLElBQ0gsQ0FBQztBQUNELFdBQU87QUFBQSxFQUNUO0FBQ0Y7QUFFQSxJQUFPLCtCQUFRIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaWRzLWVudGVycHJpc2Utd2MvLi9zcmMvbWl4aW5zL2lkcy12YWxpZGF0aW9uLW1peGluL2lkcy12YWxpZGF0aW9uLW1peGluLnRzPzliZDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSWRzSW5wdXRJbnRlcmZhY2UgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL2lkcy1pbnB1dC9pZHMtaW5wdXQtYXR0cmlidXRlcyc7XG5pbXBvcnQgeyBhdHRyaWJ1dGVzIH0gZnJvbSAnLi4vLi4vY29yZS9pZHMtYXR0cmlidXRlcyc7XG5pbXBvcnQgeyBJZHNDb25zdHJ1Y3RvciB9IGZyb20gJy4uLy4uL2NvcmUvaWRzLWVsZW1lbnQnO1xuaW1wb3J0IHsgaXNPYmplY3RBbmROb3RFbXB0eSB9IGZyb20gJy4uLy4uL3V0aWxzL2lkcy1vYmplY3QtdXRpbHMvaWRzLW9iamVjdC11dGlscyc7XG5pbXBvcnQgeyBpc1ZhbGlkRGF0ZSB9IGZyb20gJy4uLy4uL3V0aWxzL2lkcy1kYXRlLXV0aWxzL2lkcy1kYXRlLXV0aWxzJztcbmltcG9ydCB7IEV2ZW50c01peGluSW50ZXJmYWNlIH0gZnJvbSAnLi4vaWRzLWV2ZW50cy1taXhpbi9pZHMtZXZlbnRzLW1peGluJztcblxuZXhwb3J0IHR5cGUgSWRzVmFsaWRhdGlvbkVycm9yTWVzc2FnZSA9IHtcbiAgLyoqIFRoZSB1bmlxdWUgaWQgaW4gdGhlIGNoZWNrIG1lc3NhZ2VzICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqIFRoZSBUeXBlIG9mIG1lc3NhZ2UgYW5kIGljb24gKi9cbiAgdHlwZT86IHN0cmluZyB8ICdlcnJvcicgfCAnaW5mbycgfCAnYWxlcnQnIHwgJ3dhcm4nIHwgJ2ljb24nO1xuXG4gIC8qKiBUaGUgbG9jYWxpemVkIG1lc3NhZ2UgdGV4dCAqL1xuICBtZXNzYWdlPzogc3RyaW5nO1xuXG4gIC8qKiBUaGUgVHlwZSBvZiBtZXNzYWdlIGljb24gKi9cbiAgaWNvbj86IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIElkc1ZhbGlkYXRpb25SdWxlID0ge1xuICAvKiogVGhlIHVuaXF1ZSBydWxlIGlkICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqIFRoZSBUeXBlIG9mIHJ1bGUgKi9cbiAgdHlwZTogc3RyaW5nIHwgJ2Vycm9yJyB8ICdpbmZvJyB8ICdhbGVydCcgfCAnd2FybicgfCAnaWNvbic7XG5cbiAgLyoqIFRoZSBsb2NhbGl6ZWQgbWVzc2FnZSB0ZXh0ICovXG4gIG1lc3NhZ2U6IHN0cmluZztcblxuICAvKiogVGhlIG1ldGhvZCB0byBjaGVjayB2YWxpZGF0aW9uIGxvZ2ljLCByZXR1cm4gdHJ1ZSBpZiBpcyB2YWxpZCAqL1xuICBjaGVjazogKGlucHV0OiBIVE1MRWxlbWVudCkgPT4gYm9vbGVhbjtcbn07XG5cbnR5cGUgQ29uc3RyYWludHMgPSBJZHNDb25zdHJ1Y3RvcjxFdmVudHNNaXhpbkludGVyZmFjZT47XG5cbi8qKlxuICogQWRkcyB2YWxpZGF0aW9uIHRvIGFueSBpbnB1dCBmaWVsZFxuICogQHBhcmFtIHthbnl9IHN1cGVyY2xhc3MgQWNjZXB0cyBhIHN1cGVyY2xhc3MgYW5kIGNyZWF0ZXMgYSBuZXcgc3ViY2xhc3MgZnJvbSBpdFxuICogQHJldHVybnMge2FueX0gVGhlIGV4dGVuZGVkIG9iamVjdFxuICovXG5jb25zdCBJZHNWYWxpZGF0aW9uTWl4aW4gPSA8VCBleHRlbmRzIENvbnN0cmFpbnRzPihzdXBlcmNsYXNzOiBUKSA9PiBjbGFzcyBleHRlbmRzIHN1cGVyY2xhc3Mge1xuICBpc1R5cGVOb3RWYWxpZD86IGFueTtcblxuICBjb25zdHJ1Y3RvciguLi5hcmdzOiBhbnlbXSkge1xuICAgIHN1cGVyKC4uLmFyZ3MpO1xuICB9XG5cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2s/LigpO1xuICAgIHRoaXMuaGFuZGxlVmFsaWRhdGlvbigpO1xuICB9XG5cbiAgc3RhdGljIGdldCBhdHRyaWJ1dGVzKCkge1xuICAgIHJldHVybiBbXG4gICAgICAuLi4oc3VwZXJjbGFzcyBhcyBhbnkpLmF0dHJpYnV0ZXMsXG4gICAgICBhdHRyaWJ1dGVzLlZBTElEQVRFLFxuICAgICAgYXR0cmlidXRlcy5WQUxJREFUSU9OX0VWRU5UUyxcbiAgICAgIGF0dHJpYnV0ZXMuVkFMSURBVElPTl9JQ09OLFxuICAgICAgYXR0cmlidXRlcy5WQUxJREFUSU9OX0lELFxuICAgICAgYXR0cmlidXRlcy5WQUxJREFUSU9OX01FU1NBR0UsXG4gICAgICBhdHRyaWJ1dGVzLlZBTElEQVRJT05fVFlQRVxuICAgIF07XG4gIH1cblxuICAvLyBNYXAgb2YgcnVsZXMgdG8gdXNlXG4gIHVzZVJ1bGVzID0gbmV3IE1hcCgpO1xuXG4gIC8vIExpc3Qgb2YgZXZlbnRzIHRvIHZhbGlkYXRlIG9uXG4gIHZhbGlkYXRpb25FdmVudHNMaXN0OiBhbnkgPSBbXTtcblxuICAvLyBEZWZhdWx0IGljb25cbiAgVkFMSURBVElPTl9ERUZBVUxUX0lDT04gPSAndXNlci1wcm9maWxlJztcblxuICAvLyBJY29uc1xuICBWQUxJREFUSU9OX0lDT05TOiBhbnkgPSB7XG4gICAgYWxlcnQ6ICdhbGVydCcsXG4gICAgZXJyb3I6ICdlcnJvcicsXG4gICAgaW5mbzogJ2luZm8nLFxuICAgIHN1Y2Nlc3M6ICdzdWNjZXNzJyxcbiAgfTtcblxuICAvKipcbiAgICogSGFuZGxlIHRoZSB2YWxpZGF0aW9uIHJ1bGVzXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgaGFuZGxlVmFsaWRhdGlvbigpIHtcbiAgICBjb25zdCB0aGlzQXNJbnB1dCA9IHRoaXMgYXMgSWRzSW5wdXRJbnRlcmZhY2U7XG4gICAgY29uc3QgaXNSYWRpb0dyb3VwID0gdGhpc0FzSW5wdXQuaW5wdXQ/LmNsYXNzTGlzdC5jb250YWlucygnaWRzLXJhZGlvLWdyb3VwJyk7XG4gICAgY29uc3QgY2FuUmFkaW8gPSAoKCFpc1JhZGlvR3JvdXApIHx8ICghIShpc1JhZGlvR3JvdXAgJiYgdGhpcy5xdWVyeVNlbGVjdG9yKCdpZHMtcmFkaW8nKSkpKTtcblxuICAgIGlmICh0aGlzQXNJbnB1dC5sYWJlbEVsICYmIHR5cGVvZiB0aGlzLnZhbGlkYXRlID09PSAnc3RyaW5nJyAmJiBjYW5SYWRpbykge1xuICAgICAgLy8gY29uc3QgaXNDaGVja2JveCA9IHRoaXNBc0lucHV0LmlucHV0Py5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSA9PT0gJ2NoZWNrYm94JztcbiAgICAgIC8vIGNvbnN0IGRlZmF1bHRFdmVudHMgPSAoaXNDaGVja2JveCB8fCBpc1JhZGlvR3JvdXApID8gJ2NoYW5nZS52YWxpZGF0aW9ubWl4aW4nIDogJ2JsdXIudmFsaWRhdGlvbm1peGluJztcbiAgICAgIC8vIGNvbnN0IGRlZmF1bHRFdmVudHMgPSAnY2hhbmdlLnZhbGlkYXRpb25taXhpbic7XG4gICAgICBjb25zdCBldmVudHMgPSAodGhpcy52YWxpZGF0aW9uRXZlbnRzICYmIHR5cGVvZiB0aGlzLnZhbGlkYXRpb25FdmVudHMgPT09ICdzdHJpbmcnKVxuICAgICAgICA/IHRoaXMudmFsaWRhdGlvbkV2ZW50cyA6ICdjaGFuZ2UudmFsaWRhdGlvbm1peGluIGJsdXIudmFsaWRhdGlvbm1peGluJztcbiAgICAgIHRoaXMudmFsaWRhdGlvbkV2ZW50c0xpc3QgPSBbLi4ubmV3IFNldChldmVudHMuc3BsaXQoJyAnKSldO1xuICAgICAgY29uc3QgZ2V0UnVsZSA9IChpZDogc3RyaW5nKSA9PiAoeyBpZCwgcnVsZTogdGhpcy5ydWxlc1tpZF0gfSk7XG4gICAgICBsZXQgaXNSdWxlc0FkZGVkID0gZmFsc2U7XG5cbiAgICAgIHRoaXMudmFsaWRhdGUuc3BsaXQoJyAnKS5mb3JFYWNoKChzdHJSdWxlKSA9PiB7XG4gICAgICAgIGlmICghZ2V0UnVsZShzdHJSdWxlKS5ydWxlKSByZXR1cm47XG5cbiAgICAgICAgaWYgKHN0clJ1bGUgPT09ICdyZXF1aXJlZCcpIHtcbiAgICAgICAgICB0aGlzQXNJbnB1dC5sYWJlbEVsPy5jbGFzc0xpc3QuYWRkKCdyZXF1aXJlZCcpO1xuICAgICAgICAgIHRoaXNBc0lucHV0LmlucHV0Py5zZXRBdHRyaWJ1dGUoJ2FyaWEtcmVxdWlyZWQnLCB0cnVlKTtcblxuICAgICAgICAgIGlmIChpc1JhZGlvR3JvdXApIHtcbiAgICAgICAgICAgIGNvbnN0IHJhZGlvQXJyID0gW10uc2xpY2UuY2FsbCh0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lkcy1yYWRpbycpKTtcbiAgICAgICAgICAgIHJhZGlvQXJyLmZvckVhY2goKHI6IGFueSkgPT4gci5pbnB1dC5zZXRBdHRyaWJ1dGUoJ3JlcXVpcmVkJywgJ3JlcXVpcmVkJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAodGhpcyBhcyBhbnkpLnZhbGlkYXRpb25FbGVtcz8uZWRpdG9yPy5zZXRBdHRyaWJ1dGUoJ2FyaWEtcmVxdWlyZWQnLCB0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdGhlIHVzZVJ1bGVzIG1hcFxuICAgICAgICAgKiBAcGFyYW0geyp9IGlucHV0IGVsZW1lbnQocylcbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IHNldFJ1bGVzID0gKGlucHV0OiBhbnkpID0+IHtcbiAgICAgICAgICBjb25zdCB1c2VSdWxlcyA9IHRoaXMudXNlUnVsZXMuZ2V0KGlucHV0KTtcbiAgICAgICAgICBpZiAodXNlUnVsZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGZvdW5kID0gdXNlUnVsZXMuc29tZSgocjogYW55KSA9PiByLmlkID09PSBzdHJSdWxlKTtcbiAgICAgICAgICAgIGlmICghZm91bmQpIHtcbiAgICAgICAgICAgICAgY29uc3QgbWVyZ2VSdWxlID0gWy4uLnVzZVJ1bGVzLCBnZXRSdWxlKHN0clJ1bGUpXTtcbiAgICAgICAgICAgICAgdGhpcy51c2VSdWxlcy5zZXQoaW5wdXQsIG1lcmdlUnVsZSk7XG4gICAgICAgICAgICAgIGlzUnVsZXNBZGRlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudXNlUnVsZXMuc2V0KGlucHV0LCBbZ2V0UnVsZShzdHJSdWxlKV0pO1xuICAgICAgICAgICAgaXNSdWxlc0FkZGVkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2V0UnVsZXModGhpc0FzSW5wdXQuaW5wdXQpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChpc1J1bGVzQWRkZWQpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVWYWxpZGF0aW9uRXZlbnRzKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSB0byByZW1vdmUgdW51c2VkIHJ1bGUvc1xuICAgICAgY29uc3QgYXJyYXlWYWxpZGF0ZTogc3RyaW5nW10gPSB0aGlzLnZhbGlkYXRlPy5zcGxpdCgnICcpO1xuICAgICAgbGV0IHJ1bGVzID0gdGhpcy51c2VSdWxlcy5nZXQodGhpc0FzSW5wdXQuaW5wdXQpO1xuXG4gICAgICBpZiAodGhpc0FzSW5wdXQuaW5wdXQgJiYgKHJ1bGVzPy5sZW5ndGggPiBhcnJheVZhbGlkYXRlPy5sZW5ndGgpKSB7XG4gICAgICAgIGNvbnN0IHJlbW92ZWQ6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGFycmF5VmFsaWRhdGUuZm9yRWFjaCgoaWQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgIHJ1bGVzID0gcnVsZXMuZmlsdGVyKChyOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGlmIChyLmlkID09PSBpZCkgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICByZW1vdmVkLnB1c2goci5pZCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZW1vdmVkLmZvckVhY2goKGlkOiBzdHJpbmcpID0+IHRoaXMucmVtb3ZlVmFsaWRhdGlvbk1lc3NhZ2UoeyBpZCB9KSk7XG4gICAgICAgIHRoaXMudXNlUnVsZXMuc2V0KHRoaXNBc0lucHV0LmlucHV0LCBydWxlcyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGVzdHJveVZhbGlkYXRpb24oKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgdGhlIHZhbGlkYXRpb24gYW5kIGFkZC9yZW1vdmUgZXJyb3JzIGFzIG5lZWRlZFxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGNoZWNrVmFsaWRhdGlvbigpIHtcbiAgICAvKipcbiAgICAgKiBDaGVjayB2YWxpZGF0aW9uIHJ1bGVzXG4gICAgICogQHBhcmFtIHsqfSBpbnB1dCBlbGVtZW50XG4gICAgICovXG4gICAgY29uc3QgY2hlY2tSdWxlcyA9IChpbnB1dDogYW55KSA9PiB7XG4gICAgICB0aGlzLmlzVHlwZU5vdFZhbGlkID0ge307XG4gICAgICBsZXQgaXNWYWxpZCA9IHRydWU7XG4gICAgICBjb25zdCB1c2VSdWxlcyA9IHRoaXMudXNlUnVsZXMuZ2V0KGlucHV0KTtcbiAgICAgIHVzZVJ1bGVzPy5mb3JFYWNoKCh0aGlzUnVsZTogYW55KSA9PiB7XG4gICAgICAgIGlmICh0aGlzUnVsZS5ydWxlICE9PSB1bmRlZmluZWQgJiYgIXRoaXNSdWxlLnJ1bGU/LmNoZWNrKGlucHV0KSAmJiB0aGlzLmlzVHlwZU5vdFZhbGlkKSB7XG4gICAgICAgICAgdGhpcy5hZGRNZXNzYWdlKHRoaXNSdWxlLnJ1bGUpO1xuICAgICAgICAgIGlzVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLmlzVHlwZU5vdFZhbGlkW3RoaXNSdWxlLnJ1bGUudHlwZV0gPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXNSdWxlLnJ1bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMucmVtb3ZlTWVzc2FnZSh0aGlzUnVsZS5ydWxlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLmlzVHlwZU5vdFZhbGlkID0gbnVsbDtcbiAgICAgIHRoaXMudHJpZ2dlckV2ZW50KCd2YWxpZGF0ZScsIHRoaXMsIHsgZGV0YWlsOiB7IGVsZW06IHRoaXMsIHZhbHVlOiAodGhpcyBhcyBJZHNJbnB1dEludGVyZmFjZSkudmFsdWUsIGlzVmFsaWQgfSB9KTtcbiAgICB9O1xuXG4gICAgaWYgKCh0aGlzIGFzIElkc0lucHV0SW50ZXJmYWNlKS5pbnB1dCkge1xuICAgICAgY2hlY2tSdWxlcygodGhpcyBhcyBJZHNJbnB1dEludGVyZmFjZSkuaW5wdXQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgdmFsaWRhdGlvbiBydWxlL3NcbiAgICogQHBhcmFtIHtJZHNWYWxpZGF0aW9uUnVsZX0gW3J1bGVdIGluY29taW5nIHJ1bGUvcyBzZXR0aW5nc1xuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGFkZFZhbGlkYXRpb25SdWxlKHJ1bGU6IEFycmF5PElkc1ZhbGlkYXRpb25SdWxlPiB8IElkc1ZhbGlkYXRpb25SdWxlKTogdm9pZCB7XG4gICAgY29uc3QgaXNWYWxpZCA9ICh2YWw6IGFueSkgPT4gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgJiYgdmFsICE9PSAnJztcbiAgICBjb25zdCBhZGRUb1ZhbGlkYXRlOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxldCBpc1J1bGVzQWRkZWQgPSBmYWxzZTtcblxuICAgIC8vIEFkZCBydWxlXG4gICAgY29uc3QgYWRkUnVsZSA9IChuZXdSdWxlOiBJZHNWYWxpZGF0aW9uUnVsZSkgPT4ge1xuICAgICAgY29uc3QgeyBpZCwgdHlwZSwgbWVzc2FnZSB9ID0gbmV3UnVsZTtcbiAgICAgIGlmIChpc1ZhbGlkKGlkKSAmJiBpc1ZhbGlkKHR5cGUpICYmIGlzVmFsaWQobWVzc2FnZSkgJiYgdHlwZW9mIG5ld1J1bGUuY2hlY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJ1bGVzW2lkXSkge1xuICAgICAgICAgIGlzUnVsZXNBZGRlZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy5ydWxlc1tpZF0gPSBuZXdSdWxlO1xuICAgICAgICAgIGlmICghdGhpcy52YWxpZGF0ZSB8fCAoIShuZXcgUmVnRXhwKGlkKSkudGVzdCh0aGlzLnZhbGlkYXRlKSkpIGFkZFRvVmFsaWRhdGUucHVzaChpZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gQ2hlY2sgaWYgc2luZ2xlIG9yIG11bHRpcGxlIHJ1bGVzIG5lZWQgdG8gYmUgYWRkXG4gICAgaWYgKHJ1bGU/LmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xuICAgICAgcnVsZS5mb3JFYWNoKChyOiBJZHNWYWxpZGF0aW9uUnVsZSkgPT4gYWRkUnVsZShyKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFkZFJ1bGUocnVsZSBhcyBJZHNWYWxpZGF0aW9uUnVsZSk7XG4gICAgfVxuXG4gICAgLy8gQmluZCBydWxlL3NcbiAgICBpZiAoaXNSdWxlc0FkZGVkKSB7XG4gICAgICBpZiAoYWRkVG9WYWxpZGF0ZS5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgdmFsID0gdGhpcy52YWxpZGF0ZSA/IGAke3RoaXMudmFsaWRhdGV9IGAgOiAnJztcbiAgICAgICAgdGhpcy52YWxpZGF0ZSA9IGAke3ZhbH0ke1suLi5uZXcgU2V0KGFkZFRvVmFsaWRhdGUpXS5qb2luKCcgJyl9YDtcbiAgICAgIH1cbiAgICAgIHRoaXMuaGFuZGxlVmFsaWRhdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdmFsaWRhdGlvbiBydWxlL3NcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtydWxlSWRdIGluY29taW5nIHJ1bGUvcyBpZFxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIHJlbW92ZVZhbGlkYXRpb25SdWxlKHJ1bGVJZDogQXJyYXk8c3RyaW5nPiB8IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IGlzVmFsaWQgPSAodmFsOiBhbnkpID0+IHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnICYmIHZhbCAhPT0gJyc7XG4gICAgbGV0IHZhbGlkYXRlID0gdGhpcy52YWxpZGF0ZTtcbiAgICBsZXQgaXNSdWxlc1JlbW92ZWQgPSBmYWxzZTtcblxuICAgIC8vIFJlbW92ZSBydWxlXG4gICAgY29uc3QgcmVtb3ZlUnVsZSA9IChpZDogc3RyaW5nKSA9PiB7XG4gICAgICBpZiAoaXNWYWxpZChpZCkgJiYgdGhpcy5ydWxlc1tpZF0gJiYgKG5ldyBSZWdFeHAoaWQpKS50ZXN0KHZhbGlkYXRlIGFzIHN0cmluZykpIHtcbiAgICAgICAgaXNSdWxlc1JlbW92ZWQgPSB0cnVlO1xuICAgICAgICBkZWxldGUgdGhpcy5ydWxlc1tpZF07XG4gICAgICAgIHZhbGlkYXRlID0gdmFsaWRhdGU/LnJlcGxhY2UoaWQsICcnKSB8fCBudWxsO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBDaGVjayBpZiBzaW5nbGUgb3IgbXVsdGlwbGUgcnVsZXMgbmVlZCB0byBiZSByZW1vdmVcbiAgICBpZiAocnVsZUlkPy5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcbiAgICAgIHJ1bGVJZC5mb3JFYWNoKChpZDogc3RyaW5nKSA9PiByZW1vdmVSdWxlKGlkKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZVJ1bGUocnVsZUlkIGFzIHN0cmluZyk7XG4gICAgfVxuXG4gICAgLy8gVW5iaW5kIHJ1bGUvc1xuICAgIGlmIChpc1J1bGVzUmVtb3ZlZCkge1xuICAgICAgdGhpcy52YWxpZGF0ZSA9IHZhbGlkYXRlPy5yZXBsYWNlKC9cXHNcXHMrL2csICcgJykudHJpbSgpIHx8IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCB2YWxpZGF0aW9uIG1lc3NhZ2Uvc1xuICAgKiBAcGFyYW0ge0FycmF5fG9iamVjdH0gW21lc3NhZ2VdIGluY29taW5nIG1lc3NhZ2UvcyBzZXR0aW5nc1xuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGFkZFZhbGlkYXRpb25NZXNzYWdlKG1lc3NhZ2U6IEFycmF5PElkc1ZhbGlkYXRpb25FcnJvck1lc3NhZ2U+IHwgSWRzVmFsaWRhdGlvbkVycm9yTWVzc2FnZSk6IHZvaWQge1xuICAgIGNvbnN0IGFkZE1lc3NhZ2UgPSAob2JqOiBhbnkpOiB2b2lkID0+IHtcbiAgICAgIGlmIChpc09iamVjdEFuZE5vdEVtcHR5KG9iaikpIHRoaXMuYWRkTWVzc2FnZShvYmopO1xuICAgIH07XG5cbiAgICBpZiAobWVzc2FnZT8uY29uc3RydWN0b3IgPT09IEFycmF5KSB7XG4gICAgICBtZXNzYWdlLmZvckVhY2goKG0pID0+IGFkZE1lc3NhZ2UobSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhZGRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdmFsaWRhdGlvbiBtZXNzYWdlL3NcbiAgICogQHBhcmFtIHtBcnJheXxvYmplY3R9IFttZXNzYWdlXSBpbmNvbWluZyBtZXNzYWdlL3Mgc2V0dGluZ3NcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICByZW1vdmVWYWxpZGF0aW9uTWVzc2FnZShtZXNzYWdlOiBBcnJheTxJZHNWYWxpZGF0aW9uRXJyb3JNZXNzYWdlPiB8IElkc1ZhbGlkYXRpb25FcnJvck1lc3NhZ2UpOiB2b2lkIHtcbiAgICBjb25zdCByZW1vdmVNZXNzYWdlID0gKG9iajogYW55KTogdm9pZCA9PiB7XG4gICAgICBpZiAoaXNPYmplY3RBbmROb3RFbXB0eShvYmopKSB0aGlzLnJlbW92ZU1lc3NhZ2Uob2JqKTtcbiAgICB9O1xuXG4gICAgaWYgKG1lc3NhZ2U/LmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xuICAgICAgbWVzc2FnZS5mb3JFYWNoKChtKSA9PiByZW1vdmVNZXNzYWdlKG0pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlTWVzc2FnZShtZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgbWVzc2FnZSB0byBhbiBpbnB1dFxuICAgKiBAcGFyYW0ge29iamVjdH0gW3NldHRpbmdzXSBpbmNvbWluZyBzZXR0aW5nc1xuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGFkZE1lc3NhZ2Uoc2V0dGluZ3M6IElkc1ZhbGlkYXRpb25FcnJvck1lc3NhZ2UpOiB2b2lkIHtcbiAgICBjb25zdCB7XG4gICAgICBpZCxcbiAgICAgIHR5cGUsXG4gICAgICBtZXNzYWdlLFxuICAgICAgaWNvblxuICAgIH0gPSBzZXR0aW5ncztcbiAgICBjb25zdCB0aGlzQXNJbnB1dCA9IHRoaXMgYXMgSWRzSW5wdXRJbnRlcmZhY2U7XG5cbiAgICBpZiAoIWlkKSByZXR1cm47XG4gICAgbGV0IGVsZW0gPSB0aGlzLnNoYWRvd1Jvb3Q/LnF1ZXJ5U2VsZWN0b3IoYFt2YWxpZGF0aW9uLWlkPVwiJHtpZH1cIl1gKTtcbiAgICBpZiAoZWxlbSkgcmV0dXJuOyAvLyBBbHJlYWR5IGhhcyB0aGlzIG1lc3NhZ2VcblxuICAgIC8vIEFkZCBlcnJvciBhbmQgcmVsYXRlZCBkZXRhaWxzXG4gICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGBeXFxcXGIoJHtPYmplY3Qua2V5cyh0aGlzLlZBTElEQVRJT05fSUNPTlMpLmpvaW4oJ3wnKX0pXFxcXGIkYCwgJ2cnKTtcbiAgICBjb25zdCBpc1ZhbGlkYXRpb25JY29uID0gdHlwZSAmJiAocmVnZXgudGVzdCh0eXBlKSk7XG4gICAgbGV0IGF1ZGlibGUgPSBpc1ZhbGlkYXRpb25JY29uID8gdHlwZS5yZXBsYWNlKC9eLi8sIHR5cGVbMF0udG9VcHBlckNhc2UoKSkgOiBudWxsO1xuICAgIGF1ZGlibGUgPSBhdWRpYmxlID8gYDxpZHMtdGV4dCBhdWRpYmxlPVwidHJ1ZVwiPiR7YXVkaWJsZX0gPC9pZHMtdGV4dD5gIDogJyc7XG4gICAgbGV0IGNzc0NsYXNzID0gJ3ZhbGlkYXRpb24tbWVzc2FnZSc7XG4gICAgbGV0IGljb25OYW1lID0gdHlwZSA/IHRoaXMuVkFMSURBVElPTl9JQ09OU1t0eXBlXSA6ICcnO1xuICAgIGNvbnN0IG1lc3NhZ2VJZCA9IGAke3RoaXNBc0lucHV0LmlucHV0Py5nZXRBdHRyaWJ1dGUoJ2lkJyl9LSR7c2V0dGluZ3MudHlwZX1gO1xuXG4gICAgaWYgKCFpY29uTmFtZSAmJiB0eXBlID09PSAnaWNvbicpIHtcbiAgICAgIGljb25OYW1lID0gaWNvbiB8fCB0aGlzLlZBTElEQVRJT05fREVGQVVMVF9JQ09OO1xuICAgICAgY3NzQ2xhc3MgKz0gaWNvbk5hbWUgPyAnIGhhcy1jdXN0b20taWNvbicgOiAnJztcbiAgICB9XG4gICAgY3NzQ2xhc3MgKz0gaXNWYWxpZGF0aW9uSWNvbiA/IGAgJHt0eXBlfWAgOiAnJztcbiAgICBjc3NDbGFzcyArPSAodGhpcyBhcyBhbnkpLmRpc2FibGVkID8gJyBkaXNhYmxlZCcgOiAnJztcbiAgICBjb25zdCBpY29uSHRtbCA9IGljb25OYW1lID8gYDxpZHMtaWNvbiBpY29uPVwiJHtpY29uTmFtZX1cIiBjbGFzcz1cImlkcy1pY29uXCI+PC9pZHMtaWNvbj5gIDogJyc7XG5cbiAgICAvLyBBZGQgZXJyb3IgbWVzc2FnZSBkaXYgYW5kIGFzc29jaWF0ZWQgYXJpYVxuICAgIGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIGVsZW0uc2V0QXR0cmlidXRlKCdpZCcsIG1lc3NhZ2VJZCk7XG4gICAgZWxlbS5zZXRBdHRyaWJ1dGUoJ3ZhbGlkYXRpb24taWQnLCBpZCk7XG4gICAgZWxlbS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCB0eXBlIGFzIHN0cmluZyk7XG4gICAgZWxlbS5jbGFzc05hbWUgPSBjc3NDbGFzcztcbiAgICBlbGVtLmlubmVySFRNTCA9IGAke2ljb25IdG1sfTxpZHMtdGV4dCBlcnJvcj1cInRydWVcIiBjbGFzcz1cIm1lc3NhZ2UtdGV4dFwiPiR7YXVkaWJsZX0ke21lc3NhZ2V9PC9pZHMtdGV4dD5gO1xuICAgICh0aGlzIGFzIGFueSkudmFsaWRhdGlvbkVsZW1zPy5tYWluPy5jbGFzc0xpc3QuYWRkKHR5cGUpO1xuICAgIHRoaXNBc0lucHV0LmZpZWxkQ29udGFpbmVyPy5jbGFzc0xpc3QuYWRkKHR5cGUgPz8gJycpO1xuICAgIHRoaXNBc0lucHV0LmlucHV0Py5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGVzY3JpYmVkYnknLCBtZXNzYWdlSWQpO1xuICAgIHRoaXNBc0lucHV0LmlucHV0Py5zZXRBdHRyaWJ1dGUoJ2FyaWEtaW52YWxpZCcsICd0cnVlJyk7XG5cbiAgICBjb25zdCByb290RWwgPSB0aGlzLnNoYWRvd1Jvb3Q/LnF1ZXJ5U2VsZWN0b3IoJy5pZHMtaW5wdXQsIC5pZHMtdGV4dGFyZWEsIC5pZHMtY2hlY2tib3gnKTtcbiAgICBjb25zdCBwYXJlbnQgPSByb290RWwgfHwgdGhpcy5zaGFkb3dSb290O1xuICAgIHBhcmVudD8uYXBwZW5kQ2hpbGQoZWxlbSk7XG5cbiAgICAvLyBBZGQgZXh0cmEgY2xhc3NlcyBmb3IgcmFkaW9zXG4gICAgY29uc3QgaXNSYWRpb0dyb3VwID0gdGhpc0FzSW5wdXQuaW5wdXQ/LmNsYXNzTGlzdC5jb250YWlucygnaWRzLXJhZGlvLWdyb3VwJyk7XG4gICAgaWYgKGlzUmFkaW9Hcm91cCkge1xuICAgICAgY29uc3QgcmFkaW9BcnIgPSBbXS5zbGljZS5jYWxsKHRoaXMucXVlcnlTZWxlY3RvckFsbCgnaWRzLXJhZGlvJykpO1xuICAgICAgcmFkaW9BcnIuZm9yRWFjaCgocjogSFRNTEVsZW1lbnQpID0+IHIuc2V0QXR0cmlidXRlKCd2YWxpZGF0aW9uLWhhcy1lcnJvcicsICd0cnVlJykpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIG1lc3NhZ2UocykgZnJvbSBhbiBpbnB1dFxuICAgKiBAcGFyYW0ge29iamVjdH0gW3NldHRpbmdzXSBpbmNvbWluZyBzZXR0aW5nc1xuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIHJlbW92ZU1lc3NhZ2Uoc2V0dGluZ3M6IElkc1ZhbGlkYXRpb25FcnJvck1lc3NhZ2UpOiB2b2lkIHtcbiAgICBjb25zdCB0aGlzQXNJbnB1dCA9IHRoaXMgYXMgSWRzSW5wdXRJbnRlcmZhY2U7XG4gICAgY29uc3QgaWQgPSBzZXR0aW5ncy5pZDtcbiAgICBsZXQgdHlwZSA9IHNldHRpbmdzLnR5cGU7XG5cbiAgICBjb25zdCByZW1vdmVNc2cgPSAoZWxlbTogYW55KSA9PiB7XG4gICAgICBpZiAoZWxlbSkge1xuICAgICAgICBjb25zdCB0aGlzSWQgPSAoaWQgPT09IG51bGwgfHwgdHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykgPyBlbGVtLmdldEF0dHJpYnV0ZSgnaWQnKSA6IGlkO1xuICAgICAgICBpZiAoIXR5cGUpIHtcbiAgICAgICAgICB0eXBlID0gZWxlbS5nZXRBdHRyaWJ1dGUoJ3R5cGUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaXNUeXBlTm90VmFsaWQpIHtcbiAgICAgICAgICB0aGlzLmlzVHlwZU5vdFZhbGlkID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxlbS5yZW1vdmU/LigpO1xuICAgICAgICAvLyBSZW1vdmUgcmVsYXRlZCBpdGVtcywgYWRkZWQgbWFudWFsbHkgYnkgbWFya3VwXG4gICAgICAgIGlmICh0aGlzLnZhbGlkYXRpb25JZCA9PT0gdGhpc0lkKSB7XG4gICAgICAgICAgdGhpcy52YWxpZGF0aW9uSWQgPSBudWxsO1xuICAgICAgICAgIHRoaXMudmFsaWRhdGlvblR5cGUgPSBudWxsO1xuICAgICAgICAgIHRoaXMudmFsaWRhdGlvbk1lc3NhZ2UgPSBudWxsO1xuICAgICAgICAgIHRoaXMudmFsaWRhdGlvbkljb24gPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGVsOiBhbnkgPSB0aGlzLnNoYWRvd1Jvb3Q/LnF1ZXJ5U2VsZWN0b3IoYFt2YWxpZGF0aW9uLWlkPVwiJHtpZH1cIl1gKTtcbiAgICBpZiAoZWwpIHtcbiAgICAgIHJlbW92ZU1zZyhlbCk7XG4gICAgfSBlbHNlIGlmICh0eXBlICYmIChpZCA9PT0gbnVsbCB8fCB0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSkge1xuICAgICAgY29uc3QgdHlwZUVsbXM6IGFueSA9IHRoaXMuc2hhZG93Um9vdD8ucXVlcnlTZWxlY3RvckFsbChgLnZhbGlkYXRpb24tbWVzc2FnZVt0eXBlPVwiJHt0eXBlfVwiXWApO1xuICAgICAgdHlwZUVsbXMuZm9yRWFjaCgodHlwZUVsOiBhbnkpID0+IHJlbW92ZU1zZyh0eXBlRWwpKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZSkge1xuICAgICAgaWYgKHRoaXMuaXNUeXBlTm90VmFsaWQgJiYgIXRoaXMuaXNUeXBlTm90VmFsaWRbdHlwZV0pIHtcbiAgICAgICAgdGhpc0FzSW5wdXQuZmllbGRDb250YWluZXI/LmNsYXNzTGlzdC5yZW1vdmUodHlwZSk7XG4gICAgICAgIHRoaXNBc0lucHV0LmlucHV0Py5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtZGVzY3JpYmVkYnknKTtcbiAgICAgICAgdGhpc0FzSW5wdXQuaW5wdXQ/LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1pbnZhbGlkJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgaXNSYWRpb0dyb3VwID0gdGhpc0FzSW5wdXQuaW5wdXQ/LmNsYXNzTGlzdC5jb250YWlucygnaWRzLXJhZGlvLWdyb3VwJyk7XG4gICAgaWYgKGlzUmFkaW9Hcm91cCkge1xuICAgICAgY29uc3QgcmFkaW9BcnIgPSBbXS5zbGljZS5jYWxsKHRoaXMucXVlcnlTZWxlY3RvckFsbCgnaWRzLXJhZGlvJykpO1xuICAgICAgcmFkaW9BcnIuZm9yRWFjaCgocjogSFRNTEVsZW1lbnQpID0+IHIucmVtb3ZlQXR0cmlidXRlKCd2YWxpZGF0aW9uLWhhcy1lcnJvcicpKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZSkgKHRoaXMgYXMgYW55KS52YWxpZGF0aW9uRWxlbXM/Lm1haW4/LmNsYXNzTGlzdC5yZW1vdmUodHlwZSk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGFsbCB0aGUgdmFsaWRhdGlvbiBtZXNzYWdlc1xuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIHJlbW92ZUFsbFZhbGlkYXRpb25NZXNzYWdlcygpIHtcbiAgICBjb25zdCBub2RlcyA9IFtdLnNsaWNlLmNhbGwodGhpcy5zaGFkb3dSb290Py5xdWVyeVNlbGVjdG9yQWxsKCcudmFsaWRhdGlvbi1tZXNzYWdlJykpO1xuICAgIG5vZGVzLmZvckVhY2goKG5vZGU6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgICBjb25zdCBtZXNzYWdlU2V0dGluZ3M6IElkc1ZhbGlkYXRpb25FcnJvck1lc3NhZ2UgPSB7XG4gICAgICAgIGlkOiAobm9kZS5nZXRBdHRyaWJ1dGUoJ3ZhbGlkYXRpb24taWQnKSBhcyBzdHJpbmcpXG4gICAgICB9O1xuICAgICAgY29uc3QgdHlwZTogYW55ID0gbm9kZS5nZXRBdHRyaWJ1dGUoJ3R5cGUnKTtcbiAgICAgIGlmICh0eXBlKSB7XG4gICAgICAgIG1lc3NhZ2VTZXR0aW5ncy50eXBlID0gdHlwZTtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVtb3ZlTWVzc2FnZShtZXNzYWdlU2V0dGluZ3MpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB2YWxpZGF0aW9uIG1lc3NhZ2UgbWFudWFsbHlcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBzZXRNZXNzYWdlTWFudWFsbHkoKSB7XG4gICAgY29uc3QgZ2V0VmFsID0gKHZhbD86IHN0cmluZyB8IG51bGwpOiBzdHJpbmcgPT4gKFxuICAgICAgdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgJiYgdmFsLnRyaW0oKSAhPT0gJycgPyB2YWwudHJpbSgpIDogJydcbiAgICApO1xuICAgIGNvbnN0IGlkID0gZ2V0VmFsKHRoaXMudmFsaWRhdGlvbklkKTtcbiAgICBjb25zdCB0eXBlID0gZ2V0VmFsKHRoaXMudmFsaWRhdGlvblR5cGUpO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnZXRWYWwodGhpcy52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgY29uc3QgaWNvbiA9IGdldFZhbCh0aGlzLnZhbGlkYXRpb25JY29uKTtcblxuICAgIGlmIChpZCAmJiB0eXBlICYmIG1lc3NhZ2UpIHtcbiAgICAgIGNvbnN0IGFyZ3MgPSB7IGlkLCB0eXBlLCBtZXNzYWdlLCBpY29uIH07IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgIHRoaXMucmVtb3ZlTWVzc2FnZShhcmdzKTtcbiAgICAgIHRoaXMuYWRkTWVzc2FnZShhcmdzKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHZhbGlkYXRpb24gZXZlbnRzXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb24gSWYgJ3JlbW92ZScsIHdpbGwgcmVtb3ZlIGF0dGFjaGVkIGV2ZW50c1xuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGhhbmRsZVZhbGlkYXRpb25FdmVudHMob3B0aW9uID0gJycpIHtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgdGhlIHZhbGlkYXRpb24gZXZlbnRzXG4gICAgICogQHBhcmFtIHsqfSBpbnB1dCBlbGVtZW50KHMpXG4gICAgICovXG4gICAgY29uc3QgdmFsaWRhdGlvbkV2ZW50cyA9IChpbnB1dDogSFRNTEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMudmFsaWRhdGlvbkV2ZW50c0xpc3QuZm9yRWFjaCgoZXZlbnROYW1lOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKG9wdGlvbiA9PT0gJ3JlbW92ZScpIHtcbiAgICAgICAgICBjb25zdCBoYW5kbGVyID0gdGhpcy5oYW5kbGVkRXZlbnRzLmdldChldmVudE5hbWUpO1xuICAgICAgICAgIGlmIChoYW5kbGVyICYmIGhhbmRsZXIudGFyZ2V0ID09PSBpbnB1dCkge1xuICAgICAgICAgICAgdGhpcy5vZmZFdmVudChldmVudE5hbWUsIGlucHV0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5vbkV2ZW50KGV2ZW50TmFtZSwgaW5wdXQsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tWYWxpZGF0aW9uKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBpZiAoKHRoaXMgYXMgSWRzSW5wdXRJbnRlcmZhY2UpLmlucHV0KSB7XG4gICAgICB2YWxpZGF0aW9uRXZlbnRzKCh0aGlzIGFzIElkc0lucHV0SW50ZXJmYWNlKS5pbnB1dCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERlc3Ryb3kgdGhlIHZhbGlkYXRpb24gbWl4aW5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBkZXN0cm95VmFsaWRhdGlvbigpIHtcbiAgICAvKipcbiAgICAgKiBEZXN0cm95IHZhbGlkYXRpb25cbiAgICAgKiBAcGFyYW0geyp9IGlucHV0IGVsZW1lbnQocylcbiAgICAgKi9cbiAgICBjb25zdCBkZXN0cm95ID0gKGlucHV0OiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IHVzZVJ1bGVzID0gdGhpcy51c2VSdWxlcy5nZXQoaW5wdXQpO1xuICAgICAgaWYgKHVzZVJ1bGVzKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlVmFsaWRhdGlvbkV2ZW50cygncmVtb3ZlJyk7XG4gICAgICAgIHRoaXMudXNlUnVsZXMuZGVsZXRlKGlucHV0KTtcbiAgICAgIH1cbiAgICAgIGlmICghKC9cXGJyZXF1aXJlZFxcYi9naS50ZXN0KHRoaXMudmFsaWRhdGUgYXMgc3RyaW5nKSkpIHtcbiAgICAgICAgKHRoaXMgYXMgSWRzSW5wdXRJbnRlcmZhY2UpLmxhYmVsRWw/LmNsYXNzTGlzdC5yZW1vdmUoJ3JlcXVpcmVkJyk7XG4gICAgICAgIGlucHV0LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1yZXF1aXJlZCcpO1xuICAgICAgICAodGhpcyBhcyBhbnkpLnZhbGlkYXRpb25FbGVtcz8uZWRpdG9yPy5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtcmVxdWlyZWQnKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVtb3ZlQWxsVmFsaWRhdGlvbk1lc3NhZ2VzKCk7XG4gICAgfTtcblxuICAgIGlmICgodGhpcyBhcyBJZHNJbnB1dEludGVyZmFjZSkuaW5wdXQpIHtcbiAgICAgIGRlc3Ryb3koKHRoaXMgYXMgSWRzSW5wdXRJbnRlcmZhY2UpLmlucHV0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IGFsbCB2YWxpZGF0aW9uIHJ1bGVzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBydWxlczogYW55ID0ge1xuICAgIC8qKlxuICAgICAqIFJlcXVpcmVkIHZhbGlkYXRpb24gcnVsZVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcmVxdWlyZWQ6IHtcbiAgICAgIGNoZWNrOiAoaW5wdXQ6IGFueSkgPT4ge1xuICAgICAgICAvLyBDaGVja2JveFxuICAgICAgICBpZiAoaW5wdXQuZ2V0QXR0cmlidXRlKCd0eXBlJykgPT09ICdjaGVja2JveCcpIHtcbiAgICAgICAgICByZXR1cm4gaW5wdXQuY2hlY2tlZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBSYWRpb1xuICAgICAgICBpZiAoaW5wdXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpZHMtcmFkaW8tZ3JvdXAnKSkge1xuICAgICAgICAgIHJldHVybiBpbnB1dC5nZXRSb290Tm9kZSgpPy5ob3N0Py5jaGVja2VkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbCA9IGlucHV0LnZhbHVlO1xuICAgICAgICByZXR1cm4gIShcbiAgICAgICAgICAodmFsID09PSBudWxsKVxuICAgICAgICAgIHx8ICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJyAmJiB2YWwgPT09ICcnKVxuICAgICAgICAgIHx8ICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJyAmJiBOdW1iZXIuaXNOYU4odmFsKSlcbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgICBtZXNzYWdlOiAnUmVxdWlyZWQnLFxuICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgIGlkOiAncmVxdWlyZWQnXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEVtYWlsIHZhbGlkYXRpb24gcnVsZVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgZW1haWw6IHtcbiAgICAgIGNoZWNrOiAoaW5wdXQ6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCB2YWwgPSBpbnB1dC52YWx1ZTtcbiAgICAgICAgY29uc3QgcmVnZXggPSAvXihbXFx3LV0rKD86XFwuW1xcdy1dKykqKUAoKD86W1xcdy1dK1xcLikqXFx3W1xcdy1dezAsNjZ9KVxcLihbYS16XXsyLDE2fSg/OlxcLlthLXpdezJ9KT8pJC9pO1xuICAgICAgICByZXR1cm4gKHZhbC5sZW5ndGgpID8gcmVnZXgudGVzdCh2YWwpIDogdHJ1ZTtcbiAgICAgIH0sXG4gICAgICBtZXNzYWdlOiAnRW1haWwgYWRkcmVzcyBub3QgdmFsaWQnLFxuICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgIGlkOiAnZW1haWwnXG4gICAgfSxcblxuICAgIGRhdGU6IHtcbiAgICAgIGNoZWNrKGlucHV0OiBhbnkpIHtcbiAgICAgICAgY29uc3QgaG9zdENvbXBvbWVudCA9IGlucHV0LmdldFJvb3ROb2RlKCkuaG9zdDtcbiAgICAgICAgY29uc3QgdmFsID0gaW5wdXQudmFsdWU7XG4gICAgICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICByZXR1cm4gaW5wdXQgJiYgaW5wdXQuZ2V0VGltZSAmJiAhTnVtYmVyLmlzTmFOKGlucHV0LmdldFRpbWUoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkYXRlRm9ybWF0ID0gaG9zdENvbXBvbWVudC5mb3JtYXQ7XG4gICAgICAgIGNvbnN0IG9wdGlvbnM6IGFueSA9IHt9O1xuICAgICAgICBpZiAoZGF0ZUZvcm1hdCkge1xuICAgICAgICAgIG9wdGlvbnMuZGF0ZUZvcm1hdCA9IGRhdGVGb3JtYXQ7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBob3N0Q29tcG9tZW50LmxvY2FsZUFQSS50cmFuc2xhdGUoJ0ludmFsaWREYXRlJywgeyBzaG93QnJhY2tldHM6IGZhbHNlIH0pO1xuXG4gICAgICAgIGNvbnN0IHBhcnNlZERhdGUgPSBob3N0Q29tcG9tZW50LmxvY2FsZUFQSS5wYXJzZURhdGUodmFsLCBvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuICEoKChwYXJzZWREYXRlID09PSB1bmRlZmluZWQpICYmIHZhbCAhPT0gJycpKTtcbiAgICAgIH0sXG4gICAgICBtZXNzYWdlOiAnSW52YWxpZCBEYXRlJyxcbiAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICBpZDogJ2RhdGUnXG4gICAgfSxcblxuICAgIHRpbWU6IHtcbiAgICAgIGNoZWNrKGlucHV0OiBhbnkpIHtcbiAgICAgICAgY29uc3QgaG9zdENvbXBvbWVudCA9IGlucHV0LmdldFJvb3ROb2RlKCkuaG9zdDtcbiAgICAgICAgY29uc3QgdmFsID0gaW5wdXQudmFsdWU7XG5cbiAgICAgICAgaWYgKCF2YWwpIHJldHVybiB0cnVlO1xuXG4gICAgICAgIGNvbnN0IGRlZmF1bHRGb3JtYXQgPSBob3N0Q29tcG9tZW50LmxvY2FsZUFQSS5jYWxlbmRhcihob3N0Q29tcG9tZW50LmxvY2FsZUFQSS5sb2NhbGUubmFtZSkudGltZUZvcm1hdDtcbiAgICAgICAgY29uc3QgYXR0ckZvcm1hdCA9IGhvc3RDb21wb21lbnQuZm9ybWF0O1xuXG4gICAgICAgIGNvbnN0IGZvcm1hdCA9IGF0dHJGb3JtYXQgfHwgZGVmYXVsdEZvcm1hdDtcblxuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBob3N0Q29tcG9tZW50LmxvY2FsZUFQSS50cmFuc2xhdGUoJ0ludmFsaWRUaW1lJywgeyBzaG93QnJhY2tldHM6IGZhbHNlIH0pO1xuXG4gICAgICAgIGNvbnN0IHBhcnNlZFRpbWUgPSBob3N0Q29tcG9tZW50LmxvY2FsZUFQSS5wYXJzZURhdGUodmFsLCB7IGRhdGVGb3JtYXQ6IGZvcm1hdCwgc3RyaWN0VGltZTogdHJ1ZSB9KTtcblxuICAgICAgICByZXR1cm4gaXNWYWxpZERhdGUocGFyc2VkVGltZSk7XG4gICAgICB9LFxuICAgICAgbWVzc2FnZTogJ0ludmFsaWQgVGltZScsXG4gICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgaWQ6ICd0aW1lJ1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2V0cyB0aGUgdmFsaWRhdGlvbiBjaGVjayB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIFRoZSBgdmFsaWRhdGVgIGF0dHJpYnV0ZVxuICAgKi9cbiAgc2V0IHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLlZBTElEQVRFLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZXMuVkFMSURBVEUpO1xuICAgIH1cblxuICAgIHRoaXMuaGFuZGxlVmFsaWRhdGlvbigpO1xuICB9XG5cbiAgZ2V0IHZhbGlkYXRlKCkgeyByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5WQUxJREFURSk7IH1cblxuICAvKipcbiAgICogU2V0cyB3aGljaCBldmVudHMgdG8gZmlyZSB2YWxpZGF0aW9uIG9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBUaGUgYHZhbGlkYXRpb24tZXZlbnRzYCBhdHRyaWJ1dGVcbiAgICovXG4gIHNldCB2YWxpZGF0aW9uRXZlbnRzKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLlZBTElEQVRJT05fRVZFTlRTLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZXMuVkFMSURBVElPTl9FVkVOVFMpO1xuICAgIH1cbiAgICB0aGlzLmhhbmRsZVZhbGlkYXRpb24oKTtcbiAgfVxuXG4gIGdldCB2YWxpZGF0aW9uRXZlbnRzKCkgeyByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5WQUxJREFUSU9OX0VWRU5UUyk7IH1cblxuICAvKipcbiAgICogU2V0cyAgbWVzc2FnZSBpY29uLCB1c2Ugd2l0aCBtYW51YWxseSBtZXNzYWdlcyB0aHJ1IG1hcmt1cFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgVGhlIHZhbHVlXG4gICAqL1xuICBzZXQgdmFsaWRhdGlvbkljb24odmFsdWUpIHtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuVkFMSURBVElPTl9JQ09OLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZXMuVkFMSURBVElPTl9JQ09OKTtcbiAgICB9XG4gICAgdGhpcy5zZXRNZXNzYWdlTWFudWFsbHkoKTtcbiAgfVxuXG4gIGdldCB2YWxpZGF0aW9uSWNvbigpIHsgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuVkFMSURBVElPTl9JQ09OKTsgfVxuXG4gIC8qKlxuICAgKiBTZXRzICBtZXNzYWdlIGlkLCB1c2Ugd2l0aCBtYW51YWxseSBtZXNzYWdlcyB0aHJ1IG1hcmt1cFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgVGhlIHZhbHVlXG4gICAqL1xuICBzZXQgdmFsaWRhdGlvbklkKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLlZBTElEQVRJT05fSUQsIHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlcy5WQUxJREFUSU9OX0lEKTtcbiAgICB9XG4gICAgdGhpcy5zZXRNZXNzYWdlTWFudWFsbHkoKTtcbiAgfVxuXG4gIGdldCB2YWxpZGF0aW9uSWQoKSB7IHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLlZBTElEQVRJT05fSUQpOyB9XG5cbiAgLyoqXG4gICAqIFNldHMgbWVzc2FnZSBzdHJpbmcsIHVzZSB3aXRoIG1hbnVhbGx5IG1lc3NhZ2VzIHRocnUgbWFya3VwXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBUaGUgdmFsdWVcbiAgICovXG4gIHNldCB2YWxpZGF0aW9uTWVzc2FnZSh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5WQUxJREFUSU9OX01FU1NBR0UsIHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlcy5WQUxJREFUSU9OX01FU1NBR0UpO1xuICAgIH1cbiAgICB0aGlzLnNldE1lc3NhZ2VNYW51YWxseSgpO1xuICB9XG5cbiAgZ2V0IHZhbGlkYXRpb25NZXNzYWdlKCkgeyByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5WQUxJREFUSU9OX01FU1NBR0UpOyB9XG5cbiAgLyoqXG4gICAqIFNldHMgbWVzc2FnZSB0eXBlLCB1c2Ugd2l0aCBtYW51YWxseSBtZXNzYWdlcyB0aHJ1IG1hcmt1cFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgVGhlIHZhbHVlXG4gICAqL1xuICBzZXQgdmFsaWRhdGlvblR5cGUodmFsdWUpIHtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuVkFMSURBVElPTl9UWVBFLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZXMuVkFMSURBVElPTl9UWVBFKTtcbiAgICB9XG4gICAgdGhpcy5zZXRNZXNzYWdlTWFudWFsbHkoKTtcbiAgfVxuXG4gIGdldCB2YWxpZGF0aW9uVHlwZSgpIHsgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuVkFMSURBVElPTl9UWVBFKTsgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gaWYgdGhlIGZpZWxkIGlzIHZhbGlkIG9yIG5vdFxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiBpbnZhbGlkXG4gICAqL1xuICBnZXQgaXNWYWxpZCgpOiBib29sZWFuIHsgcmV0dXJuIHRoaXMuc2hhZG93Um9vdD8ucXVlcnlTZWxlY3RvckFsbCgnLnZhbGlkYXRpb24tbWVzc2FnZScpLmxlbmd0aCA9PT0gMDsgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gaWYgdGhlIGN1cnJlbnQgdmFsaWRhdGlvbiBlcnJvcnNcbiAgICogQHJldHVybnMge0FycmF5PElkc1ZhbGlkYXRpb25FcnJvck1lc3NhZ2U+fSBUaGUgY3VycmVudCBlcnJvcnNcbiAgICovXG4gIGdldCB2YWxpZGF0aW9uTWVzc2FnZXMoKTogQXJyYXk8SWRzVmFsaWRhdGlvbkVycm9yTWVzc2FnZT4ge1xuICAgIGNvbnN0IG1zZ3M6IEFycmF5PElkc1ZhbGlkYXRpb25FcnJvck1lc3NhZ2U+ID0gW107XG4gICAgdGhpcy5zaGFkb3dSb290Py5xdWVyeVNlbGVjdG9yQWxsKCcudmFsaWRhdGlvbi1tZXNzYWdlJykuZm9yRWFjaCgobWVzc2FnZTogRWxlbWVudCkgPT4ge1xuICAgICAgbXNncy5wdXNoKHtcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZS5xdWVyeVNlbGVjdG9yKCdpZHMtdGV4dCcpPy5jaGlsZE5vZGVzWzFdLnRleHRDb250ZW50IHx8ICcnLFxuICAgICAgICB0eXBlOiBtZXNzYWdlLmdldEF0dHJpYnV0ZSgndHlwZScpIHx8ICcnLFxuICAgICAgICBpZDogbWVzc2FnZS5nZXRBdHRyaWJ1dGUoJ3ZhbGlkYXRpb24taWQnKSB8fCAnJ1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIG1zZ3M7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IElkc1ZhbGlkYXRpb25NaXhpbjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/mixins/ids-validation-mixin/ids-validation-mixin.ts\n");

/***/ }),

/***/ "./src/utils/ids-object-utils/ids-object-utils.ts":
/*!********************************************************!*\
  !*** ./src/utils/ids-object-utils/ids-object-utils.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"calculateTextRenderWidth\": () => (/* binding */ calculateTextRenderWidth),\n/* harmony export */   \"isObject\": () => (/* binding */ isObject),\n/* harmony export */   \"isObjectAndNotEmpty\": () => (/* binding */ isObjectAndNotEmpty)\n/* harmony export */ });\nfunction isObject(obj) {\n  return obj instanceof Object && !(obj instanceof Number) && !(obj instanceof Array);\n}\nfunction isObjectAndNotEmpty(obj) {\n  return isObject(obj) && Object.keys(obj).length > 0;\n}\nfunction calculateTextRenderWidth(obj, text, font = \"400 16px arial\") {\n  obj.canvas = obj.canvas || document.createElement(\"canvas\");\n  const context = obj.canvas.getContext(\"2d\");\n  context.font = font;\n  return context.measureText(text).width;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvaWRzLW9iamVjdC11dGlscy9pZHMtb2JqZWN0LXV0aWxzLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUtPLFNBQVMsU0FBUyxLQUFtQjtBQUMxQyxTQUFPLGVBQWUsVUFBVSxFQUFFLGVBQWUsV0FBVyxFQUFFLGVBQWU7QUFDL0U7QUFPTyxTQUFTLG9CQUFvQixLQUFtQjtBQUNyRCxTQUFPLFNBQVMsR0FBRyxLQUFLLE9BQU8sS0FBSyxHQUFHLEVBQUUsU0FBUztBQUNwRDtBQVVPLFNBQVMseUJBQXlCLEtBQVUsTUFBYyxPQUFPLGtCQUEwQjtBQUNoRyxNQUFJLFNBQVMsSUFBSSxVQUFVLFNBQVMsY0FBYyxRQUFRO0FBQzFELFFBQU0sVUFBVSxJQUFJLE9BQU8sV0FBVyxJQUFJO0FBQzFDLFVBQVEsT0FBTztBQUNmLFNBQU8sUUFBUSxZQUFZLElBQUksRUFBRTtBQUNuQyIsInNvdXJjZXMiOlsid2VicGFjazovL2lkcy1lbnRlcnByaXNlLXdjLy4vc3JjL3V0aWxzL2lkcy1vYmplY3QtdXRpbHMvaWRzLW9iamVjdC11dGlscy50cz8zZTBiIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ2hlY2sgd2hldGhlciB0aGUgZ2l2ZW4gb2JqZWN0IGlzIGFuIG9iamVjdCBvciBub3QuXG4gKiBAcGFyYW0ge2FueX0gb2JqIFRoZSBvYmplY3QgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiBnaXZlbiBvYmplY3QgaXMgYW4gb2JqZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3Qob2JqOiBhbnkpOiBib29sZWFuIHtcbiAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mIE9iamVjdCAmJiAhKG9iaiBpbnN0YW5jZW9mIE51bWJlcikgJiYgIShvYmogaW5zdGFuY2VvZiBBcnJheSk7XG59XG5cbi8qKlxuICogQ2hlY2sgdGhlIGdpdmVuIG9iamVjdCBpcyBhbiBvYmplY3QgYW5kIE5PVCBlbXB0eS5cbiAqIEBwYXJhbSB7YW55fSBvYmogVGhlIG9iamVjdCB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIGdpdmVuIG9iamVjdCBpcyBhbiBvYmplY3QgYW5kIE5PVCBlbXB0eS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzT2JqZWN0QW5kTm90RW1wdHkob2JqOiBhbnkpOiBib29sZWFuIHtcbiAgcmV0dXJuIGlzT2JqZWN0KG9iaikgJiYgT2JqZWN0LmtleXMob2JqKS5sZW5ndGggPiAwO1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHdpZHRoIHRvIHJlbmRlciBnaXZlbiB0ZXh0IHN0cmluZy5cbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0gIHtvYmplY3R9IG9iaiBUaGUgdXNlZCBvYmplY3QuXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHRleHQgVGhlIHRleHQgdG8gcmVuZGVyLlxuICogQHBhcmFtICB7c3RyaW5nfSBmb250IFRoZSBmb250IHZhbHVlLlxuICogQHJldHVybnMge251bWJlcn0gQ2FsY3VsYXRlZCB0ZXh0IHdpZHRoIGluIHBpeGVscy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZVRleHRSZW5kZXJXaWR0aChvYmo6IGFueSwgdGV4dDogc3RyaW5nLCBmb250ID0gJzQwMCAxNnB4IGFyaWFsJyk6IG51bWJlciB7XG4gIG9iai5jYW52YXMgPSBvYmouY2FudmFzIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICBjb25zdCBjb250ZXh0ID0gb2JqLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICBjb250ZXh0LmZvbnQgPSBmb250O1xuICByZXR1cm4gY29udGV4dC5tZWFzdXJlVGV4dCh0ZXh0KS53aWR0aDtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/utils/ids-object-utils/ids-object-utils.ts\n");

/***/ })

}]);