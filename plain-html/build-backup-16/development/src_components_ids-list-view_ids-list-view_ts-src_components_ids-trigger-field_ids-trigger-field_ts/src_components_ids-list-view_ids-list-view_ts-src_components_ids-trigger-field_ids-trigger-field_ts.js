"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkids_enterprise_wc"] = self["webpackChunkids_enterprise_wc"] || []).push([["src_components_ids-list-view_ids-list-view_ts-src_components_ids-trigger-field_ids-trigger-field_ts"],{

/***/ "./src/components/ids-list-view/ids-list-view-search-mixin.ts":
/*!********************************************************************!*\
  !*** ./src/components/ids-list-view/ids-list-view-search-mixin.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ids_list_view_search_mixin_default)\n/* harmony export */ });\n/* harmony import */ var _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/ids-attributes */ \"./src/core/ids-attributes.ts\");\n/* harmony import */ var _utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/ids-string-utils/ids-string-utils */ \"./src/utils/ids-string-utils/ids-string-utils.ts\");\n/* harmony import */ var _utils_ids_deep_clone_utils_ids_deep_clone_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/ids-deep-clone-utils/ids-deep-clone-utils */ \"./src/utils/ids-deep-clone-utils/ids-deep-clone-utils.ts\");\n/* harmony import */ var _utils_ids_xss_utils_ids_xss_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/ids-xss-utils/ids-xss-utils */ \"./src/utils/ids-xss-utils/ids-xss-utils.ts\");\n\n\n\n\nconst IdsListViewSearchMixin = (superclass) => class extends superclass {\n  constructor(...args) {\n    super(...args);\n  }\n  static get attributes() {\n    return [\n      ...superclass.attributes,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.SEARCH_FIELD_ID,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.SEARCH_FILTER_MODE,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.SEARCH_TERM_CASE_SENSITIVE,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.SEARCH_TERM_MIN_SIZE,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.SEARCHABLE,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.SUPPRESS_HIGHLIGHT\n    ];\n  }\n  connectedCallback() {\n    super.connectedCallback();\n  }\n  /**\n   * Possible Filter Modes\n   */\n  searchFilterModes = {\n    CONTAINS: \"contains\",\n    KEYWORD: \"keyword\",\n    PHRASE_STARTS_WITH: \"phrase-starts-with\",\n    WORD_STARTS_WITH: \"word-starts-with\"\n  };\n  /**\n   * Search filter callback, use for custom filter to match\n   */\n  searchFilterCallback = null;\n  /**\n   * Searchable text callback\n   */\n  searchableTextCallback = null;\n  /**\n   * Current search term\n   */\n  #term = \"\";\n  /**\n   * Get search container element\n   * @returns {HTMLDivElement|null|undefined} The search container element\n   */\n  get searchContainer() {\n    return this.shadowRoot?.querySelector(\".ids-list-view-search\");\n  }\n  /**\n   * Get searchf ield element\n   * @returns {HTMLDivElement|null|undefined} The search field element\n   */\n  get searchField() {\n    let searchfield = this.querySelector('ids-search-field[slot=\"search\"]');\n    if (!searchfield && this.searchFieldId) {\n      searchfield = this.closest(\"ids-container\")?.querySelector(`#${this.searchFieldId}`);\n    }\n    return searchfield;\n  }\n  /**\n   * Set ID of the search field element to use for the search\n   * @param {string | null} value The value\n   */\n  set searchFieldId(value) {\n    if (value)\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.SEARCH_FIELD_ID, String(value));\n    else\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.SEARCH_FIELD_ID);\n    this.redraw?.();\n  }\n  get searchFieldId() {\n    return this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.SEARCH_FIELD_ID);\n  }\n  /**\n   * Set search filter mode\n   * @param {SearchFilterModes} value The value\n   */\n  set searchFilterMode(value) {\n    if (Object.values(this.searchFilterModes).includes(value || \"\")) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.SEARCH_FILTER_MODE, String(value));\n    } else\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.SEARCH_FILTER_MODE);\n  }\n  get searchFilterMode() {\n    const defaultVal = this.searchFilterModes.CONTAINS;\n    return this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.SEARCH_FILTER_MODE) || defaultVal;\n  }\n  /**\n   * Set search term case sensitive\n   * @param {string | boolean | null} value The value\n   */\n  set searchTermCaseSensitive(value) {\n    if ((0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_1__.stringToBool)(value))\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.SEARCH_TERM_CASE_SENSITIVE, \"\");\n    else\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.SEARCH_TERM_CASE_SENSITIVE);\n  }\n  get searchTermCaseSensitive() {\n    return this.hasAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.SEARCH_TERM_CASE_SENSITIVE);\n  }\n  /**\n   * Set search term min size, will trigger filtering only when its length is greater than or equals to term value.\n   * @param {string | number | null} value The value\n   */\n  set searchTermMinSize(value) {\n    const val = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_1__.stringToNumber)(value);\n    if (!Number.isNaN(val) && val > 0)\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.SEARCH_TERM_MIN_SIZE, val.toString());\n    else\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.SEARCH_TERM_MIN_SIZE);\n  }\n  get searchTermMinSize() {\n    const defaultVal = 1;\n    const val = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_1__.stringToNumber)(this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.SEARCH_TERM_MIN_SIZE));\n    return !Number.isNaN(val) && val > 0 ? val : defaultVal;\n  }\n  /**\n   * Set searchable which allows list view to be filtered\n   * @param {string | boolean | null} value The value\n   */\n  set searchable(value) {\n    if ((0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_1__.stringToBool)(value))\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.SEARCHABLE, \"\");\n    else\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.SEARCHABLE);\n    this.setSearchable();\n  }\n  get searchable() {\n    return this.hasAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.SEARCHABLE);\n  }\n  /**\n   * Set search term text to be suppress highlight when using searchable\n   * @param {string | boolean | null} value The value\n   */\n  set suppressHighlight(value) {\n    if ((0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_1__.stringToBool)(value))\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.SUPPRESS_HIGHLIGHT, \"\");\n    else\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.SUPPRESS_HIGHLIGHT);\n  }\n  get suppressHighlight() {\n    return this.hasAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.SUPPRESS_HIGHLIGHT);\n  }\n  /**\n   * Get search template\n   * @returns {string} The search template\n   */\n  searchTemplate() {\n    return this.searchFieldId ? \"\" : `<div class=\"ids-list-view-search\" part=\"search\"><slot name=\"search\"></slot></div>`;\n  }\n  /**\n   * Get search field template\n   * @returns {string} The search field template\n   */\n  searchFieldTemplate() {\n    const cssParts = \"container: searchfield-container, field-container: searchfield-field-container, input: searchfield-input, popup: searchfield-popup\";\n    return `<ids-search-field slot=\"search\" label=\"List view search\" label-state=\"collapsed\" size=\"full\" exportparts=\"${cssParts}\" ids-lv-default-searchfield clearable no-margins></ids-search-field>`;\n  }\n  /**\n   * Reset search\n   * @returns {void}\n   */\n  resetSearch() {\n    this.#term = \"\";\n    const lv = this;\n    if (!lv.datasource?.filtered)\n      return;\n    lv.datasource?.filter(null);\n    lv.redraw?.();\n    lv.triggerEvent(\"filtered\", lv, { bubbles: true, detail: { elem: lv, type: \"clear\", term: \"\" } });\n  }\n  /**\n   * Set the searchable\n   * @returns {void}\n   */\n  setSearchable() {\n    const getSlotted = () => this.shadowRoot?.querySelector('slot[name=\"search\"]')?.assignedElements()[0];\n    let slotted = getSlotted();\n    if (!slotted && this.searchable) {\n      this.insertAdjacentHTML(\"afterbegin\", this.searchFieldTemplate());\n      slotted = getSlotted();\n    } else if (!this.searchable && slotted?.hasAttribute(\"ids-lv-default-searchfield\")) {\n      slotted.remove();\n    }\n    const isSearchfield = !!getSlotted();\n    this.container?.classList[isSearchfield ? \"add\" : \"remove\"](\"has-searchfield\");\n    this.searchContainer?.classList[isSearchfield ? \"add\" : \"remove\"](\"has-searchfield\");\n    this.#attacheSearchField();\n  }\n  /**\n   * Attaches a slotted IdsSearchField component\n   * @private\n   * @returns {void}\n   */\n  #attacheSearchField() {\n    const searchField = this.searchField;\n    if (searchField) {\n      searchField.onSearch = (term) => this.#handleSearch(term);\n      this.offEvent(\"cleared.listviewsearch\");\n      this.onEvent(\"cleared.listviewsearch\", searchField, () => this.resetSearch());\n    }\n  }\n  /**\n   * Get object props as text\n   * @param {string} item The term value\n   * @returns {string|HTMLElement|object} The searchable content\n   */\n  #objectPropsAsText(item) {\n    const excludeValues = [\"isFilteredOut\"];\n    let text = \"\";\n    Object.keys(item).forEach((prop) => {\n      if (excludeValues.indexOf(prop) > 0)\n        return;\n      const pad = text.length ? \" \" : \"\";\n      text += `${pad}${item[prop]}`;\n    });\n    return text;\n  }\n  /**\n   * Get searchable content\n   * @private\n   * @param {string} item The term value\n   * @returns {string|HTMLElement|object} The searchable content\n   */\n  #searchableContent(item) {\n    let santitize = true;\n    if (typeof this.searchableTextCallback === \"function\") {\n      return this.searchableTextCallback(item) ?? \"\";\n    }\n    let targetContent;\n    if (typeof item === \"string\") {\n      targetContent = item;\n    } else if (item instanceof HTMLElement) {\n      santitize = false;\n      targetContent = item.innerText;\n    } else {\n      targetContent = this.#objectPropsAsText(item);\n    }\n    if (santitize)\n      targetContent = (0,_utils_ids_xss_utils_ids_xss_utils__WEBPACK_IMPORTED_MODULE_3__.sanitizeHTML)(targetContent);\n    return targetContent ?? \"\";\n  }\n  /**\n   * Matches the provided term against the beginning of all words in a text string.\n   * @private\n   * @param {string} text searchable text.\n   * @param {string} term the term for which to search in the text string.\n   * @returns {boolean} true if the term is present.\n   */\n  #wordStartsWithFilter(text, term) {\n    const parts = text.split(\" \");\n    for (let a = 0; a < parts.length; a++) {\n      if (parts[a].indexOf(term) === 0)\n        return true;\n    }\n    if (text.indexOf(term) === 0)\n      return true;\n    if (term.indexOf(\" \") > 0 && text.indexOf(term) > 0)\n      return true;\n    return false;\n  }\n  /**\n   * Handle search for given trem\n   * @private\n   * @param {string} term The term value\n   * @returns {void}\n   */\n  #handleSearch(term) {\n    const lv = this;\n    if (!lv.datasource)\n      return;\n    const isTermString = typeof term === \"string\";\n    if (!isTermString || isTermString && term === \"\")\n      return this.resetSearch();\n    if (term.length < this.searchTermMinSize) {\n      this.resetSearch();\n      return;\n    }\n    if (this.#term === term)\n      return;\n    this.#term = term;\n    if (!this.searchTermCaseSensitive) {\n      term = term.toLowerCase();\n    }\n    const searchItemIterator = (item) => {\n      let text = this.#searchableContent(item);\n      if (!this.searchTermCaseSensitive) {\n        text = text.toLowerCase().trim();\n      }\n      const modes = this.searchFilterModes;\n      let match = false;\n      if (this.searchFilterMode === modes.WORD_STARTS_WITH) {\n        match = this.#wordStartsWithFilter(text, term);\n      }\n      if (this.searchFilterMode === modes.PHRASE_STARTS_WITH && text.indexOf(term) === 0) {\n        match = true;\n      }\n      if (this.searchFilterMode === modes.CONTAINS && text.indexOf(term) >= 0) {\n        match = true;\n      }\n      if (this.searchFilterMode === modes.KEYWORD) {\n        const keywords = term.split(\" \");\n        for (let i = 0; i < keywords.length; i++) {\n          if (text.indexOf(keywords[i]) >= 0) {\n            match = true;\n            break;\n          }\n        }\n      }\n      return !match;\n    };\n    let itemIterator = searchItemIterator;\n    if (typeof this.searchFilterCallback === \"function\") {\n      itemIterator = this.searchFilterCallback(term);\n    }\n    lv.datasource.filter(itemIterator);\n    lv.redraw?.();\n    lv.triggerEvent(\"filtered\", lv, { bubbles: true, detail: { elem: lv, type: \"apply\", term } });\n  }\n  /**\n   * Set search term highlight\n   * @param {string | HTMLElement | object} item The from data item\n   * @returns {string} search term highlight\n   */\n  searchHighlight(item) {\n    if (this.suppressHighlight || !item || this.#term === \"\")\n      return item;\n    let regex = null;\n    const modes = this.searchFilterModes;\n    const flag = this.searchTermCaseSensitive ? \"g\" : \"gi\";\n    const replaceTmpl = `<strong class=\"highlight\">$1</strong>`;\n    let replaceMatch = (s) => s.replace(regex, replaceTmpl);\n    if (this.searchFilterMode === modes.WORD_STARTS_WITH) {\n      regex = new RegExp(`(^|\\\\s)(${this.#term})`, flag);\n      replaceMatch = (s) => s.replace(regex, (m) => m.replace(new RegExp(`(${this.#term})`, flag), replaceTmpl));\n    } else if (this.searchFilterMode === modes.PHRASE_STARTS_WITH) {\n      regex = new RegExp(`^(${this.#term})`, flag);\n    } else if (this.searchFilterMode === modes.CONTAINS || this.searchFilterMode === modes.KEYWORD) {\n      regex = new RegExp(`(${this.#term})`, flag);\n    }\n    if (!regex)\n      return item;\n    let term = this.#term;\n    let cloneItem = (0,_utils_ids_deep_clone_utils_ids_deep_clone_utils__WEBPACK_IMPORTED_MODULE_2__.deepClone)(item);\n    let text = this.#searchableContent(cloneItem);\n    if (!this.searchTermCaseSensitive) {\n      term = term.toLowerCase();\n      text = text.toLowerCase();\n    }\n    if (text.indexOf(term) >= 0) {\n      if (typeof cloneItem === \"string\" && text === cloneItem) {\n        cloneItem = replaceMatch(cloneItem);\n      } else if (cloneItem instanceof HTMLElement) {\n        const itmText = cloneItem.innerText;\n        const sHtml = (0,_utils_ids_xss_utils_ids_xss_utils__WEBPACK_IMPORTED_MODULE_3__.sanitizeHTML)(cloneItem.innerText);\n        if (text === sHtml)\n          cloneItem.innerText = replaceMatch(itmText);\n      } else {\n        for (const [key, value] of Object.entries(cloneItem)) {\n          const val = this.searchTermCaseSensitive ? value : value?.toString().toLowerCase();\n          if (text === val)\n            cloneItem[key] = replaceMatch(value);\n        }\n      }\n    }\n    return cloneItem;\n  }\n};\nvar ids_list_view_search_mixin_default = IdsListViewSearchMixin;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9pZHMtbGlzdC12aWV3L2lkcy1saXN0LXZpZXctc2VhcmNoLW1peGluLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTJCO0FBQ2tCO0FBQ25CO0FBQ0c7QUFXN0IsTUFBTSx5QkFBeUIsQ0FBd0IsZUFBa0IsY0FBYyxXQUFXO0FBQUEsRUFDaEcsZUFBZSxNQUFhO0FBQzFCLFVBQU0sR0FBRyxJQUFJO0FBQUEsRUFDZjtBQUFBLEVBRUEsV0FBVyxhQUFhO0FBQ3RCLFdBQU87QUFBQSxNQUNMLEdBQUksV0FBbUI7QUFBQSxNQUN2Qiw0RUFBMEI7QUFBZixNQUNYLCtFQUE2QjtBQUFsQixNQUNYLHVGQUFxQztBQUExQixNQUNYLGlGQUErQjtBQUFwQixNQUNYLHVFQUFxQjtBQUFWLE1BQ1gsK0VBQTZCO0FBQWxCLElBQ2I7QUFBQSxFQUNGO0FBQUEsRUFFQSxvQkFBb0I7QUFDbEIsVUFBTSxrQkFBa0I7QUFBQSxFQUMxQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0Esb0JBQW9CO0FBQUEsSUFDbEIsVUFBVTtBQUFBLElBQ1YsU0FBUztBQUFBLElBQ1Qsb0JBQW9CO0FBQUEsSUFDcEIsa0JBQWtCO0FBQUEsRUFDcEI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLHVCQUFtRjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS25GLHlCQUFnRTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS2hFLFFBQVE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTVIsSUFBSSxrQkFBcUQ7QUFDdkQsV0FBTyxLQUFLLFlBQVksY0FBYyx1QkFBdUI7QUFBQSxFQUMvRDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxJQUFJLGNBQWlEO0FBQ25ELFFBQUksY0FBaUQsS0FBSyxjQUE4QixpQ0FBaUM7QUFDekgsUUFBSSxDQUFDLGVBQWUsS0FBSyxlQUFlO0FBQ3RDLG9CQUFjLEtBQUssUUFBUSxlQUFlLEdBQUcsY0FBYyxJQUFJLEtBQUssZUFBZTtBQUFB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QUFLO0FBQ2hCLFFBQUksWUFBWSwyRkFBUyxDQUFDLElBQUk7QUFDOUIsUUFBSSxPQUFPLEtBQUssbUJBQW1CLFNBQVM7QUFHNUMsUUFBSSxDQUFDLEtBQUsseUJBQXlCO0FBQ2pDLGFBQU8sS0FBSyxZQUFZO0FBQ3hCLGFBQU8sS0FBSyxZQUFZO0FBQUEsSUFDMUI7QUFHQSxRQUFJLEtBQUssUUFBUSxJQUFJLEtBQUssR0FBRztBQUMzQixVQUFJLE9BQU8sY0FBYyxZQUFZLFNBQVMsV0FBVztBQUN2RCxvQkFBWSxhQUFhLFNBQVM7QUFBQSxNQUNwQyxXQUFXLHFCQUFxQixhQUFhO0FBQzNDLGNBQU0sVUFBVSxVQUFVO0FBQzFCLGNBQU0sUUFBUSxnRkFBWSxDQUFDLFVBQVUsU0FBUztBQUM5QyxZQUFJLFNBQVM7QUFBTyxvQkFBVSxZQUFZLGFBQWEsT0FBTztBQUFBLE1BQ2hFLE9BQU87QUFDTCxtQkFBVyxDQUFDLEtBQUssS0FBSyxLQUFLLE9BQU8sUUFBUSxTQUFTLEdBQUc7QUFDcEQsZ0JBQU0sTUFBTSxLQUFLLDBCQUEwQixRQUFRLE9BQU8sU0FBUyxFQUFFLFlBQVk7QUFDakYsY0FBSSxTQUFTO0FBQUssWUFBQyxVQUFrQixHQUFHLElBQUksYUFBYSxLQUFZO0FBQUEsUUFDdkU7QUFBQSxNQUNGO0FBQUEsSUFDRjtBQUVBLFdBQU87QUFBQSxFQUNUO0FBQ0Y7QUFFQSxJQUFPLHFDQUFRIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaWRzLWVudGVycHJpc2Utd2MvLi9zcmMvY29tcG9uZW50cy9pZHMtbGlzdC12aWV3L2lkcy1saXN0LXZpZXctc2VhcmNoLW1peGluLnRzP2RiNWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXR0cmlidXRlcyB9IGZyb20gJy4uLy4uL2NvcmUvaWRzLWF0dHJpYnV0ZXMnO1xuaW1wb3J0IHsgc3RyaW5nVG9Cb29sLCBzdHJpbmdUb051bWJlciB9IGZyb20gJy4uLy4uL3V0aWxzL2lkcy1zdHJpbmctdXRpbHMvaWRzLXN0cmluZy11dGlscyc7XG5pbXBvcnQgeyBkZWVwQ2xvbmUgfSBmcm9tICcuLi8uLi91dGlscy9pZHMtZGVlcC1jbG9uZS11dGlscy9pZHMtZGVlcC1jbG9uZS11dGlscyc7XG5pbXBvcnQgeyBzYW5pdGl6ZUhUTUwgfSBmcm9tICcuLi8uLi91dGlscy9pZHMteHNzLXV0aWxzL2lkcy14c3MtdXRpbHMnO1xuaW1wb3J0IHsgRXZlbnRzTWl4aW5JbnRlcmZhY2UgfSBmcm9tICcuLi8uLi9taXhpbnMvaWRzLWV2ZW50cy1taXhpbi9pZHMtZXZlbnRzLW1peGluJztcbmltcG9ydCB7IElkc0NvbnN0cnVjdG9yIH0gZnJvbSAnLi4vLi4vY29yZS9pZHMtZWxlbWVudCc7XG5cbmltcG9ydCB0eXBlIElkc0xpc3RWaWV3IGZyb20gJy4vaWRzLWxpc3Qtdmlldyc7XG5pbXBvcnQgdHlwZSBJZHNTZWFyY2hGaWVsZCBmcm9tICcuLi9pZHMtc2VhcmNoLWZpZWxkL2lkcy1zZWFyY2gtZmllbGQnO1xuXG50eXBlIENvbnN0cmFpbnRzID0gSWRzQ29uc3RydWN0b3I8RXZlbnRzTWl4aW5JbnRlcmZhY2U+O1xudHlwZSBTZWFyY2hJdGVtID0gc3RyaW5nIHwgSFRNTEVsZW1lbnQgfCBvYmplY3Q7XG50eXBlIFNlYXJjaEZpbHRlck1vZGVzID0gc3RyaW5nIHwgbnVsbCB8ICdjb250YWlucycgfCAna2V5d29yZCcgfCAncGhyYXNlLXN0YXJ0cy13aXRoJyB8ICd3b3JkLXN0YXJ0cy13aXRoJztcblxuY29uc3QgSWRzTGlzdFZpZXdTZWFyY2hNaXhpbiA9IDxUIGV4dGVuZHMgQ29uc3RyYWludHM+KHN1cGVyY2xhc3M6IFQpID0+IGNsYXNzIGV4dGVuZHMgc3VwZXJjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgc3VwZXIoLi4uYXJncyk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IGF0dHJpYnV0ZXMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIC4uLihzdXBlcmNsYXNzIGFzIGFueSkuYXR0cmlidXRlcyxcbiAgICAgIGF0dHJpYnV0ZXMuU0VBUkNIX0ZJRUxEX0lELFxuICAgICAgYXR0cmlidXRlcy5TRUFSQ0hfRklMVEVSX01PREUsXG4gICAgICBhdHRyaWJ1dGVzLlNFQVJDSF9URVJNX0NBU0VfU0VOU0lUSVZFLFxuICAgICAgYXR0cmlidXRlcy5TRUFSQ0hfVEVSTV9NSU5fU0laRSxcbiAgICAgIGF0dHJpYnV0ZXMuU0VBUkNIQUJMRSxcbiAgICAgIGF0dHJpYnV0ZXMuU1VQUFJFU1NfSElHSExJR0hUXG4gICAgXTtcbiAgfVxuXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gIH1cblxuICAvKipcbiAgICogUG9zc2libGUgRmlsdGVyIE1vZGVzXG4gICAqL1xuICBzZWFyY2hGaWx0ZXJNb2RlcyA9IHtcbiAgICBDT05UQUlOUzogJ2NvbnRhaW5zJyxcbiAgICBLRVlXT1JEOiAna2V5d29yZCcsXG4gICAgUEhSQVNFX1NUQVJUU19XSVRIOiAncGhyYXNlLXN0YXJ0cy13aXRoJyxcbiAgICBXT1JEX1NUQVJUU19XSVRIOiAnd29yZC1zdGFydHMtd2l0aCdcbiAgfTtcblxuICAvKipcbiAgICogU2VhcmNoIGZpbHRlciBjYWxsYmFjaywgdXNlIGZvciBjdXN0b20gZmlsdGVyIHRvIG1hdGNoXG4gICAqL1xuICBzZWFyY2hGaWx0ZXJDYWxsYmFjazogbnVsbCB8ICgodGVybTogc3RyaW5nKSA9PiAoKGl0ZW06IFNlYXJjaEl0ZW0pID0+IGJvb2xlYW4pKSA9IG51bGw7XG5cbiAgLyoqXG4gICAqIFNlYXJjaGFibGUgdGV4dCBjYWxsYmFja1xuICAgKi9cbiAgc2VhcmNoYWJsZVRleHRDYWxsYmFjazogbnVsbCB8ICgoaXRlbTogU2VhcmNoSXRlbSkgPT4gc3RyaW5nKSA9IG51bGw7XG5cbiAgLyoqXG4gICAqIEN1cnJlbnQgc2VhcmNoIHRlcm1cbiAgICovXG4gICN0ZXJtID0gJyc7XG5cbiAgLyoqXG4gICAqIEdldCBzZWFyY2ggY29udGFpbmVyIGVsZW1lbnRcbiAgICogQHJldHVybnMge0hUTUxEaXZFbGVtZW50fG51bGx8dW5kZWZpbmVkfSBUaGUgc2VhcmNoIGNvbnRhaW5lciBlbGVtZW50XG4gICAqL1xuICBnZXQgc2VhcmNoQ29udGFpbmVyKCk6IEhUTUxEaXZFbGVtZW50IHwgbnVsbCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuc2hhZG93Um9vdD8ucXVlcnlTZWxlY3RvcignLmlkcy1saXN0LXZpZXctc2VhcmNoJyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHNlYXJjaGYgaWVsZCBlbGVtZW50XG4gICAqIEByZXR1cm5zIHtIVE1MRGl2RWxlbWVudHxudWxsfHVuZGVmaW5lZH0gVGhlIHNlYXJjaCBmaWVsZCBlbGVtZW50XG4gICAqL1xuICBnZXQgc2VhcmNoRmllbGQoKTogSWRzU2VhcmNoRmllbGQgfCBudWxsIHwgdW5kZWZpbmVkIHtcbiAgICBsZXQgc2VhcmNoZmllbGQ6IElkc1NlYXJjaEZpZWxkIHwgbnVsbCB8IHVuZGVmaW5lZCA9IHRoaXMucXVlcnlTZWxlY3RvcjxJZHNTZWFyY2hGaWVsZD4oJ2lkcy1zZWFyY2gtZmllbGRbc2xvdD1cInNlYXJjaFwiXScpO1xuICAgIGlmICghc2VhcmNoZmllbGQgJiYgdGhpcy5zZWFyY2hGaWVsZElkKSB7XG4gICAgICBzZWFyY2hmaWVsZCA9IHRoaXMuY2xvc2VzdCgnaWRzLWNvbnRhaW5lcicpPy5xdWVyeVNlbGVjdG9yKGAjJHt0aGlzLnNlYXJjaEZpZWxkSWR9YCk7XG4gICAgfVxuICAgIHJldHVybiBzZWFyY2hmaWVsZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgSUQgb2YgdGhlIHNlYXJjaCBmaWVsZCBlbGVtZW50IHRvIHVzZSBmb3IgdGhlIHNlYXJjaFxuICAgKiBAcGFyYW0ge3N0cmluZyB8IG51bGx9IHZhbHVlIFRoZSB2YWx1ZVxuICAgKi9cbiAgc2V0IHNlYXJjaEZpZWxkSWQodmFsdWU6IHN0cmluZyB8IG51bGwpIHtcbiAgICBpZiAodmFsdWUpIHRoaXMuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuU0VBUkNIX0ZJRUxEX0lELCBTdHJpbmcodmFsdWUpKTtcbiAgICBlbHNlIHRoaXMucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZXMuU0VBUkNIX0ZJRUxEX0lEKTtcbiAgICAodGhpcyBhcyB1bmtub3duIGFzIElkc0xpc3RWaWV3KS5yZWRyYXc/LigpO1xuICB9XG5cbiAgZ2V0IHNlYXJjaEZpZWxkSWQoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuU0VBUkNIX0ZJRUxEX0lEKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgc2VhcmNoIGZpbHRlciBtb2RlXG4gICAqIEBwYXJhbSB7U2VhcmNoRmlsdGVyTW9kZXN9IHZhbHVlIFRoZSB2YWx1ZVxuICAgKi9cbiAgc2V0IHNlYXJjaEZpbHRlck1vZGUodmFsdWU6IFNlYXJjaEZpbHRlck1vZGVzKSB7XG4gICAgaWYgKE9iamVjdC52YWx1ZXModGhpcy5zZWFyY2hGaWx0ZXJNb2RlcykuaW5jbHVkZXModmFsdWUgfHwgJycpKSB7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLlNFQVJDSF9GSUxURVJfTU9ERSwgU3RyaW5nKHZhbHVlKSk7XG4gICAgfSBlbHNlIHRoaXMucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZXMuU0VBUkNIX0ZJTFRFUl9NT0RFKTtcbiAgfVxuXG4gIGdldCBzZWFyY2hGaWx0ZXJNb2RlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgZGVmYXVsdFZhbCA9IHRoaXMuc2VhcmNoRmlsdGVyTW9kZXMuQ09OVEFJTlM7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuU0VBUkNIX0ZJTFRFUl9NT0RFKSB8fCBkZWZhdWx0VmFsO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBzZWFyY2ggdGVybSBjYXNlIHNlbnNpdGl2ZVxuICAgKiBAcGFyYW0ge3N0cmluZyB8IGJvb2xlYW4gfCBudWxsfSB2YWx1ZSBUaGUgdmFsdWVcbiAgICovXG4gIHNldCBzZWFyY2hUZXJtQ2FzZVNlbnNpdGl2ZSh2YWx1ZTogc3RyaW5nIHwgYm9vbGVhbiB8IG51bGwpIHtcbiAgICBpZiAoc3RyaW5nVG9Cb29sKHZhbHVlKSkgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5TRUFSQ0hfVEVSTV9DQVNFX1NFTlNJVElWRSwgJycpO1xuICAgIGVsc2UgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlcy5TRUFSQ0hfVEVSTV9DQVNFX1NFTlNJVElWRSk7XG4gIH1cblxuICBnZXQgc2VhcmNoVGVybUNhc2VTZW5zaXRpdmUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKGF0dHJpYnV0ZXMuU0VBUkNIX1RFUk1fQ0FTRV9TRU5TSVRJVkUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBzZWFyY2ggdGVybSBtaW4gc2l6ZSwgd2lsbCB0cmlnZ2VyIGZpbHRlcmluZyBvbmx5IHdoZW4gaXRzIGxlbmd0aCBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWxzIHRvIHRlcm0gdmFsdWUuXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVtYmVyIHwgbnVsbH0gdmFsdWUgVGhlIHZhbHVlXG4gICAqL1xuICBzZXQgc2VhcmNoVGVybU1pblNpemUodmFsdWU6IHN0cmluZyB8IG51bWJlciB8IG51bGwpIHtcbiAgICBjb25zdCB2YWwgPSBzdHJpbmdUb051bWJlcih2YWx1ZSk7XG4gICAgaWYgKCFOdW1iZXIuaXNOYU4odmFsKSAmJiB2YWwgPiAwKSB0aGlzLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLlNFQVJDSF9URVJNX01JTl9TSVpFLCB2YWwudG9TdHJpbmcoKSk7XG4gICAgZWxzZSB0aGlzLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGVzLlNFQVJDSF9URVJNX01JTl9TSVpFKTtcbiAgfVxuXG4gIGdldCBzZWFyY2hUZXJtTWluU2l6ZSgpOiBudW1iZXIge1xuICAgIGNvbnN0IGRlZmF1bHRWYWwgPSAxO1xuICAgIGNvbnN0IHZhbCA9IHN0cmluZ1RvTnVtYmVyKHRoaXMuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuU0VBUkNIX1RFUk1fTUlOX1NJWkUpKTtcbiAgICByZXR1cm4gKCFOdW1iZXIuaXNOYU4odmFsKSAmJiB2YWwgPiAwKSA/IHZhbCA6IGRlZmF1bHRWYWw7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHNlYXJjaGFibGUgd2hpY2ggYWxsb3dzIGxpc3QgdmlldyB0byBiZSBmaWx0ZXJlZFxuICAgKiBAcGFyYW0ge3N0cmluZyB8IGJvb2xlYW4gfCBudWxsfSB2YWx1ZSBUaGUgdmFsdWVcbiAgICovXG4gIHNldCBzZWFyY2hhYmxlKHZhbHVlOiBzdHJpbmcgfCBib29sZWFuIHwgbnVsbCkge1xuICAgIGlmIChzdHJpbmdUb0Jvb2wodmFsdWUpKSB0aGlzLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLlNFQVJDSEFCTEUsICcnKTtcbiAgICBlbHNlIHRoaXMucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZXMuU0VBUkNIQUJMRSk7XG4gICAgdGhpcy5zZXRTZWFyY2hhYmxlKCk7XG4gIH1cblxuICBnZXQgc2VhcmNoYWJsZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoYXR0cmlidXRlcy5TRUFSQ0hBQkxFKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgc2VhcmNoIHRlcm0gdGV4dCB0byBiZSBzdXBwcmVzcyBoaWdobGlnaHQgd2hlbiB1c2luZyBzZWFyY2hhYmxlXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgYm9vbGVhbiB8IG51bGx9IHZhbHVlIFRoZSB2YWx1ZVxuICAgKi9cbiAgc2V0IHN1cHByZXNzSGlnaGxpZ2h0KHZhbHVlOiBzdHJpbmcgfCBib29sZWFuIHwgbnVsbCkge1xuICAgIGlmIChzdHJpbmdUb0Jvb2wodmFsdWUpKSB0aGlzLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLlNVUFBSRVNTX0hJR0hMSUdIVCwgJycpO1xuICAgIGVsc2UgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlcy5TVVBQUkVTU19ISUdITElHSFQpO1xuICB9XG5cbiAgZ2V0IHN1cHByZXNzSGlnaGxpZ2h0KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShhdHRyaWJ1dGVzLlNVUFBSRVNTX0hJR0hMSUdIVCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHNlYXJjaCB0ZW1wbGF0ZVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgc2VhcmNoIHRlbXBsYXRlXG4gICAqL1xuICBzZWFyY2hUZW1wbGF0ZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLnNlYXJjaEZpZWxkSWRcbiAgICAgID8gJycgOiBgPGRpdiBjbGFzcz1cImlkcy1saXN0LXZpZXctc2VhcmNoXCIgcGFydD1cInNlYXJjaFwiPjxzbG90IG5hbWU9XCJzZWFyY2hcIj48L3Nsb3Q+PC9kaXY+YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgc2VhcmNoIGZpZWxkIHRlbXBsYXRlXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBzZWFyY2ggZmllbGQgdGVtcGxhdGVcbiAgICovXG4gIHNlYXJjaEZpZWxkVGVtcGxhdGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCBjc3NQYXJ0cyA9ICdjb250YWluZXI6IHNlYXJjaGZpZWxkLWNvbnRhaW5lciwgZmllbGQtY29udGFpbmVyOiBzZWFyY2hmaWVsZC1maWVsZC1jb250YWluZXIsIGlucHV0OiBzZWFyY2hmaWVsZC1pbnB1dCwgcG9wdXA6IHNlYXJjaGZpZWxkLXBvcHVwJztcblxuICAgIHJldHVybiBgPGlkcy1zZWFyY2gtZmllbGQgc2xvdD1cInNlYXJjaFwiIGxhYmVsPVwiTGlzdCB2aWV3IHNlYXJjaFwiIGxhYmVsLXN0YXRlPVwiY29sbGFwc2VkXCIgc2l6ZT1cImZ1bGxcIiBleHBvcnRwYXJ0cz1cIiR7Y3NzUGFydHN9XCIgaWRzLWx2LWRlZmF1bHQtc2VhcmNoZmllbGQgY2xlYXJhYmxlIG5vLW1hcmdpbnM+PC9pZHMtc2VhcmNoLWZpZWxkPmA7XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgc2VhcmNoXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgcmVzZXRTZWFyY2goKTogdm9pZCB7XG4gICAgdGhpcy4jdGVybSA9ICcnO1xuICAgIGNvbnN0IGx2ID0gdGhpcyBhcyB1bmtub3duIGFzIElkc0xpc3RWaWV3O1xuICAgIGlmICghbHYuZGF0YXNvdXJjZT8uZmlsdGVyZWQpIHJldHVybjtcblxuICAgIGx2LmRhdGFzb3VyY2U/LmZpbHRlcihudWxsKTtcbiAgICBsdi5yZWRyYXc/LigpO1xuICAgIGx2LnRyaWdnZXJFdmVudCgnZmlsdGVyZWQnLCBsdiwgeyBidWJibGVzOiB0cnVlLCBkZXRhaWw6IHsgZWxlbTogbHYsIHR5cGU6ICdjbGVhcicsIHRlcm06ICcnIH0gfSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBzZWFyY2hhYmxlXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgc2V0U2VhcmNoYWJsZSgpOiB2b2lkIHtcbiAgICBjb25zdCBnZXRTbG90dGVkID0gKCkgPT4gdGhpcy5zaGFkb3dSb290Py5xdWVyeVNlbGVjdG9yPGFueT4oJ3Nsb3RbbmFtZT1cInNlYXJjaFwiXScpPy5hc3NpZ25lZEVsZW1lbnRzKClbMF07XG5cbiAgICBsZXQgc2xvdHRlZCA9IGdldFNsb3R0ZWQoKTtcbiAgICBpZiAoIXNsb3R0ZWQgJiYgdGhpcy5zZWFyY2hhYmxlKSB7XG4gICAgICB0aGlzLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIHRoaXMuc2VhcmNoRmllbGRUZW1wbGF0ZSgpKTtcbiAgICAgIHNsb3R0ZWQgPSBnZXRTbG90dGVkKCk7XG4gICAgfSBlbHNlIGlmICghdGhpcy5zZWFyY2hhYmxlICYmIHNsb3R0ZWQ/Lmhhc0F0dHJpYnV0ZSgnaWRzLWx2LWRlZmF1bHQtc2VhcmNoZmllbGQnKSkge1xuICAgICAgc2xvdHRlZC5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICBjb25zdCBpc1NlYXJjaGZpZWxkID0gISFnZXRTbG90dGVkKCk7XG4gICAgdGhpcy5jb250YWluZXI/LmNsYXNzTGlzdFtpc1NlYXJjaGZpZWxkID8gJ2FkZCcgOiAncmVtb3ZlJ10oJ2hhcy1zZWFyY2hmaWVsZCcpO1xuICAgIHRoaXMuc2VhcmNoQ29udGFpbmVyPy5jbGFzc0xpc3RbaXNTZWFyY2hmaWVsZCA/ICdhZGQnIDogJ3JlbW92ZSddKCdoYXMtc2VhcmNoZmllbGQnKTtcbiAgICB0aGlzLiNhdHRhY2hlU2VhcmNoRmllbGQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBdHRhY2hlcyBhIHNsb3R0ZWQgSWRzU2VhcmNoRmllbGQgY29tcG9uZW50XG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgI2F0dGFjaGVTZWFyY2hGaWVsZCgpOiB2b2lkIHtcbiAgICBjb25zdCBzZWFyY2hGaWVsZCA9IHRoaXMuc2VhcmNoRmllbGQ7XG4gICAgaWYgKHNlYXJjaEZpZWxkKSB7XG4gICAgICBzZWFyY2hGaWVsZC5vblNlYXJjaCA9ICh0ZXJtOiBzdHJpbmcpID0+IHRoaXMuI2hhbmRsZVNlYXJjaCh0ZXJtKTtcblxuICAgICAgdGhpcy5vZmZFdmVudCgnY2xlYXJlZC5saXN0dmlld3NlYXJjaCcpO1xuICAgICAgdGhpcy5vbkV2ZW50KCdjbGVhcmVkLmxpc3R2aWV3c2VhcmNoJywgc2VhcmNoRmllbGQsICgpID0+IHRoaXMucmVzZXRTZWFyY2goKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBvYmplY3QgcHJvcHMgYXMgdGV4dFxuICAgKiBAcGFyYW0ge3N0cmluZ30gaXRlbSBUaGUgdGVybSB2YWx1ZVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfEhUTUxFbGVtZW50fG9iamVjdH0gVGhlIHNlYXJjaGFibGUgY29udGVudFxuICAgKi9cbiAgI29iamVjdFByb3BzQXNUZXh0KGl0ZW06IHN0cmluZyB8IEhUTUxFbGVtZW50IHwgb2JqZWN0KTogc3RyaW5nIHtcbiAgICBjb25zdCBleGNsdWRlVmFsdWVzID0gWydpc0ZpbHRlcmVkT3V0J107XG4gICAgbGV0IHRleHQgPSAnJztcblxuICAgIE9iamVjdC5rZXlzKGl0ZW0pLmZvckVhY2goKHByb3ApID0+IHtcbiAgICAgIGlmIChleGNsdWRlVmFsdWVzLmluZGV4T2YocHJvcCkgPiAwKSByZXR1cm47XG4gICAgICBjb25zdCBwYWQgPSB0ZXh0Lmxlbmd0aCA/ICcgJyA6ICcnO1xuICAgICAgdGV4dCArPSBgJHtwYWR9JHsoaXRlbSBhcyBhbnkpW3Byb3BdfWA7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRleHQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHNlYXJjaGFibGUgY29udGVudFxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gaXRlbSBUaGUgdGVybSB2YWx1ZVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfEhUTUxFbGVtZW50fG9iamVjdH0gVGhlIHNlYXJjaGFibGUgY29udGVudFxuICAgKi9cbiAgI3NlYXJjaGFibGVDb250ZW50KGl0ZW06IHN0cmluZyB8IEhUTUxFbGVtZW50IHwgb2JqZWN0KTogc3RyaW5nIHtcbiAgICBsZXQgc2FudGl0aXplID0gdHJ1ZTtcbiAgICBpZiAodHlwZW9mIHRoaXMuc2VhcmNoYWJsZVRleHRDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIHRoaXMuc2VhcmNoYWJsZVRleHRDYWxsYmFjayhpdGVtKSA/PyAnJztcbiAgICB9XG5cbiAgICBsZXQgdGFyZ2V0Q29udGVudDtcbiAgICBpZiAodHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnKSB7XG4gICAgICB0YXJnZXRDb250ZW50ID0gaXRlbTtcbiAgICB9IGVsc2UgaWYgKGl0ZW0gaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgc2FudGl0aXplID0gZmFsc2U7XG4gICAgICB0YXJnZXRDb250ZW50ID0gaXRlbS5pbm5lclRleHQ7XG4gICAgfSBlbHNlIHsgLy8gT2JqZWN0XG4gICAgICB0YXJnZXRDb250ZW50ID0gdGhpcy4jb2JqZWN0UHJvcHNBc1RleHQoaXRlbSk7XG4gICAgfVxuXG4gICAgaWYgKHNhbnRpdGl6ZSkgdGFyZ2V0Q29udGVudCA9IHNhbml0aXplSFRNTCh0YXJnZXRDb250ZW50KTtcblxuICAgIHJldHVybiB0YXJnZXRDb250ZW50ID8/ICcnO1xuICB9XG5cbiAgLyoqXG4gICAqIE1hdGNoZXMgdGhlIHByb3ZpZGVkIHRlcm0gYWdhaW5zdCB0aGUgYmVnaW5uaW5nIG9mIGFsbCB3b3JkcyBpbiBhIHRleHQgc3RyaW5nLlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBzZWFyY2hhYmxlIHRleHQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXJtIHRoZSB0ZXJtIGZvciB3aGljaCB0byBzZWFyY2ggaW4gdGhlIHRleHQgc3RyaW5nLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgdGVybSBpcyBwcmVzZW50LlxuICAgKi9cbiAgI3dvcmRTdGFydHNXaXRoRmlsdGVyKHRleHQ6IHN0cmluZywgdGVybTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgcGFydHMgPSB0ZXh0LnNwbGl0KCcgJyk7XG5cbiAgICAvLyBDaGVjayBhbGwgd29yZHMgZm9yIGEgbWF0Y2hcbiAgICBmb3IgKGxldCBhID0gMDsgYSA8IHBhcnRzLmxlbmd0aDsgYSsrKSB7XG4gICAgICBpZiAocGFydHNbYV0uaW5kZXhPZih0ZXJtKSA9PT0gMCkgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gRGlyZWN0IE1hdGNoXG4gICAgaWYgKHRleHQuaW5kZXhPZih0ZXJtKSA9PT0gMCkgcmV0dXJuIHRydWU7XG5cbiAgICAvLyBQYXJ0aWFsIGR1YWwgd29yZCBtYXRjaFxuICAgIGlmICh0ZXJtLmluZGV4T2YoJyAnKSA+IDAgJiYgdGV4dC5pbmRleE9mKHRlcm0pID4gMCkgcmV0dXJuIHRydWU7XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHNlYXJjaCBmb3IgZ2l2ZW4gdHJlbVxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGVybSBUaGUgdGVybSB2YWx1ZVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gICNoYW5kbGVTZWFyY2godGVybTogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgbHYgPSB0aGlzIGFzIHVua25vd24gYXMgSWRzTGlzdFZpZXc7XG4gICAgaWYgKCFsdi5kYXRhc291cmNlKSByZXR1cm47XG5cbiAgICAvLyBSZXNldCBzZWFyY2ggaWYgdGVybSBpcyBlbXB0eVxuICAgIGNvbnN0IGlzVGVybVN0cmluZyA9IHR5cGVvZiB0ZXJtID09PSAnc3RyaW5nJztcbiAgICBpZiAoIWlzVGVybVN0cmluZyB8fCAoaXNUZXJtU3RyaW5nICYmIHRlcm0gPT09ICcnKSkgcmV0dXJuIHRoaXMucmVzZXRTZWFyY2goKTtcblxuICAgIC8vIE1ha2Ugc3VyZSB3aWxsIHRyaWdnZXIgZmlsdGVyaW5nIG9ubHkgd2hlbiBpdHMgbGVuZ3RoIGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbHMgdG8gc2VhcmNoIHRlcm0gbWluIHNpemUuXG4gICAgaWYgKHRlcm0ubGVuZ3RoIDwgdGhpcy5zZWFyY2hUZXJtTWluU2l6ZSkge1xuICAgICAgdGhpcy5yZXNldFNlYXJjaCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEF2b2lkIG11bHRpcGxlIHJ1bnMgaWYgdGhlIHNlYXJjaCB0ZXJtIGlzIHRoZSBzYW1lXG4gICAgaWYgKHRoaXMuI3Rlcm0gPT09IHRlcm0pIHJldHVybjtcblxuICAgIHRoaXMuI3Rlcm0gPSB0ZXJtO1xuXG4gICAgLy8gTWFrZSBzZWFyY2ggdGVybSBsb3dlcmNhc2UgaWYgdGhlIHNlYXJjaCBpcyBub3QgY2FzZS1zZW5zdGl2ZVxuICAgIGlmICghdGhpcy5zZWFyY2hUZXJtQ2FzZVNlbnNpdGl2ZSkge1xuICAgICAgdGVybSA9IHRlcm0udG9Mb3dlckNhc2UoKTtcbiAgICB9XG5cbiAgICAvLyBJdGVyYXRlcyB0aHJvdWdoIGVhY2ggbGlzdCBpdGVtIGFuZCBhdHRlbXB0cyB0byBmaW5kIHRoZSBwcm92aWRlZCBzZWFyY2ggdGVybS5cbiAgICBjb25zdCBzZWFyY2hJdGVtSXRlcmF0b3IgPSAoaXRlbTogc3RyaW5nIHwgSFRNTEVsZW1lbnQgfCBvYmplY3QpOiBib29sZWFuID0+IHtcbiAgICAgIGxldCB0ZXh0ID0gdGhpcy4jc2VhcmNoYWJsZUNvbnRlbnQoaXRlbSk7XG4gICAgICBpZiAoIXRoaXMuc2VhcmNoVGVybUNhc2VTZW5zaXRpdmUpIHtcbiAgICAgICAgdGV4dCA9IHRleHQudG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG1vZGVzID0gdGhpcy5zZWFyY2hGaWx0ZXJNb2RlcztcbiAgICAgIGxldCBtYXRjaCA9IGZhbHNlO1xuXG4gICAgICAvLyBGb3IgY2hlY2tpbmcgaWYgYW55IHdvcmQgaW4gdGhlIHN0cmluZyBiZWdpbnMgd2l0aCB0aGUgdGVybSwgdXNlIGB3b3JkLXN0YXJ0cy13aXRoYFxuICAgICAgaWYgKHRoaXMuc2VhcmNoRmlsdGVyTW9kZSA9PT0gbW9kZXMuV09SRF9TVEFSVFNfV0lUSCkge1xuICAgICAgICBtYXRjaCA9IHRoaXMuI3dvcmRTdGFydHNXaXRoRmlsdGVyKHRleHQsIHRlcm0pO1xuICAgICAgfVxuXG4gICAgICAvLyBGb3IgY2hlY2tpbmcgaWYgYSBzdHJpbmcgYmVnaW5zIHdpdGggdGhlIHRlcm0sIHVzZSBgcGhyYXNlLXN0YXJ0cy13aXRoYFxuICAgICAgaWYgKCh0aGlzLnNlYXJjaEZpbHRlck1vZGUgPT09IG1vZGVzLlBIUkFTRV9TVEFSVFNfV0lUSCkgJiYgKHRleHQuaW5kZXhPZih0ZXJtKSA9PT0gMCkpIHtcbiAgICAgICAgbWF0Y2ggPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVja2luZyBpZiBhIHN0cmluZyBjb250YWlucyB0aGUgdGVybVxuICAgICAgaWYgKCh0aGlzLnNlYXJjaEZpbHRlck1vZGUgPT09IG1vZGVzLkNPTlRBSU5TKSAmJiAodGV4dC5pbmRleE9mKHRlcm0pID49IDApKSB7XG4gICAgICAgIG1hdGNoID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gS2V5d29yZHMgZmlsdGVyIG1vZGVcbiAgICAgIGlmICh0aGlzLnNlYXJjaEZpbHRlck1vZGUgPT09IG1vZGVzLktFWVdPUkQpIHtcbiAgICAgICAgY29uc3Qga2V5d29yZHMgPSB0ZXJtLnNwbGl0KCcgJyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5d29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAodGV4dC5pbmRleE9mKGtleXdvcmRzW2ldKSA+PSAwKSB7XG4gICAgICAgICAgICBtYXRjaCA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuICFtYXRjaDtcbiAgICB9O1xuXG4gICAgLy8gU2V0IGN1c3RvbSBvciBkZWZhdWx0IGZpbHRlciB0byBtYXRjaFxuICAgIGxldCBpdGVtSXRlcmF0b3IgPSBzZWFyY2hJdGVtSXRlcmF0b3I7XG4gICAgaWYgKHR5cGVvZiB0aGlzLnNlYXJjaEZpbHRlckNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBpdGVtSXRlcmF0b3IgPSB0aGlzLnNlYXJjaEZpbHRlckNhbGxiYWNrKHRlcm0pO1xuICAgIH1cblxuICAgIC8vIEFwcGx5IGZpbHRlclxuICAgIGx2LmRhdGFzb3VyY2UuZmlsdGVyKGl0ZW1JdGVyYXRvcik7XG4gICAgbHYucmVkcmF3Py4oKTtcbiAgICBsdi50cmlnZ2VyRXZlbnQoJ2ZpbHRlcmVkJywgbHYsIHsgYnViYmxlczogdHJ1ZSwgZGV0YWlsOiB7IGVsZW06IGx2LCB0eXBlOiAnYXBwbHknLCB0ZXJtIH0gfSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHNlYXJjaCB0ZXJtIGhpZ2hsaWdodFxuICAgKiBAcGFyYW0ge3N0cmluZyB8IEhUTUxFbGVtZW50IHwgb2JqZWN0fSBpdGVtIFRoZSBmcm9tIGRhdGEgaXRlbVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBzZWFyY2ggdGVybSBoaWdobGlnaHRcbiAgICovXG4gIHNlYXJjaEhpZ2hsaWdodChpdGVtOiBzdHJpbmcgfCBIVE1MRWxlbWVudCB8IG9iamVjdCk6IHN0cmluZyB8IEhUTUxFbGVtZW50IHwgb2JqZWN0IHtcbiAgICBpZiAodGhpcy5zdXBwcmVzc0hpZ2hsaWdodCB8fCAhaXRlbSB8fCB0aGlzLiN0ZXJtID09PSAnJykgcmV0dXJuIGl0ZW07XG5cbiAgICAvLyBTZXQgcmVnZXggYWNjb3JkaW5nIHRvIHNlYXJjaCBmaWx0ZXIgbW9kZVxuICAgIGxldCByZWdleDogYW55ID0gbnVsbDtcbiAgICBjb25zdCBtb2RlcyA9IHRoaXMuc2VhcmNoRmlsdGVyTW9kZXM7XG4gICAgY29uc3QgZmxhZyA9IHRoaXMuc2VhcmNoVGVybUNhc2VTZW5zaXRpdmUgPyAnZycgOiAnZ2knO1xuICAgIGNvbnN0IHJlcGxhY2VUbXBsID0gYDxzdHJvbmcgY2xhc3M9XCJoaWdobGlnaHRcIj4kMTwvc3Ryb25nPmA7XG4gICAgbGV0IHJlcGxhY2VNYXRjaCA9IChzOiBzdHJpbmcpID0+IHMucmVwbGFjZShyZWdleCwgcmVwbGFjZVRtcGwpO1xuICAgIGlmICh0aGlzLnNlYXJjaEZpbHRlck1vZGUgPT09IG1vZGVzLldPUkRfU1RBUlRTX1dJVEgpIHtcbiAgICAgIHJlZ2V4ID0gbmV3IFJlZ0V4cChgKF58XFxcXHMpKCR7dGhpcy4jdGVybX0pYCwgZmxhZyk7XG4gICAgICByZXBsYWNlTWF0Y2ggPSAoczogc3RyaW5nKSA9PiBzLnJlcGxhY2UocmVnZXgsIChtOiBzdHJpbmcpID0+IChcbiAgICAgICAgbS5yZXBsYWNlKG5ldyBSZWdFeHAoYCgke3RoaXMuI3Rlcm19KWAsIGZsYWcpLCByZXBsYWNlVG1wbClcbiAgICAgICkpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5zZWFyY2hGaWx0ZXJNb2RlID09PSBtb2Rlcy5QSFJBU0VfU1RBUlRTX1dJVEgpIHtcbiAgICAgIHJlZ2V4ID0gbmV3IFJlZ0V4cChgXigke3RoaXMuI3Rlcm19KWAsIGZsYWcpO1xuICAgIH0gZWxzZSBpZiAoKHRoaXMuc2VhcmNoRmlsdGVyTW9kZSA9PT0gbW9kZXMuQ09OVEFJTlMpXG4gICAgICB8fCAodGhpcy5zZWFyY2hGaWx0ZXJNb2RlID09PSBtb2Rlcy5LRVlXT1JEKSkge1xuICAgICAgcmVnZXggPSBuZXcgUmVnRXhwKGAoJHt0aGlzLiN0ZXJtfSlgLCBmbGFnKTtcbiAgICB9XG5cbiAgICAvLyBObyBuZWVkIHRvIGdvIGZ1cnRoZXIgaWYgcmVnZXggaXMgbnVsbFxuICAgIGlmICghcmVnZXgpIHJldHVybiBpdGVtO1xuXG4gICAgbGV0IHRlcm0gPSB0aGlzLiN0ZXJtO1xuICAgIGxldCBjbG9uZUl0ZW0gPSBkZWVwQ2xvbmUoaXRlbSk7XG4gICAgbGV0IHRleHQgPSB0aGlzLiNzZWFyY2hhYmxlQ29udGVudChjbG9uZUl0ZW0pO1xuXG4gICAgLy8gU2V0IGNhc2Ugc2Vuc2l0aXZlXG4gICAgaWYgKCF0aGlzLnNlYXJjaFRlcm1DYXNlU2Vuc2l0aXZlKSB7XG4gICAgICB0ZXJtID0gdGVybS50b0xvd2VyQ2FzZSgpO1xuICAgICAgdGV4dCA9IHRleHQudG9Mb3dlckNhc2UoKTtcbiAgICB9XG5cbiAgICAvLyBIaWdobGlnaHQgc2VhcmNoIHRlcm1cbiAgICBpZiAodGV4dC5pbmRleE9mKHRlcm0pID49IDApIHtcbiAgICAgIGlmICh0eXBlb2YgY2xvbmVJdGVtID09PSAnc3RyaW5nJyAmJiB0ZXh0ID09PSBjbG9uZUl0ZW0pIHtcbiAgICAgICAgY2xvbmVJdGVtID0gcmVwbGFjZU1hdGNoKGNsb25lSXRlbSk7XG4gICAgICB9IGVsc2UgaWYgKGNsb25lSXRlbSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGl0bVRleHQgPSBjbG9uZUl0ZW0uaW5uZXJUZXh0O1xuICAgICAgICBjb25zdCBzSHRtbCA9IHNhbml0aXplSFRNTChjbG9uZUl0ZW0uaW5uZXJUZXh0KTtcbiAgICAgICAgaWYgKHRleHQgPT09IHNIdG1sKSBjbG9uZUl0ZW0uaW5uZXJUZXh0ID0gcmVwbGFjZU1hdGNoKGl0bVRleHQpO1xuICAgICAgfSBlbHNlIHsgLy8gT2JqZWN0XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGNsb25lSXRlbSkpIHtcbiAgICAgICAgICBjb25zdCB2YWwgPSB0aGlzLnNlYXJjaFRlcm1DYXNlU2Vuc2l0aXZlID8gdmFsdWUgOiB2YWx1ZT8udG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIGlmICh0ZXh0ID09PSB2YWwpIChjbG9uZUl0ZW0gYXMgYW55KVtrZXldID0gcmVwbGFjZU1hdGNoKHZhbHVlIGFzIGFueSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY2xvbmVJdGVtO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBJZHNMaXN0Vmlld1NlYXJjaE1peGluO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/ids-list-view/ids-list-view-search-mixin.ts\n");

/***/ }),

/***/ "./src/components/ids-list-view/ids-list-view.ts":
/*!*******************************************************!*\
  !*** ./src/components/ids-list-view/ids-list-view.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ IdsListView)\n/* harmony export */ });\n/* harmony import */ var _core_ids_decorators__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/ids-decorators */ \"./src/core/ids-decorators.ts\");\n/* harmony import */ var _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/ids-attributes */ \"./src/core/ids-attributes.ts\");\n/* harmony import */ var _utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/ids-string-utils/ids-string-utils */ \"./src/utils/ids-string-utils/ids-string-utils.ts\");\n/* harmony import */ var _core_ids_data_source__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/ids-data-source */ \"./src/core/ids-data-source.ts\");\n/* harmony import */ var _ids_virtual_scroll_ids_virtual_scroll__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ids-virtual-scroll/ids-virtual-scroll */ \"./src/components/ids-virtual-scroll/ids-virtual-scroll.ts\");\n/* harmony import */ var _ids_checkbox_ids_checkbox__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../ids-checkbox/ids-checkbox */ \"./src/components/ids-checkbox/ids-checkbox.ts\");\n/* harmony import */ var _mixins_ids_events_mixin_ids_events_mixin__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../mixins/ids-events-mixin/ids-events-mixin */ \"./src/mixins/ids-events-mixin/ids-events-mixin.ts\");\n/* harmony import */ var _mixins_ids_keyboard_mixin_ids_keyboard_mixin__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../mixins/ids-keyboard-mixin/ids-keyboard-mixin */ \"./src/mixins/ids-keyboard-mixin/ids-keyboard-mixin.ts\");\n/* harmony import */ var _mixins_ids_theme_mixin_ids_theme_mixin__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../mixins/ids-theme-mixin/ids-theme-mixin */ \"./src/mixins/ids-theme-mixin/ids-theme-mixin.ts\");\n/* harmony import */ var _mixins_ids_locale_mixin_ids_locale_mixin__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../mixins/ids-locale-mixin/ids-locale-mixin */ \"./src/mixins/ids-locale-mixin/ids-locale-mixin.ts\");\n/* harmony import */ var _core_ids_element__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../core/ids-element */ \"./src/core/ids-element.ts\");\n/* harmony import */ var _mixins_ids_pager_mixin_ids_pager_mixin__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../mixins/ids-pager-mixin/ids-pager-mixin */ \"./src/mixins/ids-pager-mixin/ids-pager-mixin.ts\");\n/* harmony import */ var _ids_list_view_search_mixin__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./ids-list-view-search-mixin */ \"./src/components/ids-list-view/ids-list-view-search-mixin.ts\");\n/* harmony import */ var _ids_swappable_ids_swappable__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../ids-swappable/ids-swappable */ \"./src/components/ids-swappable/ids-swappable.ts\");\n/* harmony import */ var _ids_swappable_ids_swappable_item__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../ids-swappable/ids-swappable-item */ \"./src/components/ids-swappable/ids-swappable-item.ts\");\n/* harmony import */ var _ids_search_field_ids_search_field__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../ids-search-field/ids-search-field */ \"./src/components/ids-search-field/ids-search-field.ts\");\n/* harmony import */ var _ids_list_view_scss__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./ids-list-view.scss */ \"./src/components/ids-list-view/ids-list-view.scss\");\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __decorateClass = (decorators, target, key, kind) => {\n  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key) : target;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--)\n    if (decorator = decorators[i])\n      result = (kind ? decorator(target, key, result) : decorator(result)) || result;\n  if (kind && result)\n    __defProp(target, key, result);\n  return result;\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst Base = (0,_mixins_ids_locale_mixin_ids_locale_mixin__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(\n  (0,_mixins_ids_theme_mixin_ids_theme_mixin__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(\n    (0,_mixins_ids_pager_mixin_ids_pager_mixin__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(\n      (0,_ids_list_view_search_mixin__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(\n        (0,_mixins_ids_keyboard_mixin_ids_keyboard_mixin__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(\n          (0,_mixins_ids_events_mixin_ids_events_mixin__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(\n            _core_ids_element__WEBPACK_IMPORTED_MODULE_10__[\"default\"]\n          )\n        )\n      )\n    )\n  )\n);\nconst LIST_VIEW_DEFAULTS = {\n  hideCheckboxes: false,\n  // Only apply to selectable multiple\n  height: \"100%\",\n  label: \"Ids list view\",\n  selectableOptions: [\"single\", \"multiple\", \"mixed\"],\n  sortable: false,\n  suppressDeactivation: false,\n  // Use with Mixed selection only\n  suppressDeselection: true,\n  // Use with Single selection only\n  virtualScroll: false\n};\nlet IdsListView = class extends Base {\n  constructor() {\n    super();\n  }\n  /** Is the component initialized */\n  initialized = false;\n  /** The currently focused list item */\n  #focusedLiIndex = 0;\n  /** The currently activated list item */\n  #activatedIndex = -1;\n  /** The currently target while selecting */\n  #isTargetCheckbox = false;\n  /** The currently apply state while single selecting */\n  #isApply = false;\n  /** The currently list size */\n  #size = 0;\n  /** The datasource container */\n  datasource = new _core_ids_data_source__WEBPACK_IMPORTED_MODULE_3__[\"default\"]();\n  defaultTemplate = \"\";\n  /**\n   * @returns {Array<string>} Drawer vetoable events\n   */\n  vetoableEventTypes = [\n    \"beforeitemactivated\",\n    \"beforeitemdeactivated\",\n    \"beforeselected\",\n    \"beforedeselected\"\n  ];\n  connectedCallback() {\n    super.connectedCallback();\n    this.defaultTemplate = `${this.querySelector(\"template\")?.innerHTML || \"\"}`;\n    this.dataKeys = this.#extractTemplateLiteralsFromHTML(this.defaultTemplate);\n    this.#attachEventListeners();\n  }\n  /**\n   * Return the attributes we handle as getters/setters\n   * @returns {Array} The attributes in an array\n   */\n  static get attributes() {\n    return [\n      ...super.attributes,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.LOADED,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.HEIGHT,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.HIDE_CHECKBOXES,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.ITEM_HEIGHT,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.LABEL,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SELECTABLE,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SORTABLE,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SUPPRESS_DEACTIVATION,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SUPPRESS_DESELECTION,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.VIRTUAL_SCROLL\n    ];\n  }\n  #extractTemplateLiteralsFromHTML(string) {\n    const arr = string.split(\"${\");\n    arr.shift();\n    const tokens = arr.map((x) => x.split(\"}\")[0]);\n    return tokens;\n  }\n  /**\n   * Get list of all elements\n   * @returns {NodeListOf<HTMLElement>} List of all list item elements\n   */\n  getAllLi() {\n    return this.container?.querySelectorAll('div[part=\"list-item\"]');\n  }\n  /**\n   * Return all swappable items\n   * @returns {NodeListOf<IdsSwappableItem>} List of all swappable items\n   */\n  getAllSwappableItems() {\n    return this.container?.querySelectorAll(\"ids-swappable-item\");\n  }\n  /**\n   * Add the sortable class to the list items\n   * @returns {void}\n   */\n  #addSortableStyles() {\n    this.getAllLi()?.forEach((li) => {\n      li.classList.add(\"sortable\");\n    });\n  }\n  /**\n   * Get the item info for given element.\n   * @param {HTMLElement} el The element.\n   * @returns {IdsListViewItemInfo|null} Item info, or null if item not found.\n   */\n  #itemInfo(el) {\n    const item = el?.getAttribute(\"role\") === \"option\" ? el : el?.closest('[role=\"option\"]');\n    const index = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_2__.stringToNumber)(item?.getAttribute(\"index\"));\n    return Number.isNaN(index) ? null : { item, index, data: this.data[index] };\n  }\n  /**\n   * Get the list item DOM element.\n   * @param {number} index The value of data index.\n   * @returns {HTMLElement|null} The DOM element, or null if item not found.\n   */\n  #itemByIndex(index) {\n    return Number.isNaN(index) || !this.container ? null : this.container.querySelector(`div[part=\"list-item\"][index=\"${index}\"]`);\n  }\n  /**\n   * Get data index for given page index.\n   * @param {number} index The page index value.\n   * @returns {number|null} The data index.\n   */\n  dataIndex(index) {\n    const idx = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_2__.stringToNumber)(index);\n    if (Number.isNaN(idx))\n      return null;\n    return idx >= 0 && idx < this.#size ? idx + (this.pageNumber - 1) * this.#size : null;\n  }\n  /**\n   * Get page index for given data index.\n   * @param {number} dataIndex The data index value.\n   * @returns {number|null} The paga index.\n   */\n  pageIndex(dataIndex) {\n    let idx = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_2__.stringToNumber)(dataIndex);\n    if (Number.isNaN(idx))\n      return null;\n    idx -= (this.pageNumber - 1) * this.#size;\n    return idx >= 0 && idx < this.#size ? idx : null;\n  }\n  /**\n   * Check if given data index in current page.\n   * @param {number} dataIndex The data index value.\n   * @returns {boolean} True, if data index in current page\n   */\n  isInPage(dataIndex) {\n    const idx = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_2__.stringToNumber)(dataIndex);\n    if (Number.isNaN(idx))\n      return false;\n    let end = this.pageNumber * this.#size;\n    let start = end - this.#size;\n    if (this.virtualScroll) {\n      end = this.virtualScrollContainer?.lastEnd;\n      start = this.virtualScrollContainer?.lastStart;\n    }\n    return dataIndex >= start && dataIndex < end;\n  }\n  /**\n   * Handle on click\n   * @private\n   * @param {any} e The event.\n   * @returns {void}\n   */\n  #handleOnClick(e) {\n    const itemInfo = this.#itemInfo(e.target);\n    if (itemInfo) {\n      this.#isTargetCheckbox = e.target?.classList.contains(\"list-item-checkbox\");\n      if (this.#isTargetCheckbox)\n        e.preventDefault();\n      this.#setSelection(itemInfo);\n    }\n  }\n  /**\n   * Handle on keydown\n   * @private\n   * @param {KeyboardEvent} e The event.\n   * @returns {void}\n   */\n  #handleOnKeydown(e) {\n    switch (e.code) {\n      case \"ArrowUp\":\n        e.preventDefault();\n        this.focusLi(this.getPreviousLi(this.getFocusedLi()));\n        break;\n      case \"ArrowDown\":\n        e.preventDefault();\n        this.focusLi(this.getNextLi(this.getFocusedLi()));\n        break;\n      case \"Space\":\n        e.preventDefault();\n        break;\n      default:\n        break;\n    }\n  }\n  /**\n   * Handle on keyup\n   * @private\n   * @param {KeyboardEvent} e The event.\n   * @returns {void}\n   */\n  #handleOnKeyup(e) {\n    if (/^(Space|Enter)$/g.test(e.code)) {\n      e.preventDefault();\n      e.stopPropagation();\n      const focusedLi = this.getFocusedLi();\n      if (this.selectable === \"mixed\") {\n        const cb = focusedLi?.querySelector(\".list-item-checkbox\");\n        if (cb)\n          cb.checked = !cb.checked;\n        this.#isTargetCheckbox = true;\n      }\n      this.#setSelection(this.#itemInfo(focusedLi));\n    }\n  }\n  /**\n   * Handle on after virtual scroll\n   * @private\n   * @param {CustomEvent} e The event.\n   * @returns {void}\n   */\n  #handleOnAfterVirtualScroll(e) {\n    const { startIndex, endIndex } = e.detail || {};\n    this.#adjustVirtualScrollIndexes(startIndex);\n    for (let i = startIndex; i < endIndex; i++) {\n      if (this.data?.[i]?.itemSelected) {\n        const item = this.#itemByIndex(i);\n        const cb = item?.querySelector(\".list-item-checkbox\");\n        if (cb)\n          cb.checked = true;\n        item?.setAttribute(\"selected\", \"\");\n        item?.setAttribute(\"aria-selected\", \"true\");\n        if (this.selectable === \"mixed\")\n          item?.setAttribute(\"hide-selected-color\", \"\");\n      }\n      if (this.data?.[i]?.itemActivated) {\n        this.#itemByIndex(i)?.setAttribute(\"activated\", \"\");\n      }\n    }\n  }\n  #attachEventListeners() {\n    this.offEvent(\"click.listview\", this.container);\n    this.onEvent(\"click.listview\", this.container, (e) => {\n      const args = this.#itemInfo(e.target);\n      if (args)\n        this.#triggerEvent(\"click\", { ...args, originalEvent: e });\n    });\n    this.offEvent(\"dblclick.listview\", this.container);\n    this.onEvent(\"dblclick.listview\", this.container, (e) => {\n      const itemInfo = this.#itemInfo(e.target);\n      if (itemInfo)\n        this.#triggerEvent(\"dblclick\", { ...itemInfo, originalEvent: e });\n    });\n    if (this.sortable) {\n      this.#addSortableStyles();\n    } else {\n      this.offEvent(\"click.listview-selection\", this.container);\n      this.onEvent(\"click.listview-selection\", this.container, (e) => this.#handleOnClick(e));\n      this.offEvent(\"keydown.listview-selection\", this.container);\n      this.onEvent(\"keydown.listview-selection\", this.container, (e) => this.#handleOnKeydown(e));\n      this.offEvent(\"keyup.listview-selection\", this.container);\n      this.onEvent(\"keyup.listview-selection\", this.container, (e) => this.#handleOnKeyup(e));\n      this.offEvent(\"aftervirtualscroll.listview\", this.virtualScrollContainer);\n      this.onEvent(\"aftervirtualscroll.listview\", this.virtualScrollContainer, (e) => this.#handleOnAfterVirtualScroll(e));\n    }\n  }\n  /**\n   * Set the selection for given item\n   * @private\n   * @param {any} itemInfo The item and index.\n   * @returns {void}\n   */\n  #setSelection(itemInfo) {\n    if (!itemInfo)\n      return;\n    const { item, index } = itemInfo;\n    const dataIndex = this.dataIndex(index);\n    let isVeto = true;\n    if (this.selectable) {\n      const selected = this.selected;\n      if (this.selectable === \"single\") {\n        isVeto = this.#selectInPage(index);\n      }\n      if (this.selectable === \"multiple\") {\n        if (selected.some((d) => d.index === dataIndex)) {\n          isVeto = this.#deselectInPage(index);\n        } else {\n          isVeto = this.#selectInPage(index);\n        }\n      }\n      if (this.selectable === \"mixed\") {\n        if (this.#isTargetCheckbox) {\n          if (selected.some((d) => d.index === dataIndex)) {\n            isVeto = this.#deselectInPage(index);\n          } else {\n            isVeto = this.#selectInPage(index);\n          }\n        } else {\n          this.#activateItemInPage(index);\n        }\n      }\n    }\n    if (isVeto)\n      this.focusLi(item);\n  }\n  /**\n   * Set the focus for given list item.\n   * @param {any} li The list item.\n   * @returns {void}\n   */\n  focusLi(li) {\n    if (li) {\n      const prevFocus = this.getFocusedLi();\n      if (li !== prevFocus) {\n        prevFocus?.setAttribute(\"tabindex\", \"-1\");\n        this.#focusedLiIndex = li.getAttribute(\"index\");\n      }\n      const container = this.container?.querySelector(\".ids-list-view-body\");\n      container?.setAttribute(\"aria-activedescendant\", String(li.getAttribute(\"id\")));\n      li.setAttribute(\"tabindex\", \"0\");\n      li.focus();\n    }\n  }\n  /**\n   * Get currently focused list item.\n   * @returns {HTMLElement} The focused list item.\n   */\n  getFocusedLi() {\n    const savedFocusedLi = this.container?.querySelector(`div[part=\"list-item\"][index=\"${this.#focusedLiIndex}\"]`);\n    const val = savedFocusedLi ?? this.container?.querySelector('div[part=\"list-item\"][tabindex=\"0\"]');\n    return val;\n  }\n  /**\n   * Get previous list item for a given list item.\n   * @param {any} li The list item.\n   * @returns {HTMLElement|undefined} The previous list item\n   */\n  getPreviousLi(li) {\n    let idx = li && typeof li.getAttribute === \"function\" ? li.getAttribute(\"index\") : null;\n    idx = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_2__.stringToNumber)(idx);\n    if (Number.isNaN(idx))\n      return;\n    const items = [...this.getAllLi() ?? []].slice(0, idx + 1);\n    const prev = (item) => this.sortable ? item.parentElement.previousElementSibling?.firstElementChildwrapper : item.previousElementSibling;\n    let prevLi = li;\n    items.reverse().some((item) => {\n      prevLi = prev(item);\n      return !prevLi?.hasAttribute(\"disabled\");\n    });\n    return prevLi;\n  }\n  /**\n   * Get next list item for a given list item.\n   * @param {any} li The list item.\n   * @returns {HTMLElement|undefined} The next list item\n   */\n  getNextLi(li) {\n    let idx = li && typeof li.getAttribute === \"function\" ? li.getAttribute(\"index\") : null;\n    idx = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_2__.stringToNumber)(idx);\n    if (Number.isNaN(idx))\n      return;\n    const items = [...this.getAllLi() ?? []].slice(idx);\n    const next = (item) => this.sortable ? item.parentElement.nextElementSibling?.firstElementChild : item.nextElementSibling;\n    let nextLi = li;\n    items.some((item) => {\n      nextLi = next(item);\n      return !nextLi?.hasAttribute(\"disabled\");\n    });\n    return nextLi;\n  }\n  /**\n   * Get template function for list item.\n   * @returns {Function} The list item template function.\n   */\n  listItemTemplateFunc() {\n    const itemTemplate = (item, index) => {\n      if (this.selectable === \"multiple\" || this.selectable === \"mixed\") {\n        const checked = item.itemSelected ? \" checked\" : \"\";\n        const disabled = item.disabled ? \" disabled\" : \"\";\n        let checkbox = `<ids-checkbox class=\"list-item-checkbox\" label=\"cb-item-${index}\" label-state=\"hidden\"${checked}${disabled}></ids-checkbox>`;\n        if (this.selectable === \"multiple\" && this.hideCheckboxes)\n          checkbox = \"\";\n        return `\n          <div class=\"list-item-area\">\n            ${checkbox}\n            <div class=\"list-item-content\">\n              ${this.itemTemplate(item)}\n            </div>\n          </div>`;\n      }\n      return this.itemTemplate(item);\n    };\n    const func = (item, index) => {\n      const disabled = item.disabled ? \" disabled\" : \"\";\n      const tabindex = `tabindex=\"${typeof index !== \"undefined\" && !index ? \"0\" : \"-1\"}\"`;\n      const activated = item.itemActivated ? \" activated\" : \"\";\n      let selected = \"\";\n      if (item.itemSelected) {\n        selected = ' selected aria-selected=\"true\"';\n        if (this.selectable === \"mixed\")\n          selected += \" hide-selected-color\";\n      }\n      return `\n        ${this.sortable ? `<ids-swappable-item\n            role=\"listitem\"\n            tabindex=\"-1\"\n            tabbable=\"${index === 0 ? \"true\" : \"false\"}\"\n            index=\"${index}\"\n            id=\"id_item_${index + 1}\"\n            aria-posinset=\"${index + 1}\"\n            aria-setsize=\"${this.data.length}\"\n            ${disabled}\n          >` : \"\"}\n          <div\n            part=\"list-item\"\n            role=\"option\"\n            index=\"${index}\"\n            aria-posinset=\"${index + 1}\"\n            aria-setsize=\"${this.#size}\"\n            ${tabindex}${activated}${selected}${disabled}\n          >\n            ${itemTemplate(item, index)}\n          </div>\n        ${this.sortable ? `</ids-swappable-item>` : \"\"}\n      `;\n    };\n    return func;\n  }\n  /**\n   * Helper method to render the static scrolling template\n   * @returns {string} html\n   */\n  staticScrollTemplate() {\n    const selectable = this.selectable ? ` ${this.selectableClass()}` : \"\";\n    return `\n      <div class=\"ids-list-view${selectable}\" mode=\"${this.mode}\">\n        <div class=\"ids-list-view-body\" role=\"listbox\" aria-label=\"${this.label}\">\n          ${this.sortable ? `<ids-swappable selection=${this.selectable}>` : \"\"}\n            ${this.data?.length > 0 ? this.data.map(this.listItemTemplateFunc()).join(\"\") : \"\"}\n          ${this.sortable ? `</ids-swappable>` : \"\"}\n        </div>\n      </div>\n    `;\n  }\n  /**\n   * Helper method to render the virtual scrolling template\n   * @returns {string} html\n   */\n  virtualScrollTemplate() {\n    const selectable = this.selectable ? ` ${this.selectableClass()}` : \"\";\n    const html = `\n      <div class=\"ids-list-view${selectable}\" mode=\"${this.mode}\">\n        <ids-virtual-scroll\n          height=\"${this.height}\"\n          item-height=\"${this.itemHeight}\"\n        >\n          <div class=\"ids-list-view-body\" role=\"listbox\" aria-label=\"${this.label}\" part=\"contents\"></div>\n        </ids-virtual-scroll>\n      </div>\n    `;\n    return html;\n  }\n  /**\n   * Inner template contents\n   * @returns {string} The template\n   */\n  template() {\n    return `\n      ${this.searchTemplate?.()}\n      ${this.virtualScroll ? this.virtualScrollTemplate() : this.staticScrollTemplate()}\n    `;\n  }\n  /**\n   * Return an item's html injecting any values from the dataset as needed.\n   * @param {object} item The item to generate\n   * @returns {string} The html for this item\n   */\n  itemTemplate(item) {\n    const itm = this.searchHighlight?.(item) || item;\n    return (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_2__.injectTemplate)(this.defaultTemplate, itm);\n  }\n  /**\n   * Set the pager template for listview\n   * @returns {string} the default pager template for list-view\n   */\n  pagerTemplate() {\n    return `\n      <ids-pager-button label=\"Previous page\" previous></ids-pager-button>\n      <ids-pager-number-list label=\"Page {num} of {total}\"></ids-pager-number-list>\n      <ids-pager-button label=\"Next page\" next></ids-pager-button>\n    `;\n  }\n  /**\n   * Adjust list items all indexes for virtual scroll\n   * @private\n   * @param {number} startIndex The starting data index.\n   * @returns {void}\n   */\n  #adjustVirtualScrollIndexes(startIndex) {\n    const items = this.getAllLi();\n    const len = items?.length;\n    if (startIndex === 0)\n      items?.item(0)?.setAttribute(\"tabindex\", \"0\");\n    items?.forEach((item, i) => {\n      item?.setAttribute(\"index\", i + startIndex);\n      item?.setAttribute(\"aria-posinset\", i + 1);\n      item?.setAttribute(\"aria-setsize\", len);\n    });\n  }\n  /**\n   * Toggle checkboxes\n   * @private\n   * @returns {void}\n   */\n  #toggleCheckboxes() {\n    if (this.selectable === \"multiple\") {\n      const val = this.hideCheckboxes;\n      const isCheckbox = !!this.body?.querySelector(\".list-item-checkbox\");\n      if (val && isCheckbox) {\n        this.body?.querySelectorAll(\".list-item-checkbox\").forEach((cb) => cb?.remove());\n      } else if (!val && !isCheckbox) {\n        this.getAllLi()?.forEach((item) => {\n          if (!item)\n            return;\n          const index = item.getAttribute(\"index\");\n          const isSelected = item.hasAttribute(\"selected\");\n          const isDisabled = item.hasAttribute(\"disabled\");\n          const checked = isSelected ? \" checked\" : \"\";\n          const disabled = isDisabled ? \" disabled\" : \"\";\n          const itemArea = item.querySelector(\".list-item-area\");\n          itemArea?.insertAdjacentHTML(\"afterbegin\", `\n            <ids-checkbox\n             class=\"list-item-checkbox\"\n             label=\"cb-item-${index}\"\n             label-state=\"hidden\"${checked}${disabled}></ids-checkbox>\n          `);\n        });\n      }\n    }\n  }\n  /**\n   * Helper function that toggles the 'selected' attribute of an element, then focuses on that element\n   * @param {Element} item the item to add/remove the selected attribute\n   * @param {boolean} switchValue optional switch values to force add/remove the selected attribute\n   */\n  toggleSelectedAttribute(item, switchValue) {\n    if (!this.selectable || item?.tagName !== \"IDS-SWAPPABLE-ITEM\")\n      return;\n    const unselect = () => {\n      item.removeAttribute(\"selected\");\n      item.removeAttribute(\"aria-selected\");\n      this.#activatedIndex = -1;\n    };\n    const select = () => {\n      item.setAttribute(\"selected\", \"selected\");\n      item.setAttribute(\"aria-selected\", \"true\");\n      this.#activatedIndex = parseInt(item.getAttribute(\"index\") || \"-1\");\n      this.triggerEvent(\"itemSelect\", this, {\n        detail: this.getListItemData(item)\n      });\n    };\n    if (switchValue === true) {\n      select();\n    } else if (switchValue === false) {\n      unselect();\n    } else {\n      const hasSelectedAttribute = item.hasAttribute(\"selected\");\n      if (hasSelectedAttribute) {\n        unselect();\n      } else {\n        select();\n      }\n      this.focusLi(item);\n    }\n  }\n  /**\n   * Toggles the selected list item\n   * @param {any} item the selected list item to toggle\n   */\n  toggleSelectedLi(item) {\n    if (!this.selectable || !item)\n      return;\n    if (item.tagName === \"IDS-SWAPPABLE-ITEM\") {\n      if (this.selectable === \"single\") {\n        const prevSelectedLi = this.selectedLi;\n        if (item !== prevSelectedLi && prevSelectedLi) {\n          this.toggleSelectedAttribute(prevSelectedLi);\n        }\n      }\n      this.toggleSelectedAttribute(item);\n    }\n  }\n  /**\n   * Update data from DOM\n   * @returns {void}\n   */\n  updateDataFromDOM() {\n    const newData = [];\n    this.container?.querySelectorAll('div[part=\"list-item\"]').forEach((x) => {\n      const objItem = {};\n      x.querySelectorAll(\"ids-text\").forEach((value, i) => {\n        objItem[this.dataKeys[i]] = value.innerHTML;\n      });\n      newData.push(objItem);\n    });\n    if (this.datasource) {\n      this.datasource.data = newData;\n    }\n  }\n  /**\n   * Rerender the list by re applying the template\n   */\n  redraw() {\n    if (!this.data || !this.loaded) {\n      if (!this.data?.length)\n        this.getAllLi()?.forEach((li) => li?.remove());\n      return;\n    }\n    this.#size = this.pagination === \"none\" ? this.pageTotal : this.pageSize;\n    const dir = this.container?.getAttribute(\"dir\");\n    const html = this.template();\n    if (this.container?.parentElement) {\n      this.container?.parentElement.remove();\n    } else {\n      this.container?.remove();\n    }\n    this.searchContainer?.remove();\n    const referenceElem = this.shadowRoot?.querySelector(\"style\");\n    if (referenceElem) {\n      referenceElem.insertAdjacentHTML(\"afterend\", html);\n    } else {\n      const template = document.createElement(\"template\");\n      template.innerHTML = html;\n      this.shadowRoot?.appendChild(template.content.cloneNode(true));\n    }\n    this.container = this.shadowRoot?.querySelector(\".ids-list-view\");\n    if (this.data?.length > 0) {\n      if (this.virtualScroll) {\n        const itemHeight = this.itemHeight || this.#checkTemplateHeight(`\n          <div part=\"list-item\" tabindex=\"-1\" id=\"height-tester\">\n            ${this.itemTemplate(this.datasource.data[0])}\n          </div>\n        `);\n        if (this.virtualScrollContainer) {\n          this.virtualScrollContainer.itemHeight = itemHeight;\n          this.virtualScrollContainer.itemTemplate = this.listItemTemplateFunc();\n          this.virtualScrollContainer.data = this.data;\n        }\n      }\n      this.#attachEventListeners();\n    }\n    this.setSearchable?.();\n    this.pager?.sync?.apply(this);\n    this.adjustHeight();\n    if (dir) {\n      this.container?.setAttribute(\"dir\", dir);\n    }\n  }\n  get virtualScrollContainer() {\n    return this.container?.querySelector(\"ids-virtual-scroll\");\n  }\n  get body() {\n    return this.container?.querySelector(\".ids-list-view-body\");\n  }\n  /**\n   * Set the height of the list after loading the template\n   * @private\n   */\n  adjustHeight() {\n    if (!this.container)\n      return;\n    const rootContainer = this.virtualScroll ? this.virtualScrollContainer : this.container;\n    rootContainer?.style.setProperty(\"height\", `${this.height}`);\n  }\n  /**\n   * Calculate the height of a template element.\n   * @private\n   * @param {string} itemTemplate The item template\n   * @returns {number} The item height\n   */\n  #checkTemplateHeight(itemTemplate) {\n    this.container?.insertAdjacentHTML(\"beforeend\", itemTemplate);\n    const tester = this.shadowRoot?.querySelector(\"#height-tester\");\n    const height = tester?.offsetHeight;\n    tester?.remove();\n    return height ?? NaN;\n  }\n  /**\n   * Get boolean property value for given attribute.\n   * @param {string} attributeName The attribute name.\n   * @param {boolean} defaultValue The default value.\n   * @returns {boolean} The property value\n   */\n  boolVal(attributeName, defaultValue) {\n    return this.hasAttribute(attributeName) ? (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_2__.stringToBool)(this.getAttribute(attributeName)) : defaultValue;\n  }\n  /**\n   * Get the list of all data from dataset\n   * @returns {Array} value The array to use\n   */\n  get ds() {\n    return this.datasource?.allData || this.data;\n  }\n  /**\n   * Handle Setting changes of the value has changed by calling the getter\n   * in the extending class.\n   * @param {string} name The property name\n   * @param {string} oldValue The property old value\n   * @param {string} newValue The property new value\n   */\n  attributeChangedCallback(name, oldValue, newValue) {\n    super.attributeChangedCallback(name, oldValue, newValue);\n    if (oldValue === newValue)\n      return;\n    const shouldRedraw = [\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.LOADED,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SELECTABLE,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.VIRTUAL_SCROLL,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.PAGE_NUMBER,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.PAGE_SIZE,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.PAGE_TOTAL\n    ].includes(name);\n    if (shouldRedraw) {\n      this.redraw();\n    }\n  }\n  /**\n   * Set the data array of the listview\n   * @param {Array | null} value The array to use\n   */\n  set data(value) {\n    const wasInitialized = this.initialized;\n    if (value) {\n      this.initialized = true;\n      this.datasource.data = value;\n      this.loaded = true;\n      if (wasInitialized) {\n        this.redraw();\n      }\n    } else {\n      this.datasource.data = [];\n      this.loaded = false;\n    }\n  }\n  get data() {\n    return this?.datasource?.data || \"\";\n  }\n  /**\n   * Used to determine if data has been loaded into IdsListView\n   * @param {Array | null} value The array to use\n   */\n  set loaded(value) {\n    this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.LOADED, String(!!value));\n  }\n  get loaded() {\n    return (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_2__.stringToBool)(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.LOADED);\n  }\n  /**\n   * Set the data array of the listview\n   * @param {Array | null} value The array to use\n   */\n  set dataKeys(value) {\n    if (this.datasource) {\n      this.datasource.dataKeys = value || [];\n    }\n  }\n  get dataKeys() {\n    return this.datasource.dataKeys || [];\n  }\n  /**\n   * Set the list view to use virtual scrolling for a large amount of elements.\n   * @param {string | boolean} value true to use virtual scrolling\n   */\n  set virtualScroll(value) {\n    if (/boolean|string/g.test(typeof value)) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.VIRTUAL_SCROLL, String(value));\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.VIRTUAL_SCROLL);\n    }\n  }\n  get virtualScroll() {\n    return this.boolVal(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.VIRTUAL_SCROLL, LIST_VIEW_DEFAULTS.virtualScroll);\n  }\n  /**\n   * Set the expected height of the viewport for virtual scrolling\n   * @param {string | number} value true to use virtual scrolling\n   */\n  set height(value) {\n    if (value) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.HEIGHT, String(value));\n    } else {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.HEIGHT, LIST_VIEW_DEFAULTS.height);\n    }\n  }\n  get height() {\n    return this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.HEIGHT) || LIST_VIEW_DEFAULTS.height;\n  }\n  /**\n   * Set the expected height of each item\n   * @param {string | number} value true to use virtual scrolling\n   */\n  set itemHeight(value) {\n    if (value) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.ITEM_HEIGHT, String(value));\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.ITEM_HEIGHT);\n    }\n  }\n  get itemHeight() {\n    return parseInt(this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.ITEM_HEIGHT) ?? \"\");\n  }\n  /**\n   * Set the selection mode of the listview\n   * @param {string} value The value\n   */\n  set selectable(value) {\n    this.container?.classList.remove(...this.selectableClass(true));\n    if (LIST_VIEW_DEFAULTS.selectableOptions.includes(String(value))) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SELECTABLE, String(value));\n      this.container?.classList.add(this.selectableClass());\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SELECTABLE);\n    }\n  }\n  get selectable() {\n    return this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SELECTABLE);\n  }\n  /**\n   * Get class name/s with prefixed value\n   * @param {boolean|undefined} isAll If true, will return all classes as array\n   * @returns {string|Array<string>} The class name with prefix\n   */\n  selectableClass(isAll) {\n    const prefixed = (v) => `selectable-${v}`;\n    let r = \"\";\n    if (isAll)\n      r = LIST_VIEW_DEFAULTS.selectableOptions.map((v) => prefixed(v));\n    if (this.selectable !== null)\n      r = prefixed(this.selectable);\n    return r;\n  }\n  /**\n   * Get the activated item\n   * @returns {IdsListViewActivatedItem|null} The activated item\n   */\n  get activatedItem() {\n    if (!this.ds || this.selectable !== \"mixed\")\n      return null;\n    const singleArgs = (index) => index > -1 ? { index, data: this.ds[index] } : null;\n    return singleArgs(this.ds.findIndex((d) => d.itemActivated));\n  }\n  /**\n   * Get the selected item/s\n   * @returns {IdsListViewSelectedItem|Array<IdsListViewSelectedItem>|null} single item, or List of all selected items\n   */\n  get selected() {\n    if (!this.ds || !this.selectable)\n      return null;\n    const singleArgs = (index) => index > -1 ? { index, data: this.ds[index] } : null;\n    return this.selectable === \"single\" ? singleArgs(this.ds.findIndex((d) => d.itemSelected)) : this.ds.map((data, index) => ({ index, data })).filter((d) => d.data.itemSelected);\n  }\n  /**\n   * Handles the sortable property and reflects it on the DOM.\n   * @param {boolean|string} value The sortable parameter.\n   */\n  set sortable(value) {\n    if (/boolean|string/g.test(typeof value)) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SORTABLE, String(value));\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SORTABLE);\n    }\n  }\n  get sortable() {\n    return this.boolVal(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SORTABLE, LIST_VIEW_DEFAULTS.sortable);\n  }\n  /**\n   * Sets the items to be suppress deactivation for mixed selection only.\n   * @param {boolean|string} value The value.\n   */\n  set suppressDeactivation(value) {\n    if (/boolean|string/g.test(typeof value)) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SUPPRESS_DEACTIVATION, String(value));\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SUPPRESS_DEACTIVATION);\n    }\n  }\n  get suppressDeactivation() {\n    return this.boolVal(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SUPPRESS_DEACTIVATION, LIST_VIEW_DEFAULTS.suppressDeactivation);\n  }\n  /**\n   * Sets the items to be suppress deselection for single selection only.\n   * @param {boolean|string} value The value.\n   */\n  set suppressDeselection(value) {\n    if (/boolean|string/g.test(typeof value)) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SUPPRESS_DESELECTION, String(value));\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SUPPRESS_DESELECTION);\n    }\n  }\n  get suppressDeselection() {\n    return this.boolVal(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.SUPPRESS_DESELECTION, LIST_VIEW_DEFAULTS.suppressDeselection);\n  }\n  /**\n   * Checkboxes will not render if true, only apply to multiple selection.\n   * @param {boolean|string} value The value.\n   */\n  set hideCheckboxes(value) {\n    if (/boolean|string/g.test(typeof value)) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.HIDE_CHECKBOXES, String(value));\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.HIDE_CHECKBOXES);\n    }\n    this.#toggleCheckboxes();\n  }\n  get hideCheckboxes() {\n    return this.boolVal(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.HIDE_CHECKBOXES, LIST_VIEW_DEFAULTS.hideCheckboxes);\n  }\n  /**\n   * Set the aria label text\n   * @param {string} value The label text\n   */\n  set label(value) {\n    if (value) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.LABEL, value);\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.LABEL);\n    }\n    this.body?.setAttribute(\"aria-label\", this.label);\n  }\n  get label() {\n    return this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_1__.attributes.LABEL) || LIST_VIEW_DEFAULTS.label;\n  }\n  /**\n   * Set checkbox state in given listview item.\n   * @private\n   * @param {HTMLElement} item The listview item.\n   * @param {boolean} isChecked The value to be set.\n   * @returns {void}\n   */\n  #setCheckbox(item, isChecked = false) {\n    const cb = item?.querySelector(\".list-item-checkbox\");\n    if (cb)\n      cb.checked = isChecked;\n  }\n  /**\n   * Trigger the given event.\n   * @private\n   * @param {string} eventtName The event name to be trigger.\n   * @param {object} args Extra data.\n   * @returns {void}\n   */\n  #triggerEvent(eventtName, args = {}) {\n    this.triggerEvent(eventtName, this, { bubbles: true, detail: { elem: this, ...args } });\n  }\n  /**\n   * Set a list item to be activated, in current page and data.\n   * @param {number} index the zero based index.\n   * @returns {boolean} Is veto.\n   */\n  #activateItemInPage(index) {\n    if (this.data?.[index]?.disabled)\n      return true;\n    const dataIndex = this.dataIndex(index);\n    if (this.#activatedIndex !== -1) {\n      const activatedIndex = this.ds.findIndex((d) => d.itemActivated);\n      this.#isApply = true;\n      if (activatedIndex === dataIndex) {\n        if (!this.suppressDeactivation)\n          return true;\n        if (this.isInPage(activatedIndex)) {\n          return this.#deactivateItemInPage(this.pageIndex(activatedIndex));\n        }\n        return this.deactivateItem(activatedIndex);\n      }\n      if (this.isInPage(activatedIndex)) {\n        if (!this.#deactivateItemInPage(this.pageIndex(activatedIndex))) {\n          return false;\n        }\n      } else if (!this.deactivateItem(activatedIndex))\n        return false;\n    }\n    const item = this.#itemByIndex(index);\n    const args = () => ({ item, index, dataIndex, data: this.data[index] });\n    if (!this.triggerVetoableEvent(\"beforeitemactivated\", { ...args() })) {\n      return false;\n    }\n    item?.setAttribute(\"activated\", \"\");\n    this.#activatedIndex = dataIndex;\n    this.data[index].itemActivated = true;\n    this.#triggerEvent(\"itemactivated\", { ...args() });\n    this.focusLi(item);\n    return true;\n  }\n  /**\n   * Set a list item to be deactivated, in current page and data.\n   * @param {number} index the zero based index\n   * @returns {boolean} Is veto.\n   */\n  #deactivateItemInPage(index) {\n    if (this.data?.[index]?.disabled)\n      return true;\n    if (this.#activatedIndex === -1)\n      return true;\n    const dataIndex = this.dataIndex(index);\n    if (this.#isApply)\n      this.#isApply = false;\n    else {\n      const activatedIndex = this.ds.findIndex((d) => d.itemActivated);\n      if (activatedIndex === dataIndex && !this.suppressDeactivation)\n        return false;\n    }\n    const item = this.#itemByIndex(index);\n    const args = () => ({ item, index, dataIndex, data: this.data[index] });\n    if (!this.triggerVetoableEvent(\"beforeitemdeactivated\", { ...args() })) {\n      return false;\n    }\n    delete this.data[index].itemActivated;\n    item?.removeAttribute(\"activated\");\n    this.#activatedIndex = -1;\n    this.#triggerEvent(\"itemdeactivated\", { ...args() });\n    this.focusLi(item);\n    return true;\n  }\n  /**\n   * Set a list item to be activated, in dataset.\n   * @param {number} dataIndex the zero based dataIndex\n   * @returns {boolean} Is veto.\n   */\n  activateItem(dataIndex) {\n    if (this.ds?.[dataIndex]?.disabled || dataIndex === -1)\n      return true;\n    if (this.isInPage(dataIndex)) {\n      return this.#activateItemInPage(this.pageIndex(dataIndex));\n    }\n    if (this.#activatedIndex !== -1) {\n      const activatedIndex = this.ds.findIndex((d) => d.itemActivated);\n      this.#isApply = true;\n      if (activatedIndex === dataIndex) {\n        if (!this.suppressDeactivation)\n          return true;\n        if (this.isInPage(activatedIndex)) {\n          return this.#deactivateItemInPage(this.pageIndex(activatedIndex));\n        }\n        return this.deactivateItem(activatedIndex);\n      }\n      if (this.isInPage(activatedIndex)) {\n        if (!this.#deactivateItemInPage(this.pageIndex(activatedIndex))) {\n          return false;\n        }\n      } else if (!this.deactivateItem(activatedIndex))\n        return false;\n    }\n    const args = () => ({ dataIndex, data: this.ds[dataIndex] });\n    if (!this.triggerVetoableEvent(\"beforeitemactivated\", { ...args() })) {\n      return false;\n    }\n    this.#activatedIndex = dataIndex;\n    this.ds[dataIndex].itemActivated = true;\n    this.#triggerEvent(\"itemactivated\", { ...args() });\n    return true;\n  }\n  /**\n   * Set a list item to be deactivated, in dataset\n   * @param {number} dataIndex the zero based dataIndex\n   * @returns {boolean} False, if veto.\n   */\n  deactivateItem(dataIndex) {\n    if (this.ds?.[dataIndex]?.disabled)\n      return true;\n    if (this.#activatedIndex === -1)\n      return true;\n    if (this.isInPage(dataIndex)) {\n      return this.#deactivateItemInPage(this.pageIndex(dataIndex));\n    }\n    if (this.#isApply)\n      this.#isApply = false;\n    else {\n      const activatedIndex = this.ds.findIndex((d) => d.itemActivated);\n      if (activatedIndex === dataIndex && !this.suppressDeactivation)\n        return false;\n    }\n    const args = () => ({ dataIndex, data: this.ds[dataIndex] });\n    if (!this.triggerVetoableEvent(\"beforeitemdeactivated\", { ...args() })) {\n      return false;\n    }\n    if (this.ds[dataIndex]?.itemActivated) {\n      delete this.ds[dataIndex].itemActivated;\n    }\n    this.#activatedIndex = -1;\n    this.#triggerEvent(\"itemdeactivated\", { ...args() });\n    return true;\n  }\n  /**\n   * Set a list item to be selected, in current page and data.\n   * @private\n   * @param {number} index the zero based index.\n   * @returns {boolean} Is veto.\n   */\n  #selectInPage(index) {\n    if (this.data?.[index]?.disabled)\n      return true;\n    const dataIndex = this.dataIndex(index);\n    const selected = this.selected;\n    if (this.selectable === \"single\" && selected) {\n      const isSame = selected.index === dataIndex;\n      if (isSame && !this.suppressDeselection)\n        return true;\n      this.#isApply = true;\n      if (this.isInPage(selected.index)) {\n        if (!this.#deselectInPage(this.pageIndex(selected.index))) {\n          return false;\n        }\n      } else if (!this.deselect(selected.index))\n        return false;\n      if (isSame)\n        return true;\n    }\n    const item = this.#itemByIndex(index);\n    const cb = item?.querySelector(\".list-item-checkbox\");\n    const key = this.selectable === \"single\" ? \"selectedItem\" : \"selectedItems\";\n    const args = { item, index, dataIndex, data: this.data[index] };\n    this.#isTargetCheckbox = false;\n    if (!this.triggerVetoableEvent(\"beforeselected\", { ...args, [key]: this.selected })) {\n      this.#setCheckbox(item, false);\n      return false;\n    }\n    this.data[index].itemSelected = true;\n    if (cb)\n      cb.checked = true;\n    item?.setAttribute(\"selected\", \"\");\n    if (this.selectable === \"mixed\")\n      item?.setAttribute(\"hide-selected-color\", \"\");\n    this.#triggerEvent(\"selected\", { ...args, [key]: this.selected });\n    this.focusLi(item);\n    return true;\n  }\n  /**\n   * Set a list item to be deselected, in current page and data.\n   * @private\n   * @param {number} index the zero based index.\n   * @returns {boolean} Is veto.\n   */\n  #deselectInPage(index) {\n    if (this.data?.[index]?.disabled)\n      return true;\n    const selected = this.selected;\n    if (!selected || /^(multiple|mixed)$/g.test(String(this.selectable)) && !selected.length)\n      return true;\n    if (this.selectable === \"single\") {\n      if (this.#isApply)\n        this.#isApply = false;\n      else if (this.dataIndex(index) === selected.index && !this.suppressDeselection)\n        return false;\n    }\n    const item = this.#itemByIndex(index);\n    const dataIndex = this.dataIndex(index);\n    const cb = item?.querySelector(\".list-item-checkbox\");\n    const key = this.selectable === \"single\" ? \"selectedItem\" : \"selectedItems\";\n    const args = { item, index, dataIndex, data: this.data[index] };\n    this.#isTargetCheckbox = false;\n    if (!this.triggerVetoableEvent(\"beforedeselected\", { ...args, [key]: this.selected })) {\n      this.#setCheckbox(item, true);\n      return false;\n    }\n    delete this.data[index].itemSelected;\n    if (cb)\n      cb.checked = false;\n    item?.removeAttribute(\"selected\");\n    item?.removeAttribute(\"hide-selected-color\");\n    this.#triggerEvent(\"deselected\", { ...args, [key]: this.selected });\n    this.focusLi(item);\n    return true;\n  }\n  /**\n   * Set a list item to be selected, in dataset.\n   * @param {number} dataIndex the zero based dataIndex.\n   * @returns {boolean} Is veto.\n   */\n  select(dataIndex) {\n    if (this.ds?.[dataIndex]?.disabled)\n      return true;\n    if (this.isInPage(dataIndex)) {\n      return this.#selectInPage(this.pageIndex(dataIndex));\n    }\n    const selected = this.selected;\n    if (this.selectable === \"single\" && selected) {\n      const isSame = selected.index === dataIndex;\n      if (isSame && !this.suppressDeselection)\n        return true;\n      this.#isApply = true;\n      if (this.isInPage(selected.index)) {\n        if (!this.#deselectInPage(this.pageIndex(selected.index))) {\n          return false;\n        }\n      } else if (!this.deselect(selected.index))\n        return false;\n      if (isSame)\n        return true;\n    }\n    const key = this.selectable === \"single\" ? \"selectedItem\" : \"selectedItems\";\n    const args = { dataIndex, data: this.ds[dataIndex] };\n    if (!this.triggerVetoableEvent(\"beforeselected\", { ...args, [key]: this.selected })) {\n      return false;\n    }\n    this.ds[dataIndex].itemSelected = true;\n    this.#triggerEvent(\"selected\", { ...args, [key]: this.selected });\n    return true;\n  }\n  /**\n   * Set a list item to be deselected, in dataset.\n   * @param {number} dataIndex the zero based dataIndex.\n   * @returns {boolean} False, if veto.\n   */\n  deselect(dataIndex) {\n    if (this.ds?.[dataIndex]?.disabled)\n      return true;\n    const selected = this.selected;\n    if (!selected || /^(multiple|mixed)$/g.test(String(this.selectable)) && !selected.length)\n      return true;\n    if (this.isInPage(dataIndex)) {\n      return this.#deselectInPage(this.pageIndex(dataIndex));\n    }\n    if (this.selectable === \"single\") {\n      if (this.#isApply)\n        this.#isApply = false;\n      else if (dataIndex === selected.index && !this.suppressDeselection)\n        return false;\n    }\n    const key = this.selectable === \"single\" ? \"selectedItem\" : \"selectedItems\";\n    const args = { dataIndex, data: this.ds[dataIndex] };\n    if (!this.triggerVetoableEvent(\"beforedeselected\", { ...args, [key]: this.selected })) {\n      return false;\n    }\n    delete this.ds[dataIndex].itemSelected;\n    this.#triggerEvent(\"deselected\", { ...args, [key]: this.selected });\n    return true;\n  }\n  /**\n   * Set a all list items to be selected.\n   * @returns {void}\n   */\n  selectAll() {\n    this.toggleAll();\n  }\n  /**\n   * Set a all list items to be deselected.\n   * @returns {void}\n   */\n  deselectAll() {\n    this.toggleAll(true);\n  }\n  /**\n   * Set all list items to be selected or deselected.\n   * @param {boolean} isDeselect If true will deselect all items, otherwise select all.\n   * @returns {void}\n   */\n  toggleAll(isDeselect) {\n    const action = isDeselect ? \"deselect\" : \"select\";\n    if (this.selectable) {\n      const selected = this.selected;\n      let key;\n      let len = 0;\n      if (this.selectable === \"single\") {\n        key = \"selectedItem\";\n        len = selected ? 1 : 0;\n        if (isDeselect && len)\n          this[action](selected.index);\n        if (!isDeselect && !len)\n          this[action](0);\n      }\n      if (/multiple|mixed/g.test(this.selectable)) {\n        key = \"selectedItems\";\n        len = selected.length;\n        this.ds?.forEach((d, i) => this[action](i));\n      }\n      if (this.selected?.length !== len) {\n        this.#triggerEvent(\"selectionchanged\", { [key]: this.selected });\n      }\n    }\n  }\n  /**\n   * Get data for list item\n   * @param {Element} item list item\n   * @returns {any} data object\n   */\n  getListItemData(item) {\n    const dataIdx = item?.getAttribute(\"index\");\n    return dataIdx ? this.data[dataIdx] : {};\n  }\n  /**\n   * Return #focusedLiIndex\n   * @returns {any} focusedLiIndex\n   */\n  getFocusedLiIndex() {\n    return this.#focusedLiIndex;\n  }\n  /**\n   * Return all selected Li indexes\n   * @returns {any} List of selected li index\n   */\n  getAllSelectedLiIndex() {\n    const listOfIndex = [];\n    this.container?.querySelectorAll(\"ids-swappable-item[selected]\").forEach((item) => {\n      listOfIndex.push(+(item.getAttribute(\"index\") ?? -1));\n    });\n    return listOfIndex;\n  }\n};\nIdsListView = __decorateClass([\n  (0,_core_ids_decorators__WEBPACK_IMPORTED_MODULE_0__.customElement)(\"ids-list-view\"),\n  (0,_core_ids_decorators__WEBPACK_IMPORTED_MODULE_0__.scss)(_ids_list_view_scss__WEBPACK_IMPORTED_MODULE_16__[\"default\"])\n], IdsListView);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9pZHMtbGlzdC12aWV3L2lkcy1saXN0LXZpZXcudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBb0M7QUFDVDtBQUtwQjtBQUVtQjtBQUNuQjtBQUNBO0FBQ29CO0FBQ0U7QUFDSDtBQUNDO0FBQ0o7QUFDRztBQUNTO0FBRTVCO0FBQ0E7QUFDQTtBQUVZO0FBS25CLE1BQU0sT0FBTyxxRkFBYztBQUFkLEVBQ1gsbUZBQWE7QUFBYixJQUNFLG9GQUFhO0FBQWIsTUFDRSx3RUFBc0I7QUFBdEIsUUFDRSx5RkFBZ0I7QUFBaEIsVUFDRSxxRkFBYztBQUFkLFlBQ0UsMERBQVU7QUFBVixVQUNGO0FBQUEsUUFDRjtBQUFBLE1BQ0Y7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUNGO0FBMEJBLE1BQU0scUJBQXFCO0FBQUEsRUFDekIsZ0JBQWdCO0FBQUE7QUFBQSxFQUNoQixRQUFRO0FBQUEsRUFDUixPQUFPO0FBQUEsRUFDUCxtQkFBbUIsQ0FBQyxVQUFVLFlBQVksT0FBTztBQUFBLEVBQ2pELFVBQVU7QUFBQSxFQUNWLHNCQUFzQjtBQUFBO0FBQUEsRUFDdEIscUJBQXFCO0FBQUE7QUFBQSxFQUNyQixlQUFlO0FBQ2pCO0FBYUEsSUFBcUIsY0FBckIsY0FBeUMsS0FBSztBQUFBLEVBQzVDLGNBQWM7QUFDWixVQUFNO0FBQUEsRUFDUjtBQUFBO0FBQUEsRUFHQSxjQUFjO0FBQUE7QUFBQSxFQUdkLGtCQUF1QjtBQUFBO0FBQUEsRUFHdkIsa0JBQWtCO0FBQUE7QUFBQSxFQUdsQixvQkFBb0I7QUFBQTtBQUFBLEVBR3BCLFdBQVc7QUFBQTtBQUFBLEVBR1gsUUFBUTtBQUFBO0FBQUEsRUFHUixhQUFhLElBQUksNkRBQWEsQ0FBQztBQUFBLEVBRS9CLGtCQUFrQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS2xCLHFCQUFxQjtBQUFBLElBQ25CO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FB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QUFBQSxNQUN6QztBQUdBLFVBQUksa0JBQWtCLEtBQUssS0FBSyxVQUFVLEdBQUc7QUFDM0MsY0FBTTtBQUNOLGNBQU0sU0FBUztBQUNmLGFBQUssSUFBSSxRQUFRLENBQUMsR0FBUSxNQUFjLEtBQUssTUFBTSxFQUFFLENBQUMsQ0FBQztBQUFBLE1BQ3pEO0FBRUEsVUFBSyxLQUFLLFVBQWtCLFdBQVcsS0FBSztBQUMxQyxhQUFLLGNBQWMsb0JBQW9CLEVBQUUsQ0FBQyxHQUFHLEdBQUcsS0FBSyxTQUFTLENBQUM7QUFBQSxNQUNqRTtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0EsZ0JBQWdCLE1BQXVCO0FBQ3JDLFVBQU0sVUFBVSxNQUFNLGFBQWEsT0FBTztBQUMxQyxXQUFPLFVBQVUsS0FBSyxLQUFLLE9BQU8sSUFBSSxDQUFDO0FBQUEsRUFDekM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsb0JBQXlCO0FBQ3ZCLFdBQU8sS0FBSztBQUFBLEVBQ2Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsd0JBQWtDO0FBQ2hDLFVBQU0sY0FBd0IsQ0FBQztBQUMvQixTQUFLLFdBQVcsaUJBQW1DLDhCQUE4QixFQUM5RSxRQUFRLENBQUMsU0FBUztBQUNqQixrQkFBWSxLQUFLLEVBQUUsS0FBSyxhQUFhLE9BQU8sS0FBSyxHQUFHO0FBQUEsSUFDdEQsQ0FBQztBQUVILFdBQU87QUFBQSxFQUNUO0FBQ0Y7QUE1NUNxQixjQUFyQjtBQUFBLEVBRkMsbUVBQWEsQ0FBQyxlQUFlO0FBQUEsRUFDN0IsMERBQUksQ0FBQyw0REFBTTtBQUFBLEdBQ1MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pZHMtZW50ZXJwcmlzZS13Yy8uL3NyYy9jb21wb25lbnRzL2lkcy1saXN0LXZpZXcvaWRzLWxpc3Qtdmlldy50cz80MWI1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGN1c3RvbUVsZW1lbnQsIHNjc3MgfSBmcm9tICcuLi8uLi9jb3JlL2lkcy1kZWNvcmF0b3JzJztcbmltcG9ydCB7IGF0dHJpYnV0ZXMgfSBmcm9tICcuLi8uLi9jb3JlL2lkcy1hdHRyaWJ1dGVzJztcbmltcG9ydCB7XG4gIGluamVjdFRlbXBsYXRlLFxuICBzdHJpbmdUb0Jvb2wsXG4gIHN0cmluZ1RvTnVtYmVyXG59IGZyb20gJy4uLy4uL3V0aWxzL2lkcy1zdHJpbmctdXRpbHMvaWRzLXN0cmluZy11dGlscyc7XG5cbmltcG9ydCBJZHNEYXRhU291cmNlIGZyb20gJy4uLy4uL2NvcmUvaWRzLWRhdGEtc291cmNlJztcbmltcG9ydCAnLi4vaWRzLXZpcnR1YWwtc2Nyb2xsL2lkcy12aXJ0dWFsLXNjcm9sbCc7XG5pbXBvcnQgJy4uL2lkcy1jaGVja2JveC9pZHMtY2hlY2tib3gnO1xuaW1wb3J0IElkc0V2ZW50c01peGluIGZyb20gJy4uLy4uL21peGlucy9pZHMtZXZlbnRzLW1peGluL2lkcy1ldmVudHMtbWl4aW4nO1xuaW1wb3J0IElkc0tleWJvYXJkTWl4aW4gZnJvbSAnLi4vLi4vbWl4aW5zL2lkcy1rZXlib2FyZC1taXhpbi9pZHMta2V5Ym9hcmQtbWl4aW4nO1xuaW1wb3J0IElkc1RoZW1lTWl4aW4gZnJvbSAnLi4vLi4vbWl4aW5zL2lkcy10aGVtZS1taXhpbi9pZHMtdGhlbWUtbWl4aW4nO1xuaW1wb3J0IElkc0xvY2FsZU1peGluIGZyb20gJy4uLy4uL21peGlucy9pZHMtbG9jYWxlLW1peGluL2lkcy1sb2NhbGUtbWl4aW4nO1xuaW1wb3J0IElkc0VsZW1lbnQgZnJvbSAnLi4vLi4vY29yZS9pZHMtZWxlbWVudCc7XG5pbXBvcnQgSWRzUGFnZXJNaXhpbiBmcm9tICcuLi8uLi9taXhpbnMvaWRzLXBhZ2VyLW1peGluL2lkcy1wYWdlci1taXhpbic7XG5pbXBvcnQgSWRzTGlzdFZpZXdTZWFyY2hNaXhpbiBmcm9tICcuL2lkcy1saXN0LXZpZXctc2VhcmNoLW1peGluJztcblxuaW1wb3J0ICcuLi9pZHMtc3dhcHBhYmxlL2lkcy1zd2FwcGFibGUnO1xuaW1wb3J0ICcuLi9pZHMtc3dhcHBhYmxlL2lkcy1zd2FwcGFibGUtaXRlbSc7XG5pbXBvcnQgJy4uL2lkcy1zZWFyY2gtZmllbGQvaWRzLXNlYXJjaC1maWVsZCc7XG5cbmltcG9ydCBzdHlsZXMgZnJvbSAnLi9pZHMtbGlzdC12aWV3LnNjc3MnO1xuaW1wb3J0IHR5cGUgSWRzU3dhcHBhYmxlSXRlbSBmcm9tICcuLi9pZHMtc3dhcHBhYmxlL2lkcy1zd2FwcGFibGUtaXRlbSc7XG5pbXBvcnQgdHlwZSBJZHNWaXJ0dWFsU2Nyb2xsIGZyb20gJy4uL2lkcy12aXJ0dWFsLXNjcm9sbC9pZHMtdmlydHVhbC1zY3JvbGwnO1xuaW1wb3J0IHR5cGUgSWRzVGV4dCBmcm9tICcuLi9pZHMtdGV4dC9pZHMtdGV4dCc7XG5cbmNvbnN0IEJhc2UgPSBJZHNMb2NhbGVNaXhpbihcbiAgSWRzVGhlbWVNaXhpbihcbiAgICBJZHNQYWdlck1peGluKFxuICAgICAgSWRzTGlzdFZpZXdTZWFyY2hNaXhpbihcbiAgICAgICAgSWRzS2V5Ym9hcmRNaXhpbihcbiAgICAgICAgICBJZHNFdmVudHNNaXhpbihcbiAgICAgICAgICAgIElkc0VsZW1lbnRcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIClcbik7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSWRzTGlzdFZpZXdBY3RpdmF0ZWRJdGVtIHtcbiAgLyoqIFRoZSBpbmRleCB2YWx1ZSBpbiBjdXJyZW50IGRhdGFzZXQgKi9cbiAgaW5kZXg6IG51bWJlcjtcbiAgLyoqIFRoZSBkYXRhIG5vZGUgaW4gY3VycmVudCBkYXRhc2V0ICovXG4gIGRhdGE6IGFueTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJZHNMaXN0Vmlld1NlbGVjdGVkSXRlbSB7XG4gIC8qKiBUaGUgaW5kZXggdmFsdWUgaW4gY3VycmVudCBkYXRhc2V0ICovXG4gIGluZGV4OiBudW1iZXI7XG4gIC8qKiBUaGUgZGF0YSBub2RlIGluIGN1cnJlbnQgZGF0YXNldCAqL1xuICBkYXRhOiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSWRzTGlzdFZpZXdJdGVtSW5mbyB7XG4gIC8qKiBUaGUgRE9NIGVsZW1lbnQsIGlmIGF2YWlsYWJsZSAqL1xuICBpdGVtPzogSFRNTEVsZW1lbnQ7XG4gIC8qKiBUaGUgaW5kZXggdmFsdWUgaW4gY3VycmVudCBkYXRhc2V0ICovXG4gIGluZGV4OiBudW1iZXI7XG4gIC8qKiBUaGUgZGF0YSBub2RlIGluIGN1cnJlbnQgZGF0YXNldCAqL1xuICBkYXRhOiBhbnk7XG59XG5cbi8vIERlZmF1bHQgc2V0dGluZ3NcbmNvbnN0IExJU1RfVklFV19ERUZBVUxUUyA9IHtcbiAgaGlkZUNoZWNrYm94ZXM6IGZhbHNlLCAvLyBPbmx5IGFwcGx5IHRvIHNlbGVjdGFibGUgbXVsdGlwbGVcbiAgaGVpZ2h0OiAnMTAwJScsXG4gIGxhYmVsOiAnSWRzIGxpc3QgdmlldycsXG4gIHNlbGVjdGFibGVPcHRpb25zOiBbJ3NpbmdsZScsICdtdWx0aXBsZScsICdtaXhlZCddLFxuICBzb3J0YWJsZTogZmFsc2UsXG4gIHN1cHByZXNzRGVhY3RpdmF0aW9uOiBmYWxzZSwgLy8gVXNlIHdpdGggTWl4ZWQgc2VsZWN0aW9uIG9ubHlcbiAgc3VwcHJlc3NEZXNlbGVjdGlvbjogdHJ1ZSwgLy8gVXNlIHdpdGggU2luZ2xlIHNlbGVjdGlvbiBvbmx5XG4gIHZpcnR1YWxTY3JvbGw6IGZhbHNlXG59O1xuXG4vKipcbiAqIElEUyBMaXN0IFZpZXcgQ29tcG9uZW50XG4gKiBAdHlwZSB7SWRzTGlzdFZpZXd9XG4gKiBAaW5oZXJpdHMgSWRzRWxlbWVudFxuICogQG1peGVzIElkc1RoZW1lTWl4aW5cbiAqIEBtaXhlcyBJZHNLZXlib2FyZE1peGluXG4gKiBAbWl4ZXMgSWRzRXZlbnRzTWl4aW5cbiAqIEBwYXJ0IGxpc3QtaXRlbSAtIHRoZSBsaSBsaXN0IGVsZW1lbnRcbiAqL1xuQGN1c3RvbUVsZW1lbnQoJ2lkcy1saXN0LXZpZXcnKVxuQHNjc3Moc3R5bGVzKVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSWRzTGlzdFZpZXcgZXh0ZW5kcyBCYXNlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIC8qKiBJcyB0aGUgY29tcG9uZW50IGluaXRpYWxpemVkICovXG4gIGluaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgLyoqIFRoZSBjdXJyZW50bHkgZm9jdXNlZCBsaXN0IGl0ZW0gKi9cbiAgI2ZvY3VzZWRMaUluZGV4OiBhbnkgPSAwO1xuXG4gIC8qKiBUaGUgY3VycmVudGx5IGFjdGl2YXRlZCBsaXN0IGl0ZW0gKi9cbiAgI2FjdGl2YXRlZEluZGV4ID0gLTE7XG5cbiAgLyoqIFRoZSBjdXJyZW50bHkgdGFyZ2V0IHdoaWxlIHNlbGVjdGluZyAqL1xuICAjaXNUYXJnZXRDaGVja2JveCA9IGZhbHNlO1xuXG4gIC8qKiBUaGUgY3VycmVudGx5IGFwcGx5IHN0YXRlIHdoaWxlIHNpbmdsZSBzZWxlY3RpbmcgKi9cbiAgI2lzQXBwbHkgPSBmYWxzZTtcblxuICAvKiogVGhlIGN1cnJlbnRseSBsaXN0IHNpemUgKi9cbiAgI3NpemUgPSAwO1xuXG4gIC8qKiBUaGUgZGF0YXNvdXJjZSBjb250YWluZXIgKi9cbiAgZGF0YXNvdXJjZSA9IG5ldyBJZHNEYXRhU291cmNlKCk7XG5cbiAgZGVmYXVsdFRlbXBsYXRlID0gJyc7XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtBcnJheTxzdHJpbmc+fSBEcmF3ZXIgdmV0b2FibGUgZXZlbnRzXG4gICAqL1xuICB2ZXRvYWJsZUV2ZW50VHlwZXMgPSBbXG4gICAgJ2JlZm9yZWl0ZW1hY3RpdmF0ZWQnLFxuICAgICdiZWZvcmVpdGVtZGVhY3RpdmF0ZWQnLFxuICAgICdiZWZvcmVzZWxlY3RlZCcsXG4gICAgJ2JlZm9yZWRlc2VsZWN0ZWQnXG4gIF07XG5cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLmRlZmF1bHRUZW1wbGF0ZSA9IGAke3RoaXMucXVlcnlTZWxlY3RvcigndGVtcGxhdGUnKT8uaW5uZXJIVE1MIHx8ICcnfWA7XG4gICAgdGhpcy5kYXRhS2V5cyA9IHRoaXMuI2V4dHJhY3RUZW1wbGF0ZUxpdGVyYWxzRnJvbUhUTUwodGhpcy5kZWZhdWx0VGVtcGxhdGUpO1xuICAgIHRoaXMuI2F0dGFjaEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBhdHRyaWJ1dGVzIHdlIGhhbmRsZSBhcyBnZXR0ZXJzL3NldHRlcnNcbiAgICogQHJldHVybnMge0FycmF5fSBUaGUgYXR0cmlidXRlcyBpbiBhbiBhcnJheVxuICAgKi9cbiAgc3RhdGljIGdldCBhdHRyaWJ1dGVzKCkge1xuICAgIHJldHVybiBbXG4gICAgICAuLi5zdXBlci5hdHRyaWJ1dGVzLFxuICAgICAgYXR0cmlidXRlcy5MT0FERUQsXG4gICAgICBhdHRyaWJ1dGVzLkhFSUdIVCxcbiAgICAgIGF0dHJpYnV0ZXMuSElERV9DSEVDS0JPWEVTLFxuICAgICAgYXR0cmlidXRlcy5JVEVNX0hFSUdIVCxcbiAgICAgIGF0dHJpYnV0ZXMuTEFCRUwsXG4gICAgICBhdHRyaWJ1dGVzLlNFTEVDVEFCTEUsXG4gICAgICBhdHRyaWJ1dGVzLlNPUlRBQkxFLFxuICAgICAgYXR0cmlidXRlcy5TVVBQUkVTU19ERUFDVElWQVRJT04sXG4gICAgICBhdHRyaWJ1dGVzLlNVUFBSRVNTX0RFU0VMRUNUSU9OLFxuICAgICAgYXR0cmlidXRlcy5WSVJUVUFMX1NDUk9MTFxuICAgIF07XG4gIH1cblxuICAjZXh0cmFjdFRlbXBsYXRlTGl0ZXJhbHNGcm9tSFRNTChzdHJpbmc6IHN0cmluZykge1xuICAgIGNvbnN0IGFyciA9IHN0cmluZy5zcGxpdCgnJHsnKTtcbiAgICBhcnIuc2hpZnQoKTtcbiAgICBjb25zdCB0b2tlbnMgPSBhcnIubWFwKCh4KSA9PiB4LnNwbGl0KCd9JylbMF0pO1xuICAgIHJldHVybiB0b2tlbnM7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGxpc3Qgb2YgYWxsIGVsZW1lbnRzXG4gICAqIEByZXR1cm5zIHtOb2RlTGlzdE9mPEhUTUxFbGVtZW50Pn0gTGlzdCBvZiBhbGwgbGlzdCBpdGVtIGVsZW1lbnRzXG4gICAqL1xuICBnZXRBbGxMaSgpOiBOb2RlTGlzdE9mPEhUTUxFbGVtZW50PiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyPy5xdWVyeVNlbGVjdG9yQWxsPEhUTUxFbGVtZW50PignZGl2W3BhcnQ9XCJsaXN0LWl0ZW1cIl0nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYWxsIHN3YXBwYWJsZSBpdGVtc1xuICAgKiBAcmV0dXJucyB7Tm9kZUxpc3RPZjxJZHNTd2FwcGFibGVJdGVtPn0gTGlzdCBvZiBhbGwgc3dhcHBhYmxlIGl0ZW1zXG4gICAqL1xuICBnZXRBbGxTd2FwcGFibGVJdGVtcygpOiBOb2RlTGlzdE9mPElkc1N3YXBwYWJsZUl0ZW0+IHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI/LnF1ZXJ5U2VsZWN0b3JBbGw8SWRzU3dhcHBhYmxlSXRlbT4oJ2lkcy1zd2FwcGFibGUtaXRlbScpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCB0aGUgc29ydGFibGUgY2xhc3MgdG8gdGhlIGxpc3QgaXRlbXNcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICAjYWRkU29ydGFibGVTdHlsZXMoKTogdm9pZCB7XG4gICAgdGhpcy5nZXRBbGxMaSgpPy5mb3JFYWNoKChsaTogSFRNTEVsZW1lbnQpID0+IHtcbiAgICAgIGxpLmNsYXNzTGlzdC5hZGQoJ3NvcnRhYmxlJyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBpdGVtIGluZm8gZm9yIGdpdmVuIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsIFRoZSBlbGVtZW50LlxuICAgKiBAcmV0dXJucyB7SWRzTGlzdFZpZXdJdGVtSW5mb3xudWxsfSBJdGVtIGluZm8sIG9yIG51bGwgaWYgaXRlbSBub3QgZm91bmQuXG4gICAqL1xuICAjaXRlbUluZm8oZWw6IGFueSk6IElkc0xpc3RWaWV3SXRlbUluZm8gfCBudWxsIHtcbiAgICBjb25zdCBpdGVtID0gZWw/LmdldEF0dHJpYnV0ZSgncm9sZScpID09PSAnb3B0aW9uJ1xuICAgICAgPyBlbCA6IGVsPy5jbG9zZXN0KCdbcm9sZT1cIm9wdGlvblwiXScpO1xuICAgIGNvbnN0IGluZGV4ID0gc3RyaW5nVG9OdW1iZXIoaXRlbT8uZ2V0QXR0cmlidXRlKCdpbmRleCcpKTtcbiAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGluZGV4KSA/IG51bGwgOiB7IGl0ZW0sIGluZGV4LCBkYXRhOiB0aGlzLmRhdGFbaW5kZXhdIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBsaXN0IGl0ZW0gRE9NIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgdmFsdWUgb2YgZGF0YSBpbmRleC5cbiAgICogQHJldHVybnMge0hUTUxFbGVtZW50fG51bGx9IFRoZSBET00gZWxlbWVudCwgb3IgbnVsbCBpZiBpdGVtIG5vdCBmb3VuZC5cbiAgICovXG4gICNpdGVtQnlJbmRleChpbmRleDogbnVtYmVyKTogSFRNTEVsZW1lbnQgfCBudWxsIHtcbiAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGluZGV4KSB8fCAhdGhpcy5jb250YWluZXIgPyBudWxsXG4gICAgICA6IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYGRpdltwYXJ0PVwibGlzdC1pdGVtXCJdW2luZGV4PVwiJHtpbmRleH1cIl1gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgZGF0YSBpbmRleCBmb3IgZ2l2ZW4gcGFnZSBpbmRleC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IFRoZSBwYWdlIGluZGV4IHZhbHVlLlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfG51bGx9IFRoZSBkYXRhIGluZGV4LlxuICAgKi9cbiAgZGF0YUluZGV4KGluZGV4OiBudW1iZXIpOiBudW1iZXIgfCBudWxsIHtcbiAgICBjb25zdCBpZHggPSBzdHJpbmdUb051bWJlcihpbmRleCk7XG4gICAgaWYgKE51bWJlci5pc05hTihpZHgpKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gKGlkeCA+PSAwICYmIGlkeCA8IHRoaXMuI3NpemUpXG4gICAgICA/IGlkeCArICgodGhpcy5wYWdlTnVtYmVyIC0gMSkgKiB0aGlzLiNzaXplKSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHBhZ2UgaW5kZXggZm9yIGdpdmVuIGRhdGEgaW5kZXguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkYXRhSW5kZXggVGhlIGRhdGEgaW5kZXggdmFsdWUuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ8bnVsbH0gVGhlIHBhZ2EgaW5kZXguXG4gICAqL1xuICBwYWdlSW5kZXgoZGF0YUluZGV4OiBudW1iZXIpOiBudW1iZXIgfCBudWxsIHtcbiAgICBsZXQgaWR4ID0gc3RyaW5nVG9OdW1iZXIoZGF0YUluZGV4KTtcbiAgICBpZiAoTnVtYmVyLmlzTmFOKGlkeCkpIHJldHVybiBudWxsO1xuICAgIGlkeCAtPSAodGhpcy5wYWdlTnVtYmVyIC0gMSkgKiB0aGlzLiNzaXplO1xuICAgIHJldHVybiAoaWR4ID49IDAgJiYgaWR4IDwgdGhpcy4jc2l6ZSkgPyBpZHggOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGdpdmVuIGRhdGEgaW5kZXggaW4gY3VycmVudCBwYWdlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZGF0YUluZGV4IFRoZSBkYXRhIGluZGV4IHZhbHVlLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSwgaWYgZGF0YSBpbmRleCBpbiBjdXJyZW50IHBhZ2VcbiAgICovXG4gIGlzSW5QYWdlKGRhdGFJbmRleDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgY29uc3QgaWR4ID0gc3RyaW5nVG9OdW1iZXIoZGF0YUluZGV4KTtcbiAgICBpZiAoTnVtYmVyLmlzTmFOKGlkeCkpIHJldHVybiBmYWxzZTtcblxuICAgIGxldCBlbmQgPSB0aGlzLnBhZ2VOdW1iZXIgKiB0aGlzLiNzaXplO1xuICAgIGxldCBzdGFydCA9IGVuZCAtIHRoaXMuI3NpemU7XG5cbiAgICBpZiAodGhpcy52aXJ0dWFsU2Nyb2xsKSB7XG4gICAgICBlbmQgPSB0aGlzLnZpcnR1YWxTY3JvbGxDb250YWluZXI/Lmxhc3RFbmQgYXMgbnVtYmVyO1xuICAgICAgc3RhcnQgPSB0aGlzLnZpcnR1YWxTY3JvbGxDb250YWluZXI/Lmxhc3RTdGFydCBhcyBudW1iZXI7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGFJbmRleCA+PSBzdGFydCAmJiBkYXRhSW5kZXggPCBlbmQ7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIG9uIGNsaWNrXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7YW55fSBlIFRoZSBldmVudC5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICAjaGFuZGxlT25DbGljayhlOiBhbnkpOiB2b2lkIHtcbiAgICBjb25zdCBpdGVtSW5mbyA9IHRoaXMuI2l0ZW1JbmZvKGUudGFyZ2V0KTtcbiAgICBpZiAoaXRlbUluZm8pIHtcbiAgICAgIHRoaXMuI2lzVGFyZ2V0Q2hlY2tib3ggPSBlLnRhcmdldD8uY2xhc3NMaXN0LmNvbnRhaW5zKCdsaXN0LWl0ZW0tY2hlY2tib3gnKTtcbiAgICAgIGlmICh0aGlzLiNpc1RhcmdldENoZWNrYm94KSBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLiNzZXRTZWxlY3Rpb24oaXRlbUluZm8pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgb24ga2V5ZG93blxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0tleWJvYXJkRXZlbnR9IGUgVGhlIGV2ZW50LlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gICNoYW5kbGVPbktleWRvd24oZTogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgIHN3aXRjaCAoZS5jb2RlKSB7XG4gICAgICBjYXNlICdBcnJvd1VwJzpcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLmZvY3VzTGkodGhpcy5nZXRQcmV2aW91c0xpKHRoaXMuZ2V0Rm9jdXNlZExpKCkpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdBcnJvd0Rvd24nOlxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuZm9jdXNMaSh0aGlzLmdldE5leHRMaSh0aGlzLmdldEZvY3VzZWRMaSgpKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnU3BhY2UnOlxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBvbiBrZXl1cFxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0tleWJvYXJkRXZlbnR9IGUgVGhlIGV2ZW50LlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gICNoYW5kbGVPbktleXVwKGU6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoL14oU3BhY2V8RW50ZXIpJC9nLnRlc3QoZS5jb2RlKSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGNvbnN0IGZvY3VzZWRMaSA9IHRoaXMuZ2V0Rm9jdXNlZExpKCk7XG4gICAgICAvLyBNaXhlZCBzZWxlY3RhYmxlLCBzaG91bGQgZG8gc2VsZWN0aW9uIGluc3RlYWQgb2YgYWN0aXZhdGlvbiBpZiB1c2Uga2V5Ym9hcmRcbiAgICAgIGlmICh0aGlzLnNlbGVjdGFibGUgPT09ICdtaXhlZCcpIHtcbiAgICAgICAgY29uc3QgY2I6IGFueSA9IGZvY3VzZWRMaT8ucXVlcnlTZWxlY3RvcignLmxpc3QtaXRlbS1jaGVja2JveCcpO1xuICAgICAgICBpZiAoY2IpIGNiLmNoZWNrZWQgPSAhY2IuY2hlY2tlZDtcbiAgICAgICAgdGhpcy4jaXNUYXJnZXRDaGVja2JveCA9IHRydWU7XG4gICAgICB9XG4gICAgICB0aGlzLiNzZXRTZWxlY3Rpb24odGhpcy4jaXRlbUluZm8oZm9jdXNlZExpKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBvbiBhZnRlciB2aXJ0dWFsIHNjcm9sbFxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0N1c3RvbUV2ZW50fSBlIFRoZSBldmVudC5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICAjaGFuZGxlT25BZnRlclZpcnR1YWxTY3JvbGwoZTogQ3VzdG9tRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB7IHN0YXJ0SW5kZXgsIGVuZEluZGV4IH0gPSBlLmRldGFpbCB8fCB7fTtcbiAgICB0aGlzLiNhZGp1c3RWaXJ0dWFsU2Nyb2xsSW5kZXhlcyhzdGFydEluZGV4KTtcbiAgICBmb3IgKGxldCBpID0gc3RhcnRJbmRleDsgaSA8IGVuZEluZGV4OyBpKyspIHtcbiAgICAgIGlmICh0aGlzLmRhdGE/LltpXT8uaXRlbVNlbGVjdGVkKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLiNpdGVtQnlJbmRleChpKTtcbiAgICAgICAgY29uc3QgY2I6IGFueSA9IGl0ZW0/LnF1ZXJ5U2VsZWN0b3IoJy5saXN0LWl0ZW0tY2hlY2tib3gnKTtcbiAgICAgICAgaWYgKGNiKSBjYi5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgaXRlbT8uc2V0QXR0cmlidXRlKCdzZWxlY3RlZCcsICcnKTtcbiAgICAgICAgaXRlbT8uc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgJ3RydWUnKTtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0YWJsZSA9PT0gJ21peGVkJykgaXRlbT8uc2V0QXR0cmlidXRlKCdoaWRlLXNlbGVjdGVkLWNvbG9yJywgJycpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZGF0YT8uW2ldPy5pdGVtQWN0aXZhdGVkKSB7XG4gICAgICAgIHRoaXMuI2l0ZW1CeUluZGV4KGkpPy5zZXRBdHRyaWJ1dGUoJ2FjdGl2YXRlZCcsICcnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAjYXR0YWNoRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8gRmlyZSBjbGlja1xuICAgIHRoaXMub2ZmRXZlbnQoJ2NsaWNrLmxpc3R2aWV3JywgdGhpcy5jb250YWluZXIpO1xuICAgIHRoaXMub25FdmVudCgnY2xpY2subGlzdHZpZXcnLCB0aGlzLmNvbnRhaW5lciwgKGU6IGFueSkgPT4ge1xuICAgICAgY29uc3QgYXJncyA9IHRoaXMuI2l0ZW1JbmZvKGUudGFyZ2V0KTtcbiAgICAgIGlmIChhcmdzKSB0aGlzLiN0cmlnZ2VyRXZlbnQoJ2NsaWNrJywgeyAuLi5hcmdzLCBvcmlnaW5hbEV2ZW50OiBlIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gRmlyZSBkYmxjbGlja1xuICAgIHRoaXMub2ZmRXZlbnQoJ2RibGNsaWNrLmxpc3R2aWV3JywgdGhpcy5jb250YWluZXIpO1xuICAgIHRoaXMub25FdmVudCgnZGJsY2xpY2subGlzdHZpZXcnLCB0aGlzLmNvbnRhaW5lciwgKGU6IGFueSkgPT4ge1xuICAgICAgY29uc3QgaXRlbUluZm8gPSB0aGlzLiNpdGVtSW5mbyhlLnRhcmdldCk7XG4gICAgICBpZiAoaXRlbUluZm8pIHRoaXMuI3RyaWdnZXJFdmVudCgnZGJsY2xpY2snLCB7IC4uLml0ZW1JbmZvLCBvcmlnaW5hbEV2ZW50OiBlIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gYXR0YWNoaW5nIGJvdGggZXZlbnQgbGlzdGVuZXJzIGNhdXNlcyBmb2N1cyBpc3N1ZXMsIHNvIGRvIGl0IGNvbmRpdGlvbmFsbHkgYmFzZWQgb24gdGhlIHNvcnRhYmxlIHByb3BcbiAgICBpZiAodGhpcy5zb3J0YWJsZSkge1xuICAgICAgdGhpcy4jYWRkU29ydGFibGVTdHlsZXMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2V0IHNlbGVjdGlvbi9hY3RpdmF0aW9uIGJ5IGNraWNrXG4gICAgICB0aGlzLm9mZkV2ZW50KCdjbGljay5saXN0dmlldy1zZWxlY3Rpb24nLCB0aGlzLmNvbnRhaW5lcik7XG4gICAgICB0aGlzLm9uRXZlbnQoJ2NsaWNrLmxpc3R2aWV3LXNlbGVjdGlvbicsIHRoaXMuY29udGFpbmVyLCAoZTogYW55KSA9PiB0aGlzLiNoYW5kbGVPbkNsaWNrKGUpKTtcblxuICAgICAgdGhpcy5vZmZFdmVudCgna2V5ZG93bi5saXN0dmlldy1zZWxlY3Rpb24nLCB0aGlzLmNvbnRhaW5lcik7XG4gICAgICB0aGlzLm9uRXZlbnQoJ2tleWRvd24ubGlzdHZpZXctc2VsZWN0aW9uJywgdGhpcy5jb250YWluZXIsIChlOiBhbnkpID0+IHRoaXMuI2hhbmRsZU9uS2V5ZG93bihlKSk7XG5cbiAgICAgIHRoaXMub2ZmRXZlbnQoJ2tleXVwLmxpc3R2aWV3LXNlbGVjdGlvbicsIHRoaXMuY29udGFpbmVyKTtcbiAgICAgIHRoaXMub25FdmVudCgna2V5dXAubGlzdHZpZXctc2VsZWN0aW9uJywgdGhpcy5jb250YWluZXIsIChlOiBhbnkpID0+IHRoaXMuI2hhbmRsZU9uS2V5dXAoZSkpO1xuXG4gICAgICB0aGlzLm9mZkV2ZW50KCdhZnRlcnZpcnR1YWxzY3JvbGwubGlzdHZpZXcnLCB0aGlzLnZpcnR1YWxTY3JvbGxDb250YWluZXIpO1xuICAgICAgdGhpcy5vbkV2ZW50KCdhZnRlcnZpcnR1YWxzY3JvbGwubGlzdHZpZXcnLCB0aGlzLnZpcnR1YWxTY3JvbGxDb250YWluZXIsIChlOiBDdXN0b21FdmVudCkgPT4gdGhpcy4jaGFuZGxlT25BZnRlclZpcnR1YWxTY3JvbGwoZSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHNlbGVjdGlvbiBmb3IgZ2l2ZW4gaXRlbVxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge2FueX0gaXRlbUluZm8gVGhlIGl0ZW0gYW5kIGluZGV4LlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gICNzZXRTZWxlY3Rpb24oaXRlbUluZm86IElkc0xpc3RWaWV3SXRlbUluZm8gfCBudWxsKTogdm9pZCB7XG4gICAgaWYgKCFpdGVtSW5mbykgcmV0dXJuO1xuXG4gICAgY29uc3QgeyBpdGVtLCBpbmRleCB9ID0gaXRlbUluZm87XG4gICAgY29uc3QgZGF0YUluZGV4ID0gdGhpcy5kYXRhSW5kZXgoaW5kZXgpO1xuICAgIGxldCBpc1ZldG8gPSB0cnVlO1xuXG4gICAgaWYgKHRoaXMuc2VsZWN0YWJsZSkge1xuICAgICAgY29uc3Qgc2VsZWN0ZWQ6IGFueSA9IHRoaXMuc2VsZWN0ZWQ7XG5cbiAgICAgIC8vIFNpbmdsZVxuICAgICAgaWYgKHRoaXMuc2VsZWN0YWJsZSA9PT0gJ3NpbmdsZScpIHtcbiAgICAgICAgaXNWZXRvID0gdGhpcy4jc2VsZWN0SW5QYWdlKGluZGV4KTtcbiAgICAgIH1cblxuICAgICAgLy8gTXVsdGlwbGVcbiAgICAgIGlmICh0aGlzLnNlbGVjdGFibGUgPT09ICdtdWx0aXBsZScpIHtcbiAgICAgICAgaWYgKHNlbGVjdGVkLnNvbWUoKGQ6IGFueSkgPT4gZC5pbmRleCA9PT0gZGF0YUluZGV4KSkge1xuICAgICAgICAgIGlzVmV0byA9IHRoaXMuI2Rlc2VsZWN0SW5QYWdlKGluZGV4KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpc1ZldG8gPSB0aGlzLiNzZWxlY3RJblBhZ2UoaW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIE1peGVkXG4gICAgICBpZiAodGhpcy5zZWxlY3RhYmxlID09PSAnbWl4ZWQnKSB7XG4gICAgICAgIGlmICh0aGlzLiNpc1RhcmdldENoZWNrYm94KSB7XG4gICAgICAgICAgLy8gU2VsZWN0aW9uXG4gICAgICAgICAgaWYgKHNlbGVjdGVkLnNvbWUoKGQ6IGFueSkgPT4gZC5pbmRleCA9PT0gZGF0YUluZGV4KSkge1xuICAgICAgICAgICAgaXNWZXRvID0gdGhpcy4jZGVzZWxlY3RJblBhZ2UoaW5kZXgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpc1ZldG8gPSB0aGlzLiNzZWxlY3RJblBhZ2UoaW5kZXgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBBY3RpdmF0aW9uXG4gICAgICAgICAgdGhpcy4jYWN0aXZhdGVJdGVtSW5QYWdlKGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpc1ZldG8pIHRoaXMuZm9jdXNMaShpdGVtKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGZvY3VzIGZvciBnaXZlbiBsaXN0IGl0ZW0uXG4gICAqIEBwYXJhbSB7YW55fSBsaSBUaGUgbGlzdCBpdGVtLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGZvY3VzTGkobGk/OiBIVE1MRWxlbWVudCB8IG51bGwpOiB2b2lkIHtcbiAgICBpZiAobGkpIHtcbiAgICAgIGNvbnN0IHByZXZGb2N1cyA9IHRoaXMuZ2V0Rm9jdXNlZExpKCk7XG4gICAgICAvLyByZW1vdmUgdGFiaW5kZXggZnJvbSBwcmV2aW91cyBmb2N1c1xuICAgICAgaWYgKGxpICE9PSBwcmV2Rm9jdXMpIHtcbiAgICAgICAgcHJldkZvY3VzPy5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XG4gICAgICAgIHRoaXMuI2ZvY3VzZWRMaUluZGV4ID0gbGkuZ2V0QXR0cmlidXRlKCdpbmRleCcpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZXQgYWNjZXNzYmlsaXR5XG4gICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcignLmlkcy1saXN0LXZpZXctYm9keScpO1xuICAgICAgY29udGFpbmVyPy5zZXRBdHRyaWJ1dGUoJ2FyaWEtYWN0aXZlZGVzY2VuZGFudCcsIFN0cmluZyhsaS5nZXRBdHRyaWJ1dGUoJ2lkJykpKTtcblxuICAgICAgLy8gaW5pdCBuZXcgZm9jdXNcbiAgICAgIGxpLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpOyAvLyB0aGlzIGNsZWFycyBhZnRlciBldmVyeSByZW5kZXJcbiAgICAgIGxpLmZvY3VzKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50bHkgZm9jdXNlZCBsaXN0IGl0ZW0uXG4gICAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH0gVGhlIGZvY3VzZWQgbGlzdCBpdGVtLlxuICAgKi9cbiAgZ2V0Rm9jdXNlZExpKCk6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkIHwgbnVsbCB7XG4gICAgY29uc3Qgc2F2ZWRGb2N1c2VkTGkgPSB0aGlzLmNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcjxIVE1MRWxlbWVudD4oYGRpdltwYXJ0PVwibGlzdC1pdGVtXCJdW2luZGV4PVwiJHt0aGlzLiNmb2N1c2VkTGlJbmRleH1cIl1gKTtcbiAgICBjb25zdCB2YWwgPSBzYXZlZEZvY3VzZWRMaSA/PyB0aGlzLmNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcjxIVE1MRWxlbWVudD4oJ2RpdltwYXJ0PVwibGlzdC1pdGVtXCJdW3RhYmluZGV4PVwiMFwiXScpO1xuICAgIHJldHVybiB2YWw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHByZXZpb3VzIGxpc3QgaXRlbSBmb3IgYSBnaXZlbiBsaXN0IGl0ZW0uXG4gICAqIEBwYXJhbSB7YW55fSBsaSBUaGUgbGlzdCBpdGVtLlxuICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR8dW5kZWZpbmVkfSBUaGUgcHJldmlvdXMgbGlzdCBpdGVtXG4gICAqL1xuICBnZXRQcmV2aW91c0xpKGxpOiBhbnkpOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCB7XG4gICAgbGV0IGlkeCA9IGxpICYmIHR5cGVvZiBsaS5nZXRBdHRyaWJ1dGUgPT09ICdmdW5jdGlvbicgPyBsaS5nZXRBdHRyaWJ1dGUoJ2luZGV4JykgOiBudWxsO1xuICAgIGlkeCA9IHN0cmluZ1RvTnVtYmVyKGlkeCk7XG4gICAgaWYgKE51bWJlci5pc05hTihpZHgpKSByZXR1cm47XG4gICAgY29uc3QgaXRlbXMgPSBbLi4udGhpcy5nZXRBbGxMaSgpID8/IFtdXS5zbGljZSgwLCAoaWR4ICsgMSkpO1xuICAgIGNvbnN0IHByZXYgPSAoaXRlbTogYW55KTogYW55ID0+IChcbiAgICAgIHRoaXMuc29ydGFibGVcbiAgICAgICAgPyBpdGVtLnBhcmVudEVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZz8uZmlyc3RFbGVtZW50Q2hpbGR3cmFwcGVyXG4gICAgICAgIDogaXRlbS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nXG4gICAgKTtcbiAgICBsZXQgcHJldkxpID0gbGk7XG4gICAgaXRlbXMucmV2ZXJzZSgpLnNvbWUoKGl0ZW06IGFueSkgPT4ge1xuICAgICAgcHJldkxpID0gcHJldihpdGVtKTtcbiAgICAgIHJldHVybiAhcHJldkxpPy5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHByZXZMaTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbmV4dCBsaXN0IGl0ZW0gZm9yIGEgZ2l2ZW4gbGlzdCBpdGVtLlxuICAgKiBAcGFyYW0ge2FueX0gbGkgVGhlIGxpc3QgaXRlbS5cbiAgICogQHJldHVybnMge0hUTUxFbGVtZW50fHVuZGVmaW5lZH0gVGhlIG5leHQgbGlzdCBpdGVtXG4gICAqL1xuICBnZXROZXh0TGkobGk6IGFueSk6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkIHtcbiAgICBsZXQgaWR4ID0gbGkgJiYgdHlwZW9mIGxpLmdldEF0dHJpYnV0ZSA9PT0gJ2Z1bmN0aW9uJyA/IGxpLmdldEF0dHJpYnV0ZSgnaW5kZXgnKSA6IG51bGw7XG4gICAgaWR4ID0gc3RyaW5nVG9OdW1iZXIoaWR4KTtcbiAgICBpZiAoTnVtYmVyLmlzTmFOKGlkeCkpIHJldHVybjtcbiAgICBjb25zdCBpdGVtcyA9IFsuLi50aGlzLmdldEFsbExpKCkgPz8gW11dLnNsaWNlKGlkeCk7XG4gICAgY29uc3QgbmV4dCA9IChpdGVtOiBhbnkpOiBhbnkgPT4gKFxuICAgICAgdGhpcy5zb3J0YWJsZVxuICAgICAgICA/IGl0ZW0ucGFyZW50RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmc/LmZpcnN0RWxlbWVudENoaWxkXG4gICAgICAgIDogaXRlbS5uZXh0RWxlbWVudFNpYmxpbmdcbiAgICApO1xuICAgIGxldCBuZXh0TGkgPSBsaTtcbiAgICBpdGVtcy5zb21lKChpdGVtOiBhbnkpID0+IHtcbiAgICAgIG5leHRMaSA9IG5leHQoaXRlbSk7XG4gICAgICByZXR1cm4gIW5leHRMaT8uaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgIH0pO1xuICAgIHJldHVybiBuZXh0TGk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRlbXBsYXRlIGZ1bmN0aW9uIGZvciBsaXN0IGl0ZW0uXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gVGhlIGxpc3QgaXRlbSB0ZW1wbGF0ZSBmdW5jdGlvbi5cbiAgICovXG4gIGxpc3RJdGVtVGVtcGxhdGVGdW5jKCk6IGFueSB7XG4gICAgY29uc3QgaXRlbVRlbXBsYXRlID0gKGl0ZW06IGFueSwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgaWYgKHRoaXMuc2VsZWN0YWJsZSA9PT0gJ211bHRpcGxlJyB8fCB0aGlzLnNlbGVjdGFibGUgPT09ICdtaXhlZCcpIHtcbiAgICAgICAgY29uc3QgY2hlY2tlZCA9IGl0ZW0uaXRlbVNlbGVjdGVkID8gJyBjaGVja2VkJyA6ICcnO1xuICAgICAgICBjb25zdCBkaXNhYmxlZCA9IGl0ZW0uZGlzYWJsZWQgPyAnIGRpc2FibGVkJyA6ICcnO1xuICAgICAgICBsZXQgY2hlY2tib3ggPSBgPGlkcy1jaGVja2JveCBjbGFzcz1cImxpc3QtaXRlbS1jaGVja2JveFwiIGxhYmVsPVwiY2ItaXRlbS0ke2luZGV4fVwiIGxhYmVsLXN0YXRlPVwiaGlkZGVuXCIke2NoZWNrZWR9JHtkaXNhYmxlZH0+PC9pZHMtY2hlY2tib3g+YDtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0YWJsZSA9PT0gJ211bHRpcGxlJyAmJiB0aGlzLmhpZGVDaGVja2JveGVzKSBjaGVja2JveCA9ICcnO1xuICAgICAgICByZXR1cm4gYFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJsaXN0LWl0ZW0tYXJlYVwiPlxuICAgICAgICAgICAgJHtjaGVja2JveH1cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsaXN0LWl0ZW0tY29udGVudFwiPlxuICAgICAgICAgICAgICAke3RoaXMuaXRlbVRlbXBsYXRlKGl0ZW0pfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+YDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLml0ZW1UZW1wbGF0ZShpdGVtKTtcbiAgICB9O1xuXG4gICAgY29uc3QgZnVuYyA9IChpdGVtOiBhbnksIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgIGNvbnN0IGRpc2FibGVkID0gaXRlbS5kaXNhYmxlZCA/ICcgZGlzYWJsZWQnIDogJyc7XG4gICAgICBjb25zdCB0YWJpbmRleCA9IGB0YWJpbmRleD1cIiR7dHlwZW9mIGluZGV4ICE9PSAndW5kZWZpbmVkJyAmJiAhaW5kZXggPyAnMCcgOiAnLTEnfVwiYDtcbiAgICAgIGNvbnN0IGFjdGl2YXRlZCA9IGl0ZW0uaXRlbUFjdGl2YXRlZCA/ICcgYWN0aXZhdGVkJyA6ICcnO1xuICAgICAgbGV0IHNlbGVjdGVkID0gJyc7XG4gICAgICBpZiAoaXRlbS5pdGVtU2VsZWN0ZWQpIHtcbiAgICAgICAgc2VsZWN0ZWQgPSAnIHNlbGVjdGVkIGFyaWEtc2VsZWN0ZWQ9XCJ0cnVlXCInO1xuICAgICAgICBpZiAodGhpcy5zZWxlY3RhYmxlID09PSAnbWl4ZWQnKSBzZWxlY3RlZCArPSAnIGhpZGUtc2VsZWN0ZWQtY29sb3InO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGBcbiAgICAgICAgJHt0aGlzLnNvcnRhYmxlID8gYDxpZHMtc3dhcHBhYmxlLWl0ZW1cbiAgICAgICAgICAgIHJvbGU9XCJsaXN0aXRlbVwiXG4gICAgICAgICAgICB0YWJpbmRleD1cIi0xXCJcbiAgICAgICAgICAgIHRhYmJhYmxlPVwiJHtpbmRleCA9PT0gMCA/ICd0cnVlJyA6ICdmYWxzZSd9XCJcbiAgICAgICAgICAgIGluZGV4PVwiJHtpbmRleH1cIlxuICAgICAgICAgICAgaWQ9XCJpZF9pdGVtXyR7aW5kZXggKyAxfVwiXG4gICAgICAgICAgICBhcmlhLXBvc2luc2V0PVwiJHtpbmRleCArIDF9XCJcbiAgICAgICAgICAgIGFyaWEtc2V0c2l6ZT1cIiR7dGhpcy5kYXRhLmxlbmd0aH1cIlxuICAgICAgICAgICAgJHtkaXNhYmxlZH1cbiAgICAgICAgICA+YCA6ICcnfVxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIHBhcnQ9XCJsaXN0LWl0ZW1cIlxuICAgICAgICAgICAgcm9sZT1cIm9wdGlvblwiXG4gICAgICAgICAgICBpbmRleD1cIiR7aW5kZXh9XCJcbiAgICAgICAgICAgIGFyaWEtcG9zaW5zZXQ9XCIke2luZGV4ICsgMX1cIlxuICAgICAgICAgICAgYXJpYS1zZXRzaXplPVwiJHt0aGlzLiNzaXplfVwiXG4gICAgICAgICAgICAke3RhYmluZGV4fSR7YWN0aXZhdGVkfSR7c2VsZWN0ZWR9JHtkaXNhYmxlZH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICAke2l0ZW1UZW1wbGF0ZShpdGVtLCBpbmRleCl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICR7dGhpcy5zb3J0YWJsZSA/IGA8L2lkcy1zd2FwcGFibGUtaXRlbT5gIDogJyd9XG4gICAgICBgO1xuICAgIH07XG5cbiAgICByZXR1cm4gZnVuYztcbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgbWV0aG9kIHRvIHJlbmRlciB0aGUgc3RhdGljIHNjcm9sbGluZyB0ZW1wbGF0ZVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBodG1sXG4gICAqL1xuICBzdGF0aWNTY3JvbGxUZW1wbGF0ZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHNlbGVjdGFibGUgPSB0aGlzLnNlbGVjdGFibGUgPyBgICR7dGhpcy5zZWxlY3RhYmxlQ2xhc3MoKX1gIDogJyc7XG4gICAgcmV0dXJuIGBcbiAgICAgIDxkaXYgY2xhc3M9XCJpZHMtbGlzdC12aWV3JHtzZWxlY3RhYmxlfVwiIG1vZGU9XCIke3RoaXMubW9kZX1cIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImlkcy1saXN0LXZpZXctYm9keVwiIHJvbGU9XCJsaXN0Ym94XCIgYXJpYS1sYWJlbD1cIiR7dGhpcy5sYWJlbH1cIj5cbiAgICAgICAgICAke3RoaXMuc29ydGFibGUgPyBgPGlkcy1zd2FwcGFibGUgc2VsZWN0aW9uPSR7dGhpcy5zZWxlY3RhYmxlfT5gIDogJyd9XG4gICAgICAgICAgICAke3RoaXMuZGF0YT8ubGVuZ3RoID4gMCA/IHRoaXMuZGF0YS5tYXAodGhpcy5saXN0SXRlbVRlbXBsYXRlRnVuYygpKS5qb2luKCcnKSA6ICcnfVxuICAgICAgICAgICR7dGhpcy5zb3J0YWJsZSA/IGA8L2lkcy1zd2FwcGFibGU+YCA6ICcnfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyIG1ldGhvZCB0byByZW5kZXIgdGhlIHZpcnR1YWwgc2Nyb2xsaW5nIHRlbXBsYXRlXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IGh0bWxcbiAgICovXG4gIHZpcnR1YWxTY3JvbGxUZW1wbGF0ZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHNlbGVjdGFibGUgPSB0aGlzLnNlbGVjdGFibGUgPyBgICR7dGhpcy5zZWxlY3RhYmxlQ2xhc3MoKX1gIDogJyc7XG4gICAgY29uc3QgaHRtbCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJpZHMtbGlzdC12aWV3JHtzZWxlY3RhYmxlfVwiIG1vZGU9XCIke3RoaXMubW9kZX1cIj5cbiAgICAgICAgPGlkcy12aXJ0dWFsLXNjcm9sbFxuICAgICAgICAgIGhlaWdodD1cIiR7dGhpcy5oZWlnaHR9XCJcbiAgICAgICAgICBpdGVtLWhlaWdodD1cIiR7dGhpcy5pdGVtSGVpZ2h0fVwiXG4gICAgICAgID5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiaWRzLWxpc3Qtdmlldy1ib2R5XCIgcm9sZT1cImxpc3Rib3hcIiBhcmlhLWxhYmVsPVwiJHt0aGlzLmxhYmVsfVwiIHBhcnQ9XCJjb250ZW50c1wiPjwvZGl2PlxuICAgICAgICA8L2lkcy12aXJ0dWFsLXNjcm9sbD5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG5cbiAgICByZXR1cm4gaHRtbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbm5lciB0ZW1wbGF0ZSBjb250ZW50c1xuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgdGVtcGxhdGVcbiAgICovXG4gIHRlbXBsYXRlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBcbiAgICAgICR7dGhpcy5zZWFyY2hUZW1wbGF0ZT8uKCl9XG4gICAgICAke3RoaXMudmlydHVhbFNjcm9sbCA/IHRoaXMudmlydHVhbFNjcm9sbFRlbXBsYXRlKCkgOiB0aGlzLnN0YXRpY1Njcm9sbFRlbXBsYXRlKCl9XG4gICAgYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gaXRlbSdzIGh0bWwgaW5qZWN0aW5nIGFueSB2YWx1ZXMgZnJvbSB0aGUgZGF0YXNldCBhcyBuZWVkZWQuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBpdGVtIFRoZSBpdGVtIHRvIGdlbmVyYXRlXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBodG1sIGZvciB0aGlzIGl0ZW1cbiAgICovXG4gIGl0ZW1UZW1wbGF0ZShpdGVtOiBhbnkpOiBzdHJpbmcge1xuICAgIGNvbnN0IGl0bSA9IHRoaXMuc2VhcmNoSGlnaGxpZ2h0Py4oaXRlbSkgfHwgaXRlbTtcbiAgICByZXR1cm4gaW5qZWN0VGVtcGxhdGUodGhpcy5kZWZhdWx0VGVtcGxhdGUsIGl0bSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBwYWdlciB0ZW1wbGF0ZSBmb3IgbGlzdHZpZXdcbiAgICogQHJldHVybnMge3N0cmluZ30gdGhlIGRlZmF1bHQgcGFnZXIgdGVtcGxhdGUgZm9yIGxpc3Qtdmlld1xuICAgKi9cbiAgcGFnZXJUZW1wbGF0ZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgXG4gICAgICA8aWRzLXBhZ2VyLWJ1dHRvbiBsYWJlbD1cIlByZXZpb3VzIHBhZ2VcIiBwcmV2aW91cz48L2lkcy1wYWdlci1idXR0b24+XG4gICAgICA8aWRzLXBhZ2VyLW51bWJlci1saXN0IGxhYmVsPVwiUGFnZSB7bnVtfSBvZiB7dG90YWx9XCI+PC9pZHMtcGFnZXItbnVtYmVyLWxpc3Q+XG4gICAgICA8aWRzLXBhZ2VyLWJ1dHRvbiBsYWJlbD1cIk5leHQgcGFnZVwiIG5leHQ+PC9pZHMtcGFnZXItYnV0dG9uPlxuICAgIGA7XG4gIH1cblxuICAvKipcbiAgICogQWRqdXN0IGxpc3QgaXRlbXMgYWxsIGluZGV4ZXMgZm9yIHZpcnR1YWwgc2Nyb2xsXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydEluZGV4IFRoZSBzdGFydGluZyBkYXRhIGluZGV4LlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gICNhZGp1c3RWaXJ0dWFsU2Nyb2xsSW5kZXhlcyhzdGFydEluZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBpdGVtcyA9IHRoaXMuZ2V0QWxsTGkoKTtcbiAgICBjb25zdCBsZW4gPSBpdGVtcz8ubGVuZ3RoO1xuXG4gICAgaWYgKHN0YXJ0SW5kZXggPT09IDApIGl0ZW1zPy5pdGVtKDApPy5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgICBpdGVtcz8uZm9yRWFjaCgoaXRlbTogYW55LCBpOiBudW1iZXIpID0+IHtcbiAgICAgIGl0ZW0/LnNldEF0dHJpYnV0ZSgnaW5kZXgnLCBpICsgc3RhcnRJbmRleCk7XG4gICAgICBpdGVtPy5zZXRBdHRyaWJ1dGUoJ2FyaWEtcG9zaW5zZXQnLCBpICsgMSk7XG4gICAgICBpdGVtPy5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2V0c2l6ZScsIGxlbik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlIGNoZWNrYm94ZXNcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICAjdG9nZ2xlQ2hlY2tib3hlcygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zZWxlY3RhYmxlID09PSAnbXVsdGlwbGUnKSB7XG4gICAgICBjb25zdCB2YWwgPSB0aGlzLmhpZGVDaGVja2JveGVzO1xuICAgICAgY29uc3QgaXNDaGVja2JveCA9ICEhKHRoaXMuYm9keT8ucXVlcnlTZWxlY3RvcignLmxpc3QtaXRlbS1jaGVja2JveCcpKTtcbiAgICAgIGlmICh2YWwgJiYgaXNDaGVja2JveCkge1xuICAgICAgICAvLyByZW1vdmVcbiAgICAgICAgdGhpcy5ib2R5Py5xdWVyeVNlbGVjdG9yQWxsKCcubGlzdC1pdGVtLWNoZWNrYm94JykuZm9yRWFjaCgoY2I6IGFueSkgPT4gY2I/LnJlbW92ZSgpKTtcbiAgICAgIH0gZWxzZSBpZiAoIXZhbCAmJiAhaXNDaGVja2JveCkge1xuICAgICAgICAvLyBhZGRcbiAgICAgICAgdGhpcy5nZXRBbGxMaSgpPy5mb3JFYWNoKChpdGVtOiBhbnkpID0+IHtcbiAgICAgICAgICBpZiAoIWl0ZW0pIHJldHVybjtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdpbmRleCcpO1xuICAgICAgICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSBpdGVtLmhhc0F0dHJpYnV0ZSgnc2VsZWN0ZWQnKTtcbiAgICAgICAgICBjb25zdCBpc0Rpc2FibGVkID0gaXRlbS5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgY29uc3QgY2hlY2tlZCA9IGlzU2VsZWN0ZWQgPyAnIGNoZWNrZWQnIDogJyc7XG4gICAgICAgICAgY29uc3QgZGlzYWJsZWQgPSBpc0Rpc2FibGVkID8gJyBkaXNhYmxlZCcgOiAnJztcbiAgICAgICAgICBjb25zdCBpdGVtQXJlYSA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLmxpc3QtaXRlbS1hcmVhJyk7XG4gICAgICAgICAgaXRlbUFyZWE/Lmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIGBcbiAgICAgICAgICAgIDxpZHMtY2hlY2tib3hcbiAgICAgICAgICAgICBjbGFzcz1cImxpc3QtaXRlbS1jaGVja2JveFwiXG4gICAgICAgICAgICAgbGFiZWw9XCJjYi1pdGVtLSR7aW5kZXh9XCJcbiAgICAgICAgICAgICBsYWJlbC1zdGF0ZT1cImhpZGRlblwiJHtjaGVja2VkfSR7ZGlzYWJsZWR9PjwvaWRzLWNoZWNrYm94PlxuICAgICAgICAgIGApO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyIGZ1bmN0aW9uIHRoYXQgdG9nZ2xlcyB0aGUgJ3NlbGVjdGVkJyBhdHRyaWJ1dGUgb2YgYW4gZWxlbWVudCwgdGhlbiBmb2N1c2VzIG9uIHRoYXQgZWxlbWVudFxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGl0ZW0gdGhlIGl0ZW0gdG8gYWRkL3JlbW92ZSB0aGUgc2VsZWN0ZWQgYXR0cmlidXRlXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3dpdGNoVmFsdWUgb3B0aW9uYWwgc3dpdGNoIHZhbHVlcyB0byBmb3JjZSBhZGQvcmVtb3ZlIHRoZSBzZWxlY3RlZCBhdHRyaWJ1dGVcbiAgICovXG4gIHRvZ2dsZVNlbGVjdGVkQXR0cmlidXRlKGl0ZW06IEhUTUxMSUVsZW1lbnQsIHN3aXRjaFZhbHVlPzogYm9vbGVhbikge1xuICAgIGlmICghdGhpcy5zZWxlY3RhYmxlIHx8IGl0ZW0/LnRhZ05hbWUgIT09ICdJRFMtU1dBUFBBQkxFLUlURU0nKSByZXR1cm47XG5cbiAgICBjb25zdCB1bnNlbGVjdCA9ICgpID0+IHtcbiAgICAgIGl0ZW0ucmVtb3ZlQXR0cmlidXRlKCdzZWxlY3RlZCcpO1xuICAgICAgaXRlbS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnKTtcbiAgICAgIHRoaXMuI2FjdGl2YXRlZEluZGV4ID0gLTE7XG4gICAgfTtcblxuICAgIGNvbnN0IHNlbGVjdCA9ICgpID0+IHtcbiAgICAgIGl0ZW0uc2V0QXR0cmlidXRlKCdzZWxlY3RlZCcsICdzZWxlY3RlZCcpO1xuICAgICAgaXRlbS5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAndHJ1ZScpO1xuICAgICAgdGhpcy4jYWN0aXZhdGVkSW5kZXggPSBwYXJzZUludChpdGVtLmdldEF0dHJpYnV0ZSgnaW5kZXgnKSB8fCAnLTEnKTtcblxuICAgICAgdGhpcy50cmlnZ2VyRXZlbnQoJ2l0ZW1TZWxlY3QnLCB0aGlzLCB7XG4gICAgICAgIGRldGFpbDogdGhpcy5nZXRMaXN0SXRlbURhdGEoaXRlbSlcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBpZiAoc3dpdGNoVmFsdWUgPT09IHRydWUpIHtcbiAgICAgIHNlbGVjdCgpO1xuICAgIH0gZWxzZSBpZiAoc3dpdGNoVmFsdWUgPT09IGZhbHNlKSB7XG4gICAgICB1bnNlbGVjdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBvdGhlcndpc2UgdG9nZ2xlIGl0IGRlcGVuZGluZyBvbiB3aGV0aGVyIG9yIG5vdCBpdCBoYXMgdGhlIGF0dHJpYnV0ZSBhbHJlYWR5XG4gICAgICBjb25zdCBoYXNTZWxlY3RlZEF0dHJpYnV0ZSA9IGl0ZW0uaGFzQXR0cmlidXRlKCdzZWxlY3RlZCcpO1xuICAgICAgaWYgKGhhc1NlbGVjdGVkQXR0cmlidXRlKSB7XG4gICAgICAgIHVuc2VsZWN0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxlY3QoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5mb2N1c0xpKGl0ZW0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGVzIHRoZSBzZWxlY3RlZCBsaXN0IGl0ZW1cbiAgICogQHBhcmFtIHthbnl9IGl0ZW0gdGhlIHNlbGVjdGVkIGxpc3QgaXRlbSB0byB0b2dnbGVcbiAgICovXG4gIHRvZ2dsZVNlbGVjdGVkTGkoaXRlbTogYW55KSB7XG4gICAgaWYgKCF0aGlzLnNlbGVjdGFibGUgfHwgIWl0ZW0pIHJldHVybjtcbiAgICBpZiAoaXRlbS50YWdOYW1lID09PSAnSURTLVNXQVBQQUJMRS1JVEVNJykge1xuICAgICAgaWYgKHRoaXMuc2VsZWN0YWJsZSA9PT0gJ3NpbmdsZScpIHtcbiAgICAgICAgY29uc3QgcHJldlNlbGVjdGVkTGk6IEhUTUxMSUVsZW1lbnQgPSAodGhpcyBhcyBhbnkpLnNlbGVjdGVkTGk7XG4gICAgICAgIGlmIChpdGVtICE9PSBwcmV2U2VsZWN0ZWRMaSAmJiBwcmV2U2VsZWN0ZWRMaSkge1xuICAgICAgICAgIHRoaXMudG9nZ2xlU2VsZWN0ZWRBdHRyaWJ1dGUocHJldlNlbGVjdGVkTGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLnRvZ2dsZVNlbGVjdGVkQXR0cmlidXRlKGl0ZW0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgZGF0YSBmcm9tIERPTVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIHVwZGF0ZURhdGFGcm9tRE9NKCk6IHZvaWQge1xuICAgIGNvbnN0IG5ld0RhdGE6IGFueSA9IFtdO1xuICAgIHRoaXMuY29udGFpbmVyPy5xdWVyeVNlbGVjdG9yQWxsPEhUTUxFbGVtZW50PignZGl2W3BhcnQ9XCJsaXN0LWl0ZW1cIl0nKS5mb3JFYWNoKCh4KSA9PiB7XG4gICAgICBjb25zdCBvYmpJdGVtOiBhbnkgPSB7fTtcbiAgICAgIHgucXVlcnlTZWxlY3RvckFsbDxJZHNUZXh0PignaWRzLXRleHQnKS5mb3JFYWNoKCh2YWx1ZSwgaSkgPT4ge1xuICAgICAgICBvYmpJdGVtW3RoaXMuZGF0YUtleXNbaV1dID0gdmFsdWUuaW5uZXJIVE1MO1xuICAgICAgfSk7XG5cbiAgICAgIG5ld0RhdGEucHVzaChvYmpJdGVtKTtcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLmRhdGFzb3VyY2UpIHtcbiAgICAgIHRoaXMuZGF0YXNvdXJjZS5kYXRhID0gbmV3RGF0YTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVyZW5kZXIgdGhlIGxpc3QgYnkgcmUgYXBwbHlpbmcgdGhlIHRlbXBsYXRlXG4gICAqL1xuICByZWRyYXcoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEgfHwgIXRoaXMubG9hZGVkKSB7XG4gICAgICBpZiAoIXRoaXMuZGF0YT8ubGVuZ3RoKSB0aGlzLmdldEFsbExpKCk/LmZvckVhY2goKGxpOiBIVE1MRWxlbWVudCkgPT4gbGk/LnJlbW92ZSgpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBTZXQgbGlzdCBzaXplXG4gICAgdGhpcy4jc2l6ZSA9IHRoaXMucGFnaW5hdGlvbiA9PT0gJ25vbmUnID8gdGhpcy5wYWdlVG90YWwgOiB0aGlzLnBhZ2VTaXplO1xuXG4gICAgY29uc3QgZGlyID0gdGhpcy5jb250YWluZXI/LmdldEF0dHJpYnV0ZSgnZGlyJyk7XG4gICAgY29uc3QgaHRtbCA9IHRoaXMudGVtcGxhdGUoKTtcbiAgICBpZiAodGhpcy5jb250YWluZXI/LnBhcmVudEVsZW1lbnQpIHtcbiAgICAgIHRoaXMuY29udGFpbmVyPy5wYXJlbnRFbGVtZW50LnJlbW92ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvbnRhaW5lcj8ucmVtb3ZlKCk7XG4gICAgfVxuICAgIHRoaXMuc2VhcmNoQ29udGFpbmVyPy5yZW1vdmUoKTtcblxuICAgIGNvbnN0IHJlZmVyZW5jZUVsZW06IGFueSA9IHRoaXMuc2hhZG93Um9vdD8ucXVlcnlTZWxlY3Rvcignc3R5bGUnKTtcbiAgICBpZiAocmVmZXJlbmNlRWxlbSkge1xuICAgICAgcmVmZXJlbmNlRWxlbS5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyZW5kJywgaHRtbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbiAgICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IGh0bWw7XG4gICAgICB0aGlzLnNoYWRvd1Jvb3Q/LmFwcGVuZENoaWxkKHRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRhaW5lciA9IHRoaXMuc2hhZG93Um9vdD8ucXVlcnlTZWxlY3RvcignLmlkcy1saXN0LXZpZXcnKTtcblxuICAgIC8vIHN1cGVyLnJlcmVuZGVyPy4odHJ1ZSk7XG5cbiAgICAvLyBTZXR1cCB2aXJ0dWFsIHNjcm9sbGluZ1xuICAgIGlmICh0aGlzLmRhdGE/Lmxlbmd0aCA+IDApIHtcbiAgICAgIGlmICh0aGlzLnZpcnR1YWxTY3JvbGwpIHtcbiAgICAgICAgLy8gc2V0IHRoZSB2aXJ0dWFsLXNjcm9sbCBpdGVtLWhlaWdodCBhdHRyaWJ1dGVcbiAgICAgICAgY29uc3QgaXRlbUhlaWdodCA9IHRoaXMuaXRlbUhlaWdodCB8fCB0aGlzLiNjaGVja1RlbXBsYXRlSGVpZ2h0KGBcbiAgICAgICAgICA8ZGl2IHBhcnQ9XCJsaXN0LWl0ZW1cIiB0YWJpbmRleD1cIi0xXCIgaWQ9XCJoZWlnaHQtdGVzdGVyXCI+XG4gICAgICAgICAgICAke3RoaXMuaXRlbVRlbXBsYXRlKHRoaXMuZGF0YXNvdXJjZS5kYXRhWzBdKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYCk7XG5cbiAgICAgICAgaWYgKHRoaXMudmlydHVhbFNjcm9sbENvbnRhaW5lcikge1xuICAgICAgICAgIHRoaXMudmlydHVhbFNjcm9sbENvbnRhaW5lci5pdGVtSGVpZ2h0ID0gaXRlbUhlaWdodDtcbiAgICAgICAgICB0aGlzLnZpcnR1YWxTY3JvbGxDb250YWluZXIuaXRlbVRlbXBsYXRlID0gdGhpcy5saXN0SXRlbVRlbXBsYXRlRnVuYygpO1xuICAgICAgICAgIHRoaXMudmlydHVhbFNjcm9sbENvbnRhaW5lci5kYXRhID0gdGhpcy5kYXRhO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLiNhdHRhY2hFdmVudExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIC8vIFNldCBzZWFyY2hhYmxlXG4gICAgdGhpcy5zZXRTZWFyY2hhYmxlPy4oKTtcblxuICAgIC8vIFN5bmMgcGFnZXJcbiAgICB0aGlzLnBhZ2VyPy5zeW5jPy5hcHBseSh0aGlzKTtcblxuICAgIC8vIEFkanVzdCBoZWlnaHRcbiAgICB0aGlzLmFkanVzdEhlaWdodCgpO1xuXG4gICAgLy8gU2V0IGJhY2sgZGlyZWN0aW9uXG4gICAgaWYgKGRpcikge1xuICAgICAgdGhpcy5jb250YWluZXI/LnNldEF0dHJpYnV0ZSgnZGlyJywgZGlyKTtcbiAgICB9XG4gIH1cblxuICBnZXQgdmlydHVhbFNjcm9sbENvbnRhaW5lcigpOiBJZHNWaXJ0dWFsU2Nyb2xsIHwgdW5kZWZpbmVkIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyPy5xdWVyeVNlbGVjdG9yPElkc1ZpcnR1YWxTY3JvbGw+KCdpZHMtdmlydHVhbC1zY3JvbGwnKTtcbiAgfVxuXG4gIGdldCBib2R5KCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcignLmlkcy1saXN0LXZpZXctYm9keScpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgaGVpZ2h0IG9mIHRoZSBsaXN0IGFmdGVyIGxvYWRpbmcgdGhlIHRlbXBsYXRlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhZGp1c3RIZWlnaHQoKSB7XG4gICAgaWYgKCF0aGlzLmNvbnRhaW5lcikgcmV0dXJuO1xuXG4gICAgY29uc3Qgcm9vdENvbnRhaW5lciA9IHRoaXMudmlydHVhbFNjcm9sbCA/IHRoaXMudmlydHVhbFNjcm9sbENvbnRhaW5lciA6IHRoaXMuY29udGFpbmVyO1xuICAgIHJvb3RDb250YWluZXI/LnN0eWxlLnNldFByb3BlcnR5KCdoZWlnaHQnLCBgJHt0aGlzLmhlaWdodH1gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgdGhlIGhlaWdodCBvZiBhIHRlbXBsYXRlIGVsZW1lbnQuXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpdGVtVGVtcGxhdGUgVGhlIGl0ZW0gdGVtcGxhdGVcbiAgICogQHJldHVybnMge251bWJlcn0gVGhlIGl0ZW0gaGVpZ2h0XG4gICAqL1xuICAjY2hlY2tUZW1wbGF0ZUhlaWdodChpdGVtVGVtcGxhdGU6IHN0cmluZyk6IG51bWJlciB7XG4gICAgdGhpcy5jb250YWluZXI/Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgaXRlbVRlbXBsYXRlKTtcbiAgICBjb25zdCB0ZXN0ZXIgPSB0aGlzLnNoYWRvd1Jvb3Q/LnF1ZXJ5U2VsZWN0b3I8SFRNTEVsZW1lbnQ+KCcjaGVpZ2h0LXRlc3RlcicpO1xuICAgIGNvbnN0IGhlaWdodCA9IHRlc3Rlcj8ub2Zmc2V0SGVpZ2h0O1xuICAgIHRlc3Rlcj8ucmVtb3ZlKCk7XG5cbiAgICByZXR1cm4gaGVpZ2h0ID8/IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYm9vbGVhbiBwcm9wZXJ0eSB2YWx1ZSBmb3IgZ2l2ZW4gYXR0cmlidXRlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlTmFtZSBUaGUgYXR0cmlidXRlIG5hbWUuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZGVmYXVsdFZhbHVlIFRoZSBkZWZhdWx0IHZhbHVlLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVGhlIHByb3BlcnR5IHZhbHVlXG4gICAqL1xuICBib29sVmFsKGF0dHJpYnV0ZU5hbWU6IHN0cmluZywgZGVmYXVsdFZhbHVlOiBib29sZWFuKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpXG4gICAgICA/IHN0cmluZ1RvQm9vbCh0aGlzLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lKSlcbiAgICAgIDogZGVmYXVsdFZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbGlzdCBvZiBhbGwgZGF0YSBmcm9tIGRhdGFzZXRcbiAgICogQHJldHVybnMge0FycmF5fSB2YWx1ZSBUaGUgYXJyYXkgdG8gdXNlXG4gICAqL1xuICBnZXQgZHMoKTogQXJyYXk8YW55PiB7IHJldHVybiB0aGlzLmRhdGFzb3VyY2U/LmFsbERhdGEgfHwgdGhpcy5kYXRhOyB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBTZXR0aW5nIGNoYW5nZXMgb2YgdGhlIHZhbHVlIGhhcyBjaGFuZ2VkIGJ5IGNhbGxpbmcgdGhlIGdldHRlclxuICAgKiBpbiB0aGUgZXh0ZW5kaW5nIGNsYXNzLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgcHJvcGVydHkgbmFtZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb2xkVmFsdWUgVGhlIHByb3BlcnR5IG9sZCB2YWx1ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3VmFsdWUgVGhlIHByb3BlcnR5IG5ldyB2YWx1ZVxuICAgKi9cbiAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWU6IHN0cmluZywgb2xkVmFsdWU6IHN0cmluZywgbmV3VmFsdWU6IHN0cmluZykge1xuICAgIHN1cGVyLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUpO1xuXG4gICAgaWYgKG9sZFZhbHVlID09PSBuZXdWYWx1ZSkgcmV0dXJuO1xuXG4gICAgY29uc3Qgc2hvdWxkUmVkcmF3ID0gW1xuICAgICAgYXR0cmlidXRlcy5MT0FERUQsXG4gICAgICBhdHRyaWJ1dGVzLlNFTEVDVEFCTEUsXG4gICAgICBhdHRyaWJ1dGVzLlZJUlRVQUxfU0NST0xMLFxuICAgICAgYXR0cmlidXRlcy5QQUdFX05VTUJFUixcbiAgICAgIGF0dHJpYnV0ZXMuUEFHRV9TSVpFLFxuICAgICAgYXR0cmlidXRlcy5QQUdFX1RPVEFMLFxuICAgIF0uaW5jbHVkZXMobmFtZSk7XG5cbiAgICBpZiAoc2hvdWxkUmVkcmF3KSB7XG4gICAgICB0aGlzLnJlZHJhdygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGRhdGEgYXJyYXkgb2YgdGhlIGxpc3R2aWV3XG4gICAqIEBwYXJhbSB7QXJyYXkgfCBudWxsfSB2YWx1ZSBUaGUgYXJyYXkgdG8gdXNlXG4gICAqL1xuICBzZXQgZGF0YSh2YWx1ZTogYW55KSB7XG4gICAgY29uc3Qgd2FzSW5pdGlhbGl6ZWQgPSB0aGlzLmluaXRpYWxpemVkO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICB0aGlzLmRhdGFzb3VyY2UuZGF0YSA9IHZhbHVlO1xuICAgICAgdGhpcy5sb2FkZWQgPSB0cnVlO1xuXG4gICAgICAvLyBSZWxvYWQgZGF0YSB3aGVuIGNoYW5nZWRcbiAgICAgIGlmICh3YXNJbml0aWFsaXplZCkge1xuICAgICAgICB0aGlzLnJlZHJhdygpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRhdGFzb3VyY2UuZGF0YSA9IFtdO1xuICAgICAgdGhpcy5sb2FkZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBnZXQgZGF0YSgpOiBhbnkgeyByZXR1cm4gdGhpcz8uZGF0YXNvdXJjZT8uZGF0YSB8fCAnJzsgfVxuXG4gIC8qKlxuICAgKiBVc2VkIHRvIGRldGVybWluZSBpZiBkYXRhIGhhcyBiZWVuIGxvYWRlZCBpbnRvIElkc0xpc3RWaWV3XG4gICAqIEBwYXJhbSB7QXJyYXkgfCBudWxsfSB2YWx1ZSBUaGUgYXJyYXkgdG8gdXNlXG4gICAqL1xuICBzZXQgbG9hZGVkKHZhbHVlOiBhbnkpIHsgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5MT0FERUQsIFN0cmluZyghIXZhbHVlKSk7IH1cblxuICBnZXQgbG9hZGVkKCk6IGFueSB7IHJldHVybiBzdHJpbmdUb0Jvb2woYXR0cmlidXRlcy5MT0FERUQpOyB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZGF0YSBhcnJheSBvZiB0aGUgbGlzdHZpZXdcbiAgICogQHBhcmFtIHtBcnJheSB8IG51bGx9IHZhbHVlIFRoZSBhcnJheSB0byB1c2VcbiAgICovXG4gIHNldCBkYXRhS2V5cyh2YWx1ZTogYW55KSB7XG4gICAgaWYgKHRoaXMuZGF0YXNvdXJjZSkge1xuICAgICAgKHRoaXMuZGF0YXNvdXJjZSBhcyBhbnkpLmRhdGFLZXlzID0gdmFsdWUgfHwgW107XG4gICAgfVxuICB9XG5cbiAgZ2V0IGRhdGFLZXlzKCk6IGFueSB7IHJldHVybiAodGhpcy5kYXRhc291cmNlIGFzIGFueSkuZGF0YUtleXMgfHwgW107IH1cblxuICAvKipcbiAgICogU2V0IHRoZSBsaXN0IHZpZXcgdG8gdXNlIHZpcnR1YWwgc2Nyb2xsaW5nIGZvciBhIGxhcmdlIGFtb3VudCBvZiBlbGVtZW50cy5cbiAgICogQHBhcmFtIHtzdHJpbmcgfCBib29sZWFufSB2YWx1ZSB0cnVlIHRvIHVzZSB2aXJ0dWFsIHNjcm9sbGluZ1xuICAgKi9cbiAgc2V0IHZpcnR1YWxTY3JvbGwodmFsdWU6IHN0cmluZyB8IGJvb2xlYW4gfCBudWxsKSB7XG4gICAgaWYgKC9ib29sZWFufHN0cmluZy9nLnRlc3QodHlwZW9mIHZhbHVlKSkge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5WSVJUVUFMX1NDUk9MTCwgU3RyaW5nKHZhbHVlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZXMuVklSVFVBTF9TQ1JPTEwpO1xuICAgIH1cbiAgfVxuXG4gIGdldCB2aXJ0dWFsU2Nyb2xsKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmJvb2xWYWwoYXR0cmlidXRlcy5WSVJUVUFMX1NDUk9MTCwgTElTVF9WSUVXX0RFRkFVTFRTLnZpcnR1YWxTY3JvbGwpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZXhwZWN0ZWQgaGVpZ2h0IG9mIHRoZSB2aWV3cG9ydCBmb3IgdmlydHVhbCBzY3JvbGxpbmdcbiAgICogQHBhcmFtIHtzdHJpbmcgfCBudW1iZXJ9IHZhbHVlIHRydWUgdG8gdXNlIHZpcnR1YWwgc2Nyb2xsaW5nXG4gICAqL1xuICBzZXQgaGVpZ2h0KHZhbHVlOiBzdHJpbmcgfCBudW1iZXIgfCB1bmRlZmluZWQgfCBudWxsKSB7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLkhFSUdIVCwgU3RyaW5nKHZhbHVlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuSEVJR0hULCBMSVNUX1ZJRVdfREVGQVVMVFMuaGVpZ2h0KTtcbiAgICB9XG4gIH1cblxuICBnZXQgaGVpZ2h0KCk6IHN0cmluZyB8IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuSEVJR0hUKSB8fCBMSVNUX1ZJRVdfREVGQVVMVFMuaGVpZ2h0O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZXhwZWN0ZWQgaGVpZ2h0IG9mIGVhY2ggaXRlbVxuICAgKiBAcGFyYW0ge3N0cmluZyB8IG51bWJlcn0gdmFsdWUgdHJ1ZSB0byB1c2UgdmlydHVhbCBzY3JvbGxpbmdcbiAgICovXG4gIHNldCBpdGVtSGVpZ2h0KHZhbHVlOiBzdHJpbmcgfCBudW1iZXIgfCB1bmRlZmluZWQgfCBudWxsKSB7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLklURU1fSEVJR0hULCBTdHJpbmcodmFsdWUpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlcy5JVEVNX0hFSUdIVCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGl0ZW1IZWlnaHQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5JVEVNX0hFSUdIVCkgPz8gJycpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgc2VsZWN0aW9uIG1vZGUgb2YgdGhlIGxpc3R2aWV3XG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBUaGUgdmFsdWVcbiAgICovXG4gIHNldCBzZWxlY3RhYmxlKHZhbHVlOiBzdHJpbmcgfCBudWxsKSB7XG4gICAgdGhpcy5jb250YWluZXI/LmNsYXNzTGlzdC5yZW1vdmUoLi4udGhpcy5zZWxlY3RhYmxlQ2xhc3ModHJ1ZSkpO1xuXG4gICAgaWYgKExJU1RfVklFV19ERUZBVUxUUy5zZWxlY3RhYmxlT3B0aW9ucy5pbmNsdWRlcyhTdHJpbmcodmFsdWUpKSkge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5TRUxFQ1RBQkxFLCBTdHJpbmcodmFsdWUpKTtcbiAgICAgIHRoaXMuY29udGFpbmVyPy5jbGFzc0xpc3QuYWRkKHRoaXMuc2VsZWN0YWJsZUNsYXNzKCkgYXMgc3RyaW5nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlcy5TRUxFQ1RBQkxFKTtcbiAgICB9XG4gIH1cblxuICBnZXQgc2VsZWN0YWJsZSgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5TRUxFQ1RBQkxFKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY2xhc3MgbmFtZS9zIHdpdGggcHJlZml4ZWQgdmFsdWVcbiAgICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gaXNBbGwgSWYgdHJ1ZSwgd2lsbCByZXR1cm4gYWxsIGNsYXNzZXMgYXMgYXJyYXlcbiAgICogQHJldHVybnMge3N0cmluZ3xBcnJheTxzdHJpbmc+fSBUaGUgY2xhc3MgbmFtZSB3aXRoIHByZWZpeFxuICAgKi9cbiAgc2VsZWN0YWJsZUNsYXNzKGlzQWxsPzogYm9vbGVhbik6IHN0cmluZyB8IEFycmF5PHN0cmluZz4ge1xuICAgIGNvbnN0IHByZWZpeGVkID0gKHY6IHN0cmluZykgPT4gYHNlbGVjdGFibGUtJHt2fWA7XG4gICAgbGV0IHI6IHN0cmluZyB8IEFycmF5PHN0cmluZz4gPSAnJztcbiAgICBpZiAoaXNBbGwpIHIgPSBMSVNUX1ZJRVdfREVGQVVMVFMuc2VsZWN0YWJsZU9wdGlvbnMubWFwKCh2KSA9PiBwcmVmaXhlZCh2KSk7XG4gICAgaWYgKHRoaXMuc2VsZWN0YWJsZSAhPT0gbnVsbCkgciA9IHByZWZpeGVkKHRoaXMuc2VsZWN0YWJsZSk7XG4gICAgcmV0dXJuIHI7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBhY3RpdmF0ZWQgaXRlbVxuICAgKiBAcmV0dXJucyB7SWRzTGlzdFZpZXdBY3RpdmF0ZWRJdGVtfG51bGx9IFRoZSBhY3RpdmF0ZWQgaXRlbVxuICAgKi9cbiAgZ2V0IGFjdGl2YXRlZEl0ZW0oKTogSWRzTGlzdFZpZXdBY3RpdmF0ZWRJdGVtIHwgQXJyYXk8SWRzTGlzdFZpZXdBY3RpdmF0ZWRJdGVtPiB8IG51bGwge1xuICAgIGlmICghdGhpcy5kcyB8fCB0aGlzLnNlbGVjdGFibGUgIT09ICdtaXhlZCcpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IHNpbmdsZUFyZ3MgPSAoaW5kZXg6IG51bWJlcikgPT4gKGluZGV4ID4gLTEgPyB7IGluZGV4LCBkYXRhOiB0aGlzLmRzW2luZGV4XSB9IDogbnVsbCk7XG4gICAgcmV0dXJuIHNpbmdsZUFyZ3ModGhpcy5kcy5maW5kSW5kZXgoKGQ6IGFueSkgPT4gZC5pdGVtQWN0aXZhdGVkKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBzZWxlY3RlZCBpdGVtL3NcbiAgICogQHJldHVybnMge0lkc0xpc3RWaWV3U2VsZWN0ZWRJdGVtfEFycmF5PElkc0xpc3RWaWV3U2VsZWN0ZWRJdGVtPnxudWxsfSBzaW5nbGUgaXRlbSwgb3IgTGlzdCBvZiBhbGwgc2VsZWN0ZWQgaXRlbXNcbiAgICovXG4gIGdldCBzZWxlY3RlZCgpOiBJZHNMaXN0Vmlld1NlbGVjdGVkSXRlbSB8IEFycmF5PElkc0xpc3RWaWV3U2VsZWN0ZWRJdGVtPiB8IG51bGwge1xuICAgIGlmICghdGhpcy5kcyB8fCAhdGhpcy5zZWxlY3RhYmxlKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBzaW5nbGVBcmdzID0gKGluZGV4OiBudW1iZXIpID0+IChpbmRleCA+IC0xID8geyBpbmRleCwgZGF0YTogdGhpcy5kc1tpbmRleF0gfSA6IG51bGwpO1xuICAgIHJldHVybiB0aGlzLnNlbGVjdGFibGUgPT09ICdzaW5nbGUnXG4gICAgICA/IHNpbmdsZUFyZ3ModGhpcy5kcy5maW5kSW5kZXgoKGQ6IGFueSkgPT4gZC5pdGVtU2VsZWN0ZWQpKVxuICAgICAgOiB0aGlzLmRzLm1hcCgoZGF0YTogYW55LCBpbmRleDogbnVtYmVyKSA9PiAoeyBpbmRleCwgZGF0YSB9KSkuZmlsdGVyKChkOiBhbnkpID0+IGQuZGF0YS5pdGVtU2VsZWN0ZWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIHNvcnRhYmxlIHByb3BlcnR5IGFuZCByZWZsZWN0cyBpdCBvbiB0aGUgRE9NLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW58c3RyaW5nfSB2YWx1ZSBUaGUgc29ydGFibGUgcGFyYW1ldGVyLlxuICAgKi9cbiAgc2V0IHNvcnRhYmxlKHZhbHVlOiBib29sZWFuIHwgc3RyaW5nIHwgbnVsbCkge1xuICAgIGlmICgvYm9vbGVhbnxzdHJpbmcvZy50ZXN0KHR5cGVvZiB2YWx1ZSkpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuU09SVEFCTEUsIFN0cmluZyh2YWx1ZSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGVzLlNPUlRBQkxFKTtcbiAgICB9XG4gIH1cblxuICBnZXQgc29ydGFibGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuYm9vbFZhbChhdHRyaWJ1dGVzLlNPUlRBQkxFLCBMSVNUX1ZJRVdfREVGQVVMVFMuc29ydGFibGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGl0ZW1zIHRvIGJlIHN1cHByZXNzIGRlYWN0aXZhdGlvbiBmb3IgbWl4ZWQgc2VsZWN0aW9uIG9ubHkuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbnxzdHJpbmd9IHZhbHVlIFRoZSB2YWx1ZS5cbiAgICovXG4gIHNldCBzdXBwcmVzc0RlYWN0aXZhdGlvbih2YWx1ZTogYm9vbGVhbiB8IHN0cmluZykge1xuICAgIGlmICgvYm9vbGVhbnxzdHJpbmcvZy50ZXN0KHR5cGVvZiB2YWx1ZSkpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuU1VQUFJFU1NfREVBQ1RJVkFUSU9OLCBTdHJpbmcodmFsdWUpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlcy5TVVBQUkVTU19ERUFDVElWQVRJT04pO1xuICAgIH1cbiAgfVxuXG4gIGdldCBzdXBwcmVzc0RlYWN0aXZhdGlvbigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5ib29sVmFsKGF0dHJpYnV0ZXMuU1VQUFJFU1NfREVBQ1RJVkFUSU9OLCBMSVNUX1ZJRVdfREVGQVVMVFMuc3VwcHJlc3NEZWFjdGl2YXRpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGl0ZW1zIHRvIGJlIHN1cHByZXNzIGRlc2VsZWN0aW9uIGZvciBzaW5nbGUgc2VsZWN0aW9uIG9ubHkuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbnxzdHJpbmd9IHZhbHVlIFRoZSB2YWx1ZS5cbiAgICovXG4gIHNldCBzdXBwcmVzc0Rlc2VsZWN0aW9uKHZhbHVlOiBib29sZWFuIHwgc3RyaW5nKSB7XG4gICAgaWYgKC9ib29sZWFufHN0cmluZy9nLnRlc3QodHlwZW9mIHZhbHVlKSkge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5TVVBQUkVTU19ERVNFTEVDVElPTiwgU3RyaW5nKHZhbHVlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZXMuU1VQUFJFU1NfREVTRUxFQ1RJT04pO1xuICAgIH1cbiAgfVxuXG4gIGdldCBzdXBwcmVzc0Rlc2VsZWN0aW9uKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmJvb2xWYWwoYXR0cmlidXRlcy5TVVBQUkVTU19ERVNFTEVDVElPTiwgTElTVF9WSUVXX0RFRkFVTFRTLnN1cHByZXNzRGVzZWxlY3Rpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrYm94ZXMgd2lsbCBub3QgcmVuZGVyIGlmIHRydWUsIG9ubHkgYXBwbHkgdG8gbXVsdGlwbGUgc2VsZWN0aW9uLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW58c3RyaW5nfSB2YWx1ZSBUaGUgdmFsdWUuXG4gICAqL1xuICBzZXQgaGlkZUNoZWNrYm94ZXModmFsdWU6IGJvb2xlYW4gfCBzdHJpbmcpIHtcbiAgICBpZiAoL2Jvb2xlYW58c3RyaW5nL2cudGVzdCh0eXBlb2YgdmFsdWUpKSB7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLkhJREVfQ0hFQ0tCT1hFUywgU3RyaW5nKHZhbHVlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZXMuSElERV9DSEVDS0JPWEVTKTtcbiAgICB9XG4gICAgdGhpcy4jdG9nZ2xlQ2hlY2tib3hlcygpO1xuICB9XG5cbiAgZ2V0IGhpZGVDaGVja2JveGVzKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmJvb2xWYWwoYXR0cmlidXRlcy5ISURFX0NIRUNLQk9YRVMsIExJU1RfVklFV19ERUZBVUxUUy5oaWRlQ2hlY2tib3hlcyk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBhcmlhIGxhYmVsIHRleHRcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIFRoZSBsYWJlbCB0ZXh0XG4gICAqL1xuICBzZXQgbGFiZWwodmFsdWU6IHN0cmluZykge1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5MQUJFTCwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGVzLkxBQkVMKTtcbiAgICB9XG4gICAgdGhpcy5ib2R5Py5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCB0aGlzLmxhYmVsKTtcbiAgfVxuXG4gIGdldCBsYWJlbCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5MQUJFTCkgfHwgTElTVF9WSUVXX0RFRkFVTFRTLmxhYmVsO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBjaGVja2JveCBzdGF0ZSBpbiBnaXZlbiBsaXN0dmlldyBpdGVtLlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBpdGVtIFRoZSBsaXN0dmlldyBpdGVtLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzQ2hlY2tlZCBUaGUgdmFsdWUgdG8gYmUgc2V0LlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gICNzZXRDaGVja2JveChpdGVtOiBhbnksIGlzQ2hlY2tlZCA9IGZhbHNlKTogdm9pZCB7XG4gICAgY29uc3QgY2IgPSBpdGVtPy5xdWVyeVNlbGVjdG9yKCcubGlzdC1pdGVtLWNoZWNrYm94Jyk7XG4gICAgaWYgKGNiKSBjYi5jaGVja2VkID0gaXNDaGVja2VkO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXIgdGhlIGdpdmVuIGV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnR0TmFtZSBUaGUgZXZlbnQgbmFtZSB0byBiZSB0cmlnZ2VyLlxuICAgKiBAcGFyYW0ge29iamVjdH0gYXJncyBFeHRyYSBkYXRhLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gICN0cmlnZ2VyRXZlbnQoZXZlbnR0TmFtZTogc3RyaW5nLCBhcmdzOiBvYmplY3QgPSB7fSk6IHZvaWQge1xuICAgIHRoaXMudHJpZ2dlckV2ZW50KGV2ZW50dE5hbWUsIHRoaXMsIHsgYnViYmxlczogdHJ1ZSwgZGV0YWlsOiB7IGVsZW06IHRoaXMsIC4uLmFyZ3MgfSB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgYSBsaXN0IGl0ZW0gdG8gYmUgYWN0aXZhdGVkLCBpbiBjdXJyZW50IHBhZ2UgYW5kIGRhdGEuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCB0aGUgemVybyBiYXNlZCBpbmRleC5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IElzIHZldG8uXG4gICAqL1xuICAjYWN0aXZhdGVJdGVtSW5QYWdlKGluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5kYXRhPy5baW5kZXhdPy5kaXNhYmxlZCkgcmV0dXJuIHRydWU7XG5cbiAgICBjb25zdCBkYXRhSW5kZXggPSB0aGlzLmRhdGFJbmRleChpbmRleCkgYXMgbnVtYmVyO1xuXG4gICAgaWYgKHRoaXMuI2FjdGl2YXRlZEluZGV4ICE9PSAtMSkge1xuICAgICAgY29uc3QgYWN0aXZhdGVkSW5kZXggPSB0aGlzLmRzLmZpbmRJbmRleCgoZDogYW55KSA9PiBkLml0ZW1BY3RpdmF0ZWQpO1xuICAgICAgdGhpcy4jaXNBcHBseSA9IHRydWU7XG4gICAgICBpZiAoYWN0aXZhdGVkSW5kZXggPT09IGRhdGFJbmRleCkge1xuICAgICAgICBpZiAoIXRoaXMuc3VwcHJlc3NEZWFjdGl2YXRpb24pIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAodGhpcy5pc0luUGFnZShhY3RpdmF0ZWRJbmRleCkpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy4jZGVhY3RpdmF0ZUl0ZW1JblBhZ2UodGhpcy5wYWdlSW5kZXgoYWN0aXZhdGVkSW5kZXgpIGFzIG51bWJlcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZGVhY3RpdmF0ZUl0ZW0oYWN0aXZhdGVkSW5kZXgpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaXNJblBhZ2UoYWN0aXZhdGVkSW5kZXgpKSB7XG4gICAgICAgIGlmICghdGhpcy4jZGVhY3RpdmF0ZUl0ZW1JblBhZ2UodGhpcy5wYWdlSW5kZXgoYWN0aXZhdGVkSW5kZXgpIGFzIG51bWJlcikpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuZGVhY3RpdmF0ZUl0ZW0oYWN0aXZhdGVkSW5kZXgpKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuI2l0ZW1CeUluZGV4KGluZGV4KTtcbiAgICBjb25zdCBhcmdzID0gKCkgPT4gKHsgaXRlbSwgaW5kZXgsIGRhdGFJbmRleCwgZGF0YTogdGhpcy5kYXRhW2luZGV4XSB9KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgIGlmICghdGhpcy50cmlnZ2VyVmV0b2FibGVFdmVudCgnYmVmb3JlaXRlbWFjdGl2YXRlZCcsIHsgLi4uYXJncygpIH0pKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGl0ZW0/LnNldEF0dHJpYnV0ZSgnYWN0aXZhdGVkJywgJycpO1xuICAgIHRoaXMuI2FjdGl2YXRlZEluZGV4ID0gZGF0YUluZGV4O1xuICAgIHRoaXMuZGF0YVtpbmRleF0uaXRlbUFjdGl2YXRlZCA9IHRydWU7XG4gICAgdGhpcy4jdHJpZ2dlckV2ZW50KCdpdGVtYWN0aXZhdGVkJywgeyAuLi5hcmdzKCkgfSk7XG5cbiAgICB0aGlzLmZvY3VzTGkoaXRlbSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGEgbGlzdCBpdGVtIHRvIGJlIGRlYWN0aXZhdGVkLCBpbiBjdXJyZW50IHBhZ2UgYW5kIGRhdGEuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCB0aGUgemVybyBiYXNlZCBpbmRleFxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gSXMgdmV0by5cbiAgICovXG4gICNkZWFjdGl2YXRlSXRlbUluUGFnZShpbmRleDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuZGF0YT8uW2luZGV4XT8uZGlzYWJsZWQpIHJldHVybiB0cnVlO1xuICAgIGlmICh0aGlzLiNhY3RpdmF0ZWRJbmRleCA9PT0gLTEpIHJldHVybiB0cnVlO1xuXG4gICAgY29uc3QgZGF0YUluZGV4ID0gdGhpcy5kYXRhSW5kZXgoaW5kZXgpO1xuXG4gICAgaWYgKHRoaXMuI2lzQXBwbHkpIHRoaXMuI2lzQXBwbHkgPSBmYWxzZTtcbiAgICBlbHNlIHtcbiAgICAgIGNvbnN0IGFjdGl2YXRlZEluZGV4ID0gdGhpcy5kcy5maW5kSW5kZXgoKGQ6IGFueSkgPT4gZC5pdGVtQWN0aXZhdGVkKTtcbiAgICAgIGlmIChhY3RpdmF0ZWRJbmRleCA9PT0gZGF0YUluZGV4ICYmICF0aGlzLnN1cHByZXNzRGVhY3RpdmF0aW9uKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuI2l0ZW1CeUluZGV4KGluZGV4KTtcbiAgICBjb25zdCBhcmdzID0gKCkgPT4gKHsgaXRlbSwgaW5kZXgsIGRhdGFJbmRleCwgZGF0YTogdGhpcy5kYXRhW2luZGV4XSB9KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgIGlmICghdGhpcy50cmlnZ2VyVmV0b2FibGVFdmVudCgnYmVmb3JlaXRlbWRlYWN0aXZhdGVkJywgeyAuLi5hcmdzKCkgfSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZGVsZXRlIHRoaXMuZGF0YVtpbmRleF0uaXRlbUFjdGl2YXRlZDtcbiAgICBpdGVtPy5yZW1vdmVBdHRyaWJ1dGUoJ2FjdGl2YXRlZCcpO1xuICAgIHRoaXMuI2FjdGl2YXRlZEluZGV4ID0gLTE7XG4gICAgdGhpcy4jdHJpZ2dlckV2ZW50KCdpdGVtZGVhY3RpdmF0ZWQnLCB7IC4uLmFyZ3MoKSB9KTtcbiAgICB0aGlzLmZvY3VzTGkoaXRlbSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGEgbGlzdCBpdGVtIHRvIGJlIGFjdGl2YXRlZCwgaW4gZGF0YXNldC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGRhdGFJbmRleCB0aGUgemVybyBiYXNlZCBkYXRhSW5kZXhcbiAgICogQHJldHVybnMge2Jvb2xlYW59IElzIHZldG8uXG4gICAqL1xuICBhY3RpdmF0ZUl0ZW0oZGF0YUluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5kcz8uW2RhdGFJbmRleF0/LmRpc2FibGVkIHx8IGRhdGFJbmRleCA9PT0gLTEpIHJldHVybiB0cnVlO1xuXG4gICAgaWYgKHRoaXMuaXNJblBhZ2UoZGF0YUluZGV4KSkge1xuICAgICAgcmV0dXJuIHRoaXMuI2FjdGl2YXRlSXRlbUluUGFnZSh0aGlzLnBhZ2VJbmRleChkYXRhSW5kZXgpIGFzIG51bWJlcik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuI2FjdGl2YXRlZEluZGV4ICE9PSAtMSkge1xuICAgICAgY29uc3QgYWN0aXZhdGVkSW5kZXggPSB0aGlzLmRzLmZpbmRJbmRleCgoZDogYW55KSA9PiBkLml0ZW1BY3RpdmF0ZWQpO1xuICAgICAgdGhpcy4jaXNBcHBseSA9IHRydWU7XG4gICAgICBpZiAoYWN0aXZhdGVkSW5kZXggPT09IGRhdGFJbmRleCkge1xuICAgICAgICBpZiAoIXRoaXMuc3VwcHJlc3NEZWFjdGl2YXRpb24pIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAodGhpcy5pc0luUGFnZShhY3RpdmF0ZWRJbmRleCkpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy4jZGVhY3RpdmF0ZUl0ZW1JblBhZ2UodGhpcy5wYWdlSW5kZXgoYWN0aXZhdGVkSW5kZXgpIGFzIG51bWJlcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZGVhY3RpdmF0ZUl0ZW0oYWN0aXZhdGVkSW5kZXgpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaXNJblBhZ2UoYWN0aXZhdGVkSW5kZXgpKSB7XG4gICAgICAgIGlmICghdGhpcy4jZGVhY3RpdmF0ZUl0ZW1JblBhZ2UodGhpcy5wYWdlSW5kZXgoYWN0aXZhdGVkSW5kZXgpIGFzIG51bWJlcikpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuZGVhY3RpdmF0ZUl0ZW0oYWN0aXZhdGVkSW5kZXgpKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgYXJncyA9ICgpID0+ICh7IGRhdGFJbmRleCwgZGF0YTogdGhpcy5kc1tkYXRhSW5kZXhdIH0pO1xuICAgIGlmICghdGhpcy50cmlnZ2VyVmV0b2FibGVFdmVudCgnYmVmb3JlaXRlbWFjdGl2YXRlZCcsIHsgLi4uYXJncygpIH0pKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy4jYWN0aXZhdGVkSW5kZXggPSBkYXRhSW5kZXg7XG4gICAgdGhpcy5kc1tkYXRhSW5kZXhdLml0ZW1BY3RpdmF0ZWQgPSB0cnVlO1xuICAgIHRoaXMuI3RyaWdnZXJFdmVudCgnaXRlbWFjdGl2YXRlZCcsIHsgLi4uYXJncygpIH0pO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGEgbGlzdCBpdGVtIHRvIGJlIGRlYWN0aXZhdGVkLCBpbiBkYXRhc2V0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkYXRhSW5kZXggdGhlIHplcm8gYmFzZWQgZGF0YUluZGV4XG4gICAqIEByZXR1cm5zIHtib29sZWFufSBGYWxzZSwgaWYgdmV0by5cbiAgICovXG4gIGRlYWN0aXZhdGVJdGVtKGRhdGFJbmRleDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuZHM/LltkYXRhSW5kZXhdPy5kaXNhYmxlZCkgcmV0dXJuIHRydWU7XG4gICAgaWYgKHRoaXMuI2FjdGl2YXRlZEluZGV4ID09PSAtMSkgcmV0dXJuIHRydWU7XG5cbiAgICBpZiAodGhpcy5pc0luUGFnZShkYXRhSW5kZXgpKSB7XG4gICAgICByZXR1cm4gdGhpcy4jZGVhY3RpdmF0ZUl0ZW1JblBhZ2UodGhpcy5wYWdlSW5kZXgoZGF0YUluZGV4KSBhcyBudW1iZXIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLiNpc0FwcGx5KSB0aGlzLiNpc0FwcGx5ID0gZmFsc2U7XG4gICAgZWxzZSB7XG4gICAgICBjb25zdCBhY3RpdmF0ZWRJbmRleCA9IHRoaXMuZHMuZmluZEluZGV4KChkOiBhbnkpID0+IGQuaXRlbUFjdGl2YXRlZCk7XG4gICAgICBpZiAoYWN0aXZhdGVkSW5kZXggPT09IGRhdGFJbmRleCAmJiAhdGhpcy5zdXBwcmVzc0RlYWN0aXZhdGlvbikgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGFyZ3MgPSAoKSA9PiAoeyBkYXRhSW5kZXgsIGRhdGE6IHRoaXMuZHNbZGF0YUluZGV4XSB9KTtcbiAgICBpZiAoIXRoaXMudHJpZ2dlclZldG9hYmxlRXZlbnQoJ2JlZm9yZWl0ZW1kZWFjdGl2YXRlZCcsIHsgLi4uYXJncygpIH0pKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICh0aGlzLmRzW2RhdGFJbmRleF0/Lml0ZW1BY3RpdmF0ZWQpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLmRzW2RhdGFJbmRleF0uaXRlbUFjdGl2YXRlZDtcbiAgICB9XG4gICAgdGhpcy4jYWN0aXZhdGVkSW5kZXggPSAtMTtcbiAgICB0aGlzLiN0cmlnZ2VyRXZlbnQoJ2l0ZW1kZWFjdGl2YXRlZCcsIHsgLi4uYXJncygpIH0pO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGEgbGlzdCBpdGVtIHRvIGJlIHNlbGVjdGVkLCBpbiBjdXJyZW50IHBhZ2UgYW5kIGRhdGEuXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCB0aGUgemVybyBiYXNlZCBpbmRleC5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IElzIHZldG8uXG4gICAqL1xuICAjc2VsZWN0SW5QYWdlKGluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5kYXRhPy5baW5kZXhdPy5kaXNhYmxlZCkgcmV0dXJuIHRydWU7XG5cbiAgICBjb25zdCBkYXRhSW5kZXggPSB0aGlzLmRhdGFJbmRleChpbmRleCk7XG4gICAgY29uc3Qgc2VsZWN0ZWQ6IGFueSA9IHRoaXMuc2VsZWN0ZWQ7XG5cbiAgICBpZiAodGhpcy5zZWxlY3RhYmxlID09PSAnc2luZ2xlJyAmJiBzZWxlY3RlZCkge1xuICAgICAgY29uc3QgaXNTYW1lID0gc2VsZWN0ZWQuaW5kZXggPT09IGRhdGFJbmRleDtcbiAgICAgIGlmIChpc1NhbWUgJiYgIXRoaXMuc3VwcHJlc3NEZXNlbGVjdGlvbikgcmV0dXJuIHRydWU7XG4gICAgICB0aGlzLiNpc0FwcGx5ID0gdHJ1ZTtcbiAgICAgIGlmICh0aGlzLmlzSW5QYWdlKHNlbGVjdGVkLmluZGV4KSkge1xuICAgICAgICBpZiAoIXRoaXMuI2Rlc2VsZWN0SW5QYWdlKHRoaXMucGFnZUluZGV4KHNlbGVjdGVkLmluZGV4KSBhcyBudW1iZXIpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLmRlc2VsZWN0KHNlbGVjdGVkLmluZGV4KSkgcmV0dXJuIGZhbHNlO1xuICAgICAgaWYgKGlzU2FtZSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLiNpdGVtQnlJbmRleChpbmRleCk7XG4gICAgY29uc3QgY2I6IGFueSA9IGl0ZW0/LnF1ZXJ5U2VsZWN0b3IoJy5saXN0LWl0ZW0tY2hlY2tib3gnKTtcbiAgICBjb25zdCBrZXkgPSB0aGlzLnNlbGVjdGFibGUgPT09ICdzaW5nbGUnID8gJ3NlbGVjdGVkSXRlbScgOiAnc2VsZWN0ZWRJdGVtcyc7XG4gICAgY29uc3QgYXJncyA9IHsgaXRlbSwgaW5kZXgsIGRhdGFJbmRleCwgZGF0YTogdGhpcy5kYXRhW2luZGV4XSB9Oy8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICB0aGlzLiNpc1RhcmdldENoZWNrYm94ID0gZmFsc2U7XG4gICAgaWYgKCF0aGlzLnRyaWdnZXJWZXRvYWJsZUV2ZW50KCdiZWZvcmVzZWxlY3RlZCcsIHsgLi4uYXJncywgW2tleV06IHRoaXMuc2VsZWN0ZWQgfSkpIHtcbiAgICAgIHRoaXMuI3NldENoZWNrYm94KGl0ZW0sIGZhbHNlKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy5kYXRhW2luZGV4XS5pdGVtU2VsZWN0ZWQgPSB0cnVlO1xuXG4gICAgaWYgKGNiKSBjYi5jaGVja2VkID0gdHJ1ZTtcbiAgICBpdGVtPy5zZXRBdHRyaWJ1dGUoJ3NlbGVjdGVkJywgJycpO1xuICAgIGlmICh0aGlzLnNlbGVjdGFibGUgPT09ICdtaXhlZCcpIGl0ZW0/LnNldEF0dHJpYnV0ZSgnaGlkZS1zZWxlY3RlZC1jb2xvcicsICcnKTtcbiAgICB0aGlzLiN0cmlnZ2VyRXZlbnQoJ3NlbGVjdGVkJywgeyAuLi5hcmdzLCBba2V5XTogdGhpcy5zZWxlY3RlZCB9KTtcbiAgICB0aGlzLmZvY3VzTGkoaXRlbSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgYSBsaXN0IGl0ZW0gdG8gYmUgZGVzZWxlY3RlZCwgaW4gY3VycmVudCBwYWdlIGFuZCBkYXRhLlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggdGhlIHplcm8gYmFzZWQgaW5kZXguXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBJcyB2ZXRvLlxuICAgKi9cbiAgI2Rlc2VsZWN0SW5QYWdlKGluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5kYXRhPy5baW5kZXhdPy5kaXNhYmxlZCkgcmV0dXJuIHRydWU7XG5cbiAgICBjb25zdCBzZWxlY3RlZDogYW55ID0gdGhpcy5zZWxlY3RlZDtcbiAgICBpZiAoIXNlbGVjdGVkIHx8ICgvXihtdWx0aXBsZXxtaXhlZCkkL2cudGVzdChTdHJpbmcodGhpcy5zZWxlY3RhYmxlKSkgJiYgIXNlbGVjdGVkLmxlbmd0aCkpIHJldHVybiB0cnVlO1xuXG4gICAgaWYgKHRoaXMuc2VsZWN0YWJsZSA9PT0gJ3NpbmdsZScpIHtcbiAgICAgIGlmICh0aGlzLiNpc0FwcGx5KSB0aGlzLiNpc0FwcGx5ID0gZmFsc2U7XG4gICAgICBlbHNlIGlmICh0aGlzLmRhdGFJbmRleChpbmRleCkgPT09IHNlbGVjdGVkLmluZGV4ICYmICF0aGlzLnN1cHByZXNzRGVzZWxlY3Rpb24pIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaXRlbSA9IHRoaXMuI2l0ZW1CeUluZGV4KGluZGV4KTtcbiAgICBjb25zdCBkYXRhSW5kZXggPSB0aGlzLmRhdGFJbmRleChpbmRleCk7XG4gICAgY29uc3QgY2I6IGFueSA9IGl0ZW0/LnF1ZXJ5U2VsZWN0b3IoJy5saXN0LWl0ZW0tY2hlY2tib3gnKTtcbiAgICBjb25zdCBrZXkgPSB0aGlzLnNlbGVjdGFibGUgPT09ICdzaW5nbGUnID8gJ3NlbGVjdGVkSXRlbScgOiAnc2VsZWN0ZWRJdGVtcyc7XG4gICAgY29uc3QgYXJncyA9IHsgaXRlbSwgaW5kZXgsIGRhdGFJbmRleCwgZGF0YTogdGhpcy5kYXRhW2luZGV4XSB9Oy8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICB0aGlzLiNpc1RhcmdldENoZWNrYm94ID0gZmFsc2U7XG4gICAgaWYgKCF0aGlzLnRyaWdnZXJWZXRvYWJsZUV2ZW50KCdiZWZvcmVkZXNlbGVjdGVkJywgeyAuLi5hcmdzLCBba2V5XTogdGhpcy5zZWxlY3RlZCB9KSkge1xuICAgICAgdGhpcy4jc2V0Q2hlY2tib3goaXRlbSwgdHJ1ZSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGRlbGV0ZSB0aGlzLmRhdGFbaW5kZXhdLml0ZW1TZWxlY3RlZDtcblxuICAgIGlmIChjYikgY2IuY2hlY2tlZCA9IGZhbHNlO1xuICAgIGl0ZW0/LnJlbW92ZUF0dHJpYnV0ZSgnc2VsZWN0ZWQnKTtcbiAgICBpdGVtPy5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGUtc2VsZWN0ZWQtY29sb3InKTtcbiAgICB0aGlzLiN0cmlnZ2VyRXZlbnQoJ2Rlc2VsZWN0ZWQnLCB7IC4uLmFyZ3MsIFtrZXldOiB0aGlzLnNlbGVjdGVkIH0pO1xuICAgIHRoaXMuZm9jdXNMaShpdGVtKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBhIGxpc3QgaXRlbSB0byBiZSBzZWxlY3RlZCwgaW4gZGF0YXNldC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGRhdGFJbmRleCB0aGUgemVybyBiYXNlZCBkYXRhSW5kZXguXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBJcyB2ZXRvLlxuICAgKi9cbiAgc2VsZWN0KGRhdGFJbmRleDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuZHM/LltkYXRhSW5kZXhdPy5kaXNhYmxlZCkgcmV0dXJuIHRydWU7XG5cbiAgICBpZiAodGhpcy5pc0luUGFnZShkYXRhSW5kZXgpKSB7XG4gICAgICByZXR1cm4gdGhpcy4jc2VsZWN0SW5QYWdlKHRoaXMucGFnZUluZGV4KGRhdGFJbmRleCkgYXMgbnVtYmVyKTtcbiAgICB9XG5cbiAgICBjb25zdCBzZWxlY3RlZDogYW55ID0gdGhpcy5zZWxlY3RlZDtcblxuICAgIGlmICh0aGlzLnNlbGVjdGFibGUgPT09ICdzaW5nbGUnICYmIHNlbGVjdGVkKSB7XG4gICAgICBjb25zdCBpc1NhbWUgPSBzZWxlY3RlZC5pbmRleCA9PT0gZGF0YUluZGV4O1xuICAgICAgaWYgKGlzU2FtZSAmJiAhdGhpcy5zdXBwcmVzc0Rlc2VsZWN0aW9uKSByZXR1cm4gdHJ1ZTtcbiAgICAgIHRoaXMuI2lzQXBwbHkgPSB0cnVlO1xuICAgICAgaWYgKHRoaXMuaXNJblBhZ2Uoc2VsZWN0ZWQuaW5kZXgpKSB7XG4gICAgICAgIGlmICghdGhpcy4jZGVzZWxlY3RJblBhZ2UodGhpcy5wYWdlSW5kZXgoc2VsZWN0ZWQuaW5kZXgpIGFzIG51bWJlcikpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuZGVzZWxlY3Qoc2VsZWN0ZWQuaW5kZXgpKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoaXNTYW1lKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBrZXkgPSB0aGlzLnNlbGVjdGFibGUgPT09ICdzaW5nbGUnID8gJ3NlbGVjdGVkSXRlbScgOiAnc2VsZWN0ZWRJdGVtcyc7XG4gICAgY29uc3QgYXJncyA9IHsgZGF0YUluZGV4LCBkYXRhOiB0aGlzLmRzW2RhdGFJbmRleF0gfTtcbiAgICBpZiAoIXRoaXMudHJpZ2dlclZldG9hYmxlRXZlbnQoJ2JlZm9yZXNlbGVjdGVkJywgeyAuLi5hcmdzLCBba2V5XTogdGhpcy5zZWxlY3RlZCB9KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLmRzW2RhdGFJbmRleF0uaXRlbVNlbGVjdGVkID0gdHJ1ZTtcbiAgICB0aGlzLiN0cmlnZ2VyRXZlbnQoJ3NlbGVjdGVkJywgeyAuLi5hcmdzLCBba2V5XTogdGhpcy5zZWxlY3RlZCB9KTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBhIGxpc3QgaXRlbSB0byBiZSBkZXNlbGVjdGVkLCBpbiBkYXRhc2V0LlxuICAgKiBAcGFyYW0ge251bWJlcn0gZGF0YUluZGV4IHRoZSB6ZXJvIGJhc2VkIGRhdGFJbmRleC5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IEZhbHNlLCBpZiB2ZXRvLlxuICAgKi9cbiAgZGVzZWxlY3QoZGF0YUluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5kcz8uW2RhdGFJbmRleF0/LmRpc2FibGVkKSByZXR1cm4gdHJ1ZTtcblxuICAgIGNvbnN0IHNlbGVjdGVkOiBhbnkgPSB0aGlzLnNlbGVjdGVkO1xuICAgIGlmICghc2VsZWN0ZWQgfHwgKC9eKG11bHRpcGxlfG1peGVkKSQvZy50ZXN0KFN0cmluZyh0aGlzLnNlbGVjdGFibGUpKSAmJiAhc2VsZWN0ZWQubGVuZ3RoKSkgcmV0dXJuIHRydWU7XG5cbiAgICBpZiAodGhpcy5pc0luUGFnZShkYXRhSW5kZXgpKSB7XG4gICAgICByZXR1cm4gdGhpcy4jZGVzZWxlY3RJblBhZ2UodGhpcy5wYWdlSW5kZXgoZGF0YUluZGV4KSBhcyBhbnkpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNlbGVjdGFibGUgPT09ICdzaW5nbGUnKSB7XG4gICAgICBpZiAodGhpcy4jaXNBcHBseSkgdGhpcy4jaXNBcHBseSA9IGZhbHNlO1xuICAgICAgZWxzZSBpZiAoZGF0YUluZGV4ID09PSBzZWxlY3RlZC5pbmRleCAmJiAhdGhpcy5zdXBwcmVzc0Rlc2VsZWN0aW9uKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGtleSA9IHRoaXMuc2VsZWN0YWJsZSA9PT0gJ3NpbmdsZScgPyAnc2VsZWN0ZWRJdGVtJyA6ICdzZWxlY3RlZEl0ZW1zJztcbiAgICBjb25zdCBhcmdzID0geyBkYXRhSW5kZXgsIGRhdGE6IHRoaXMuZHNbZGF0YUluZGV4XSB9O1xuICAgIGlmICghdGhpcy50cmlnZ2VyVmV0b2FibGVFdmVudCgnYmVmb3JlZGVzZWxlY3RlZCcsIHsgLi4uYXJncywgW2tleV06IHRoaXMuc2VsZWN0ZWQgfSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZGVsZXRlIHRoaXMuZHNbZGF0YUluZGV4XS5pdGVtU2VsZWN0ZWQ7XG4gICAgdGhpcy4jdHJpZ2dlckV2ZW50KCdkZXNlbGVjdGVkJywgeyAuLi5hcmdzLCBba2V5XTogdGhpcy5zZWxlY3RlZCB9KTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBhIGFsbCBsaXN0IGl0ZW1zIHRvIGJlIHNlbGVjdGVkLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIHNlbGVjdEFsbCgpOiB2b2lkIHtcbiAgICB0aGlzLnRvZ2dsZUFsbCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBhIGFsbCBsaXN0IGl0ZW1zIHRvIGJlIGRlc2VsZWN0ZWQuXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgZGVzZWxlY3RBbGwoKTogdm9pZCB7XG4gICAgdGhpcy50b2dnbGVBbGwodHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGFsbCBsaXN0IGl0ZW1zIHRvIGJlIHNlbGVjdGVkIG9yIGRlc2VsZWN0ZWQuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNEZXNlbGVjdCBJZiB0cnVlIHdpbGwgZGVzZWxlY3QgYWxsIGl0ZW1zLCBvdGhlcndpc2Ugc2VsZWN0IGFsbC5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICB0b2dnbGVBbGwoaXNEZXNlbGVjdD86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBjb25zdCBhY3Rpb24gPSBpc0Rlc2VsZWN0ID8gJ2Rlc2VsZWN0JyA6ICdzZWxlY3QnO1xuICAgIGlmICh0aGlzLnNlbGVjdGFibGUpIHtcbiAgICAgIGNvbnN0IHNlbGVjdGVkOiBhbnkgPSB0aGlzLnNlbGVjdGVkO1xuICAgICAgbGV0IGtleTogYW55O1xuICAgICAgbGV0IGxlbiA9IDA7XG5cbiAgICAgIC8vIFNpbmdsZVxuICAgICAgaWYgKHRoaXMuc2VsZWN0YWJsZSA9PT0gJ3NpbmdsZScpIHtcbiAgICAgICAga2V5ID0gJ3NlbGVjdGVkSXRlbSc7XG4gICAgICAgIGxlbiA9IHNlbGVjdGVkID8gMSA6IDA7XG4gICAgICAgIGlmIChpc0Rlc2VsZWN0ICYmIGxlbikgdGhpc1thY3Rpb25dKHNlbGVjdGVkLmluZGV4KTtcbiAgICAgICAgaWYgKCFpc0Rlc2VsZWN0ICYmICFsZW4pIHRoaXNbYWN0aW9uXSgwKTtcbiAgICAgIH1cblxuICAgICAgLy8gTXVsdGlwbGUgb3IgTWl4ZWRcbiAgICAgIGlmICgvbXVsdGlwbGV8bWl4ZWQvZy50ZXN0KHRoaXMuc2VsZWN0YWJsZSkpIHtcbiAgICAgICAga2V5ID0gJ3NlbGVjdGVkSXRlbXMnO1xuICAgICAgICBsZW4gPSBzZWxlY3RlZC5sZW5ndGg7XG4gICAgICAgIHRoaXMuZHM/LmZvckVhY2goKGQ6IGFueSwgaTogbnVtYmVyKSA9PiB0aGlzW2FjdGlvbl0oaSkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoKHRoaXMuc2VsZWN0ZWQgYXMgYW55KT8ubGVuZ3RoICE9PSBsZW4pIHtcbiAgICAgICAgdGhpcy4jdHJpZ2dlckV2ZW50KCdzZWxlY3Rpb25jaGFuZ2VkJywgeyBba2V5XTogdGhpcy5zZWxlY3RlZCB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGRhdGEgZm9yIGxpc3QgaXRlbVxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGl0ZW0gbGlzdCBpdGVtXG4gICAqIEByZXR1cm5zIHthbnl9IGRhdGEgb2JqZWN0XG4gICAqL1xuICBnZXRMaXN0SXRlbURhdGEoaXRlbT86IEVsZW1lbnQgfCBudWxsKSB7XG4gICAgY29uc3QgZGF0YUlkeCA9IGl0ZW0/LmdldEF0dHJpYnV0ZSgnaW5kZXgnKTtcbiAgICByZXR1cm4gZGF0YUlkeCA/IHRoaXMuZGF0YVtkYXRhSWR4XSA6IHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiAjZm9jdXNlZExpSW5kZXhcbiAgICogQHJldHVybnMge2FueX0gZm9jdXNlZExpSW5kZXhcbiAgICovXG4gIGdldEZvY3VzZWRMaUluZGV4KCk6IGFueSB7XG4gICAgcmV0dXJuIHRoaXMuI2ZvY3VzZWRMaUluZGV4O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhbGwgc2VsZWN0ZWQgTGkgaW5kZXhlc1xuICAgKiBAcmV0dXJucyB7YW55fSBMaXN0IG9mIHNlbGVjdGVkIGxpIGluZGV4XG4gICAqL1xuICBnZXRBbGxTZWxlY3RlZExpSW5kZXgoKTogbnVtYmVyW10ge1xuICAgIGNvbnN0IGxpc3RPZkluZGV4OiBudW1iZXJbXSA9IFtdO1xuICAgIHRoaXMuY29udGFpbmVyPy5xdWVyeVNlbGVjdG9yQWxsPElkc1N3YXBwYWJsZUl0ZW0+KCdpZHMtc3dhcHBhYmxlLWl0ZW1bc2VsZWN0ZWRdJylcbiAgICAgIC5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIGxpc3RPZkluZGV4LnB1c2goKyhpdGVtLmdldEF0dHJpYnV0ZSgnaW5kZXgnKSA/PyAtMSkpO1xuICAgICAgfSk7XG5cbiAgICByZXR1cm4gbGlzdE9mSW5kZXg7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/ids-list-view/ids-list-view.ts\n");

/***/ }),

/***/ "./src/components/ids-trigger-field/ids-trigger-field.ts":
/*!***************************************************************!*\
  !*** ./src/components/ids-trigger-field/ids-trigger-field.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ IdsTriggerField)\n/* harmony export */ });\n/* harmony import */ var _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/ids-attributes */ \"./src/core/ids-attributes.ts\");\n/* harmony import */ var _core_ids_decorators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/ids-decorators */ \"./src/core/ids-decorators.ts\");\n/* harmony import */ var _utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/ids-string-utils/ids-string-utils */ \"./src/utils/ids-string-utils/ids-string-utils.ts\");\n/* harmony import */ var _utils_ids_xss_utils_ids_xss_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/ids-xss-utils/ids-xss-utils */ \"./src/utils/ids-xss-utils/ids-xss-utils.ts\");\n/* harmony import */ var _ids_input_ids_input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ids-input/ids-input */ \"./src/components/ids-input/ids-input.ts\");\n/* harmony import */ var _ids_trigger_button__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ids-trigger-button */ \"./src/components/ids-trigger-field/ids-trigger-button.ts\");\n/* harmony import */ var _ids_trigger_field_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ids-trigger-field.scss */ \"./src/components/ids-trigger-field/ids-trigger-field.scss\");\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __decorateClass = (decorators, target, key, kind) => {\n  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key) : target;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--)\n    if (decorator = decorators[i])\n      result = (kind ? decorator(target, key, result) : decorator(result)) || result;\n  if (kind && result)\n    __defProp(target, key, result);\n  return result;\n};\n\n\n\n\n\n\n\nlet IdsTriggerField = class extends _ids_input_ids_input__WEBPACK_IMPORTED_MODULE_4__[\"default\"] {\n  /**\n   * Call the constructor and then initialize\n   */\n  constructor() {\n    super();\n  }\n  /**\n   * Get a list of element dependencies for this component\n   * @returns {object} of elements\n   */\n  get elements() {\n    return {\n      content: this.container?.querySelector(\".ids-trigger-field-content\"),\n      label: this.container?.querySelector(\"label\"),\n      text: this.container?.querySelector(\"ids-text\")\n    };\n  }\n  /**\n   * Custom Element `connectedCallback` implementation\n   * @returns {void}\n   */\n  connectedCallback() {\n    super.connectedCallback();\n    this.#attachTriggerButtonEvents();\n    this.#setFieldHeight();\n  }\n  /**\n   * Return the attributes we handle as getters/setters\n   * @returns {Array} The attributes in an array\n   */\n  static get attributes() {\n    return [\n      ...super.attributes,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.FORMAT,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.TABBABLE\n    ];\n  }\n  /**\n   * Push color variant to the container element\n   * @returns {void}\n   */\n  onColorVariantRefresh() {\n    this.buttons.forEach((btn) => {\n      btn.colorVariant = this.colorVariant;\n    });\n  }\n  /**\n   * Creates the Template for rendering an IdsTriggerField's contents\n   * @returns {string} containing the template\n   */\n  template() {\n    this.templateHostAttributes();\n    const {\n      ariaLabel,\n      containerClass,\n      inputClass,\n      inputState,\n      labelHtml,\n      placeholder,\n      type,\n      value\n    } = this.templateVariables();\n    return `<div class=\"ids-trigger-field ${containerClass}\" part=\"container\">\n      ${labelHtml}\n      <div class=\"field-container\" part=\"field-container\">\n        <slot name=\"trigger-start\"></slot>\n        <slot class=\"content-area\" part=\"content-area\"></slot>\n        <input\n          part=\"input\"\n          id=\"${this.id}-input\"\n          ${type}${inputClass}${placeholder}${inputState}\n          ${ariaLabel}\n          ${value}\n          ></input>\n        <slot name=\"trigger-end\"></slot>\n        <slot name=\"loading-indicator\"></slot>\n      </div>\n      ${this.autocomplete ? `\n        <ids-popup\n          type=\"dropdown\"\n          align=\"bottom, left\"\n          align-target=\"#${this.id}-input\"\n          part=\"popup\"\n        >\n          <ids-list-box slot=\"content\" size=\"${this.size}\"></ids-list-box>\n        </ids-popup>` : \"\"}\n    </div>`;\n  }\n  /**\n   * @readonly\n   * @returns {Array<HTMLElement>} containing references to slotted IdsTriggerButtons on this component\n   */\n  get buttons() {\n    return [...this.querySelectorAll(\"ids-trigger-button\")];\n  }\n  /**\n   * @param {boolean | string} value true if this trigger field's buttons should be made accessible using the tab key\n   */\n  set tabbable(value) {\n    const newValue = (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_2__.stringToBool)(value);\n    if (newValue) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.TABBABLE, `${(0,_utils_ids_xss_utils_ids_xss_utils__WEBPACK_IMPORTED_MODULE_3__.stripHTML)(`${value}`)}`);\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.TABBABLE);\n    }\n    this.buttons.forEach((button) => {\n      button.tabbable = newValue;\n    });\n  }\n  /**\n   * @returns {boolean} true if this trigger field's buttons are accessible using the tab key\n   */\n  get tabbable() {\n    return (0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_2__.stringToBool)(this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.TABBABLE));\n  }\n  /**\n   * Sets the disabled attribute\n   * @param {boolean | string} d string value from the disabled attribute\n   */\n  set disabled(d) {\n    super.disabled = d;\n    if ((0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_2__.stringToBool)(d)) {\n      this.readonly = false;\n      super.readonly = false;\n      this.buttons.forEach((btn) => {\n        btn.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.DISABLED, \"\");\n        btn.readonly = false;\n      });\n    } else {\n      this.buttons.forEach((btn) => {\n        btn.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.DISABLED);\n      });\n    }\n  }\n  get disabled() {\n    return super.disabled;\n  }\n  /**\n   * Sets the readonly attribute\n   * @param {string} r string value from the read only attribute\n   */\n  set readonly(r) {\n    super.readonly = r;\n    if ((0,_utils_ids_string_utils_ids_string_utils__WEBPACK_IMPORTED_MODULE_2__.stringToBool)(r)) {\n      this.buttons.forEach((btn) => {\n        btn.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.READONLY, \"\");\n        btn.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.DISABLED);\n      });\n    } else {\n      this.buttons.forEach((btn) => {\n        btn.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.READONLY);\n      });\n    }\n  }\n  get readonly() {\n    return super.readonly;\n  }\n  /**\n   * Set format for date, time\n   * @param {string} val date, time format\n   */\n  set format(val) {\n    if (val) {\n      this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.FORMAT, val);\n    } else {\n      this.removeAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.FORMAT);\n    }\n  }\n  /**\n   * Return format\n   * @returns {string} return date format\n   */\n  get format() {\n    return this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.FORMAT);\n  }\n  /**\n   * Establish Internal Event Handlers\n   * @private\n   */\n  #attachTriggerButtonEvents() {\n    this.onEvent(\"click.trigger-button\", this, (e) => {\n      const btn = e.target;\n      if (btn)\n        this.trigger();\n    });\n  }\n  /**\n   * Set field height and compact attributes\n   * @private\n   * @returns {void}\n   */\n  #setFieldHeight() {\n    const setAttr = (btn, attr, val) => {\n      if (this.hasAttribute(attr))\n        btn?.setAttribute(attr, val);\n      else\n        btn?.removeAttribute(attr);\n    };\n    this.buttons?.forEach((btn) => {\n      setAttr(btn, _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.COMPACT, \"\");\n      setAttr(btn, _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.FIELD_HEIGHT, this.fieldHeight);\n    });\n  }\n  /**\n   * Updates trigger buttons when the trigger field's fieldHeight property is updated\n   * @param {string} val the new field height setting\n   */\n  onFieldHeightChange(val) {\n    this.buttons.forEach((btn) => {\n      if (val) {\n        const attr = val === \"compact\" ? { name: \"compact\", val: \"\" } : { name: \"field-height\", val };\n        btn.setAttribute(attr.name, attr.val);\n      } else {\n        btn.removeAttribute(\"compact\");\n        btn.removeAttribute(\"field-height\");\n      }\n    });\n  }\n  /**\n   * Fire the trigger event and action.\n   */\n  trigger() {\n    let canTrigger = true;\n    const response = (veto) => {\n      canTrigger = !!veto;\n    };\n    this.triggerEvent(\"beforetriggerclicked\", this, { detail: { elem: this, response } });\n    if (!canTrigger) {\n      return;\n    }\n    this.triggerEvent(\"triggerclicked\", this, { detail: { elem: this } });\n  }\n};\nIdsTriggerField = __decorateClass([\n  (0,_core_ids_decorators__WEBPACK_IMPORTED_MODULE_1__.customElement)(\"ids-trigger-field\"),\n  (0,_core_ids_decorators__WEBPACK_IMPORTED_MODULE_1__.scss)(_ids_trigger_field_scss__WEBPACK_IMPORTED_MODULE_6__[\"default\"])\n], IdsTriggerField);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9pZHMtdHJpZ2dlci1maWVsZC9pZHMtdHJpZ2dlci1maWVsZC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTJCO0FBQ1M7QUFDUDtBQUNIO0FBRUw7QUFFZDtBQUVZO0FBWW5CLElBQXFCLGtCQUFyQixjQUE2Qyw0REFBUSxDQUFDO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJcEQsY0FBYztBQUNaLFVBQU07QUFBQSxFQUNSO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLElBQUksV0FBVztBQUNiLFdBQU87QUFBQSxNQUNMLFNBQVMsS0FBSyxXQUFXLGNBQWMsNEJBQTRCO0FBQUEsTUFDbkUsT0FBTyxLQUFLLFdBQVcsY0FBYyxPQUFPO0FBQUEsTUFDNUMsTUFBTSxLQUFLLFdBQVcsY0FBYyxVQUFVO0FBQUEsSUFDaEQ7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLG9CQUFvQjtBQUNsQixVQUFNLGtCQUFrQjtBQUN4QixTQUFLLDJCQUEyQjtBQUNoQyxTQUFLLGdCQUFnQjtBQUFBLEVBQ3ZCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLFdBQVcsYUFBYTtBQUN0QixXQUFPO0FBQUEsTUFDTCxHQUFHLE1BQU07QUFBQSxNQUNULG1FQUFpQjtBQUFOLE1BQ1gscUVBQW1CO0FBQVIsSUFDYjtBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsd0JBQThCO0FBQzVCLFNBQUssUUFBUSxRQUFRLENBQUMsUUFBUTtBQUFFLFVBQUksZUFBZSxLQUFLO0FBQUEsSUFBYyxDQUFDO0FBQUEsRUFDekU7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsV0FBVztBQUNULFNBQUssdUJBQXVCO0FBQzVCLFVBQU07QUFBQSxNQUNKO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLElBQ0YsSUFBSSxLQUFLLGtCQUFrQjtBQUUzQixXQUFPLGlDQUFpQztBQUFBLFFBQ3BDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLGdCQU1RLEtBQUs7QUFBQSxZQUNULE9BQU8sYUFBYSxjQUFjO0FBQUEsWUFDbEM7QUFBQSxZQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxRQUtKLEtBQUssZUFBZTtBQUFBO0FBQUE7QUFBQTtBQUFBLDJCQUlELEtBQUs7QUFBQTtBQUFBO0FBQUEsK0NBR2UsS0FBSztBQUFBLHdCQUM1QjtBQUFBO0FBQUEsRUFFdEI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsSUFBSSxVQUFVO0FBQ1osV0FBTyxDQUFDLEdBQUcsS0FBSyxpQkFBbUMsb0JBQW9CLENBQUM7QUFBQSxFQUMxRTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsSUFBSSxTQUFTLE9BQXlCO0FBQ3BDLFVBQU0sV0FBVyxzRkFBWSxDQUFDLEtBQUs7QUFFbkMsUUFBSSxVQUFVO0FBQ1osV0FBSyxhQUFhLHFFQUFtQixFQUFFLEdBQUcsNkVBQVMsQ0FBQyxHQUFHLE9BQU8sR0FBRztBQUFBLElBQ25FLE9BQU87QUFDTCxXQUFLLGdCQUFnQixxRUFBbUI7QUFBQSxJQUMxQztBQUVBLFNBQUssUUFBUSxRQUFRLENBQUMsV0FBVztBQUMvQixhQUFPLFdBQVc7QUFBQSxJQUNwQixDQUFDO0FBQUEsRUFDSDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsSUFBSSxXQUFvQjtBQUN0QixXQUFPLHNGQUFZLENBQUMsS0FBSyxhQUFhLHFFQUFtQixDQUFDO0FBQUEsRUFDNUQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsSUFBSSxTQUFTLEdBQXFCO0FBQ2hDLFVBQU0sV0FBVztBQUNqQixRQUFJLHNGQUFZLENBQUMsQ0FBQyxHQUFHO0FBQ25CLFdBQUssV0FBVztBQUNoQixZQUFNLFdBQVc7QUFFakIsV0FBSyxRQUFRLFFBQVEsQ0FBQyxRQUFRO0FBQzVCLFlBQUksYUFBYSxxRUFBbUIsRUFBRSxFQUFFO0FBQ3hDLFlBQUksV0FBVztBQUFBLE1BQ2pCLENBQUM7QUFBQSxJQUNILE9BQU87QUFDTCxXQUFLLFFBQVEsUUFBUSxDQUFDLFFBQVE7QUFDNUIsWUFBSSxnQkFBZ0IscUVBQW1CO0FBQUEsTUFDekMsQ0FBQztBQUFBLElBQ0g7QUFBQSxFQUNGO0FBQUEsRUFFQSxJQUFJLFdBQW9CO0FBQ3RCLFdBQU8sTUFBTTtBQUFBLEVBQ2Y7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsSUFBSSxTQUFTLEdBQXFCO0FBQ2hDLFVBQU0sV0FBVztBQUVqQixRQUFJLHNGQUFZLENBQUMsQ0FBQyxHQUFHO0FBQ25CLFdBQUssUUFBUSxRQUFRLENBQUMsUUFBUTtBQUM1QixZQUFJLGFBQWEscUVBQW1CLEVBQUUsRUFBRTtBQUN4QyxZQUFJLGdCQUFnQixxRUFBbUI7QUFBQSxNQUN6QyxDQUFDO0FBQUEsSUFDSCxPQUFPO0FBQ0wsV0FBSyxRQUFRLFFBQVEsQ0FBQyxRQUFRO0FBQzVCLFlBQUksZ0JBQWdCLHFFQUFtQjtBQUFBLE1BQ3pDLENBQUM7QUFBQSxJQUNIO0FBQUEsRUFDRjtBQUFBLEVBRUEsSUFBSSxXQUFvQjtBQUN0QixXQUFPLE1BQU07QUFBQSxFQUNmO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLElBQUksT0FBTyxLQUFvQjtBQUM3QixRQUFJLEtBQUs7QUFDUCxXQUFLLGFBQWEsbUVBQWlCLEVBQUUsR0FBRztBQUFBLElBQzFDLE9BQU87QUFDTCxXQUFLLGdCQUFnQixtRUFBaUI7QUFBQSxJQUN4QztBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsSUFBSSxTQUF3QjtBQUMxQixXQUFPLEtBQUssYUFBYSxtRUFBaUI7QUFBQSxFQUM1QztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSw2QkFBNkI7QUFDM0IsU0FBSyxRQUFRLHdCQUF3QixNQUFNLENBQUMsTUFBbUI7QUFDN0QsWUFBTSxNQUFPLEVBQUU7QUFDZixVQUFJO0FBQUssYUFBSyxRQUFRO0FBQUEsSUFDeEIsQ0FBQztBQUFBLEVBQ0g7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPQSxrQkFBd0I7QUFDdEIsVUFBTSxVQUFVLENBQUMsS0FBdUIsTUFBYyxRQUFnQjtBQUNwRSxVQUFJLEtBQUssYUFBYSxJQUFJO0FBQUcsYUFBSyxhQUFhLE1BQU0sR0FBRztBQUFBO0FBQ25ELGFBQUssZ0JBQWdCLElBQUk7QUFBQSxJQUNoQztBQUVBLFNBQUssU0FBUyxRQUFRLENBQUMsUUFBUTtBQUM3QixjQUFRLEtBQUssb0VBQWtCLEVBQUUsRUFBRTtBQUNuQyxjQUFRLEtBQUsseUVBQXVCLEVBQUUsS0FBSyxXQUFXO0FBQUEsSUFDeEQsQ0FBQztBQUFBLEVBQ0g7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsb0JBQW9CLEtBQW1CO0FBQ3JDLFNBQUssUUFBUSxRQUFRLENBQUMsUUFBUTtBQUM1QixVQUFJLEtBQUs7QUFDUCxjQUFNLE9BQU8sUUFBUSxZQUFZLEVBQUUsTUFBTSxXQUFXLEtBQUssR0FBRyxJQUFJLEVBQUUsTUFBTSxnQkFBZ0IsSUFBSTtBQUM1RixZQUFJLGFBQWEsS0FBSyxNQUFNLEtBQUssR0FBRztBQUFBLE1BQ3RDLE9BQU87QUFDTCxZQUFJLGdCQUFnQixTQUFTO0FBQzdCLFlBQUksZ0JBQWdCLGNBQWM7QUFBQSxNQUNwQztBQUFBLElBQ0YsQ0FBQztBQUFBLEVBQ0g7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLFVBQWdCO0FBQ2QsUUFBSSxhQUFhO0FBQ2pCLFVBQU0sV0FBVyxDQUFDLFNBQWM7QUFDOUIsbUJBQWEsQ0FBQyxDQUFDO0FBQUEsSUFDakI7QUFDQSxTQUFLLGFBQWEsd0JBQXdCLE1BQU0sRUFBRSxRQUFRLEVBQUUsTUFBTSxNQUFNLFNBQVMsRUFBRSxDQUFDO0FBRXBGLFFBQUksQ0FBQyxZQUFZO0FBQ2Y7QUFBQSxJQUNGO0FBQ0EsU0FBSyxhQUFhLGtCQUFrQixNQUFNLEVBQUUsUUFBUSxFQUFFLE1BQU0sS0FBSyxFQUFFLENBQUM7QUFBQSxFQUN0RTtBQUNGO0FBN1BxQixrQkFBckI7QUFBQSxFQUZDLG1FQUFhLENBQUMsbUJBQW1CO0FBQUEsRUFDakMsMERBQUksQ0FBQywrREFBTTtBQUFBLEdBQ1MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pZHMtZW50ZXJwcmlzZS13Yy8uL3NyYy9jb21wb25lbnRzL2lkcy10cmlnZ2VyLWZpZWxkL2lkcy10cmlnZ2VyLWZpZWxkLnRzP2ViMWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXR0cmlidXRlcyB9IGZyb20gJy4uLy4uL2NvcmUvaWRzLWF0dHJpYnV0ZXMnO1xuaW1wb3J0IHsgY3VzdG9tRWxlbWVudCwgc2NzcyB9IGZyb20gJy4uLy4uL2NvcmUvaWRzLWRlY29yYXRvcnMnO1xuaW1wb3J0IHsgc3RyaW5nVG9Cb29sIH0gZnJvbSAnLi4vLi4vdXRpbHMvaWRzLXN0cmluZy11dGlscy9pZHMtc3RyaW5nLXV0aWxzJztcbmltcG9ydCB7IHN0cmlwSFRNTCB9IGZyb20gJy4uLy4uL3V0aWxzL2lkcy14c3MtdXRpbHMvaWRzLXhzcy11dGlscyc7XG5cbmltcG9ydCBJZHNJbnB1dCBmcm9tICcuLi9pZHMtaW5wdXQvaWRzLWlucHV0JztcblxuaW1wb3J0ICcuL2lkcy10cmlnZ2VyLWJ1dHRvbic7XG5cbmltcG9ydCBzdHlsZXMgZnJvbSAnLi9pZHMtdHJpZ2dlci1maWVsZC5zY3NzJztcbmltcG9ydCB0eXBlIElkc1RyaWdnZXJCdXR0b24gZnJvbSAnLi9pZHMtdHJpZ2dlci1idXR0b24nO1xuXG4vKipcbiAqIElEUyBUcmlnZ2VyIEZpZWxkIENvbXBvbmVudFxuICogQHR5cGUge0lkc1RyaWdnZXJGaWVsZH1cbiAqIEBpbmhlcml0cyBJZHNJbnB1dFxuICogQHBhcnQgZmllbGQgLSB0aGUgZmllbGQgY29udGFpbmVyXG4gKiBAcGFydCBjb250ZW50IC0gdGhlIGNvbnRlbnQgd2l0aCB0cmlnZ2VyIGJ1dHRvbnMgYW5kIGlucHV0IGVsZW1lbnRcbiAqL1xuQGN1c3RvbUVsZW1lbnQoJ2lkcy10cmlnZ2VyLWZpZWxkJylcbkBzY3NzKHN0eWxlcylcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIElkc1RyaWdnZXJGaWVsZCBleHRlbmRzIElkc0lucHV0IHtcbiAgLyoqXG4gICAqIENhbGwgdGhlIGNvbnN0cnVjdG9yIGFuZCB0aGVuIGluaXRpYWxpemVcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgbGlzdCBvZiBlbGVtZW50IGRlcGVuZGVuY2llcyBmb3IgdGhpcyBjb21wb25lbnRcbiAgICogQHJldHVybnMge29iamVjdH0gb2YgZWxlbWVudHNcbiAgICovXG4gIGdldCBlbGVtZW50cygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29udGVudDogdGhpcy5jb250YWluZXI/LnF1ZXJ5U2VsZWN0b3IoJy5pZHMtdHJpZ2dlci1maWVsZC1jb250ZW50JyksXG4gICAgICBsYWJlbDogdGhpcy5jb250YWluZXI/LnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsJyksXG4gICAgICB0ZXh0OiB0aGlzLmNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcignaWRzLXRleHQnKSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEN1c3RvbSBFbGVtZW50IGBjb25uZWN0ZWRDYWxsYmFja2AgaW1wbGVtZW50YXRpb25cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHRoaXMuI2F0dGFjaFRyaWdnZXJCdXR0b25FdmVudHMoKTtcbiAgICB0aGlzLiNzZXRGaWVsZEhlaWdodCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgYXR0cmlidXRlcyB3ZSBoYW5kbGUgYXMgZ2V0dGVycy9zZXR0ZXJzXG4gICAqIEByZXR1cm5zIHtBcnJheX0gVGhlIGF0dHJpYnV0ZXMgaW4gYW4gYXJyYXlcbiAgICovXG4gIHN0YXRpYyBnZXQgYXR0cmlidXRlcygpIHtcbiAgICByZXR1cm4gW1xuICAgICAgLi4uc3VwZXIuYXR0cmlidXRlcyxcbiAgICAgIGF0dHJpYnV0ZXMuRk9STUFULFxuICAgICAgYXR0cmlidXRlcy5UQUJCQUJMRVxuICAgIF07XG4gIH1cblxuICAvKipcbiAgICogUHVzaCBjb2xvciB2YXJpYW50IHRvIHRoZSBjb250YWluZXIgZWxlbWVudFxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIG9uQ29sb3JWYXJpYW50UmVmcmVzaCgpOiB2b2lkIHtcbiAgICB0aGlzLmJ1dHRvbnMuZm9yRWFjaCgoYnRuKSA9PiB7IGJ0bi5jb2xvclZhcmlhbnQgPSB0aGlzLmNvbG9yVmFyaWFudDsgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyB0aGUgVGVtcGxhdGUgZm9yIHJlbmRlcmluZyBhbiBJZHNUcmlnZ2VyRmllbGQncyBjb250ZW50c1xuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBjb250YWluaW5nIHRoZSB0ZW1wbGF0ZVxuICAgKi9cbiAgdGVtcGxhdGUoKSB7XG4gICAgdGhpcy50ZW1wbGF0ZUhvc3RBdHRyaWJ1dGVzKCk7XG4gICAgY29uc3Qge1xuICAgICAgYXJpYUxhYmVsLFxuICAgICAgY29udGFpbmVyQ2xhc3MsXG4gICAgICBpbnB1dENsYXNzLFxuICAgICAgaW5wdXRTdGF0ZSxcbiAgICAgIGxhYmVsSHRtbCxcbiAgICAgIHBsYWNlaG9sZGVyLFxuICAgICAgdHlwZSxcbiAgICAgIHZhbHVlXG4gICAgfSA9IHRoaXMudGVtcGxhdGVWYXJpYWJsZXMoKTtcblxuICAgIHJldHVybiBgPGRpdiBjbGFzcz1cImlkcy10cmlnZ2VyLWZpZWxkICR7Y29udGFpbmVyQ2xhc3N9XCIgcGFydD1cImNvbnRhaW5lclwiPlxuICAgICAgJHtsYWJlbEh0bWx9XG4gICAgICA8ZGl2IGNsYXNzPVwiZmllbGQtY29udGFpbmVyXCIgcGFydD1cImZpZWxkLWNvbnRhaW5lclwiPlxuICAgICAgICA8c2xvdCBuYW1lPVwidHJpZ2dlci1zdGFydFwiPjwvc2xvdD5cbiAgICAgICAgPHNsb3QgY2xhc3M9XCJjb250ZW50LWFyZWFcIiBwYXJ0PVwiY29udGVudC1hcmVhXCI+PC9zbG90PlxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICBwYXJ0PVwiaW5wdXRcIlxuICAgICAgICAgIGlkPVwiJHt0aGlzLmlkfS1pbnB1dFwiXG4gICAgICAgICAgJHt0eXBlfSR7aW5wdXRDbGFzc30ke3BsYWNlaG9sZGVyfSR7aW5wdXRTdGF0ZX1cbiAgICAgICAgICAke2FyaWFMYWJlbH1cbiAgICAgICAgICAke3ZhbHVlfVxuICAgICAgICAgID48L2lucHV0PlxuICAgICAgICA8c2xvdCBuYW1lPVwidHJpZ2dlci1lbmRcIj48L3Nsb3Q+XG4gICAgICAgIDxzbG90IG5hbWU9XCJsb2FkaW5nLWluZGljYXRvclwiPjwvc2xvdD5cbiAgICAgIDwvZGl2PlxuICAgICAgJHt0aGlzLmF1dG9jb21wbGV0ZSA/IGBcbiAgICAgICAgPGlkcy1wb3B1cFxuICAgICAgICAgIHR5cGU9XCJkcm9wZG93blwiXG4gICAgICAgICAgYWxpZ249XCJib3R0b20sIGxlZnRcIlxuICAgICAgICAgIGFsaWduLXRhcmdldD1cIiMke3RoaXMuaWR9LWlucHV0XCJcbiAgICAgICAgICBwYXJ0PVwicG9wdXBcIlxuICAgICAgICA+XG4gICAgICAgICAgPGlkcy1saXN0LWJveCBzbG90PVwiY29udGVudFwiIHNpemU9XCIke3RoaXMuc2l6ZX1cIj48L2lkcy1saXN0LWJveD5cbiAgICAgICAgPC9pZHMtcG9wdXA+YCA6ICcnfVxuICAgIDwvZGl2PmA7XG4gIH1cblxuICAvKipcbiAgICogQHJlYWRvbmx5XG4gICAqIEByZXR1cm5zIHtBcnJheTxIVE1MRWxlbWVudD59IGNvbnRhaW5pbmcgcmVmZXJlbmNlcyB0byBzbG90dGVkIElkc1RyaWdnZXJCdXR0b25zIG9uIHRoaXMgY29tcG9uZW50XG4gICAqL1xuICBnZXQgYnV0dG9ucygpIHtcbiAgICByZXR1cm4gWy4uLnRoaXMucXVlcnlTZWxlY3RvckFsbDxJZHNUcmlnZ2VyQnV0dG9uPignaWRzLXRyaWdnZXItYnV0dG9uJyldO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbiB8IHN0cmluZ30gdmFsdWUgdHJ1ZSBpZiB0aGlzIHRyaWdnZXIgZmllbGQncyBidXR0b25zIHNob3VsZCBiZSBtYWRlIGFjY2Vzc2libGUgdXNpbmcgdGhlIHRhYiBrZXlcbiAgICovXG4gIHNldCB0YWJiYWJsZSh2YWx1ZTogYm9vbGVhbiB8IHN0cmluZykge1xuICAgIGNvbnN0IG5ld1ZhbHVlID0gc3RyaW5nVG9Cb29sKHZhbHVlKTtcblxuICAgIGlmIChuZXdWYWx1ZSkge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5UQUJCQUJMRSwgYCR7c3RyaXBIVE1MKGAke3ZhbHVlfWApfWApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGVzLlRBQkJBQkxFKTtcbiAgICB9XG5cbiAgICB0aGlzLmJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgICBidXR0b24udGFiYmFibGUgPSBuZXdWYWx1ZTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGlzIHRyaWdnZXIgZmllbGQncyBidXR0b25zIGFyZSBhY2Nlc3NpYmxlIHVzaW5nIHRoZSB0YWIga2V5XG4gICAqL1xuICBnZXQgdGFiYmFibGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHN0cmluZ1RvQm9vbCh0aGlzLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLlRBQkJBQkxFKSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgZGlzYWJsZWQgYXR0cmlidXRlXG4gICAqIEBwYXJhbSB7Ym9vbGVhbiB8IHN0cmluZ30gZCBzdHJpbmcgdmFsdWUgZnJvbSB0aGUgZGlzYWJsZWQgYXR0cmlidXRlXG4gICAqL1xuICBzZXQgZGlzYWJsZWQoZDogYm9vbGVhbiB8IHN0cmluZykge1xuICAgIHN1cGVyLmRpc2FibGVkID0gZDtcbiAgICBpZiAoc3RyaW5nVG9Cb29sKGQpKSB7XG4gICAgICB0aGlzLnJlYWRvbmx5ID0gZmFsc2U7XG4gICAgICBzdXBlci5yZWFkb25seSA9IGZhbHNlO1xuXG4gICAgICB0aGlzLmJ1dHRvbnMuZm9yRWFjaCgoYnRuKSA9PiB7XG4gICAgICAgIGJ0bi5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5ESVNBQkxFRCwgJycpO1xuICAgICAgICBidG4ucmVhZG9ubHkgPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmJ1dHRvbnMuZm9yRWFjaCgoYnRuKSA9PiB7XG4gICAgICAgIGJ0bi5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlcy5ESVNBQkxFRCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBnZXQgZGlzYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHN1cGVyLmRpc2FibGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHJlYWRvbmx5IGF0dHJpYnV0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gciBzdHJpbmcgdmFsdWUgZnJvbSB0aGUgcmVhZCBvbmx5IGF0dHJpYnV0ZVxuICAgKi9cbiAgc2V0IHJlYWRvbmx5KHI6IGJvb2xlYW4gfCBzdHJpbmcpIHtcbiAgICBzdXBlci5yZWFkb25seSA9IHI7XG5cbiAgICBpZiAoc3RyaW5nVG9Cb29sKHIpKSB7XG4gICAgICB0aGlzLmJ1dHRvbnMuZm9yRWFjaCgoYnRuKSA9PiB7XG4gICAgICAgIGJ0bi5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5SRUFET05MWSwgJycpO1xuICAgICAgICBidG4ucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZXMuRElTQUJMRUQpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYnV0dG9ucy5mb3JFYWNoKChidG4pID0+IHtcbiAgICAgICAgYnRuLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGVzLlJFQURPTkxZKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGdldCByZWFkb25seSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gc3VwZXIucmVhZG9ubHk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGZvcm1hdCBmb3IgZGF0ZSwgdGltZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsIGRhdGUsIHRpbWUgZm9ybWF0XG4gICAqL1xuICBzZXQgZm9ybWF0KHZhbDogc3RyaW5nIHwgbnVsbCkge1xuICAgIGlmICh2YWwpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuRk9STUFULCB2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGVzLkZPUk1BVCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBmb3JtYXRcbiAgICogQHJldHVybnMge3N0cmluZ30gcmV0dXJuIGRhdGUgZm9ybWF0XG4gICAqL1xuICBnZXQgZm9ybWF0KCk6IHN0cmluZyB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLkZPUk1BVCk7XG4gIH1cblxuICAvKipcbiAgICogRXN0YWJsaXNoIEludGVybmFsIEV2ZW50IEhhbmRsZXJzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICAjYXR0YWNoVHJpZ2dlckJ1dHRvbkV2ZW50cygpIHtcbiAgICB0aGlzLm9uRXZlbnQoJ2NsaWNrLnRyaWdnZXItYnV0dG9uJywgdGhpcywgKGU6IEN1c3RvbUV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBidG4gPSAoZS50YXJnZXQgYXMgSWRzVHJpZ2dlckJ1dHRvbik7XG4gICAgICBpZiAoYnRuKSB0aGlzLnRyaWdnZXIoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgZmllbGQgaGVpZ2h0IGFuZCBjb21wYWN0IGF0dHJpYnV0ZXNcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICAjc2V0RmllbGRIZWlnaHQoKTogdm9pZCB7XG4gICAgY29uc3Qgc2V0QXR0ciA9IChidG46IElkc1RyaWdnZXJCdXR0b24sIGF0dHI6IHN0cmluZywgdmFsOiBzdHJpbmcpID0+IHtcbiAgICAgIGlmICh0aGlzLmhhc0F0dHJpYnV0ZShhdHRyKSkgYnRuPy5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsKTtcbiAgICAgIGVsc2UgYnRuPy5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgfTtcblxuICAgIHRoaXMuYnV0dG9ucz8uZm9yRWFjaCgoYnRuKSA9PiB7XG4gICAgICBzZXRBdHRyKGJ0biwgYXR0cmlidXRlcy5DT01QQUNULCAnJyk7XG4gICAgICBzZXRBdHRyKGJ0biwgYXR0cmlidXRlcy5GSUVMRF9IRUlHSFQsIHRoaXMuZmllbGRIZWlnaHQpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdHJpZ2dlciBidXR0b25zIHdoZW4gdGhlIHRyaWdnZXIgZmllbGQncyBmaWVsZEhlaWdodCBwcm9wZXJ0eSBpcyB1cGRhdGVkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWwgdGhlIG5ldyBmaWVsZCBoZWlnaHQgc2V0dGluZ1xuICAgKi9cbiAgb25GaWVsZEhlaWdodENoYW5nZSh2YWw6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuYnV0dG9ucy5mb3JFYWNoKChidG4pID0+IHtcbiAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgY29uc3QgYXR0ciA9IHZhbCA9PT0gJ2NvbXBhY3QnID8geyBuYW1lOiAnY29tcGFjdCcsIHZhbDogJycgfSA6IHsgbmFtZTogJ2ZpZWxkLWhlaWdodCcsIHZhbCB9O1xuICAgICAgICBidG4uc2V0QXR0cmlidXRlKGF0dHIubmFtZSwgYXR0ci52YWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnRuLnJlbW92ZUF0dHJpYnV0ZSgnY29tcGFjdCcpO1xuICAgICAgICBidG4ucmVtb3ZlQXR0cmlidXRlKCdmaWVsZC1oZWlnaHQnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaXJlIHRoZSB0cmlnZ2VyIGV2ZW50IGFuZCBhY3Rpb24uXG4gICAqL1xuICB0cmlnZ2VyKCk6IHZvaWQge1xuICAgIGxldCBjYW5UcmlnZ2VyID0gdHJ1ZTtcbiAgICBjb25zdCByZXNwb25zZSA9ICh2ZXRvOiBhbnkpID0+IHtcbiAgICAgIGNhblRyaWdnZXIgPSAhIXZldG87XG4gICAgfTtcbiAgICB0aGlzLnRyaWdnZXJFdmVudCgnYmVmb3JldHJpZ2dlcmNsaWNrZWQnLCB0aGlzLCB7IGRldGFpbDogeyBlbGVtOiB0aGlzLCByZXNwb25zZSB9IH0pO1xuXG4gICAgaWYgKCFjYW5UcmlnZ2VyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMudHJpZ2dlckV2ZW50KCd0cmlnZ2VyY2xpY2tlZCcsIHRoaXMsIHsgZGV0YWlsOiB7IGVsZW06IHRoaXMgfSB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/ids-trigger-field/ids-trigger-field.ts\n");

/***/ }),

/***/ "./src/mixins/ids-pager-mixin/ids-pager-mixin.ts":
/*!*******************************************************!*\
  !*** ./src/mixins/ids-pager-mixin/ids-pager-mixin.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ids_pager_mixin_default)\n/* harmony export */ });\n/* harmony import */ var _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/ids-attributes */ \"./src/core/ids-attributes.ts\");\n/* harmony import */ var _core_ids_data_source__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/ids-data-source */ \"./src/core/ids-data-source.ts\");\n/* harmony import */ var _components_ids_pager_ids_pager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../components/ids-pager/ids-pager */ \"./src/components/ids-pager/ids-pager.ts\");\n/* harmony import */ var _components_ids_button_ids_button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../components/ids-button/ids-button */ \"./src/components/ids-button/ids-button.ts\");\n/* harmony import */ var _components_ids_menu_button_ids_menu_button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../components/ids-menu-button/ids-menu-button */ \"./src/components/ids-menu-button/ids-menu-button.ts\");\n\n\n\n\n\nconst PAGINATION_TYPES = {\n  NONE: \"none\",\n  CLIENT_SIDE: \"client-side\",\n  SERVER_SIDE: \"server-side\",\n  STANDALONE: \"standalone\"\n};\nconst IdsPagerMixin = (superclass) => class extends superclass {\n  /** Reference to the user-provided IdsPager component */\n  #pager;\n  /**\n   * Gets the internal IdsDataSource object\n   * @returns {IdsDataSource} object\n   */\n  datasource = new _core_ids_data_source__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n  constructor(...args) {\n    super(...args);\n  }\n  /**\n   * Set the internal IdsPager component\n   * @param {HTMLElement} pager The pager dom element\n   */\n  set pager(pager) {\n    this.#pager = pager;\n    const pageNumber = Math.max(this.pageNumber || 1, 1);\n    const pageSize = Math.max(this.pageSize || 0, 1);\n    this.datasource.pageSize = pageSize;\n    this.pager.innerHTML = this.pagerTemplate();\n    this.pager.total = this.datasource.total;\n    this.pager.pageNumber = pageNumber;\n    this.pager.pageSize = pageSize;\n    this.#attachEventListeners();\n  }\n  /**\n   * Get the internal IdsPager component\n   * @returns {HTMLElement} the pager dom element\n   */\n  get pager() {\n    return this.#pager || this.querySelector(\"ids-pager\") || document.createElement(\"ids-pager\");\n  }\n  /**\n   * Return the attributes we handle as getters/setters\n   * @private\n   * @returns {Array} The attributes in an array\n   */\n  static get attributes() {\n    return [\n      ...superclass.attributes,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.PAGINATION,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.PAGE_NUMBER,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.PAGE_SIZE,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.PAGE_TOTAL\n    ];\n  }\n  /**\n   * Handle Setting changes of the value has changed by calling the getter\n   * in the extending class.\n   * @param {string} name The property name\n   * @param {string} oldValue The property old value\n   * @param {string} newValue The property new value\n   */\n  attributeChangedCallback(name, oldValue, newValue) {\n    super.attributeChangedCallback(name, oldValue, newValue);\n    if (oldValue === newValue) {\n      return;\n    }\n    const shouldReload = [\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.PAGE_NUMBER,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.PAGE_SIZE,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.PAGE_TOTAL,\n      _core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.PAGINATION\n    ].includes(name);\n    if (shouldReload) {\n      this.connectedCallback();\n    }\n  }\n  /**\n   * Invoked each time the custom element is appended into a document-connected element.\n   * @private\n   */\n  connectedCallback() {\n    super.connectedCallback?.();\n    this.#attachPager();\n  }\n  pagerTemplate() {\n    const pageSize = Math.max(this.pageSize || 0, 1);\n    return `\n      <ids-pager-button first></ids-pager-button>\n      <ids-pager-button previous></ids-pager-button>\n      <ids-pager-input></ids-pager-input>\n      <ids-pager-button next></ids-pager-button>\n      <ids-pager-button last></ids-pager-button>\n      <ids-pager-dropdown slot=\"end\" page-size=\"${pageSize}\"></ids-pager-dropdown>\n    `;\n  }\n  /**\n   * @param {number} pageNumber - a page number to start with\n   * @param {number} pageSize - number of items to return\n   * @returns {Array} the paginated data\n   * @see IdsDataSource.paginate()\n   */\n  paginate(pageNumber = 1, pageSize = 10) {\n    return this.datasource.paginate(pageNumber, pageSize);\n  }\n  /**\n   * Sets the pagination attribute\n   * @param {string} value - none|client-side|standalone\n   */\n  set pagination(value) {\n    this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.PAGINATION, value);\n  }\n  /**\n   * Gets the pagination attribute\n   * @returns {PaginationTypes} default is \"none\"\n   */\n  get pagination() {\n    return this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.PAGINATION) || PAGINATION_TYPES.NONE;\n  }\n  /**\n   * Set the page-number attribute\n   * @param {number} value - new the page-number\n   */\n  set pageNumber(value) {\n    this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.PAGE_NUMBER, String(value));\n    this.pager.pageNumber = value;\n    this.datasource.pageNumber = value;\n  }\n  /**\n   * Get the page-number attribute\n   * @returns {number} - the current page-number\n   */\n  get pageNumber() {\n    return parseInt(this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.PAGE_NUMBER) || \"\") || this.pager.pageNumber || 1;\n  }\n  /**\n   * Set the page-size attribute\n   * @param {number} value - new the page-size\n   */\n  set pageSize(value) {\n    this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.PAGE_SIZE, String(value));\n    this.pager.pageSize = Number(value);\n    this.datasource.pageSize = Number(value);\n  }\n  /**\n   * Get the page-size attribute\n   * @returns {number} - the current page-size\n   */\n  get pageSize() {\n    return parseInt(this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.PAGE_SIZE) || \"\") || this.pager.pageSize || 1;\n  }\n  /**\n   * Set the page-total attribute\n   * @param {number} value - new the page-total\n   */\n  set pageTotal(value) {\n    this.setAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.PAGE_TOTAL, String(value));\n    this.pager.total = value;\n    this.datasource.total = value;\n  }\n  /**\n   * Get the page-total attribute\n   * @returns {number} - the current page-total\n   */\n  get pageTotal() {\n    return parseInt(this.getAttribute(_core_ids_attributes__WEBPACK_IMPORTED_MODULE_0__.attributes.PAGE_TOTAL) || \"\") || this.datasource.total;\n  }\n  /**\n   * Appends IdsPager to this.shadowRoot if pagination is enabled.\n   * @private\n   */\n  #attachPager() {\n    if (!this.pagination || this.pagination === PAGINATION_TYPES.NONE) {\n      this.pager.remove();\n      return;\n    }\n    if (this.pagination === PAGINATION_TYPES.STANDALONE) {\n      return;\n    }\n    const nestedPager = this.querySelector(\"ids-pager\") || this.shadowRoot?.querySelector(\"ids-pager\");\n    if (!nestedPager) {\n      const currentPager = this.pager;\n      this.pager = currentPager;\n      this.container?.after(this.pager);\n    }\n  }\n  #attachEventListeners() {\n    this.offEvent(\"pagenumberchange\", this.pager);\n    this.onEvent(\"pagenumberchange\", this.pager, (event) => {\n      this.pageNumber = Number(event.detail.value);\n    });\n    this.offEvent(\"pagesizechange\", this.pager);\n    this.onEvent(\"pagesizechange\", this.pager, (event) => {\n      this.pageSize = Number(event.detail.value);\n    });\n  }\n};\nvar ids_pager_mixin_default = IdsPagerMixin;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWl4aW5zL2lkcy1wYWdlci1taXhpbi9pZHMtcGFnZXItbWl4aW4udHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTJCO0FBQ0Q7QUFFbkI7QUFDQTtBQUNBO0FBS1AsTUFBTSxtQkFBbUI7QUFBQSxFQUN2QixNQUFNO0FBQUEsRUFDTixhQUFhO0FBQUEsRUFDYixhQUFhO0FBQUEsRUFDYixZQUFZO0FBQ2Q7QUFZQSxNQUFNLGdCQUFnQixDQUF3QixlQUFrQixjQUFjLFdBQVc7QUFBQTtBQUFBLEVBRXZGO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLGFBQWEsSUFBSSw2REFBYSxDQUFDO0FBQUEsRUFFL0IsZUFBZSxNQUFhO0FBQzFCLFVBQU0sR0FBRyxJQUFJO0FBQUEsRUFDZjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxJQUFJLE1BQU0sT0FBWTtBQUNwQixTQUFLLFNBQVM7QUFFZCxVQUFNLGFBQWEsS0FBSyxJQUFJLEtBQUssY0FBYyxHQUFHLENBQUM7QUFDbkQsVUFBTSxXQUFXLEtBQUssSUFBSSxLQUFLLFlBQVksR0FBRyxDQUFDO0FBRS9DLFNBQUssV0FBVyxXQUFXO0FBQzNCLFNBQUssTUFBTSxZQUFZLEtBQUssY0FBYztBQUMxQyxTQUFLLE1BQU0sUUFBUSxLQUFLLFdBQVc7QUFDbkMsU0FBSyxNQUFNLGFBQWE7QUFDeEIsU0FBSyxNQUFNLFdBQVc7QUFFdEIsU0FBSyxzQkFBc0I7QUFBQSxFQUM3QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxJQUFJLFFBQWtCO0FBQ3BCLFdBQU8sS0FBSyxVQUFVLEtBQUssY0FBYyxXQUFXLEtBQUssU0FBUyxjQUFjLFdBQVc7QUFBQSxFQUM3RjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9BLFdBQVcsYUFBYTtBQUN0QixXQUFPO0FBQUEsTUFDTCxHQUFJLFdBQW1CO0FBQUEsTUFDdkIsdUVBQXFCO0FBQVYsTUFDWCx3RUFBc0I7QUFBWCxNQUNYLHNF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QU0sY0FBYyxLQUFLLGNBQWMsV0FBVyxLQUFLLEtBQUssWUFBWSxjQUFjLFdBQVc7QUFDakcsUUFBSSxDQUFDLGFBQWE7QUFDaEIsWUFBTSxlQUFlLEtBQUs7QUFDMUIsV0FBSyxRQUFRO0FBQ2IsV0FBSyxXQUFXLE1BQU0sS0FBSyxLQUFLO0FBQUEsSUFDbEM7QUFBQSxFQUNGO0FBQUEsRUFFQSx3QkFBd0I7QUFDdEIsU0FBSyxTQUFTLG9CQUFvQixLQUFLLEtBQUs7QUFDNUMsU0FBSyxRQUFRLG9CQUFvQixLQUFLLE9BQU8sQ0FBQyxVQUF1QjtBQUNuRSxXQUFLLGFBQWEsT0FBTyxNQUFNLE9BQU8sS0FBSztBQUFBLElBQzdDLENBQUM7QUFFRCxTQUFLLFNBQVMsa0JBQWtCLEtBQUssS0FBSztBQUMxQyxTQUFLLFFBQVEsa0JBQWtCLEtBQUssT0FBTyxDQUFDLFVBQXVCO0FBQ2pFLFdBQUssV0FBVyxPQUFPLE1BQU0sT0FBTyxLQUFLO0FBQUEsSUFDM0MsQ0FBQztBQUFBLEVBQ0g7QUFDRjtBQUVBLElBQU8sMEJBQVEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pZHMtZW50ZXJwcmlzZS13Yy8uL3NyYy9taXhpbnMvaWRzLXBhZ2VyLW1peGluL2lkcy1wYWdlci1taXhpbi50cz82NzA0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGF0dHJpYnV0ZXMgfSBmcm9tICcuLi8uLi9jb3JlL2lkcy1hdHRyaWJ1dGVzJztcbmltcG9ydCBJZHNEYXRhU291cmNlIGZyb20gJy4uLy4uL2NvcmUvaWRzLWRhdGEtc291cmNlJztcblxuaW1wb3J0ICcuLi8uLi9jb21wb25lbnRzL2lkcy1wYWdlci9pZHMtcGFnZXInO1xuaW1wb3J0ICcuLi8uLi9jb21wb25lbnRzL2lkcy1idXR0b24vaWRzLWJ1dHRvbic7XG5pbXBvcnQgJy4uLy4uL2NvbXBvbmVudHMvaWRzLW1lbnUtYnV0dG9uL2lkcy1tZW51LWJ1dHRvbic7XG5pbXBvcnQgeyBFdmVudHNNaXhpbkludGVyZmFjZSB9IGZyb20gJy4uL2lkcy1ldmVudHMtbWl4aW4vaWRzLWV2ZW50cy1taXhpbic7XG5pbXBvcnQgeyBJZHNDb25zdHJ1Y3RvciB9IGZyb20gJy4uLy4uL2NvcmUvaWRzLWVsZW1lbnQnO1xuaW1wb3J0IHR5cGUgSWRzUGFnZXIgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9pZHMtcGFnZXIvaWRzLXBhZ2VyJztcblxuY29uc3QgUEFHSU5BVElPTl9UWVBFUyA9IHtcbiAgTk9ORTogJ25vbmUnLFxuICBDTElFTlRfU0lERTogJ2NsaWVudC1zaWRlJyxcbiAgU0VSVkVSX1NJREU6ICdzZXJ2ZXItc2lkZScsXG4gIFNUQU5EQUxPTkU6ICdzdGFuZGFsb25lJyxcbn0gYXMgY29uc3Q7XG5cbnR5cGUgUGFnaW5hdGlvblR5cGVzID0gdHlwZW9mIFBBR0lOQVRJT05fVFlQRVNba2V5b2YgdHlwZW9mIFBBR0lOQVRJT05fVFlQRVNdO1xuXG50eXBlIENvbnN0cmFpbnRzID0gSWRzQ29uc3RydWN0b3I8RXZlbnRzTWl4aW5JbnRlcmZhY2U+O1xuXG4vKipcbi8qKlxuICogQSBtaXhpbiB0aGF0IGFkZHMgcGFnZXIgZnVuY3Rpb25hbGl0eSB0byBjb21wb25lbnRzXG4gKiBAcGFyYW0ge2FueX0gc3VwZXJjbGFzcyBBY2NlcHRzIGEgc3VwZXJjbGFzcyBhbmQgY3JlYXRlcyBhIG5ldyBzdWJjbGFzcyBmcm9tIGl0XG4gKiBAcmV0dXJucyB7YW55fSBUaGUgZXh0ZW5kZWQgb2JqZWN0XG4gKi9cbmNvbnN0IElkc1BhZ2VyTWl4aW4gPSA8VCBleHRlbmRzIENvbnN0cmFpbnRzPihzdXBlcmNsYXNzOiBUKSA9PiBjbGFzcyBleHRlbmRzIHN1cGVyY2xhc3Mge1xuICAvKiogUmVmZXJlbmNlIHRvIHRoZSB1c2VyLXByb3ZpZGVkIElkc1BhZ2VyIGNvbXBvbmVudCAqL1xuICAjcGFnZXI6IGFueTtcblxuICAvKipcbiAgICogR2V0cyB0aGUgaW50ZXJuYWwgSWRzRGF0YVNvdXJjZSBvYmplY3RcbiAgICogQHJldHVybnMge0lkc0RhdGFTb3VyY2V9IG9iamVjdFxuICAgKi9cbiAgZGF0YXNvdXJjZSA9IG5ldyBJZHNEYXRhU291cmNlKCk7XG5cbiAgY29uc3RydWN0b3IoLi4uYXJnczogYW55W10pIHtcbiAgICBzdXBlciguLi5hcmdzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGludGVybmFsIElkc1BhZ2VyIGNvbXBvbmVudFxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBwYWdlciBUaGUgcGFnZXIgZG9tIGVsZW1lbnRcbiAgICovXG4gIHNldCBwYWdlcihwYWdlcjogYW55KSB7XG4gICAgdGhpcy4jcGFnZXIgPSBwYWdlcjtcblxuICAgIGNvbnN0IHBhZ2VOdW1iZXIgPSBNYXRoLm1heCh0aGlzLnBhZ2VOdW1iZXIgfHwgMSwgMSk7XG4gICAgY29uc3QgcGFnZVNpemUgPSBNYXRoLm1heCh0aGlzLnBhZ2VTaXplIHx8IDAsIDEpO1xuXG4gICAgdGhpcy5kYXRhc291cmNlLnBhZ2VTaXplID0gcGFnZVNpemU7XG4gICAgdGhpcy5wYWdlci5pbm5lckhUTUwgPSB0aGlzLnBhZ2VyVGVtcGxhdGUoKTtcbiAgICB0aGlzLnBhZ2VyLnRvdGFsID0gdGhpcy5kYXRhc291cmNlLnRvdGFsO1xuICAgIHRoaXMucGFnZXIucGFnZU51bWJlciA9IHBhZ2VOdW1iZXI7XG4gICAgdGhpcy5wYWdlci5wYWdlU2l6ZSA9IHBhZ2VTaXplO1xuXG4gICAgdGhpcy4jYXR0YWNoRXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGludGVybmFsIElkc1BhZ2VyIGNvbXBvbmVudFxuICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9IHRoZSBwYWdlciBkb20gZWxlbWVudFxuICAgKi9cbiAgZ2V0IHBhZ2VyKCk6IElkc1BhZ2VyIHtcbiAgICByZXR1cm4gdGhpcy4jcGFnZXIgfHwgdGhpcy5xdWVyeVNlbGVjdG9yKCdpZHMtcGFnZXInKSB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZHMtcGFnZXInKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGF0dHJpYnV0ZXMgd2UgaGFuZGxlIGFzIGdldHRlcnMvc2V0dGVyc1xuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJucyB7QXJyYXl9IFRoZSBhdHRyaWJ1dGVzIGluIGFuIGFycmF5XG4gICAqL1xuICBzdGF0aWMgZ2V0IGF0dHJpYnV0ZXMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIC4uLihzdXBlcmNsYXNzIGFzIGFueSkuYXR0cmlidXRlcyxcbiAgICAgIGF0dHJpYnV0ZXMuUEFHSU5BVElPTixcbiAgICAgIGF0dHJpYnV0ZXMuUEFHRV9OVU1CRVIsXG4gICAgICBhdHRyaWJ1dGVzLlBBR0VfU0laRSxcbiAgICAgIGF0dHJpYnV0ZXMuUEFHRV9UT1RBTCxcbiAgICBdO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBTZXR0aW5nIGNoYW5nZXMgb2YgdGhlIHZhbHVlIGhhcyBjaGFuZ2VkIGJ5IGNhbGxpbmcgdGhlIGdldHRlclxuICAgKiBpbiB0aGUgZXh0ZW5kaW5nIGNsYXNzLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgcHJvcGVydHkgbmFtZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb2xkVmFsdWUgVGhlIHByb3BlcnR5IG9sZCB2YWx1ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3VmFsdWUgVGhlIHByb3BlcnR5IG5ldyB2YWx1ZVxuICAgKi9cbiAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWU6IHN0cmluZywgb2xkVmFsdWU6IHN0cmluZywgbmV3VmFsdWU6IHN0cmluZykge1xuICAgIHN1cGVyLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUpO1xuXG4gICAgaWYgKG9sZFZhbHVlID09PSBuZXdWYWx1ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHNob3VsZFJlbG9hZCA9IFtcbiAgICAgIGF0dHJpYnV0ZXMuUEFHRV9OVU1CRVIsXG4gICAgICBhdHRyaWJ1dGVzLlBBR0VfU0laRSxcbiAgICAgIGF0dHJpYnV0ZXMuUEFHRV9UT1RBTCxcbiAgICAgIGF0dHJpYnV0ZXMuUEFHSU5BVElPTixcbiAgICBdLmluY2x1ZGVzKG5hbWUpO1xuXG4gICAgaWYgKHNob3VsZFJlbG9hZCkge1xuICAgICAgdGhpcy5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbnZva2VkIGVhY2ggdGltZSB0aGUgY3VzdG9tIGVsZW1lbnQgaXMgYXBwZW5kZWQgaW50byBhIGRvY3VtZW50LWNvbm5lY3RlZCBlbGVtZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2s/LigpO1xuICAgIHRoaXMuI2F0dGFjaFBhZ2VyKCk7XG4gIH1cblxuICBwYWdlclRlbXBsYXRlKCkge1xuICAgIGNvbnN0IHBhZ2VTaXplID0gTWF0aC5tYXgodGhpcy5wYWdlU2l6ZSB8fCAwLCAxKTtcbiAgICByZXR1cm4gYFxuICAgICAgPGlkcy1wYWdlci1idXR0b24gZmlyc3Q+PC9pZHMtcGFnZXItYnV0dG9uPlxuICAgICAgPGlkcy1wYWdlci1idXR0b24gcHJldmlvdXM+PC9pZHMtcGFnZXItYnV0dG9uPlxuICAgICAgPGlkcy1wYWdlci1pbnB1dD48L2lkcy1wYWdlci1pbnB1dD5cbiAgICAgIDxpZHMtcGFnZXItYnV0dG9uIG5leHQ+PC9pZHMtcGFnZXItYnV0dG9uPlxuICAgICAgPGlkcy1wYWdlci1idXR0b24gbGFzdD48L2lkcy1wYWdlci1idXR0b24+XG4gICAgICA8aWRzLXBhZ2VyLWRyb3Bkb3duIHNsb3Q9XCJlbmRcIiBwYWdlLXNpemU9XCIke3BhZ2VTaXplfVwiPjwvaWRzLXBhZ2VyLWRyb3Bkb3duPlxuICAgIGA7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHBhZ2VOdW1iZXIgLSBhIHBhZ2UgbnVtYmVyIHRvIHN0YXJ0IHdpdGhcbiAgICogQHBhcmFtIHtudW1iZXJ9IHBhZ2VTaXplIC0gbnVtYmVyIG9mIGl0ZW1zIHRvIHJldHVyblxuICAgKiBAcmV0dXJucyB7QXJyYXl9IHRoZSBwYWdpbmF0ZWQgZGF0YVxuICAgKiBAc2VlIElkc0RhdGFTb3VyY2UucGFnaW5hdGUoKVxuICAgKi9cbiAgcGFnaW5hdGUocGFnZU51bWJlciA9IDEsIHBhZ2VTaXplID0gMTApIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhc291cmNlLnBhZ2luYXRlKHBhZ2VOdW1iZXIsIHBhZ2VTaXplKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBwYWdpbmF0aW9uIGF0dHJpYnV0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBub25lfGNsaWVudC1zaWRlfHN0YW5kYWxvbmVcbiAgICovXG4gIHNldCBwYWdpbmF0aW9uKHZhbHVlOiBQYWdpbmF0aW9uVHlwZXMpIHsgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5QQUdJTkFUSU9OLCB2YWx1ZSk7IH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgcGFnaW5hdGlvbiBhdHRyaWJ1dGVcbiAgICogQHJldHVybnMge1BhZ2luYXRpb25UeXBlc30gZGVmYXVsdCBpcyBcIm5vbmVcIlxuICAgKi9cbiAgZ2V0IHBhZ2luYXRpb24oKTogUGFnaW5hdGlvblR5cGVzIHtcbiAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5QQUdJTkFUSU9OKSBhcyBQYWdpbmF0aW9uVHlwZXMgfHwgUEFHSU5BVElPTl9UWVBFUy5OT05FO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgcGFnZS1udW1iZXIgYXR0cmlidXRlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSAtIG5ldyB0aGUgcGFnZS1udW1iZXJcbiAgICovXG4gIHNldCBwYWdlTnVtYmVyKHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLlBBR0VfTlVNQkVSLCBTdHJpbmcodmFsdWUpKTtcbiAgICB0aGlzLnBhZ2VyLnBhZ2VOdW1iZXIgPSB2YWx1ZTtcbiAgICB0aGlzLmRhdGFzb3VyY2UucGFnZU51bWJlciA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcGFnZS1udW1iZXIgYXR0cmlidXRlXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IC0gdGhlIGN1cnJlbnQgcGFnZS1udW1iZXJcbiAgICovXG4gIGdldCBwYWdlTnVtYmVyKCk6IG51bWJlciB7IHJldHVybiBwYXJzZUludCh0aGlzLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLlBBR0VfTlVNQkVSKSB8fCAnJykgfHwgdGhpcy5wYWdlci5wYWdlTnVtYmVyIHx8IDE7IH1cblxuICAvKipcbiAgICogU2V0IHRoZSBwYWdlLXNpemUgYXR0cmlidXRlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSAtIG5ldyB0aGUgcGFnZS1zaXplXG4gICAqL1xuICBzZXQgcGFnZVNpemUodmFsdWU6IG51bWJlcikge1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZXMuUEFHRV9TSVpFLCBTdHJpbmcodmFsdWUpKTtcbiAgICB0aGlzLnBhZ2VyLnBhZ2VTaXplID0gTnVtYmVyKHZhbHVlKTtcbiAgICB0aGlzLmRhdGFzb3VyY2UucGFnZVNpemUgPSBOdW1iZXIodmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcGFnZS1zaXplIGF0dHJpYnV0ZVxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSAtIHRoZSBjdXJyZW50IHBhZ2Utc2l6ZVxuICAgKi9cbiAgZ2V0IHBhZ2VTaXplKCkgeyByZXR1cm4gcGFyc2VJbnQodGhpcy5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlcy5QQUdFX1NJWkUpIHx8ICcnKSB8fCB0aGlzLnBhZ2VyLnBhZ2VTaXplIHx8IDE7IH1cblxuICAvKipcbiAgICogU2V0IHRoZSBwYWdlLXRvdGFsIGF0dHJpYnV0ZVxuICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgLSBuZXcgdGhlIHBhZ2UtdG90YWxcbiAgICovXG4gIHNldCBwYWdlVG90YWwodmFsdWUpIHtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLlBBR0VfVE9UQUwsIFN0cmluZyh2YWx1ZSkpO1xuICAgIHRoaXMucGFnZXIudG90YWwgPSB2YWx1ZTtcbiAgICB0aGlzLmRhdGFzb3VyY2UudG90YWwgPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHBhZ2UtdG90YWwgYXR0cmlidXRlXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IC0gdGhlIGN1cnJlbnQgcGFnZS10b3RhbFxuICAgKi9cbiAgZ2V0IHBhZ2VUb3RhbCgpOiBudW1iZXIge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVzLlBBR0VfVE9UQUwpIHx8ICcnKSB8fCB0aGlzLmRhdGFzb3VyY2UudG90YWw7XG4gIH1cblxuICAvKipcbiAgICogQXBwZW5kcyBJZHNQYWdlciB0byB0aGlzLnNoYWRvd1Jvb3QgaWYgcGFnaW5hdGlvbiBpcyBlbmFibGVkLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgI2F0dGFjaFBhZ2VyKCkge1xuICAgIGlmICghdGhpcy5wYWdpbmF0aW9uIHx8IHRoaXMucGFnaW5hdGlvbiA9PT0gUEFHSU5BVElPTl9UWVBFUy5OT05FKSB7XG4gICAgICB0aGlzLnBhZ2VyLnJlbW92ZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBhZ2luYXRpb24gPT09IFBBR0lOQVRJT05fVFlQRVMuU1RBTkRBTE9ORSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5lc3RlZFBhZ2VyID0gdGhpcy5xdWVyeVNlbGVjdG9yKCdpZHMtcGFnZXInKSB8fCB0aGlzLnNoYWRvd1Jvb3Q/LnF1ZXJ5U2VsZWN0b3IoJ2lkcy1wYWdlcicpO1xuICAgIGlmICghbmVzdGVkUGFnZXIpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRQYWdlciA9IHRoaXMucGFnZXI7XG4gICAgICB0aGlzLnBhZ2VyID0gY3VycmVudFBhZ2VyO1xuICAgICAgdGhpcy5jb250YWluZXI/LmFmdGVyKHRoaXMucGFnZXIpO1xuICAgIH1cbiAgfVxuXG4gICNhdHRhY2hFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLm9mZkV2ZW50KCdwYWdlbnVtYmVyY2hhbmdlJywgdGhpcy5wYWdlcik7XG4gICAgdGhpcy5vbkV2ZW50KCdwYWdlbnVtYmVyY2hhbmdlJywgdGhpcy5wYWdlciwgKGV2ZW50OiBDdXN0b21FdmVudCkgPT4ge1xuICAgICAgdGhpcy5wYWdlTnVtYmVyID0gTnVtYmVyKGV2ZW50LmRldGFpbC52YWx1ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLm9mZkV2ZW50KCdwYWdlc2l6ZWNoYW5nZScsIHRoaXMucGFnZXIpO1xuICAgIHRoaXMub25FdmVudCgncGFnZXNpemVjaGFuZ2UnLCB0aGlzLnBhZ2VyLCAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB7XG4gICAgICB0aGlzLnBhZ2VTaXplID0gTnVtYmVyKGV2ZW50LmRldGFpbC52YWx1ZSk7XG4gICAgfSk7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IElkc1BhZ2VyTWl4aW47XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/mixins/ids-pager-mixin/ids-pager-mixin.ts\n");

/***/ })

}]);